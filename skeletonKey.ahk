;{#	########              FOLD                #############

;;;;;;;;;;;;;;;;;             SKELETONKEY            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;   by romjacket 2017  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;    2018-01-16 12:22 PM  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

#Include tf.ahk
#Include LVA.ahk
#Include AHKsock.ahk
;#Include LBEX.ahk
#NoEnv
#SingleInstance Force
;#NoTrayIcon
RELEASE= 2018-01-16 12:22 PM
VERSION= 
RASTABLE= 1.7.0

FileReadLine,HOSTINGURL,arcorg.set,2
Menu,Tray,Icon,Key.ico,,256
;{;;;;;;;;;;;;;;;;;;;        DRAG & DROP        ;;;;;;;;;;;;;;;;;;;

tmpcvpth:
SetWorkingDir %A_ScriptDir%
Loop %0% 
	{
		
		DDRUN= 1
		ShortPathName := %A_Index%
		Loop %ShortPathName%
			LongName = %A_LoopFileLongPath%
	}

romf= %LongName%
getport= %1%
getpath= %2%
if (getport = "portable")
		{
			if (getpath = "")
				{
					exitapp
				}
			SETPORTABLE= 1
			goto, makePortable
	exitapp
		}
DragonDrop:
if (romf <> "")
	{
		FileGetSize,romsz,%romf%,K
		IniRead,curcfg,Settings.ini,GLOBAL,working_config
		IniRead,raexeloc,Settings.ini,GLOBAL,retroarch_location
		IniRead,RaExeFile,Settings.ini,GLOBAL,retroarch_executable
		IniRead,autoExec,Settings.ini,GLOBAL,auto_exec
		FileReadLine, optline, %curcfg%, 1
		if optline <> [OPTIONS]
			{
				gosub WriteTop
			}
		IniRead,libretroDirectory,%curcfg%,OPTIONS,libretro_directory
		splitpath,romf,romtitle,rompth,inputext,romname,inputdrv
		gameoverdcfg= -c "%curcfg%"
		Loop,Read,cores.ini
			{
					corelist .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
			}
			gosub,extensionlookup
			if (CHOSEN = "")
				{
					gosub,LNCH
					guicontrol,,LCORE,|%coreselv%||%runlist%
				}
		return
	}

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EnvGet, CHKPYTH,PATH
Envget,CURSRPTH,USERPROFILE
ifInString,CHKPYTH,Python
	{
		PYEXIST= 1
	}

GenSetQ:
/*
ifnotexist, config.cfg
	{
		INITIAL:= 1
		TrayTip, skeletonKey, Welcome to skeletonKey`nPlease take a moment to setup your locations
	}
*/
;;if (INITIAL <> 1)
;;	{
		ifnotexist, Settings.ini
			{
				INITIAL:= 1
				TrayTip, skeletonKey, Welcome to skeletonKey`nPlease take a moment to setup your locations
			}
;;	}
romf= %1%
;{;;;;;;;;;;;;;;;;;;;;        ===   INITIALIZE   ====         ;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;      GENERATE SETTINGS    ;;;;;;;;;;;;;;;;;;;;;;;;
LBEX_Add(HLB, ByRef String) {
   Static LB_ADDSTRING := 0x0180
   SendMessage, % LB_ADDSTRING, 0, % &String, , % "ahk_id " . HLB
   Return (ErrorLevel + 1)
}
LBEX_SelectString(HLB, ByRef String, Index := 0) {
   Static LB_SELECTSTRING := 0x018C
   SendMessage, % LB_SELECTSTRING, % (Index - 1), % &String, , % "ahk_id " . HLB
   Return (ErrorLevel + 1)
}
for obj in ComObjGet("winmgmts:\\.\root\cimv2").ExecQuery("SELECT OSArchitecture FROM Win32_OperatingSystem")
artmp :=(obj.OSArchitecture)
stringsplit, arpt, artmp, -
ARCH= %arpt1%
OSVRZ1=
OSVRZ2=
OSVRZ3=
stringsplit, OSVRZ, A_OSVersion,.,
OSVRZ:= "Win" . OSVRZ1 . "." . OSVRZ2 . "x" . ARCH
formattime, date, YYYY_MM_DD, yyyy-MM-dd
RAUPDT= %date%_RetroArch.7z
ARCHR= 
if (ARCH = 64)
	{
		ARCHR= _64
	}
UPDATERAEXE= %RAUPDT%
SysGet, MonitorWorkArea, MonitorWorkArea, 1

ifNotExist, Settings.ini
	{
		gosub, CreateConfig
	}
ifNotExist, Settings.ini
	{
		ExitApp
	}
IfNotExist, racoreopt.cfg
	{
		FileCopy,racoreopt.set,racoreopt.cfg,1
	}
IfNotExist, Assignments.ini
	{
		FileCopy,Assignments.set,Assignments.ini
	}
IfNotExist, AppParams.ini
	{
		FileCopy,AppParams.set,AppParams.ini
	}
	
Iniread, raexeloc, Settings.ini,GLOBAL,retroarch_location
RJQNUM:= 0
Loop, rj\*_q.tdb
	{
		RJQNUM+=1
		SplitPath,A_LoopFileName,,,,dbqv
		StringTrimRight,dbqueue,dbqv,2
		SYSTMQ.= dbqueue . "|"
	}
IniRead,RJSYSTEMS,Settings.ini,GLOBAL,systems_directory
if (RJSYSTEMS = "")
	{
		gosub, SETJKD
	}
	
IniRead,RJEMUD,Settings.ini,GLOBAL,emulators_directory
if (RJEMUD = "")
	{
		gosub, SETEMUD
	}
	
IniRead,raexeloc,Settings.ini,GLOBAL,retroarch_location 
If (raexeloc = "")
	{
		gosub, NORA
	}
/*
ifnotexist,%raexeloc%
	{
		gosub, NORA
	}
*/
IniRead, RaExeFile, Settings.ini,GLOBAL,retroarch_executable


IniRead, RAVERS, Settings.ini,GLOBAL,retroarch_Version
if (RAVERS = "ERROR")
	{
		RAVERS= not detected
	}
IniRead, RAVBLD, Settings.ini,GLOBAL,retroarch_build
if (RAVBLD = "ERROR")
	{
		RAVBLD= not detected
	}
/*

IfNotExist, %raexeloc%\%RaExeFile%
	{
		gosub NORA
	}
*/
IniRead, curcfg, Settings.ini,GLOBAL,working_config
gameoverdcfg= -c "%curcfg%"
racoreopt= racoreopt.cfg

gllist:={}
sllist:={}
cglist:={}

Loop, Read, Settings.ini
		{
			stringsplit,mirlocv,A_LoopReadLine,=
			stringsplit, mirspl,mirlocv1,_
			if (mirspl1 = "Mirror")
				{
					mirnum+=1
					MIRDDLOC.= mirlocv1 . "|"
				}
		}
CMIR1= Mirror_1
if (MIRDDLOC = "")
		{
			CMIR1=Mirrors
		}
stringsplit,ddlcn,CMIR1,_
IniRead, CMIRLOC,Settings.ini,GLOBAL,%CMIR1%
IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%		
MIRFEDDLA= %CMIR1%||%MIRDDLOC%
if (CMIRLOC = "ERROR")
		{
			CMIRLOC= 
		}
if (CICOLOC = "ERROR")
		{
			CICOLOC= 
		}
if (CBOXLOC = "ERROR")
		{
			CBOXLOC= 
		}
MIRDISP:= "Mirror=" . CMIRLOC . "`n`r" . "Icons=" . CICOLOC . "`n`r" . "Boxart=" . CBOXLOC

IniRead, lastcore, Settings.ini,GLOBAL,last_core
splitpath, lastcore, coreselv,,,
IniRead, romf, Settings.ini,GLOBAL,last_rom
IniRead,ArcSite,Settings.ini,GLOBAL,ArchiveProxy
FileReadline,cloudloc,arcorg.set,1
if (ArcSite = "")
	{
		ArcSite:= cloudloc
		iniwrite, "%ArcSite%", Settings.ini,GLOBAL,ArchiveProxy
	}

ifNotExist, sys.ini
	{
		gosub, resetSYS
	}
ifNotExist, cores.ini
	{
	gosub resetCORES
	}
ifNotExist, gl.ini
	{
		gosub, resetGL
	}
ifNotExist, cg.ini
	{
		gosub, resetCG
	}
ifNotExist, sl.ini
	{
		gosub resetSL
	}
ifNotExist, fltlist.ini
	{
		gosub, resetFILT
	}

Loop,Read,fltlist.ini
	fltlist .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
CORENUM:= 0
Loop,Read,cores.ini
	{
		CORENUM+=1
		StringReplace,jnm,A_LoopReadLine,_libretro.dll,,All
		corezips .= (A_Index == 1 ? "" : "|") . A_LoopReadLine "." "zip"
		corelist .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
		coreNamz .= (A_Index == 1 ? "" : "|") . jnm
	}

IniRead,emuj,Assignments.ini,OVERRIDES,
Loop,Parse,emuj,`n
	{
		stringsplit,emup,A_LoopField,=,"
;"
		if emup2 is not digit
			{
				addemu .= "|" . emup2
			}
	}

runlist .= corelist . addemu

Loop, Read, EmuParts.set
	{
		if (A_LoopReadLine = "")
			{
				break
			}
			stringsplit,kvar,A_LoopReadLine,=
			emuinstpop.= kvar1 . "|"
	}


Loop, Read, SystemEmulators.set
	{
		StringSplit,sysplit,A_LoopReadLine,|
		systoemu .= (A_Index == 1 ? "" : "|") . sysplit1
	}
Loop, Read, EmuParts.set
	{
		StringSplit,sysplix,A_LoopReadLine,=,:
		emupos .= (A_Index == 1 ? "" : "|") . sysplix1
	}
Loop,Read,gl.ini
	gl_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
Loop,Read,cg.ini
	cg_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
Loop,Read,sl.ini
	sl_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
Loop,Read,sys.ini
	syslist .= (A_Index == 1 ? "" : "|") . A_LoopReadLine

appcfg= AppParams.ini
IfNotExist, AppParams.ini
	{
		appcfg= AppParams.set
	}

iniread,sysemucfg,%appCfg%,
preEmuCfg= 
Loop,Parse,sysemucfg,| `n
	{
		preEmuCfg .= A_LoopField . "|"
	}

IniRead,asig,Assignments.ini,ASSIGNMENTS,
	Loop,Parse,asig,`n
		{
			StringSplit,rasig,A_LoopField,=
			if rasig1 is not digit
				{
					reasign .= rasig1 . "|"
				}
		}

FileReadLine,repoloc,arcorg.set,2
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;      ITERATE VALUES           ;;;;;;;;;;;;;;;;;;;;;;;



omitxi= jpg|ini|cfg|png|html|dll|nfo|srm|exe|sav|bak|conf|shader|inp|zst|cg|settings|gif|bat|cmd|pdf|ips|xdelta|7z|rar|001|mp3|mp4|shortcuts|config|tmp|readme|txt|rtf|htm|js|xml|bmp|gif|css|amgp|xpadderprofile|input|lnk|state|dat|ogg|log|flv|doc|php|text|tiff|brm|ps2|sys
omitxt:= omitxi

rjdexcl= .Mem|.Man|backdrops|.sstates|.snaps|.patches|.cheats|
rjfexcl= Folder.png|Folder.jpg|Backdrop.jpg|Backdrop.png|Banner.png|Banner.jpg|Logo.png|Logo.jpg|marquee.png|marquee.jpg|back.jpg|back.png|title.png|title.jpg|Cover.png|Cover.jpg|BoxFront.jpg|BoxFront.png|BoxBack.png|BoxBack.jpg|Spine.jpg|Spine.png|Disc.png|Disc.jpg

StringReplace, omitxtv, omitxt, |,`,,All
omitxj:= omitxtv

;;metaimages= 3D Boxart|Marquee|4 Mix|3 Mix|Label|Cart|Backdrop|Box-Art|Logo|Video|Metadata|Snapshot
metaimages= 3DBoxart|Marquee|4Mix|3Mix|Label|Cart|Backdrop|BoxArt|Logo|Video|Metadata|Snapshot

viditerate= video_driver|video_black_frame_insertion|video_disable_composition|video_swap_interval|video_threaded|video_allow_rotate|video_aspect_ratio_auto|video_aspect_ratio|video_force_aspect|video_frame_delay|video_crop_overscan|video_fullscreen_x|video_fullscreen_y|video_fullscreen|current_resolution_id|custom_viewport_height|custom_viewport_width|custom_viewport_x|custom_viewport_y|video_monitor_index|video_rotation|video_scale_integer|video_scale|video_windowed_fullscreen|video_vsync|video_hard_sync_frames|video_hard_sync|video_max_swapchain_images|video_shader_enable|video_shared_context|video_smooth|video_max_swapchain_images|video_refresh_rate

optiterate= all_users_control_menu|aspect_ratio_index|audio_driver|audio_enable|audio_latency|audio_mute_enable|audio_rate_control_delta|audio_rate_control|audio_sync|auto_shaders_enable|flicker_filter_enable|flicker_filter_index|auto_overrides_enable|autosave_interval|block_sram_overwrite|config_save_on_exit|input_driver|input_joypad_driver|input_remap_binds_enable|keyboard_gamepad_enable|input_autodetect_enable|input_menu_toggle_gamepad_combo|menu_driver|pause_nonactive|rewind_enable|rewind_granularity|savestate_auto_index|savestate_auto_load|savestate_auto_save|sort_savefiles_enable|sort_savestates_enable|savefiles_in_content_dir|savestates_in_content_dir|video_gpu_record|video_gpu_screenshot|auto_remaps_enable|screenshots_in_content_dir

menuiterate= dpi_override_enable|dpi_override_value|fps_show|input_overlay_enable_autopreferred|input_overlay_enable|input_overlay_hide_in_menu|input_overlay_opacity|input_overlay_show_physical_inputs|input_overlay_show_physical_inputs_port|input_overlay_scale|menu_dynamic_wallpaper_enable|menu_entry_hover_color|menu_entry_normal_color|menu_battery_level_enable|menu_footer_opacity|menu_header_opacity|menu_linear_filter|menu_mouse_enable|menu_navigation_browser_filter_supported_extensions_enable|menu_navigation_wraparound_enable|menu_pause_libretro|menu_shader_pipeline|menu_show_advanced_settings|menu_throttle_framerate|menu_thumbnails|menu_timedate_enable|menu_title_color|menu_wallpaper_opacity|ui_companion_enable|video_font_enable|video_font_size|video_message_color|video_message_pos_x|video_message_pos_y|xmb_alpha_factor|xmb_font|xmb_menu_color_theme|xmb_scale_factor|xmb_shadows_enable|xmb_show_history|xmb_show_images|xmb_show_music|xmb_show_settings|xmb_show_video|xmb_theme|xmb_show_add|input_axis_threshold|savestate_Thumbnail_Enable|menu_swap_ok_cancel_buttons|menu_show_configurations|menu_show_core_updater|menu_show_help|menu_show_information|menu_show_load_content|menu_show_load_core|menu_show_online_updater|menu_show_quit_retroarch|menu_show_reboot|menu_swap_ok_cancel_buttons|video_msg_bgcolor_blue|video_msg_bgcolor_enable|video_msg_bgcolor_green|video_msg_bgcolor_opacity|video_msg_bgcolor_red

INJOPT=  [CUSTMOPT]| -b -e | /b -e | --windowed-fullscreen || --fullscreen | /f | -f | -FullScreen | -fs 1 | -d1 | /fullscreen /machine "COL - Colecovision" /rom1 | /fullscreen /machine "MSX" /rom1 | /fullscreen /machine "MSX2+" /rom1 | /fullscreen /machine "MSXturboR" /rom1 | /fullscreen /machine "SEGA -SG-1000" /rom1 | /fullscreen /machine "SEGA -SF-7000" /rom1 | /fullscreen /machine "SEGA -SC-3000" /rom1 | /fullscreen /machine "SVI - Spectravideo SVI-328 MK2" /rom1 | --startLoadFile | run=dc -image=| -run=awave -rom=| -nogui -loadbin | -run=naomi -rom=| -autostart -cartcrt | -ntsc +confirmexit -saveres +warp -fullscreen -cartgeneric | -autoload | apfimag -cart | bbcm512 -cart1 | electron -flop | cpc464 -cart | gx4000 -cart | appl2cp -flop1 | apple2gs -flop1 | apple1 -cass | a2600 -cart | a5200 -cart | a7800 -cart | a800xe -flop1 | jaguar -cart | lynx -cart | xegs -cart | astrocde -cart | wswan -cart | wscolor -cart | lynx128k -flop1 | casloopy -cart | pv1000 -cart | pv2000 -cart | adam -cart1 | coleco -cart | c64 -flop | a500n -flop | a1200n -flop | a3000n -flop | cd32n -cdrm | vic20 -cart | d64plus -cart | cdtvn -cdrm | exl100 -cart | arcadia -cart | advision -cart | ep128 -cart | ep64 -cart | scv -cart | channelf -cart | fm7 -flop1 | supracan -cart | vectrex -cart | gmaster -cart | ibmpcjr -flop | vc4000 -cart | jupace -cass | samcoupe -flop1 | odyssey2 -cart | odyssey3 -cart | aquarius -cart | intv -cart | megaduck -cart | mtx512 -cass | fsa1gt -cart1 | pce -cart | tg16 -cart | sgx -cart | pce -cdrm | tg16 -cdrm | pc6001 -cart1 | pcfx | pc8801mk2 -flop1 | pc9821xs -flop1 | n64 -cart | nes -cart | famicom -cart | fds -flop | gameboy -cart | gbcolor -cart | gba -cart | vboy -cart | pokemini -cart | snes -cart | cdimono2 -cdrm | pc2000 -cart | vg5k -cass | videopac -cart | studio2 -cart | neocd -cdrm | neogeo -cart1 | aes -cart | ngp -cart | ngpc -cart | pico -cart | sc3000 -cart | sf7000 -flop | sg1000 -cart | stvbios -cart1 | 32xe -cart | 32xj -cart | 32x -cart | segacd2 -cdrm | megacd2 -cdrm | megacd2j -cdrm | dc -cdrm | dceu -cdrm | dcjp -cdrm | gamegear -cart | gamegeaj -cart | gamecom -cart1 | mz700 -cass | mz800 -cass | x1 -cart | x86kxvi -flop1 | ql_us -cass1 | psa -cdrm | pse -cdrm | psj -cdrm | psu -cdrm | pockstat -cart | m5 -flop | microtan -cart | oric -cass | mo5 -cass | 3do -cdrm | 3do_pal -cdrm | to7 -cass | crvision -cart | crvisio2 -cart | crvisioj -cart | laser200 -cass | laser310 -cass | vsmile -cart | vidbrain -cart | svisionn -cart | svisionp -cart | genesis -cart | megadriv -cart | expertdx -cart1 | canonv20s -cart1 | fmtmarty2 -cdrm | MACHINE=ARCADIA SETTINGS="WA.CFG" FULLSCREEN=ON AUTOSAVE=ON TITLEBAR=OFF TOOLBAR=OFF STRETCH=ON FILE= | -5200 -cart |  -Fullscreen 1 -MenuEnabled 0 -Region auto | --chromeless | --StartLoadFile | -32X | -sms | -scd | -gg | -md | -gen | -res=1024,768 -input-system=xinput -fullscreen | -p -f -u -c=studio -s 

INJARG= [CUSTMARG]| -rp "[ROMPATH]" | -rp "[EMUPATH]\roms" | --startFullScreen | -no-printscreen-dlg | -d2 | --StartFullScreen | /A

;;SUPEMUOPT= mame
Loop, rj\emuCfgs\*,2
	{
		SUPEMUOPT.= A_LoopFileName . "|"
	}
netiterate= network_cmd_port|netplay_nickname|netplay_ip_address|netplay_ip_port|netplay_check_frames|netplay_client_swap_input|netplay_password|netplay_spectate_password|netplay_stateless_mode|netplay_Input_Latency_Frames_Min|netplay_Input_Latency_Frames_Range|netplay_Nat_Traversal|netplay_Use_Mitm_Server|netplay_Allow_Slaves|netplay_Require_Slaves

INPKND= KB|J|AXIS
PLAYERSET=1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16

JOYSET=0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|h0up|h0down|h0left|h0right|\-1|+1|\-0|+0|\-2|+2|\-3|+3|+4|+5|nul

FELIST=XMB|Mirrored_Links|Media|retroFE|Hyperspin|EmulationStation|MediaBrowser|CairoFE|Kodi_AL|Kodi_RCB|Kodi_IARL|Steam

dirlocations= assets_directory|audio_filter_dir|bundle_assets_dst_path_subdir|cache_directory|content_history_dir|cursor_directory|dynamic_wallpapers_directory|input_remapping_directory|joypad_autoconfig_dir|libretro_directory|osk_overlay_directory|overlay_directory|playlist_directory|recording_config_directory|recording_output_directory|resampler_directory|video_shader_dir|video_filter_dir|rgui_browser_directory|rgui_config_directory|savefile_directory|savestate_directory|screenshot_directory|libretro_info_path|system_directory|thumbnails_directory|core_assets_directory

pathlocations= content_database_path|cheat_database_path|content_favorites_path|content_history_path|content_image_history_path|content_music_history_path|content_video_history_path|bundle_assets_dst_path|bundle_assets_src_path|core_options_path|menu_wallpaper|video_filter|video_font_path|core_updater_buildbot_assets_url|core_updater_buildbot_url|video_shader|input_overlay

joyiterate= _L_X_Plus|_L_X_Minus|_R_X_Plus|_R_X_Minus|_L_Y_Plus|_L_Y_Minus|_R_Y_Plus|_R_Y_Minus|_R|_L|_B|_A|_X|_Y|_L2|_R2|_L3|_R3|_Start|_Select|_Up|_Down|_Left|_Right|_Turbo

hkiterate= input_Audio_Mute|input_Cheat_Index_Minus|input_Cheat_Index_Plus|input_Cheat_Toggle|input_Disk_Eject_Toggle|input_Disk_Next|input_Disk_Prev|input_Enable_Hotkey|input_Exit_Emulator|input_Frame_Advance|input_Toggle_Fullscreen|input_Game_Focus_Toggle|input_Grab_Mouse_Toggle|input_Hold_Fast_Forward|input_Load_State|input_Menu_Toggle|input_Movie_Record_Toggle|input_netplay_game_watch|input_Osk_Toggle|input_Overlay_Next|input_Pause_Toggle|input_Reset|input_Rewind|input_Save_State|input_Screenshot|input_Shader_Next|input_Shader_Prev|input_Slowmotion|input_State_Slot_Decrease|input_State_Slot_Increase|input_Toggle_Fast_Forward|input_Toggle_Fullscreen|input_Volume_Down|input_Volume_Up|input_Turbo_Period|input_Duty_cycle

KBSET=a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z|1|2|3|4|5|6|7|8|9|0|minus|add|f1|f2|f3|f4|f5|f6|f7|f8|f9|f10|f11|f12|up|down|left|right|pageup|pagedown|home|end|tilde|semicolon|quote|comma|period|slash|backslash|leftbracket|rightbracket|rshift|lshift|numlock|kp_period|keypad1|keypad2|keypad3|keypad4|keypad5|keypad6|keypad7|keypad8|keypad9|keypad0|subtract|equals|multiply|alt|ctrl|tab|capslock|escape|nul

JSTSET= %JOYSET%

AXISET= nul|nul

qres= 320x240|640x480|720x480|720x576|800x480|848x480|1024x600|800x600|1024x768|1152x864|1280x1024|1280x720|1280x800|1280x900|1280x960|1366x768|1360x1024|1440x900|1400x1050|1600x1024|1920x1080|1600x1024|1680x1050|1920x1200|2560x1440|3840x2160|5120x2880|7680x4320

sysposb= Commodore - Amiga|SNK - Neo Geo|MAME|MAME2003|MAME2010|Atari - 2600|Atari - 7800|Atari - 800|Atari - Jaguar|Atari - Lynx|Atari - ST|Nintendo - Virtual Boy|Nintendo - Game Boy Color|Nintendo - Famicom Disk System|Nintendo - Game Boy|Nintendo - Game Boy Advance|Nintendo - Game Boy Advance(e-Cards)|Nintendo - Nintendo 64|Nintendo - Nintendo 64DD|Nintendo - Nintendo DS Decrypted|Nintendo - Nintendo 3DS|Nintendo - Nintendo DS|Nintendo - Satellaview|Nintendo - Famicom System|Nintendo - Nintendo Entertainment System|The 3DO Company - 3DO|Nintendo - Super Nintendo Entertainment System|SNK - Neo Geo Pocket|Magnavox - Odyssey2|Microsoft - MSX|Microsoft - MSX2|ScummVM|NEC - PC98|NEC - PC-FX|Sega - Saturn|Bandai - WonderSwan|Bandai - WonderSwan Color|Sony - Playstation Portable|Sony - Playstation|Sega - Mega-CD - Sega CD|Sega - Mega Drive - Genesis|Sega - 32X|Sega - Master System - Mark III|Sega - Game Gear|GCE - Vectrex|NEC - PC Engine SuperGrafx|Sega - Dreamcast|Sega - SG-1000|DOS|GCE - Vectrex|FB Alpha - Arcade Games|SNK - Neo Geo MVS|Magnavox - Odyssey2|NEC - PC Engine CD - TurboGrafx CD|Coleco - ColecoVision|Sinclair - ZX 81|Sinclair - ZX Spectrum|Casio - PV-1000|Casio - Loopy|Emerson - Arcadia|Entex - Adventure Vision|Leapfrog - Leapster Learning Game System|Hartung - Game Master|Fairchild - Channel F|Funtech - Super Acan|Commodore - 64 (PP)|Commodore - 64 (Tapes)|Commodore - 64|Commodore - VIC-20|Commodore - Plus-4|Commodore - Amiga|GamePark - GP32|Magnavox - Odyssey2|Nokia - N-Gage|Sony - Playstation 2|RCA - Studio II|RCA - Studio II|Nintendo - Pokemon Mini|Nintendo - Satellaview|Nintendo - Sufami Turbo|Sega - PICO|Tiger - Game com|VTech - CreatiVision|VTech - V.Smile|Sharp - X68000

hkDDL= inputAudioMute|inputCheatIndexMinus|inputCheatIndexPlus|inputCheatToggle|inputDiskEjectToggle|inputDiskNext|inputDiskPrev|inputEnableHotkey|inputExitEmulator|inputFrameAdvance|inputToggleFullscreen|inputGrabMouseToggle|inputHoldFastForward|inputLoadState|inputMenuToggle|inputMovieRecordToggle|inputNetplayFlipPlayers|inputOskToggle|inputOverlayNext|inputPauseToggle|inputReset|inputRewind|inputSaveState|inputScreenshot|inputShaderNext|inputShaderPrev|inputSlowmotion|inputStateSlotDecrease|inputStateSlotIncrease|inputToggleFastForward|inputToggleFullscreen|inputVolumeDown|inputVolumeUp

CoreMI= DDLB|DDLC|DDLD|DDLE|DDLF|DDLG|DDLH|DDLI|DDLJ|DDLK|DDLL|RadA|RadB|CMBA|RadC|RadD|RadE|RadF|CHKA|CHKB|CHKC|RadG|RadH|CHKD|CHKE|CMBB|SLDA|RadI|RadJ|RadK|RadL|CHKF|CHKG|CHKH|CHKI|RadM|RadN|RadO|RadP|RadQ|RadR|RadS|RadT|RadU|RadV

supCoreLst= mgba|genesisplusgx|mame|desmume|ppsspp|nestopia|mesen|mednafenpcefast|mednafensaturn|redream|reicast|blusemsx|dosbox|picodrive|snes9x|mednafenPsx|mednafenngp|mednafensupergrafx|mednafenvb|fceumm|mame2014|fba|fbalpha2012|fbalpha2012neogeo|fbalpha2012cps2|fbalphacps2012|mupen64plus|4do|gambatte|mame2000|mame2010|mame|bsnes|yabause|fuse|fmsx

COREVARS= mgba_solar_sensor_level|mgba_allow_opposing_directions|mgba_use_bios|mgba_skip_bios|mgba_idle_optimization|genesis_plus_gx_system_hw|genesis_plus_gx_region_detect|genesis_plus_gx_force_dtack|genesis_plus_gx_bios|genesis_plus_gx_bram|genesis_plus_gx_addr_error|genesis_plus_gx_lock_on|genesis_plus_gx_ym2413|genesis_plus_gx_dac_bits|genesis_plus_gx_blargg_ntsc_filter|genesis_plus_gx_lcd_filter|genesis_plus_gx_overscan|genesis_plus_gx_gg_extra|genesis_plus_gx_render|genesis_plus_gx_gun_cursor|genesis_plus_gx_invert_mouse|mame2014_read_config|mame2014_write_config|mame2014_saves|mame2014_auto_save|mame2014_mouse_enable|mame2014_throttle|mame2014_cheats_enable|mame2014_hide_nagscreen|mame2014_hide_gameinfo|mame2014_hide_warnings|mame2014_alternate_renderer|mame2014_softlists_enable|mame2014_softlists_auto_media|mame2014_media_type|mame2014_boot_to_bios|mame2014_boot_to_osd|mame2014_boot_from_cli|ume2014_read_config|ume2014_write_config|ume2014_saves|ume2014_auto_save|ume2014_mouse_enable|ume2014_throttle|ume2014_cheats_enable|ume2014_hide_nagscreen|ume2014_hide_gameinfo|ume2014_hide_warnings|ume2014_alternate_renderer|ume2014_softlists_enable|ume2014_softlists_auto_media|ume2014_media_type|ume2014_boot_to_bios|ume2014_boot_to_osd|ume2014_boot_from_cli|mame_read_config|mame_write_config|mame_saves|mame_auto_save|mame_mouse_enable|mame_throttle|mame_cheats_enable|mame_hide_nagscreen|mame_hide_gameinfo|mame_hide_warnings|mame_alternate_renderer|mame_softlists_enable|mame_softlists_auto_media|mame_media_type|mame_boot_to_bios|mame_boot_to_osd|mame_boot_from_cli|desmume_internal_resolution|desmume_num_cores|desmume_cpu_mode|desmume_jit_block_size|desmume_screens_layout|desmume_pointer_mouse|desmume_pointer_type|desmume_pointer_colour|desmume_pointer_device|desmume_pointer_device_deadzone|desmume_pointer_device_acceleration_mod|desmume_pointer_stylus_pressure|desmume_pointer_stylus_jitter|desmume_load_to_memory|desmume_advanced_timing|desmume_firmware_language|desmume_frameskip|desmume_screens_gap|desmume_gfx_edgemark|desmume_gfx_linehack|desmume_gfx_txthack|desmume_mic_force_enable|desmume_mic_mode|desmume_hybrid_layout_scale|ppsspp_cpu_core|ppsspp_locked_cpu_speed|ppsspp_language|ppsspp_rendering_mode|ppsspp_auto_frameskip|ppsspp_frameskip|ppsspp_framerate_limit|ppsspp_force_max_fps|ppsspp_audio_latency|ppsspp_internal_resolution|ppsspp_output_resolution|ppsspp_button_preference|ppsspp_fast_memory|ppsspp_set_rounding_mode|ppsspp_block_transfer_gpu|ppsspp_texture_scaling_level|ppsspp_texture_scaling_type|ppsspp_texture_anisotropic_filtering|ppsspp_texture_deposterize|ppsspp_internal_shader|ppsspp_gpu_hardware_transform|ppsspp_vertex_cache|ppsspp_prescale_uv|ppsspp_separate_io_thread|ppsspp_unsafe_func_replacements|ppsspp_sound_speedhack|ppsspp_threaded_input|nestopia_blargg_ntsc_filter|nestopia_palette|nestopia_nospritelimit|nestopia_fds_auto_insert|nestopia_overscan_v|nestopia_overscan_h|nestopia_aspect|nestopia_genie_distortion|nestopia_favored_system|nestopia_ram_power_state|pce_fast_cdimagecache|pce_nospritelimit|pce_ocmultiplier|pce_hoverscan|pce_initial_scanline|pce_last_scanline|pce_cddavolume|pce_adpcmvolume|pce_cdpsgvolume|pce_cdspeed|Turbo_Delay|p0_turbo_I_enable|p0_turbo_II_enable|p1_turbo_I_enable|p1_turbo_II_enable|p2_turbo_I_enable|p2_turbo_II_enable|p3_turbo_I_enable|p3_turbo_II_enable|p4_turbo_I_enable|p4_turbo_II_enable|beetle_saturn_cdimagecache|beetle_saturn_initial_scanline|beetle_saturn_initial_scanline_pal|beetle_saturn_last_scanline|beetle_saturn_last_scanline_pal|reicast_cpu_mode|reicast_boot_to_bios|reicast_internal_resolution|reicast_mipmapping|reicast_widescreen_hack|reicast_audio_buffer_size|reicast_cable_type|reicast_broadcast|reicast_region|reicast_precompile_shaders|reicast_enable_rtt|reicast_enable_purupuru|bluemsx_msxtype|bluemsx_vdp_synctype|bluemsx_ym2413_enable|dosbox_machine_type|dosbox_emulated_mouse|dosbox_cpu_cycles_0|dosbox_cpu_cycles_1|dosbox_cpu_cycles_2|dosbox_cpu_cycles_3|dosbox_mapper_y|dosbox_mapper_x|dosbox_mapper_b|dosbox_mapper_a|dosbox_mapper_l|dosbox_mapper_r|dosbox_mapper_up|dosbox_mapper_down|dosbox_mapper_left|dosbox_mapper_right|dosbox_mapper_select|dosbox_mapper_start|picodrive_input1|picodrive_input2|picodrive_sprlim|picodrive_ramcart|picodrive_region|picodrive_region_fps|picodrive_aspect|snes9x_overclock|snes9x_layer_1|snes9x_layer_2|snes9x_layer_3|snes9x_layer_4|snes9x_layer_5|snes9x_gfx_clip|snes9x_gfx_transp|snes9x_sndchan_1|snes9x_sndchan_2|snes9x_sndchan_3|snes9x_sndchan_4|snes9x_sndchan_5|snes9x_sndchan_6|snes9x_sndchan_7|snes9x_sndchan_8|beetle_psx_renderer|beetle_psx_renderer_software_fb|beetle_psx_cdimagecache|beetle_psx_cpu_overclock|beetle_psx_skipbios|beetle_psx_widescreen_hack|beetle_psx_internal_resolution|beetle_psx_filter|beetle_psx_internal_color_depth|beetle_psx_scale_dither|beetle_psx_wireframe|beetle_psx_display_vram|beetle_psx_dither_mode|beetle_psx_pgxp_mode|beetle_psx_pgxp_caching|beetle_psx_pgxp_texture|beetle_psx_use_mednafen_memcard0_method|beetle_psx_enable_memcard1|beetle_psx_shared_memory_cards|beetle_psx_analog_calibration|beetle_psx_initial_scanline|beetle_psx_initial_scanline_pal|beetle_psx_last_scanline|beetle_psx_last_scanline_pal|beetle_psx_analog_toggle|beetle_psx_enable_multitap_port1|beetle_psx_enable_multitap_port2|beetle_psx_frame_duping_enable|beetle_psx_display_internal_framerate|beetle_psx_crop_overscan|beetle_psx_image_offset|beetle_psx_image_crop|ngp_language|fceumm_palette|fceumm_nospritelimit|fceumm_overclocking|fceumm_overscan|fceumm_aspect|mame2014_read_config|mame2014_auto_save|mame2014_mouse_enable|mame2014_throttle|mame2014_cheats_enable|mame2014_hide_nagscreen|mame2014_hide_infoscreen|mame2014_hide_warnings|mame2014_alternate_renderer|mame2014_boot_to_osd|mame2014_boot_from_cli|mame2016_read_config|mame2016_auto_save|mame2016_mouse_enable|mame2016_throttle|mame2016_cheats_enable|mame2016_hide_nagscreen|mame2016_hide_infoscreen|mame2016_hide_warnings|mame2016_alternate_renderer|mame2016_boot_to_osd|mame2016_boot_from_cli|fba-diagnostics|fba-unibios|fba-cpu-speed-adjust|fba-controls|fba-aspect|fba-controls-p1|fba-controls-p2|fba-sh2-mode|fba-hiscores|fba-lr-controls-p1|fba-lr-controls-p2|fba-neogeo-mode|fba-neogeo-controls-p1|fba-neogeo-controls-p2|mupen64-cpucore|mupen64-audio-buffer-size|mupen64-astick-deadzone|mupen64-pak1|mupen64-pak2|mupen64-pak3|mupen64-pak4|mupen64-disable_expmem|mupen64-gfxplugin-accuracy|mupen64-gfxplugin|mupen64-rspplugin|mupen64-screensize|mupen64-aspectratiohint|mupen64-filtering|mupen64-polyoffset-factor|mupen64-polyoffset-units|mupen64-angrylion-vioverlay|mupen64-virefresh|mupen64-bufferswap|mupen64-framerate|mupen64-vcache-vbo|mupen64-boot-device|mupen64-64dd-hardware|reicast_volume_modifier_mode|reicast_framerate|4do_high_resolution|gambatte_gb_colorization|gambatte_gb_internal_palette|gambatte_gbc_color_correction|gambatte_gb_hwmode|gambatte_gb_link_mode|gambatte_gb_link_network_port|gambatte_gb_link_network_server_ip_octet1|gambatte_gb_link_network_server_ip_octet2|gambatte_gb_link_network_server_ip_octet3|gambatte_gb_link_network_server_ip_octet4|mame_current_mouse_enable|mame_current_videoapproach1_enable|mame_current_skip_nagscreen|mame_current_skip_gameinfo|mame_current_skip_warnings|mame2003-frameskip|mame2003-dcs-speedhack|mame2003-skip_disclaimer|mame2003-skip_warnings|mame2003-samples|mame2003-sample_rate|mame2003-cheats|mame2003-dialsharexy|mame2003-mouse_device|mame2003-rstick_to_btns|mame2000-skip_disclaimer|mame2000-show_gameinfo|cpu-speed-adjust|diagnostics|vbam_layer_1|vbam_layer_2|vbam_layer_3|vbam_layer_4|vbam_layer_5|vbam_layer_6|vbam_layer_7|vbam_layer_8|vbanext_bios|yabause_frameskip|yabause_force_hle_bios|yabause_addon_cart|handy_rot|bsnes_violate_accuracy|bsnes_chip_hle|bsnes_superfx_overclock|vb_anaglyph_preset |vb_color_mode|fuse_machine|fuse_hide_border|fuse_fast_load|fuse_load_sound|fuse_speaker_type|fuse_ay_stereo_separation|fuse_key_ovrlay_transp|fuse_key_hold_time|fmsx_mode|fmsx_video_mode|fmsx_mapper_type_mode|glupen64-cpucore|glupen64-rspmode|glupen64-43screensize|glupen64-169screensize|glupen64-aspect|glupen64-BilinearMode|glupen64-EnableFBEmulation|glupen64-UseNativeResolutionFactor|glupen64-EnableCopyAuxiliaryToRDRAM|glupen64-EnableCopyColorToRDRAM|glupen64-EnableCopyDepthToRDRAM|glupen64-EnableCopyColorFromRDRAM|glupen64-EnableHWLighting|glupen64-CorrectTexrectCoords|glupen64-EnableNativeResTexrects|glupen64-EnableLegacyBlending|glupen64-astick-deadzone|glupen64-pak1|glupen64-pak2|glupen64-pak3|glupen64-pak4|virtualjaguar_usefastblitter|virtualjaguar_doom_res_hack|vice_Statusbar|vice_Drive8Type|vice_DriveTrueEmulation|vice_RetroJoy|vice_Controller|px68k_cpuspeed|px68k_ramsize|px68k_analog|px68k_joytype1|px68k_joytype2

FAN1ART= Backdrops
FAN2ART= Backdrops
FAN3ART= Backdrops
FAN4ART= Backdrops
SNAP1ART= Snapshots
SNAP2ART= Snapshots
SNAP3ART= Snapshots
SNAP4ART= Snapshots
SNAP5ART= Snapshots
SNAP6ART= Snapshots
SNAP7ART= Snapshots
SNAP8ART= Snapshots
SNAP9ART= Snapshots
SNAP10ART= Snapshots
B1ART= Boxart
B2ART= Boxart
B3ART= Boxart
B4ART= Boxart
B5ART= Boxart
LOG1ART= Logos
LOG2ART= Logos
BANNR= Logos
BANNR1= Logos
BANNR2= Logos
VIDID= Videos

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;      SET GUI VALUES     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
rjcaching= enabled
PLYRTYP= J
JXT= _btn
CLJXT= btn
RegionX = 375
RegionY = 165
RegionW = 250
RegionH = 250
bRegionX = 11
bRegionY = 12
bRegionW = 346
bRegionH = 485
cRegionX = 494
cRegionY = 391
cRegionW = 246
cRegionH = 109

ART= 1
ARI= 4x3|16x9|16x10|16x15|1x1|2x1|3x2|3x4|4x1|9x16|5x4|6x5|7x9|8x3|8x7|19x12|19x14|30x17|32x9|CONFIG|1x1(PAR)|CORE|Custom
ASYNC= 1
AUM= 0
AUO= 0
AUTOASPECT= 1
BSV=
AUTSHD= 1
CHECKFRAMES= 30
CHKPORTS= 1
CONFEXIT= 0
COV= 0
CROP= 0
FRAMEDELAY= 16
DSND= 1
DTCOMP= 1
FILTOG= 0
FLICK= 0
FLK= 0
FORCEAR= 1
FORCEAR= 1
FRMDL= 0
GCOR= 0
GMENU= 0
GPUSS= 1
GPUV= 1
GPUVREC= 0
GSNC= 1
GUIRES= 21
INTG= 1
JOYIND1= 0
JOYIND2= 1
LATENCY= 64
listswp= 1
MONUM= 0
MUTE= 0
OUTFS= 0
OUTFW= 0
OUTW= 1
PAUSEBG= 0
PGM= 0
thumbType= Named_Boxarts
MPORTNUM= 55435
HPORTNUM= 55435
RATESLD=50
RDELTADISP= 0.005
REWEN= 0
REWGRAN= 1
RMENU= 0
SAVEXIT= 1
SDL2= 0
SHAREDV= 0
SHDEN= 0
SMTHV= 1
STAI= 1
STAL= 0
STAS= 0
STRCH= 0
SWPV= 1
THRDV= 0
TRIPB= 0
VIDASPECT= 24
VIDSCL= 3
VIDSYNC= 0
XAUD= 0
XMENU= 1
ZMENU= 1
NOROT= 1
ROT90= 0
ROT180= 0
ROT270= 0
PLYRTYP= J
PLAYERNUM= 1
XMBCLRTHM= Electric Blue
CORECOPY= 1
CRDETECT= DETECT
NMDETECT= DETECT
DDLU= 1
OPTYP= History
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;      SET CONFIG VALUES       ;;;;;;;;;;;;;;;;;;;;
allUsersControlMenu= false
aspectRatioIndex= 21
audioDriver= dsound
audioLatency= 64
audioMuteEnable= false
audioRateControl= true
audioRateControlDelta= 0.005000
audioSync= true
autoOverridesEnable= true
autoSaveInterval= 0
autoShadersEnable= true
coreSpecificConfig= false
customViewportX= 0
customViewportY= 0
customViewportWidth= %MonitorWorkAreaRight%
customViewportHeight= %MonitorWorkAreaBottom%
currentResolutionId= 0
flickerFilterIndex= 0
flickerFilterEnable= false
fpsShow= 0
gameSpecificOptions= false
gammaCorrection= false
menuDriver= xmb
netplayCheckFrames= 30
netplayDelayFrames= 16
netplayIpPort= 54355
perfcntEnable= false
netplayNickname= %A_Username%
pauseNonactive= false
rewindEnable= false
rewindGranularity= 1
savestateAutoIndex= 1
savestateAutoLoad= false
savestateAutoSave= false
shaderon= false
softFilterEnable= false
softFilterIndex= 0
sortSavefilesEnable= false
sortSavestatesEnable= false
savefilesincontentdir= false
savestatesincontentdir= false
screenshotsincontentdir= false
tripleBufferingEnable= false
threadedDataRunloopEnable= true
videoAspectRatio= -1.00000
videoAspectRatioAuto= false
videoBlackFrameInsertion= false
videoCropOverscan= true
videoDisableComposition= true
videoDriver= gl
videoFontSize= 32
videoForceAspect= true
videoForceSrgbDisable= false
videoFrameDelay= 0
videoFullscreen= false
videoFullscreenX= %MonitorWorkAreaRight%
videoFullscreenY= %MonitorWorkAreaBottom%
videoGpuRecord= false
videoGpuScreenshot= true
videoHardSync= false
videoHardSyncFrames= 0
videoMaxSwapchainImages= 3
videoMonitorIndex= 0
videoPostFilterRecord= false
videoRotation= 0
videoScale= 3
videoScaleInteger= true
videoShaderEnable= false
videoSharedContext= false
videoSmooth= false
videoSwapInterval= 1
videoThreaded= false
videoVsync= false
videoWindowedFullscreen= false
gamcfg= tmp.ini

;;;;;;;;;;;;;;;;;;;;;;;;;    INPUT    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

inputDriver= dinput
inputJoypadDriver= xinput 
inputDeviceP1= 0
inputDeviceP2= 0
inputPlayer1MouseIndex= 1
inputPlayer2MouseIndex= 2
inputPlayer1JoypadIndex= 1
inputPlayer2JoypadIndex= 2
inputAutodetectEnable= true
inputRemapBindsEnable= true
inputExitEmulator= escape
inputMenuToggle= f1
inputMenuToggleGamepadCombo= 0
inputMaxUsers= 5
inputPlayer1AnalogDpadMode= 0
inputPlayer2AnalogDpadMode= 0
keyboardGamepadEnable= true
keyboardGamepadMappingType= 1
inputDescriptorHideUnbound= false
inputDescriptorLabelShow= true
inputBindTimeout= 5
inputDutyCycle= 3
inputPollTypeBehavior= 2
inputLibretroDeviceP1= 1
inputLibretroDeviceP2= 1
backAsMenuToggleEnable= true
menuScrollDownBtn= 11
menuScrollUpBtn= 10
menuSearchBtn= 9
menuCancelBtn=  0
menuDefaultBtn= 3
menuInfoBtn= 2
menuOkBtn= 8

;;;;;;;;;;;;;;;;;;;;;;;    NETPLAY   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

netplayClientSwapInput= true
netplaySpectatorModeEnable= false
netplayPublicAnnounce= true
networkCmdEnable= false
networkCmdPort= 55344
netplayUseMitmServer= false
networkRemoteBasePort= 55400
networkRemoteEnable= fals
netplayInputLatencyFramesMin= 0
netplayInputLatencyFramesRange= 0
networkRemoteEnableUserP1= false
networkRemoteEnableUserP10= false
networkRemoteEnableUserP11= false
networkRemoteEnableUserP12= false
networkRemoteEnableUserP13= false
networkRemoteEnableUserP14= false
networkRemoteEnableUserP15= false
networkRemoteEnableUserP16= false
networkRemoteEnableUserP2= false
networkRemoteEnableUserP3= false
networkRemoteEnableUserP4= false
networkRemoteEnableUserP5= false
networkRemoteEnableUserP6= false
networkRemoteEnableUserP7= false
networkRemoteEnableUserP8= false
networkRemoteEnableUserP9= false
audioBlockFrames= 0
audioEnable= true
audioMaxTimingSkew= 0.050000

audiomixermuteenable= false
audiomixervolume= 0.000000
audiowasapiexclusivemode= true
audiowasapifloatformat= false
audiowasapishbufferlength= -16

audioOutRate= 48000
audioResampler= sinc
audioVolume= 0.000000
autoRemapsEnable= true
autoScreenshotFilename= true
blockSramOverwrite= false
builtinImageviewerEnable= true
builtinMediaplayerEnable= true
bundleAssetsExtractEnable= false
bundleAssetsExtractLastVersion= 0
bundleAssetsExtractVersionCurrent= 0
cameraAllow= false
cameraDriver= null
cheevosEnable= false
cheevosHardcoreModeEnable= false
cheevosTestUnofficial= false
cheevosUsername= %A_UserName%
contentHistorySize= 100
coreSetSupportsNoGameEnable= true
coreUpdaterAutoExtractArchive= true
fastforwardRatio= 0.000000
historyListEnable= true
libretroLogLevel= 0
loadDummyOnCoreShutdown= true
locationAllow= false
locationDriver= null
logVerbosity= false
recordDriver= ffmpeg
showHiddenFiles= true
slowmotionRatio= 3.000000
stateSlot= 0
stdinCmdEnable= false
suspendScreensaverEnable= true
videoAllowRotate= true
wifiDriver= null
fileServerPort= 54354
fileServerEnable= false

;;;;;;;;;;;;;;;;;;;;;;    MENU   ;;;;;;;;;;;;;;;;;;;;;;;;;;;

customBgmEnable= false
dpiOverrideEnable= true
dpiOverrideValue= 200
inputOskOverlayEnable= true
inputOverlayEnable= true
inputOverlayEnableAutopreferred= true
inputOverlayHideInMenu= true
inputOverlayOpacity= 0.7000000
inputOverlayScale= 1.0000000
materialuiMenuColorTheme=  0
materialuiiconsenable= true
menuCoreEnable= true
menuDynamicWallpaperEnable= false
menuEntryHoverColor= ff64ff64
menuEntryNormalColor= ffffffff
menuFooterOpacity= 1.0000000
menuHeaderOpacity= 1.0000000
menuLinearFilter= true
menuMouseEnable= true
menuNavigationBrowserFilterSupportedExtensionsEnable= true
menuNavigationWraparoundEnable= true
menuPauseLibretro= false
menuPointerEnable= false
menuShaderPipeline= 2
menuShowAdvancedSettings= true
menuThrottleFramerate= true
menuThumbnails= 3
menuTimedateEnable= true
menuTitleColor=  ff64ff64
menuWallpaperOpacity= 0.3000000
quickmenushowaddtofavorites= true
quickmenushowcheats= true
quickmenushowcontrols= true
quickmenushowinformation= true
quickmenushowoptions= true
quickmenushowsavecoreoverrides= true
quickmenushowsavegameoverrides= true
quickmenushowsaveloadstate= true
quickmenushowshaders= true
quickmenushowtakescreenshot= true
quickmenushowundosaveloadstate= true
rguiShowStartScreen= false
uiCompanionEnable= false
uiCompanionStartOnBoot= true
uiMenubarEnable= true
userLanguage= 0
videoFontEnable= true
videoMessagePosX= .050000
videoMessagePosY= .050000
videoFontSize= 32.000000
xmbAlphaFactor= 75
xmbMenuColorTheme= 4
xmbScaleFactor= 100
xmbShadowsEnable= true
xmbShowHistory= true
xmbShowHidden= true
xmbShowImages= true
xmbShowMusic= true
xmbShowSettings= true
xmbShowVideo= true
xmbTheme= 0
buildBotCore=http://buildbot.libretro.com
BLDBOT= http://buildbot.libretro.com/nightly/windows/x86%ARCHR%
imgrepo= http://raw.githubusercontent.com/libretro/libretro-thumbnails/master

;;;;;;;;;;;;;;;;;;;    LOCATIONS    ;;;;;;;;;;;;;;;;;
gosub, DefLocs
;;;;;;;;;;;;;;;;;;;       DEFAULT PATHS       ;;;;;;;;;;;;;;;;;
gosub, DefPaths
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

netplayRomLocation= 2
netplayPlaylistDirectory= %playlistDirectory%
netplayCoreAssetsDirectory= %coreAssetsDirectory%

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
;{;;;;;;;;;;;;;;;;;;;      GENERATE CONFIG    ;;;;;;;;;;;;;;;;;;;;;;;;;;;
ifnotexist, %curcfg%
	{
		Menu,Tray,Tip, Generating retroArch settings
		filecopy,config.set,config.cfg,1
		gosub, VARtoINI
	}
ifnotexist, %racoreopt%
	{
		Menu,Tray,Tip, Generating retrArch core-settings
		filecopy,racoreopt.set,racoreopt.cfg,1
		gosub, VARtoINI
	}

if (INITIAL > 1)
	{
		TrayTip
	}
	
if (INITIAL = "")
	{
		;;SplashTextOn, 400, 300, Clipboard, The clipboard contains:`n%clipboard%
		SplashTextOn, ,skeletonKey,.skeletonKey is loading.
		CenterWindow(WinTitle)
			{
				WinGetPos,,, Width, Height, %WinTitle%
				WinMove, %WinTitle%,, (A_ScreenWidth/2)-(Width/2), (A_ScreenHeight/2)-(Height/2)

			}
	}
IniRead, HOVPREV, Settings.ini,GLOBAL,hover_preview
hovvalue= 
if (HOVPREV = 1)
	{
		hovvalue= checked
	}
if (HOVPREV = "ERROR")
	{
		iniwrite,0,Settings.ini,GLOBAL,hover_preview
		HOVPREV= 0
	}
Iniread, CORECOPY, Settings.ini,GLOBAL,core_option_copy
if (CORECOPY = 1)
	{
		guicontrol,,COREOPTCPY,1
	}
if (CORECOPY = 0)
	{
		guicontrol,disable,COREDDLA
	}
ifNotExist, hashdb.ini
	{
		gosub, PlaylistInit
	}

joycfg= %curcfg%

Loop, %playlistDirectory%\*.lpl,
	{
		plistfiles .= A_LoopFileName . "|"
		SplitPath,A_LoopFileName,,,,plistNam
		plistNamz .= plistNam . "|"
	}



ifNotExist, ovr.ini
	{
		gosub, resetOVR
	}
ovr_list =
StringLen,ovrplngth,OverlayDirectory
ovrplngthpls:= ovrplngth+1
Loop, Read, ovr.ini
	{
		StringTrimLeft,jstpth,A_LoopReadLine,ovrplngthpls
		ovr_list .= (A_Index == 1 ? "" : "|") . jstpth
	}

IfExist,apps.ini
	{
		iniread,keympr,Settings.ini,GLOBAL,Keymapper
		if (keympr <> "ERROR")
			{
				if (keympr = "Antimicro")	
					{
						IniRead,amicropth,apps.ini,KEYBOARD_MAPPERS,%keympr%
						kmprxtn= .amgp
					}
				if (keympr = "Xpadder")	
					{
						IniRead,xpaddrpth,apps.ini,KEYBOARD_MAPPERS,%keympr%
						kmprxtn= .xpadderprofile
					}
				iniread,kmprloc,apps.ini,KEYBOARD_MAPPERS,%keympr%
				if (kmprloc <> 0)
					{
						SplitPath,kmprloc,,kmprd
					}
			}
		DAMVAR= 
		XPDK= 
		AMCK= 
		IniRead,DAMVAR,apps.ini,UTILITIES,Daemon_Tools
		if (DAMVAR = "ERROR")
			{
				DAMVAR= 
			}
			
		IniRead,DCHANGER,apps.ini,UTILITIES,Display_Changer
		if (DCHANGER = "ERROR")
			{
				DCHANGER= 
			}
			
		IniRead,XPDK,apps.ini,KEYBOARD_MAPPERS,Xpadder
		if (XPDK = "ERROR")
			{
				XPDK= 
			}

		IniRead,AMCK,apps.ini,KEYBOARD_MAPPERS,Antimicro
		if (AMCK = "ERROR")
			{
				AMCK= 
			}
					
		IniRead,emultl,apps.ini,EMULATORS
		emulist= 
		emunumtot:= 0
		Loop, Parse, emultl,`n
			{
			    emunumtot+=1
				emulti1= 
				emulti2= 
				StringSplit,emulti,A_LoopField,=
				emulist.= emulti1 . "|"
			}						
	}
IniRead,RJSYSTMP,Settings.ini,GLOBAL,systems_directory
if (RJSYSTMP = "ERROR")
	{
		RJSYSTMP= 
	}
if (RJSYSTMP <> "")
	{
		totsys= 
		Loop, %RJSYSTMP%\*,2
			{
				allsys+=1
				sysnam= %A_LoopFileName%
				Loop, Read, SystemEmulators.set
					{
						if (A_LoopReadLine = "")
							{
								continue
							}
						avnu1= 
						stringsplit,avnu,A_LoopReadLine,|
						if (avnu1 = sysnam)
							{
								totsys+=1
							}
					}
			}
	}
IniRead,RJEMUD,Settings.ini,GLOBAL,emulators_directory
if (RJEMUD = "ERROR")
	{
		RJEMUD= app
	}
if (RJEMUD = "")
	{
		RJEMUD= app
	}
iniread,bsltmp,apps.ini,EMULATORS,BSL
splitpath, bsltmp,,BSLPTH
if (BSLPTH = "ERROR")
	{
		BSLPTH= %RJEMUD%\BSL
	}
ifnotexist, %BSLPTH%\BSL.exe
	{
		bsltmp= %RJEMUD%\BSL\BSL.exe
		FileCreateDir,%RJEMUD%\BSL
		FileCopy,BSL.exe,%RJEMUD%\BSL\BSL.exe,1
		iniwrite,"%bsltmp%",apps.ini,EMULATORS,BSL
		splitpath, bsltmp,,BSLPTH
	}
if (INITIAL = 1)
	{
		gosub, EmuDetect
		fileCreateDir, rj\sysCfgs
		Loop, Read, LkUp.set
			{
				stringsplit,syscfgfld,A_LoopReadLine,=
				FileCreateDir, rj\sysCfgs\%syscfgfld1%
			}
	}	

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Sort, INJOPT , Alphabetically D|
Sort, INJARG , Alphabetically D|

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

DCHINST=Not Found
if (DCHANGER <> "0")
	{
		DCHINST= Installed
	}
DAMINST=Not Found
if (DAMVAR <> "0")
	{
		DAMINST= Installed
	}

if (TGLPBL = 1)
	{
		;
	}
SplashTextOn, ,skeletonKey,skeletonKey is loading.,

;{;;;;;;;;;;;;;;;;;;;;;   -[x]-        MENU  SYSTEM       -[x]-    ;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;        <> MENU BAR & STATUS BAR <>         ;;;;;;;;;
;;Gui, Name: New, +HwndskelWin, skeletonKey  ; Creates a new GUI, destroying any existing GUI with that name.

;;Menu, FileMenu, Icon, Set RetroArch Location, shell32.dll, 3
Menu, FileMenu, Add
Menu, FileMenu, Add, Options, RAOPTSHOW
Menu, FileMenu, Add, Reload Settings, RELOADCFG
;;;;Menu, RAMenu, Add, Set RetroArch Location, RAEXE
;;Menu, RAMenu, Add
;;Menu, RAMenu, Add, Import retroArch Config, IMPRTCFG
;;;;Menu, FileMenu, Icon, Import Config, shell32.dll, 96
;;
;;Menu, ResetMenu, Add, All Settings, RECONFIGURE
;;Menu, ResetMenu, Add, RetroArch Options, RAInit
;;Menu, ResetMenu, Add, Core/Emulator Associations, AsocInit
;;Menu, ResetMenu, Add, Shader/Filter List, ShaderDBInit
;;Menu, ResetMenu, Add, RetroArch Core Options, CoreOptInit
;;Menu, ResetMenu, Add, Playlist Database, PlaylistInit
;;
;;Menu, RAMenu, Add, &Save retroArch Configuration, VARtoINI
;;;;Menu, FileMenu, Icon, &Save Configuration, shell32.dll, 259
;;Menu, RAMenu, Add
;;Menu, RAMenu, Add, &Save retroArch Config As, SAVECFG
;;;;Menu, FileMenu, Icon, &Save Config As, shell32.dll, 259
;;Menu, RAMenu, Add
;;Menu, JMenu, Add, Set Emulators Directory, SETEMUD
;;Menu, JMenu, Add, Detect Emulators, EmuDetect
;;Menu, JMenu, Add
;;Menu, JMenu, Add, Set Systems Directory, SETJKD
;;Menu, FileMenu, Add, RoM-Jacket, :JMenu
;;Menu, FileMenu, Add, RetroArch, :RAMenu
;;Menu, FileMenu, Add, Reset, :ResetMenu
;;;;Menu, FileMenu, Icon, Reset, shell32.dll, 239
Menu, FileMenu, Add
Menu, FileMenu, Add, E&xit`tAlt+F4, MenuHandler
;;Menu, FileMenu, Icon, E&xit`tAlt+F4, shell32.dll, 28
Menu, helpMenu, Add, About, Help
;;Menu, helpMenu, Icon, About, shell32.dll, 24
Menu, helpMenu, Add, Donate, Donate
;;Menu, helpMenu, Icon, Donate, shell32.dll, 29
Menu, helpMenu, Add, Update, UpdateSK
;;Menu, helpMenu, Icon, Update, imageres.dll, 82
Menu, MenuBar, Add, File, :FileMenu
Menu, MenuBar, Add, Help, :HelpMenu

Menu, ContextMenu, Add, Check port, Check_Port
Menu, ContextMenu, Add

Menu, ScrapeMenu, Add, Scrape Box-Art, Scrape_BoxArt
Menu, ScrapeMenu, Add

Menu, ScrapeMenu, Add, Scrape Title-Art, Scrape_TitleArt
Menu, ScrapeMenu, Add

Menu, ScrapeMenu, Add, Scrape Snap-Art, Scrape_SnapArt
Menu, ScrapeMenu, Add


Menu, RunWithDD, Add, Emulator Run-List >>, Emulator_Add
Menu, RunWithDD, Add

Menu, RunWithDD, Add, Add to Playlist +, Playlist_Add
Menu, RunWithDD, Add

Menu, RunWithDD, Add, Open In Explorer !, Open_Add

Menu, ESRCLMENU, Add, Toggle Selection, TOGFESEL

Menu, ESRCLMENU, Add, Add Selection, ADDFESEL

Menu, ESRCLMENU, Add, Remove Selection, REMFESEL

Menu, FERCLMENU, Add, Toggle Selection, TOGFESEL

Menu, FERCLMENU, Add, Add Selection, ADDFESEL

Menu, FERCLMENU, Add, Remove Selection, REMFESEL

Menu, RJRCLMENU, Add, Toggle Selection, TOGRJSEL

Menu, RJRCLMENU, Add, Add Selection, ADDRJSEL

Menu, RJRCLMENU, Add, Remove Selection, REMRJSEL

Menu, RUNMENU, Add, Run Menu, RUNMENU
Menu, RUNMENU, Add

Menu, RUNMENU, Add, Run RetroArch, RETALRAXE
Menu, RUNMENU, Add

Menu, ARCART, Add, Download Box-Art, ARCGBOX
Menu, ARCART, Add

Menu, ARCART, Add, Download Snapshots, ARCGSNP
Menu, ARCART, Add

Menu, ARCART, Add, Download Fan-Art, ARCGFAN
Menu, ARCART, Add

Menu, ARCART, Add, Download Logo, ARCGLOG
Menu, ARCART, Add

Menu, ARCART, Add, Download Video, ARCGVID
Menu, ARCART, Add

Gui, Add, StatusBar, vSTATUS, Helpy Helperton
Gui, Menu, MenuBar
;;gui, Add, Tab2, x0 y0 w760 h530 vTABMENU Bottom, Install-Apps|Options||JoyPad-CFG|Playlists|XMB-GUI|Archive.org|Core-CFG|Netplay-Lobby|Emulator-Options
Gui, Add, Tab2, x0 y0 w765 h535 vTABMENU Bottom, Install-Apps|Options||JoyPad-CFG|Playlists|Frontends|Archive.org|Netplay-Lobby|Jackets|Core-CFG
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;       [[ INSTALL TAB ]]     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Gui, Tab, 1
Gui Tab, Install-Apps
Gui, Add, Picture, x526 y405 w189 h90, ins.png
Gui,Font,s7 Bold
Gui, Add, GroupBox, x7 y5 w242 h478 vCACGRP, Components and Cores
Gui,Font,s7 Norm

Gui, Add, ListBox,x15 y29 w253 h446 vUAVAIL gUAvailSel hidden, %systoemu%
Gui, Add, ListBox, Multi x15 y29 w253 h446 vEAVAIL gEAvailSel hidden, %systoemu%
Gui, Add, ListBox, Multi x15 y23 w227 h433 hwndAVWIND vAVAIL gAvailSel, %corezips%

Gui, Add, Button, x258 y341 w48 h20 vUPDCL gGetCoreList, Refresh
Gui, Add, Button, x377 y340 w80 h26 vGCUPDT gGCUpdt, Update Cores
Gui, Add, Progress, x746 y8 w9 h465 Vertical -Smooth vDWNPRGRS, 0

;;gui, Add, Button,x714 y482 w43 h23 vCNCLDWN gCancelDown Disabled, Cancel

Gui, Add, Checkbox, x282 y406 h17 vKARC gKeepArchives, Keep archives
Gui, Add, CheckBox, x282 y381 h17 vBCKCORE gBckCore, Backup
Gui,Font,Bold
Gui, Add, Button,x252 y433 w115 h43 vUPDBTN gUpdSelct Disabled, DOWNLOAD
Gui,Font,Normal
Gui,Font,s7 Bold
Gui, Add, GroupBox, x251 y5 w212 h366 Center vCCGRP, Current Cores
Gui,Font,s7 Norm
Gui, Add, ListBox, x258 y22 w198 h316 -LV0x20 Altsubmit HWNDnocrsl vCRNTCORS gNoSelCores,|%CoreNamz%
Gui,Font,s7 Bold
Gui, Add, GroupBox, x494 y391 w246 h109 Center +0x400000, Drop BIOS here
Gui,Font,s7 Norm

Gui, Add, Radio, x123 y463 h14 vEXELIST gExeList, Parts
Gui, Add, Radio, x71 y463 h14 Checked vRALIST gRaList, Cores
Gui,Font,Bold
Gui,Font,s9
Gui, Add, DropDownList, x9 y484 w239 vSaList gSaList, RetroArch||Systems|Emulators|Utilities|Frontends
;;gui, Add, Radio, x134 y486 h14 vSALIST gSaList, Standalone Emulators
Gui,Font,s7 Bold

Gui, Add, GroupBox, x466 y5 w275 h379 vSKRAstch, Skeletonkey-System-Associations
Gui,Font,s7 Norm

Gui, Add, DropDownList, x470 y26 w251 vADDCORE gAddCore Hidden, Select_A_System||%reasign%
Gui, Add, Button, x723 y25 w12 vOPNSYS gOpnSyS Hidden,+
Gui, Add, DropDownList, x503 y73 w42 vOVLIST gOvList Hidden, ||1|2|3|4|5
Gui, Add, ComboBox, x471 y54 w264 vADDNSYS gAddNSys Hidden, %systoemu%
Gui, Add, Button, x694 y79 w42 h19 vSAVNSYS gSavNSys Hidden, save
Gui, Add, Text, x549 y75 h23 vOVSETTXT Hidden, Extension-Override Set

Gui, Add, Radio, x505 y122 h19 vDCORE gDCore Checked Hidden, Default Core
Gui, Add, Radio, x505 y144 h16 vARDCORE gARDCore disabled Hidden, Core
Gui, Add, Radio, x505 y170 h16 vDAPP gDApp disabled Hidden, Application

Gui, Add, DropDownList, x550 y144 w184 vASCORE gASCore hidden, %corelist%
Gui, Add, Button, x577 y168 w56 h17 vSELAPP gSelApp hidden, BROWSE

Gui ,Add, Text, x643 y147 h17 vSYSIDENT hidden, System Identifier
Gui, Add, ComboBox, x635 y166 w103 vSYSNICK gSysNick Limit32 Hidden,%preEmuCfg%
Gui, Add, Button, x680 y197 w42 h17 vSVNICK gSvNick hidden, save
Gui, Add, Button, x723 y146 w15 h15 vDELNICK gDelNick hidden, X

Gui, Add, Edit, x503 y96 w120 h21 vEXTINP gExtInp Hidden,
Gui, Add, ComboBox, x505 y192 w120 vAPPOPT gAppOpt Hidden,|[CUSTMOPT]|%INJOPT%
Gui, Add, ComboBox, x505 y218 w120 vAPPARG gAppArg Hidden,|[CUSTMARG]|%INJARG%

Gui, Add, Text, x633 y191 h23 vOPTTXT hidden, options
Gui, Add, Text, x633 y215 h23 vARGTXT hidden, arguments

Gui, Add, CheckBox, x595 y122 h17 vEMUPGC gEmuPGC hidden, Per-Game Configurations
Gui, Add, Radio, x506 y241 h23 vERUN gERun Hidden, RUN from emulator path
Gui, Add, Radio, x506 y260 h23 vLRUN gLRun Checked Hidden, RUN from ROM path
Gui, Add, CheckBox, x505 y283 h17 vNoExtn gNoExtn Hidden, Omit extension at runtime
Gui, Add, CheckBox, x649 y244 h23 vOMITQ gOmitQ hidden, Omit-Quotes
Gui, Add, CheckBox, x649 y265 h23 vOMITPTH gOmitPth Hidden, No-Path

Gui, Add, Edit, x476 y305 +Wrap w256 h48 vEXDISPL hidden disabled, 

Gui, Add, Radio, x290 y254 h13 vUNIQLNK gUniqLnk Checked hidden, System Configs
Gui, Add, Radio, x290 y237 h13 vMULTLNK gMultLnk hidden, Global Config

Gui, Add, DropDownList, x282 y27 w177 vINSTEMUDDL gInstEmuDDL hidden, %emulist%
Gui, Add, Button, x286 y170 w75 h23 vLOCEMUIN gLocEmuIn hidden, SELECT
Gui, Add, Button, x382 y92 w75 h23 vMULTINST gMULTInst hidden, ASSIGN
Gui, Add, Button, x382 y92 w75 h23 vEMUINST gEmuInst hidden, Install

Gui, Add, CheckBox, x350 y75 w110 h16 +0x20 vEMUASIGN gEmuAsign hidden, Assign to System
Gui, Add, Button, x408 y55 w51 h18 vCHEMUINST gChEmuInst hidden, Browse
Gui, Add, Text, x288 y58 h13 Center hidden vEINSTTXT, Change Install Location
Gui, Add, Edit, x286 y118 w171 h51 +ReadOnly vEINSTLOC hidden,

Gui Add, ComboBox, x287 y197 w120 vOEMUNICK gOEmuNick hidden,%emulist%
Gui Add, Button, x409 y189 w36 h18 vOEMUSV gOEmuSv hidden, save
Gui Add, Button, x419 y210 w40 h18 vOEMUDEL gOEmuDel hidden, delete
Gui Add, Text, x288 y218 h14 vOEMUTXT hidden, Emulator Nickname

Gui, Add, Button, x382 y277 w75 h23 vROMDLOC gRomDLoc hidden, SET
Gui, Add, Button, x382 y277 w75 h23 vMROMDLOC gMRomDLoc hidden, MULTI-SET
Gui, Add, Text, x288 y282 h17 vROMDTXT hidden, Set ROM Directory
Gui, Add, Edit, x285 y304 w171 h53 vROMDEDT Hidden Multi ReadOnly,

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading...,
;{;;;;;;;;;;;;;;;;;;;;;;;;;       [[ OPTIONS TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~RUN OPTIONS MENU GROUP~~~;;;;;;;;;;;;;
Gui, Tab, 2
Gui Tab, Options
Gui ,Add, Picture, x517 y284 w207 h207 vDRAGIMAGE, key.png
Gui, Add, DropDownList, x125 y0 w291 vOPTDDL gOptDDL, History||%plistfiles%
Gui, Add, Radio, x18 y4 h16 vHOPT gHopt Checked, Playlist
Gui, Add, Radio, x72 y4 h16 vDOPT gDopt, Folder
Gui, Add, ComboBox, x18 y22 w640 vROMLOC gEDTROM +0x2 +E0x5000 Right,

Gui, Add, CheckBox, x662 y32 h14 vSWHOST gSwHost hidden, Host

Gui, Add, CheckBox, x461 y2 h15 vCustSwitchs gCustSwitchs, switches
Gui, Add, ComboBox, x459 y22 w100 vCUSTMOPTS gCustmOpts hidden, |%INJOPT%
Gui, Add, ComboBox, x560 y22 w100 vCUSTMARGS gCustmArgs hidden, |%INJARG%

Gui, Add, Button, x418 y0 w41 h21 vGROM gGetROM, ROM
Gui, Add, DropDownList, x525 y0 w135 vLCORE gLnchCore,
Gui, Add, DropDownList, x540 y0 w135 vJCORE gRJCORE hidden,
;;Gui, Add, DropDownList, x540 y24 w135 vJCORE gRJCORE hidden,
Gui, Font, Bold
Gui, Add, Button, x662 y3 w16 h17 vOPNCORE gOpnCore, C
Gui, Add, Button, x661 y0 w78 h29 vHLNCHBUT gLOCALHOSTING hidden, HOST
Gui, Add, Button, x680 y0 w78 h29 vLNCHBUT gLNCH, LAUNCH
Gui, Font
Gui, Add, Button, x740 y30 w16 h17 vCLRCUROM gCLREDT, X
gui, font, bold
Gui, Add, Button, x740 y30 w16 h17 vRETAL gRETAL hidden, >
gui,font,normal
;};;;;;;;

;{;;;;;;;~~~~~GLOBAL SKELEOTNKEY~~~~~;;;;;;;;;;;
Gui,Font,Bold
Gui, Add, GroupBox, x14 y49 w467 h460 vSKSUMGB, Summary
Gui,Font,Normal
Gui,Font,Bold
Gui,Font,s9
Gui, Add, Button, x29 y410 w43 h23 vSETEMUD gSETEMUD, SET
Gui, Add, Button, x26 y90 w43 h23 vSETJKD gSETJKD, SET
Gui, Add, Button, x28 y344 w43 h23 vSKRAEXE gRAEXE, SET
Gui, Add, Text, x74 y97 h16 vSKSYSTXT, Systems Directory
Gui, Add, Text, x71 y348 vSKRAXETXT, Retroarch Location
Gui, Add, Text, x75 y415 vSKEMUDTXT, Emulators Directory
Gui,Font,Normal
Gui,Font,
Gui, Add, Button, x254 y413 w45 h18 vEMUDETECT gEmuDetect, detect
Gui, Add, Text, x230 y97 vSKDETSTXT, Detected Systems: %totsys% supported and %allsys% total
Gui, Add, Text,x217 y295 w146 h29 vRAVERTXT, version:  %RAVERS%`nbuild:  %RAVBLD%
Gui, Add, Button, x215 y326 w45 h17 vGRAVER gGRAVER, version
Gui, Add, Text, x541 y68 vSKPRFJTXT, Overrides
Gui, Add, Text, x33 y214 vSKDTTXT, Daemon Tools is %DAMINST%
Gui, Add, Text, x303 y415 vSKDSETXT, Detected Supported Emulators: %emunumtot%
Gui, Add, DropDownList, x123 y484 w163 vSKRESDDL gSKRESDDL, All||Retroarch|Associations|Core-Cfgs|Playlist-DB
Gui, Add, Button, x287 y484 w55 h20 vSKRESET gSKRESET, RESET
Gui, Add, Edit, x27 y114 w443 h40 Multi ReadOnly vSKSYSDISP, %RJSYSTEMS%
Gui, Add, Text, x30 y324 vSKIMPRATXT, Import Retroarch.cfg
Gui, Add, Button, x129 y319 w75 h23 vSKRAIMP gIMPRTCFG, Import
Gui, Add, Text, x368 y349 vSKSAVTXT, Save for skeletonKey
Gui, Add, Button, x379 y324 w75 h23 vSKSAVE gMenuSave, SAVE
Gui, Add, Button, x454 y329 w13 h17 vSKSVAS gSAVECFG, v
Gui, Add, CheckBox, x33 y231 h19 vHOVPREV gHovPrev %hovvalue%, Hover-Preview

Gui, Add, Text, x297 y345 vSKCCTXT, %CORENUM% cores
Gui, Add, Text, x329 y82 vSKRJQTXT, %RJQNUM% systems
Gui, Add, Text, x33 y201 vSKDISPLCHTXT, DisplayChanger is %DCHINST%
Gui, Add, Edit, x30 y434 w439 h40 Multi ReadOnly vSKEMUDISP, %RJEMUD%
Gui, Add, Edit, x29 y367 w440 h40 Multi ReadOnly vSKRADISP, %RAEXELOC%


Gui, Add, Button, x521 y191 w41 h17 vSKRBLD gPlaylistInit, BUILD
Gui, Add, Text, x564 y191 vSKRBLDTXT, Re/build playlist database

Gui,Font,Bold
Gui, Add, GroupBox, x486 y50 w269 h140 Center vSKBSRLGRP, BSL - (ROM-Jacket-Launcher)
Gui,Font,Normal

Gui, Add, Button, x429 y60 w46 h20 vSKCLRQ gDELRJQ, CLEAR
Gui, Add, CheckBox, x489 y124 w14 h18 vSKENBF gSKENBF
Gui, Add, Text, x308 y59 vSKCLRTXT, Clear RoM-Jacket queue
Gui, Add, Button, x506 y123 w44 h19 vSKBEFCMD gSKBEFCMD disabled, SET
Gui, Add, Text, x555 y126 vSKRBFTXT, Run .cmd before
Gui, Add, CheckBox, x489 y144 w14 h18 vSKENAF gSKENAF
Gui, Add, Button, x506 y141 w44 h19 vSKAFTCMD gSKAFTCMD disabled, SET
Gui, Add, Text, x555 y144 vSKRAFTXT, Run .cmd after



Gui, Add, CheckBox, x510 y168 h17 vDISCFG gDISCFG,Disable Jacket Configurations

Gui, Add, CheckBox, x510 y83 h16 vSKOVRJM gSKOVRJM, override
Gui, Add, Radio, x645 y83 h17 vSKXPADOV gSKXPADOV disabled, Xpadder
Gui, Add, Radio, x575 y83 h17 vSKAMOV gSKAMOV disabled checked, Antimicro
Gui, Add, Button, x715 y82 w38 h20 vSKPROFOV gSKPROFOV disabled, profile

Gui, Add, CheckBox, x510 y105 h16 vSKFROV gSKFROV, override
Gui, Add, DropDownList, x579 y103 w163 vSKFROVDD gSKFROVDD disabled, FRONTENDS||

;};;;;;;;;;;;;

;{;;;;;;;;~~~DISPLAY DRIVER MENU GROUP~~~;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x28 y43 w94 h130 vDDRVGRP hidden, Display Driver
Gui,Font,s7 Norm 
Gui, Add, Radio, x40 y62 h16 vOGLDRV gGLDISP Checked hidden, OpenGL
Gui, Add, Radio, x40 y84 h16 vSDL2DRV gSDLDISP hidden, SDL2
Gui, Add, Radio, x40 y106 h16 vGDIDRV gGDIDISP hidden, GDI
Gui, Add, Radio, x40 y128 h16 vD3DDRV gD3DDISP hidden, Direct3D
Gui, Add, Radio, x40 y150 h16 vVLKDRV gVLKDISP hidden, Vulkan
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~GUI  DRIVER MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x132 y43 w75 h115 vGUIDRVGRP hidden, GUI Driver
Gui,Font,s7 Norm 
Gui, Add, Radio, x140 y62 w50 h16 vRMENU gRGUI hidden, RGUI
Gui, Add, Radio, x140 y84 w45 h16 vXMENU gXMB Checked hidden, XMB
Gui, Add, Radio, x140 y106 w45 h16 vGMENU gGLUI hidden, GLUI
Gui, Add, Radio, x140 y128 w60 h16 vZMENU gZARCH hidden, ZARCH
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~OUTPUT MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x219 y43 w90 h136 vOUTMGRP hidden, Output Mode
Gui,Font,s7 Norm 
Gui, Add, Radio, x227 y62 h16 vOUTFS gFSCRN hidden, FullScreen
Gui, Add, Radio, x227 y84 h16 vOUTW gWIND Checked hidden, Window
Gui, Add, Checkbox, x228 y104 h16 vOUTFW gFWIND hidden, FullWindow

Gui, Add, Text, x245 y123 Disabled vREFTXT hidden, Refresh
Gui, Add, Edit, x222 y137 w86 h17 vREFRESH gRefresh Number hidden, %REFRESH%
Gui, Add, UpDown, Range0-240 vREFUD gRefUD hidden, 
Gui, Add, Slider, x221 y159 w86 h16 Range0-240 vREFSLD gRefSld hidden,

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~AUDIO  MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x319 y43 w160 h117 vSNDGRP hidden, Audio Driver
Gui,Font,s7 Norm 
Gui, Add, Radio, x327 y62 h16 vDSND gdSound Checked hidden, dSound
Gui, Add, Radio, x327 y80 h16 vSDL2 gsdlSound hidden, SDL2
Gui, Add, Radio, x327 y100 h16 vXAUD gxaudioSound hidden, xAudio
Gui, Add, Radio, x327 y120 h16 vWASAPI gWasapi hidden, WASAPI
Gui, Add, Radio, x327 y140 h16 vOPENAL gOpenAL hidden, openal
Gui, Add, CheckBox, x396 y76 h15 vASYNC gAudSync Checked hidden, Sync
Gui, Add, CheckBox, x396 y60 h16 vART gRate Checked hidden, Rate-Control
;;gui, Add, Slider, x398 y89 w80 h18 vRATESLD gRateSlider Hidden, 50
;;gui ,Add, Text, x438 y103 h23 +0x200 vRDELTADISP, %delta%
Gui, Add, CheckBox, x396 y92 h15 vMUTE gAudMute hidden, Mute
Gui, Add, ComboBox, x393 y130 w45 vLATENCY gAudLat hidden, 64||32|64|128
Gui, Add, Text, x442 y134 vSNDLATXT hidden, latency
Gui, Add, CheckBox,x396 y107 h15 vGLBLAUDIO gAudioToggle Checked hidden, Enabled
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~SCALING MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x485 y43 w269 h162 vSCLGRP hidden, Scaling
Gui,Font,s7 Norm 

Gui, Add, ComboBox, x491 y61 w55 vVIDSCL gSclVid hidden, 3||1|2|3|4|5|6
Gui, Add, Radio, x661 y57 h18 vSTRCH gScaleMode hidden, Stretch
Gui, Add, Radio, x661 y77 h18 vINTG gScaleMode Checked hidden, Integer
Gui, Add, CheckBox, x612 y80 vAUTOASPECT gAARatio Checked hidden, Auto
Gui, Add, DropDownList, AltSubmit x550 y61 w57 vVIDASPECT gAspect hidden, CORE||%ARI%
Gui, Add, CheckBox, x612 y60 vFORCEAR gFAspect Checked hidden, Force
Gui, Add, Text, x498 y84 h15 vSCLTXT hidden, Scale
Gui, Add, Text, x544 y84 h15 vARTXT hidden, Aspect Ratio
Gui, Add, Text, x600 y153 h20 vVIDGTXT hidden, VIDEO
Gui, Add, DropDownList, x653 y175 w47 vROTATE gROTATE hidden, 0||90|180|270
Gui, Add, Text, x702 y179 h15 vVROTXT hidden, Rotation

Gui, Add, DDL, x674 y97 w35 vMONUM gVideoMon hidden, 0||0|1|2|3|4
Gui, Add, Text, x711 y101 h16 vMONGTXT hidden, Monitor
;;gui, Add, Text, x648 y107 h15, width
;;gui, Add, Text, x695 y107 height
Gui, Add, Text, x504 y128 h20 vVIDRESTXT hidden, Video Res
Gui, Add, DDL, x561 y124 w77 vREZV gGetRez hidden, %setrez1%x%setrez2%||%qres%
Gui, Add, Edit, x643 y124 w40 h21 vIntXres gGetIntXrez Number hidden, %setrez1%
Gui, Add, Text, x686 y126 h13 vVIDXTXT hidden, X
Gui, Add, Edit, x698 y124 w40 h21 vIntYres gGetIntYrez Number hidden, %setrez2%

Gui, Add, Text, x497 y151 vMONRESTXT hidden, Monitor Res
Gui, Add, DropDownList, x561 y149 w77 vFSREZ gFullScreenRez hidden, %setrez1%x%setrez2%||%qres%
Gui, Add, Edit, x643 y149 w40 h21 vMONXREZ gMonResX Number hidden, 0
Gui, Add, Text, x686 y155 h13 vMONXTXT hidden, X
Gui, Add, Edit, x698 y149 w40 h21 vMONYREZ gMonResY Number hidden, 0

Gui, Add, Edit, x561 y176 w35 h20 vVidXLoc gVidPosX Number hidden, 0
Gui, Add, Text, x599 y172 w5 vVPOSXTXT hidden, x
Gui, Add, Edit, x605 y176 w35 h20 vVidYLoc gVidPosY Number hidden, 0
Gui, Add, Text, x642 y172 w5 vPOSYTXT hidden, y
Gui, Add, Text, x490 y181 vVPOSTXT hidden, Video Position

Gui, Add, CheckBox, x496 y104 vCROP gCropOS hidden, Crop-Overscan

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~LOCATIONS MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x24 y175 w314 h147 Center vSHDPTHTXT hidden, Shaders\Paths
Gui,Font,s7 Norm 
Gui, Add, Radio,x124 y188 h18 vCGSLCT gCGPoP hidden, CG
Gui, Add, Radio, x86 y188 h18 vGLSLCT gGLPoP Checked hidden, GL
Gui, Add, Radio, x161 y189 h18 vSLCT gSLPoP hidden, Slang
Gui, Add, DropDownList,x30 y208 w281 vGLSHDVAR gGLShdGet hidden, nul||%gl_list%
Gui, Add, DropDownList,x30 y208 w281 vSLSHDVAR gSLShdGet hidden, nul||%sl_list%
Gui, Add, DropDownList,x30 y208 w281 vCGSHDVAR gCGShdGet hidden, nul||%cg_list%
Gui, Add, CheckBox, x31 y188 h18 vSHDEN gSHATOG hidden, Enable
Gui, Add, Button, x316 y208 w18 h22 vSHDSEL gSelectShader hidden, O
Gui, Add, CheckBox, x232 y189 h17 vAUTSHD gAutoShd Checked hidden, Auto
Gui, Add, CheckBox,x277 y188 h17 vSMTHV gSmoothVid hidden, Smooth
Gui, Add, Text, x32 y253 h17 vFILTXT hidden, Filter
Gui, Add, DropDownList, x69 y251 w243 vFLTFILE gFltShdGet hidden, nul||%fltlist%
Gui, Add, Button, x316 y251 w18 h22 vFILTSEL gSelectFilter hidden, O


Gui, Add, DropDownList, x96 y274 w160 vLOCDIR gLocFolder hidden, assets_directory||%dirlocations%
Gui, Add, Button, x257 y273 w71 h23 vDirBut gLocationFolder hidden, Directory
Gui, Add, DropDownList, x96 y296 w160 vLOCPTH gLocPath hidden, assets_path||%pathlocations%
Gui, Add, Button, x257 y295 w71 h23 vPthBut gLocationPath hidden, Path
Gui, Add, Text, x48 y295 h23 +0x200 vPTHSTXT hidden, Paths
Gui, Add, Text, x37 y274 h23 +0x200 vDIRSTXT hidden, Directories

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~GLOBAL OPTION GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x24 y322 w342 h59 vOPERGRP hidden, Operational
Gui,Font,s7 Norm 
Gui, Add, CheckBox, x121 y342 h13 vPAUSEBG gBGPause hidden, Pause in BG
Gui, Add, CheckBox, x284 y342 h13 vGPUVREC gGPURecord hidden, GPU Record
Gui, Add, CheckBox, x205 y342 h13 vGPUSS gGPUScreenShot Checked hidden, GPU Snaps
Gui, Add, CheckBox, x36 y342 h13 vSAVEXIT gSaveOnExit Checked hidden, Save on Exit
Gui, Add, CheckBox, x36 y360 vCSTCMD gEnableCC hidden, Custom Cmd
Gui, Add, Edit, x117 y358 w100 h17 vCSTMROM gROMOverride Disabled hidden,%romf%
Gui, Add, CheckBox, x221 y360 vCSTCRE gEnableCR Disabled hidden,-L
Gui, Add, Edit, x252 y358 w100 h17 vCSTMCORE gCORECommand Disabled hidden,%libretroDirectory%\%lastcore%
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~SAVE MENU GROUP~~~;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x368 y296 w116 h144 Center vSAVGRP hidden, Saves
Gui,Font,s7 Norm 
Gui, Add, CheckBox, x374 y309 h13 vSAVSRT gSaveSort hidden, Sort Save-Files
Gui, Add, Text, x378 y328 w104 h5 0x10 vSAVDIVTXT hidden,
Gui, Add, CheckBox, x373 y335 h18 vSTORT gSortState hidden, Sort States
Gui, Add, CheckBox, x373 y353 h13 vSTAL gStateAutoLoad hidden, Auto-Load	
Gui, Add, CheckBox, x373 y370 h13 vSTAS gStateAutoSave hidden, Auto-Save
Gui, Add, CheckBox, x373 y386 h15 vSTAI gStateAutoIndex hidden, Auto-Index
Gui, Add, Text, x463 y356 h15 vSAVSECTXT hidden, sec
Gui, Add, ComboBox, x455 y361 w35 vSVINT gAutoSave Disabled hidden, 1||1|2|3|4
Gui, Add, CheckBox, x373 y416 h19 vREWEN gRewind hidden, Rewind
Gui, Add, Text, x460 y403 h16 vSAVSTPTXT hidden, step
Gui, Add, ComboBox, x445 y417 w35 vREWGRAN gGranularity hidden, 1||1|2|3

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~DRC MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x24 y385 w310 h119 vDRCGRP hidden, Dynamic Rate-Control
Gui,Font,s7 Norm 
Gui, Add, CheckBox, x205 y400 h17 vBFI gBlackFrame hidden, Black Frame Insertion
Gui, Add, CheckBox, x36 y407 h23 vFLK gFLICK hidden, Flickering
Gui, Add, ComboBox, x108 y407 w35 vFLICKF gFlckFrms hidden, 0||0|1|2
Gui, Add, Text, x37  y435 vFRMDLTXT hidden, Frame Delay
Gui, Add, ComboBox,  x108 y430 w35 +E0x0 vFRMDL gVidFrmDelay hidden, 0||0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15
Gui, Add, Text, x145 y435 vDLFRMTXT hidden, Frames
Gui, Add, CheckBox, x36 y457 vVIDSYNC gSyncVideo hidden, V-Sync
Gui, Add, ComboBox,  x108 y454 w35 vSWPV gSwapFrames Disabled hidden, 1||1|2|3|4|5
Gui, Add, Text,  x145 y457 vSWPFRMTXT hidden, Swap
Gui, Add, Checkbox, x36 y480 vHSYNC gSyncGPU hidden, GPU-Sync
Gui, Add, ComboBox, x108 y477 w35 vGPUV gGPUIV Disabled hidden, 1||1|2|3
Gui, Add, Text, x145 y482 vGPUFRMTXT hidden, Frames
Gui, Add, CheckBox, x205 y418 h17 vDTCOMP gDeskComp Checked hidden, Desktop Compositing
Gui, Add, CheckBox, x205 y437 h17 vSHAREDV gVideoShrdCtx hidden, Video Shared Context
Gui, Add, CheckBox, x205 y460 hidden, Triple Buffering
Gui, Add, DropDownList, x205 y456 w38 vMSWCHI gMswChI hidden, |3||1|2|3|4
Gui, Add, Text, x246 y460 h17 vMAXSWPTXT hidden, Max Swapchain
Gui, Add, CheckBox, x205 y479 h17 vTHRDV gVIDTHR hidden, Threaded Driver
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~OVERRIDE MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x340 y442 w113 h62 vOVRIDGRP hidden, Overrides
Gui,Font,s7 Norm 
Gui, Add, CheckBox, x352 y456 h23 vPGM gPerGameOverride hidden, Game-Specific
Gui, Add, CheckBox,x352 y476 h23 vAUO gAutoOverride hidden, Auto-Overrides
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;~~~SEARCH MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x487 y203 w268 h299 Right vSRCHGRP, SEARCH
Gui,Font,s7 Norm 

Gui, Add, ListBox, x491 y277 w261 h232 HWNDlocalromp +HScroll1500 Multi vLOCROMPOP gLocROMPop hidden,
Gui, Add, Radio, x562 y212 w53 h18 vLOCFLDRS gLocFldrs, Folder
Gui, Add, Radio, x623 y212 w53 h18 vLOCPLSTS gLocPlsts Checked, Playlist
Gui, Add, CheckBox, x495 y212 w60 h16 vLOCSRCHREC gLocSrchRec hidden Checked, Recurse
Gui, Add, Edit, x491 y254 w218 h21 vLOCROMSRCH gLocROMSrch,
Gui, Add, Button, x709 y253 w43 h23 vLOCROMSRCHBUT gLocROMSrchBut, Search
Gui, Add, DropDownList, x491 y231 w260 vLOCASSETDDL gLocAssetDDL, All_Playlists||%plistfiles%
Gui,Font,s7 Bold
Gui, Add, GroupBox, x342 y163 w138 h128 Center +0x400000 vROMRPGRP, Drop a ROM here
Gui,Font,s7 Norm 
Gui, Add, Checkbox, x370 y272 vAUTOLNCH gAutoLaunch Checked, Auto-Launch
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;~~~EMUOPT MENU GROUP~~~;;;;;;;;;;;;;;;;;;;;;;;;;;;;
emutog= Hide
tmpvis= Hidden
Gui, Add, Button, x128 y216 w75 h23 vemuBUTA gemuBUTA %tmpvis%, emuBUTA
Gui, Add, Button, x128 y240 w75 h23 vemuBUTB gemuBUTB %tmpvis%, emuBUTB
Gui, Add, Button, x128 y264 w75 h23 vemuBUTC gemuBUTC %tmpvis%, emuBUTC
Gui, Add, Button, x368 y120 w75 h23 vemuBUTG gemuBUTG %tmpvis%, emuBUTG
Gui, Add, Button, x368 y48 w75 h23 vemuBUTD gemuBUTD %tmpvis%, emuBUTD
Gui, Add, Button, x368 y72 w75 h23 vemuBUTE gemuBUTE %tmpvis%, emuBUTE
Gui, Add, Button, x368 y96 w75 h23 vemuBUTF gemuBUTF %tmpvis%, emuBUTF
Gui, Add, Button, x640 y120 w75 h23 vemuBUTH gemuBUTH %tmpvis%, emuBUTH
Gui, Add, Button, x640 y144 w75 h23 vemuBUTI gemuBUTI %tmpvis%, emuBUTI
Gui, Add, Button, x689 y480 w66 h23 vemuBUTJ gemuBUTJ %tmpvis%, emuBUTJ
Gui, Add, CheckBox, x128 y120 vemuCHKD gemuCHKD %tmpvis%, emuCHKD
Gui, Add, CheckBox, x128 y144 vemuCHKE gemuCHKE %tmpvis%, emuCHKE
Gui, Add, CheckBox, x128 y168 vemuCHKF gemuCHKF %tmpvis%, emuCHKF
Gui, Add, CheckBox, x128 y192 vemuCHKG gemuCHKG %tmpvis%, emuCHKG
Gui, Add, CheckBox, x248 y72 vemuCHKH gemuCHKH %tmpvis%, emuCHKH
Gui, Add, CheckBox, x256 y384 vemuCHKI gemuCHKI %tmpvis%, emuCHKI
Gui, Add, CheckBox, x256 y408 vemuCHKJ gemuCHKJ %tmpvis%, emuCHKJ
Gui, Add, CheckBox, x256 y432 vemuCHKK gemuCHKK %tmpvis%, emuCHKK
Gui, Add, CheckBox, x256 y456 vemuCHKL gemuCHKL %tmpvis%, emuCHKL
Gui, Add, CheckBox, x520 y400 vemuCHKM gemuCHKM %tmpvis%, emuCHKM
Gui, Add, CheckBox, x376 y288 vemuCHKN gemuCHKN %tmpvis%, emuCHKN
Gui, Add, CheckBox, x624 y440 vemuCHKO gemuCHKO %tmpvis%, emuCHKO
Gui, Add, CheckBox, x624 y464 vemuCHKP gemuCHKP %tmpvis%, emuCHKP
Gui, Add, CheckBox, x640 y216 vemuCHKQ gemuCHKQ %tmpvis%, emuCHKQ
Gui, Add, CheckBox, x8 y440 vemuCHKA gemuCHKA %tmpvis%, emuCHKA
Gui, Add, CheckBox, x8 y464 vemuCHKB gemuCHKB %tmpvis%, emuCHKB
Gui, Add, CheckBox, x8 y490 vemuCHKC gemuCHKC %tmpvis%, emuCHKC
Gui, Add, ComboBox, x248 y312 w124 vemuCBXE gemuCBXE %tmpvis%, emuCBXE||
Gui, Add, ComboBox, x248 y336 w126 vemuCBXF gemuCBXF %tmpvis%, emuCBXF||
Gui, Add, ComboBox, x248 y360 w126 vemuCBXG gemuCBXG %tmpvis%, emuCBXG||
Gui, Add, ComboBox, x368 y144 w126 vemuCBXH gemuCBXH %tmpvis%, emuCBXH||
Gui, Add, ComboBox, x368 y168 w127 vemuCBXI gemuCBXI %tmpvis%, emuCBXI||
Gui, Add, ComboBox, x504 y272 w100 vemuCBXJ gemuCBXJ %tmpvis%, emuCBXJ||
Gui, Add, ComboBox, x8 y248 w120 vemuCBXA gemuCBXA %tmpvis%, emuCBXA||
Gui, Add, ComboBox, x8 y272 w120 vemuCBXB gemuCBXB %tmpvis%, emuCBXB||
Gui, Add, ComboBox, x8 y296 w120 vemuCBXC gemuCBXC %tmpvis%, emuCBXC||
Gui, Add, ComboBox, x8 y320 w120 vemuCBXD gemuCBXD %tmpvis%, emuCBXD||
Gui, Add, DropDownList, x248 y168 w121 vemuDDLE gemuDDLE %tmpvis%, emuDDLE||
Gui, Add, DropDownList, x248 y192 w121 vemuDDLF gemuDDLF %tmpvis%, emuDDLF||
Gui, Add, DropDownList, x248 y216 w121 vemuDDLG gemuDDLG %tmpvis%, emuDDLG||
Gui, Add, DropDownList, x504 y248 w100 vemuDDLH gemuDDLH %tmpvis%, emuDDLH||
Gui, Add, DropDownList, x504 y344 w121 vemuDDLI gemuDDLI %tmpvis%, emuDDLI||
Gui, Add, DropDownList, x640 y320 w100 vemuDDLJ gemuDDLJ %tmpvis%, emuDDLJ||
Gui, Add, DropDownList, x8 y120 w121 vemuDDLC gemuDDLC %tmpvis%, emuDDLC||
Gui, Add, DropDownList, x8 y144 w121 vemuDDLD gemuDDLD %tmpvis%, emuDDLD||
Gui, Add, DropDownList, x8 y72 w121 vemuDDLA gemuDDLA %tmpvis%, emuDDLA||
Gui, Add, DropDownList, x8 y96 w121 vemuDDLB gemuDDLB %tmpvis%, emuDDLB||
Gui, Add, Radio, x8 y24 vemuRad1A gemuRad1A %tmpvis%, emuRad1A
Gui, Add, Radio, x8 y48 vemuRad1B gemuRad1B %tmpvis%, emuRad1B
Gui, Add, Edit, x128 y24 w120 vemuEDTA gemuEDTA %tmpvis%, emuEDTA
Gui, Add, Edit, x128 y48 w120 vemuEDTB gemuEDTB %tmpvis%, emuEDTB
Gui, Add, Radio, x8 y168 vemuRad2A gemuRad2A %tmpvis%, emuRad2A
Gui, Add, Radio, x8 y192 vemuRad2B gemuRad2B %tmpvis%, emuRad2B
Gui, Add, Radio, x8 y216 vemuRad2C gemuRad2C %tmpvis%, emuRad2C
Gui, Add, Edit, x128 y72 w120 vemuEDTC gemuEDTC %tmpvis%, emuEDTC
Gui, Add, Edit, x128 y96 w88 vemuEDTD gemuEDTD %tmpvis%, emuEDTD
Gui, Add, UpDown, x454 y24 w17 h21 -16 %tmpvis% vemuUPDA gemuUPDA
Gui, Add, Edit, x256 y480 w120 vemuEDTE gemuEDTE %tmpvis%, emuEDTE
Gui, Add, Edit, x368 y24 w88 vemuEDTF gemuEDTF %tmpvis%, emuEDTF
Gui, Add, Radio, x8 y344 vemuRad3A gemuRad3A %tmpvis%, emuRad3A
Gui, Add, Radio, x8 y368 vemuRad3B gemuRad3B %tmpvis%, emuRad3B
Gui, Add, Radio, x8 y392 vemuRad3C gemuRad3C %tmpvis%, emuRad3C
Gui, Add, Radio, x8 y416 vemuRad3D gemuRad3D %tmpvis%, emuRad3D
Gui, Add, Edit, x560 y56 w120 vemuEDTG gemuEDTG %tmpvis%, emuEDTG
Gui, Add, Edit, x560 y80 w120 vemuEDTH gemuEDTH %tmpvis%, emuEDTH
Gui, Add, UpDown, x726 y296 w17 h21 -16 %tmpvis% vemuUPDB gemuUPDB
Gui, Add, Edit, x640 y296 w88 vemuEDTI gemuEDTI %tmpvis%, emuEDTI
Gui, Add, UpDown, x214 y96 w17 h21 -16 %tmpvis% vemuUPDC gemuUPDC
Gui, Add, Radio, x248 y24 vemuRad4A gemuRad4A %tmpvis%, emuRad4A
Gui, Add, Radio, x248 y48 vemuRad4B gemuRad4B %tmpvis%, emuRad4B
Gui,Font,s7 Bold
Gui, Add, GroupBox, x488 y24 w71 h29 vemuGRPA %tmpvis%, emuGRPA
Gui, Add, GroupBox, x488 y56 w70 h29 vemuGRPB %tmpvis%, emuGRPB
Gui, Add, GroupBox, x488 y88 w68 h29 vemuGRPC %tmpvis%, emuGRPC
Gui, Add, GroupBox, x496 y176 w88 h19 vemuGRPD %tmpvis%, emuGRPD
Gui, Add, GroupBox, x496 y200 w101 h19 vemuGRPE %tmpvis%, emuGRPE
Gui, Add, GroupBox, x496 y224 w94 h19 vemuGRPF %tmpvis%, emuGRPF
Gui, Add, GroupBox, x602 y392 w151 h45 vemuGRPG %tmpvis%, emuGRPG
Gui, Font, normal
Gui, Add, ListBox, x128 y392 w120 h30 vemuLBXA gemuLBXA %tmpvis%, emuLBXA||
Gui, Add, Radio, x248 y96 vemuRad5A gemuRad5A %tmpvis%, emuRad5A
Gui, Add, Radio, x248 y120 vemuRad5B gemuRad5B %tmpvis%, emuRad5B
Gui, Add, Radio, x248 y144 vemuRad5C gemuRad5C %tmpvis%, emuRad5C
Gui, Add, ListBox, x128 y448 w120 h30 vemuLBXB gemuLBXB %tmpvis%, emuLBXB||
Gui, Add, ListView, x128 y424 w120 h19 vemuLVA gemuLVA %tmpvis%, emuLVA||
Gui, Add, Radio, x376 y192 vemuRad6A gemuRad6A %tmpvis%, emuRad6A
Gui, Add, Radio, x376 y216 vemuRad6B gemuRad6B %tmpvis%, emuRad6B
Gui, Add, Radio, x376 y240 vemuRad6C gemuRad6C %tmpvis%, emuRad6C
Gui, Add, Radio, x376 y264 vemuRad6D gemuRad6D %tmpvis%, emuRad6D
Gui, Add, ListView, x128 y480 w121 h27 vemuLVB gemuLVB %tmpvis%, emuLVB||
Gui, Add, Radio, x376 y320 vemuRad7A gemuRad7A %tmpvis%, emuRad7A
Gui, Add, Radio, x376 y344 vemuRad7B gemuRad7B %tmpvis%, emuRad7B
Gui, Add, ListView, x496 y120 w141 h53 vemuLVC gemuLVC %tmpvis%, emuLVC||
Gui, Add, Progress, x504 y296 w120 h20 -Smooth vemuPRGB %tmpvis%, 0
Gui, Add, Radio, x504 y440 vemuRad9A gemuRad9A %tmpvis%, emuRad9A
Gui, Add, Radio, x504 y464 vemuRad9B gemuRad9B %tmpvis%, emuRad9B
Gui, Add, Radio, x504 y488 vemuRad9C gemuRad9C %tmpvis%, emuRad9C
Gui, Add, Progress, x504 y320 w120 h20 -Smooth vemuPRGA %tmpvis%, 0
Gui, Add, Radio, x376 y464 vemuRad8A gemuRad8A %tmpvis%, emuRad8A
Gui, Add, Radio, x376 y488 vemuRad8B gemuRad8B %tmpvis%, emuRad8B
Gui, Add, Radio, x640 y168 vemuRad10A gemuRad10A %tmpvis%, emuRad10A
Gui, Add, Radio, x640 y192 vemuRad10B gemuRad10B %tmpvis%, emuRad10B
Gui, Add, Slider, x128 y288 w120 h32 Range0-100 vemuSLDA gemuSLDA  %tmpvis%, 0
Gui, Add, Slider, x128 y320 w120 h32 Range0-100 vemuSLDB gemuSLDB %tmpvis%, 0
Gui, Add, Slider, x128 y352 w120 h32 Range0-100 vemuSLDD gemuSLDD %tmpvis%, 0 
Gui, Add, Slider, x504 y368 w120 h24 Range0-100 vemuSLDE gemuSLDE %tmpvis%, 0 
Gui, Add, Slider, x602 y408 w151 h25 Range0-100 vemuSLDC gemuSLDC %tmpvis%, 0
Gui, Add, Radio, x640 y240 vemuRad11A gemuRad11A %tmpvis%, emuRad11A
Gui, Add, Radio, x640 y264 vemuRad11B gemuRad11B %tmpvis%, emuRad11B
Gui, Add, Text, x248 y240 vemuTXTA %tmpvis%, emuTXTA
Gui, Add, Text, x248 y264 vemuTXTB %tmpvis%, emuTXTB
Gui, Add, Text, x248 y288 vemuTXTC %tmpvis%, emuTXTC
Gui, Add, Text, x376 y368 vemuTXTD %tmpvis%, emuTXTD
Gui, Add, Text, x376 y392 vemuTXTE %tmpvis%, emuTXTE
Gui, Add, Text, x376 y416 vemuTXTF %tmpvis%, emuTXTF
Gui, Add, Text, x376 y440 vemuTXTG %tmpvis%, emuTXTG
Gui, Add, Text, x640 y344 vemuTXTH %tmpvis%, emuTXTH
Gui, Add, Text, x640 y368 vemuTXTI %tmpvis%, emuTXTI
Gui, Add, Text, x696 y344 vemuTXTJ %tmpvis%, emuTXTJ
Gui, Add, Text, x696 y368 vemuTXTK %tmpvis%, emuTXTK
Gui, Add, Text, x624 y488 vemuTXTL %tmpvis%, emuTXTL
Gui, Add, Text, x560 y24 vemuTXTM %tmpvis%, emuTXTM
Gui, Add, Text, x688 y24 vemuTXTN %tmpvis%, emuTXTN
Gui, Add, Text, x688 y48 vemuTXTO %tmpvis%, emuTXTO
Gui, Add, Text, x688 y72 vemuTXTP %tmpvis%, emuTXTP
Gui, Add, Text, x688 y96 vemuTXTQ %tmpvis%, emuTXTQ
Gui, Add, Text, x505 y400 vemuTXTR %tmpvis%, emuTXTR
Gui, Add, Text, x504 y416 vemuTXTS %tmpvis%, emuTXTS
Gui, Add, Text, x504 y432 vemuTXTT %tmpvis%, emuTXTT


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading....,
;{;;;;;;;;;;;;;;;;;;;;;;;;        [[ JOYSTICK TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui, Tab, 3
Gui,Font,s7 JoyPad-CFG
Gui, Add, Picture, x335 y263 w117 h111 vJOYPIC, emu.png
Gui,Font,s7 Bold
Gui, Add, GroupBox, x16 y13 w94 h116 vJOYDRVGRP, Joystick Driver
Gui,Font,s7 Norm 
Gui, Add, Radio, x24 y29 h23 vJHIDDRV gJoyDriver, HID
Gui, Add, Radio, x24 y53 h23 vJDINDRV gJoyDriver, DInput
Gui, Add, Radio, x24 y77 h23 vJXINDRV gJoyDriver Checked, XInput
Gui, Add, Radio, x24 y101 h23 vJSDLDRV gJoyDriver, SDL

Gui,Font,s7 Bold
Gui, Add, GroupBox, x115 y13 w80 h70 vINPDRVGRP, Input Driver
Gui,Font, Normal
Gui, Add, Radio, x123 y30 h13 vIDDINP gInputDrv Checked, dinput
Gui, Add, Radio, x123 y48 h13 vIDSDLINP gInputDrv, SDL2
Gui, Add, Radio, x123 y64 h13 vIDRAW gInputDrv, raw

Gui,Font,s7 Bold
Gui, Add, GroupBox, x46 y259 w216 h120 vLASTKGRP, Left Analog Stick
Gui, Add, GroupBox, x512 y259 w216 h120 vRASTKGRP, Right Analog Stick
Gui, Add, GroupBox, x46 y386 w215 h90 vDPADGRP, Directional Pad
Gui, Add, GroupBox, x523 y101 w232 h91 vCIREMAPGRP, Core-input-remapping
Gui,Font,s7 Norm 
JOYCFGMODE= core
Gui,Font,Bold
Gui,Font,s9
Gui, Add, DropDownList, x532 y128 w205 vJOYCORE gJOYCORE, Global||%corelist%|Xpadder|Antimicro%addemu%
Gui,Font,s7 Norm 
Gui, Add, Button, x738 y127 w13 h23 vJCFGADD gJCfgAdd, +
Gui, Add, ComboBox, x527 y155 w184 vJCFGEDT gJCfgEdt +0x2 +E0x5000 Right hidden,|%joycfg%||%curcfg%
Gui, Add, Button, x715 y155 w36 h20 vSAVEJOY gSaveJOY hidden, save

Gui, Add, Text, x721 y427 h23 +0x200 vBbutTXT, (1)
Gui, Add, Text, x614 y381 h17 +0x200 vYbutTXT, (3)
Gui, Add, Text, x501 y426 h23 +0x200 vXbutTXT, (2)
Gui, Add, Text, x616 y478 h13 +0x200 vAbutTXT, (0)
Gui, Add, Text, x120 y336 h23 +0x200 vL3butTXT,(8)[L3] 
Gui, Add, Text, x617 y337 h23 +0x200 vR3butTXT,[R3](9) 
Gui, Add, Text, x66 y197 h23 +0x200 vLTrigTXT, Left Trigger
Gui, Add, Text, x628 y199 h23 +0x200 vRTrigTXT, Right Trigger
Gui, Add, Text, x175 y221 h23 vLbutTXT, (4)Left Bumper
Gui, Add, Text, x678 y221 h23 +0x200 vRbutTXT, Right Bumper(5)
;;gui, Add, Text, x349 y297 h23 +0x200 Disabled vHBTNTXT, Home Button
Gui, Add, Text, x325 y405 h16 vSELECTbutTXT, (6)Select
Gui, Add, Text, x427 y405 h16 vSTARTbutTXT, (7)Start
Gui,Font,s7 Bold
Gui, Add, GroupBox, x307 y6 w150 h110 Center vCFGPLGRP, Configure Player
Gui,Font,s7 Norm 
Gui, Add, Text, x463 y6 w170 h90 vINDWRN Disabled, Confg Hints
Gui, Add, Button, x220 y17 w60 h18 vCLRPLYR gClrPlyr, CLEAR
Gui, Add, Button, x220 y40 w60 h18 vRSTPLYR gResetPlayerJoy, RESET
Gui, Add, Text, x197 y63 vDEFPLCTRLGRP,Default Player Controls
Gui,Font,s7 Bold
Gui, Add, GroupBox, x248 y118 w273 h59 vHOTKGRP, Hotkeys
Gui,Font,s7 Norm
Gui, Add, Radio, x317 y24 h13 vJSW gPlayerType Checked, Joystick
Gui, Add, Radio, x383 y24 h13 vKSW gPlayerType, Keyboard

Gui, Add, ComboBox, x409 y136 w75 vHKEYCB gHotkeyWrite, nul||%JOYSET%
Gui, Add, DDL, x254 y137 w139 vHKEYDD ghkDrpDwn, inputEnableHotkey||%hkDDL%
Gui, Add, Text, x373 y42 h23 +0x200 vJYPLTXt, Player
Gui, Add, DDL, x409 y42 w40  vPLAYERN gPlyrDrpDwn, 1||1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16
Gui, Add, Text, x146 y135 h23 +0x200 vMENBUTCMBTXT, Menu-Button-Combo
Gui, Add, Text, x103 y160 w121 +0x200 vDSPLGC disabled, None 
Gui, Add, DropDownList,x102 y136 w40 vMGPC gGamepadCombo, 0||0|1|2|3
Gui, Add, Text, x31 y132 h23 +0x200 vMXUSRTXT, Max Users
Gui, Add, DropDownList, x34 y158 w40 vMXUSR gMaxUsers, 5||1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16
Gui, Add, CheckBox, x605 y5 h18 +0x20 vSWAPOKC gSwapOKC, Swap OK/Cancel Buttons
Gui, Add, CheckBox, x624 y24 h18 +0x20 vADJS gAutoDetectJoy Checked, Auto-Detect Joysticks
Gui, Add, CheckBox, x664 y44 h18 +0x20 vREMPB gRemapBinds Checked, Remap Binds
Gui, Add, CheckBox, x633 y64 h18 +0x20 vKBGP gKeyboardGamepad Checked, Keyboard Gamepad
Gui, Add, CheckBox, x656 y84 h18 +0x20 vAUM gAllMenu, All-Users Menu
Gui, Add, Text, x334 y65 h23 +0x200 vJPINDX, Joystick Index
Gui, Add, DropDownList, x409 y65 w40 vJOYIND gJoypadIndex, 0||0|1|2|3|4|5|6|7|8
Gui, Add, Text, x339 y91, Mouse Index
Gui, Add, DropDownList, x409 y88 w40 vMOUSEIND gMouseIndex, 0||0|1|2|3|4|5|6|7|8
Gui,Font,Bold
Gui, Add, GroupBox, x314 y419 w160 h80 Center vANLDZGRP,Analog DeadZone
Gui, Font, Normal
;;gui, Add, Text, x349 y429 h18 vANLDZTXT, Analog DeadZone
Gui, Add, Text, x320 y448 w130 h18 vDEDZTXT Center, 0.%dedz%
Gui, Add, Slider, x320 y472 w152 h24 Range0-100000 vDEDZ gDedZ, %dedzmult%

Gui, Add, CheckBox, x118 y112 w83 h16 vUNIFMENU gUnifMenu, Unified Menu
Gui, Add, DropDownList, x158 y88 w100 vPOLLING gPolling, Early|Normal|Late||
Gui, Add, Text, x268 y91 w34 h15 vPOLTXT, Polling

Gui, Add, GroupBox, x272 y173 w225 h70 vJBLNKGRP,
Gui, Add, Text, x437 y187 h18 vTRBPRD, Period
Gui, Add, Edit, x388 y184 w45 h21 vTURBOP gTURBOP Number, %inputTurboPeriod%
Gui, Add, UpDown, x412 y185 w17 h21 vTURBUD, 


Gui, Add, Text, x437 y209 h18 vDUTCTXT, Duty-Cycle
Gui, Add, Edit, x388 y209 w45 h21 vDUTYCYCLE gDutyCycle Number, %inputDutyCycle%
Gui, Add, UpDown, x405 y209 w17 h21 vDUTYUD, 


Gui, Add, CheckBox, x665 y110 h15 vRMPLOAD gRmpLoad checked, Auto-Load

Gui, Add, CheckBox, x49 y363 vANLDP gDpadMode, DPad Mode

Gui, Add, Text, x280 y213 h17 vTRBTXT, Terbo-hotkey

;{;;;;;;;;;;;;;;;    == Buttons ==    ;;;;;;;;;;;;;;;;;;;;;;
Gui, Add, Button, x355 y192 w20 h20 vTURBOIN gTURBOIN, +
Gui, Add, Button, x206 y202 w20 h20 vLTRIGIN gLTRGIN, +
Gui, Add, Button, x151 y222 w20 h20 vLBUMPIN gLBMPIN, +
Gui, Add, Button, x598 y202 w20 h20 vRTRIGIN gRTRGIN, +
Gui, Add, Button, x649 y225 w20 h20 vRBUMPIN gRBMPIN, +
Gui, Add, Button, x180 y277 w20 h20 vLSTICKUPIN gLSTUIN, +
Gui, Add, Button, x132 y298 w20 h20 vLSTICKLFTIN gLSTLIN, +
Gui, Add, Button, x233 y299 w20 h20 vLSTICKRTIN gLSTRIN, +
Gui, Add, Button, x180 y319 w20 h20 vLSTICKDWNIN gLSTDIN, +
Gui, Add, Button, x230 y339 w20 h20 vLSTICKBUTIN gLSTBIN, +
Gui, Add, Button, x645 y280 w20 h20 vRSTICKUPIN gRSTUIN, +
Gui, Add, Button, x596 y300 w20 h20 vRSTICKLFTIN gRSTLIN, +
Gui, Add, Button, x697 y300 w20 h20 vRSTICKRTIN gRSTRIN, +
Gui, Add, Button, x645 y321 w20 h20 vRSTICKDWNIN gRSTDIN, +
Gui, Add, Button, x596 y341 w20 h20 vRSTICKBUTIN gRSTBIN, +
Gui, Add, Button,x179 y444 w20 h20 vDPADDWNIN gDPDDIN, +
Gui, Add, Button, x179 y401 w20 h20 vDPADUPIN gDPDUIN, +
Gui, Add, Button,x128 y423 w20 h20 vDPADLFTIN gDPDLIN, +
Gui, Add, Button,x229 y423 w20 h20 vDPADRTIN gDPDRIN, +
Gui, Add, Button, x375 y386 w20 h20 vSLCTBUTIN gSLCTBIN, +
Gui, Add, Button, x476 y386 w20 h20 vSTRTBUTIN gSTRTBIN, +
Gui, Add, Button, x642 y405 w20 h20 vYBUTIN gYBIN, +
Gui, Add, Button, x590 y428 w20 h20 vXBUTIN gXBIN, +
Gui, Add, Button,x641 y450 w20 h20 vBBUTIN gBBIN, +
Gui, Add, Button, x691 y428 w20 h20 vABUTIN gABIN, +
Gui, Add, Button, x484 y137 w20 h20 vINPBUTIN gINPBIN, +
;};;;;;;

;{;;;;;;;;;;;;;;     == ComboBoxes ==    ;;;;;;;;;;;
Gui, Add, ComboBox, x280 y191 w75 vTRBCMB gTrbCmb, nul||%JOYSET%
Gui, Add, ComboBox, x521 y300 w75  vRXMinus gRXMinus, \-2||%JOYSET%
Gui, Add, ComboBox, x570 y279 w75  vRYPlus gRYPlus, \-3||%JOYSET%
Gui, Add, ComboBox, x574 y224 w75  vR gr, 5||%JOYSET%
Gui, Add, ComboBox, x76 y221 w75  vL gl, 4||%JOYSET%
Gui, Add, ComboBox, x622 y300 w75  vRXPlus gRXPlus, +2||%JOYSET%
Gui, Add, ComboBox, x570 y320 w75  vRYMinus gRYMinus, +3||%JOYSET%
Gui, Add, ComboBox, x521 y340 w75  vR3 gR3, 9||%JOYSET%
Gui, Add, ComboBox, x155 y340 w75  vL3 gL3, 8||%JOYSET%
Gui, Add, ComboBox, x57 y298 w75  vLXMinus gLXMinus, \-0||%JOYSET%
Gui, Add, ComboBox, x105 y277 w75  vLYPlus gLYPlus, \-1||%JOYSET%
Gui, Add, ComboBox, x105 y318 w75  vLYMinus gLYMinus, +1||%JOYSET%
Gui, Add, ComboBox, x158 y298 w75  vLXPlus gLXPlus, +0||%JOYSET%
Gui, Add, ComboBox, x300 y385 w75  vselect gselect, 6||%JOYSET%
Gui, Add, ComboBox, x401 y385 w75  vstart gstart, 7||%JOYSET%
Gui, Add, ComboBox, x104 y401 w75  vup gup, h0up||%JOYSET%
Gui, Add, ComboBox, x53 y422 w75  vleft gleft, h0left||%JOYSET%
Gui, Add, ComboBox, x154 y422 w75  vright gright, h0right||%JOYSET%
Gui, Add, ComboBox, x104 y443 w75  vdown gdown, h0down||%JOYSET%
Gui, Add, ComboBox, x567 y404 w75  vY gy, 3||%JOYSET%
Gui, Add, ComboBox, x515 y427 w75  vX gx, 2||%JOYSET%
Gui, Add, ComboBox, x566 y449 w75  vB gb, 0||%JOYSET%
Gui, Add, ComboBox, x616 y427 w75  vA ga, 1||%JOYSET%
Gui, Add, ComboBox, x131 y201 w75  vl2 gl2, +5||%JOYSET%
Gui, Add, ComboBox, x523 y202 w75  vr2 gr2, +4||%JOYSET%
;;gui, Add, ComboBox, x327 y274 w75  vHome gHome Disabled, nul||%JOYSET%
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    == EMULATION CONTROLS ==    ;;;;;;;;;;;;;;;;;;;;;;
emjtog= Hide
emjvis= Hidden
Gui,Font,s7 Bold
Gui, Add, GroupBox, x16 y13 w94 h116 vemjAGRP Hidden, emjAGRP
Gui,Font,s7 Norm 
Gui, Add, Radio, x24 y29 h23 vemjRAD1A gemjRAD1A Hidden, emjRAD1A
Gui, Add, Radio, x24 y53 h23 vemjRAD1B gemjRAD1B Hidden, emjRAD1B
Gui, Add, Radio, x24 y77 h23 vemjRAD1C gemjRAD1C Hidden, emjRAD1C
Gui, Add, Radio, x24 y101 h23 vemjRAD1D gemjRAD1D Hidden, emjRAD1D

Gui,Font,s7 Bold
Gui, Add, GroupBox, x115 y13 w80 h70 vemjBGRP Hidden, emjBGRP
Gui,Font, Normal
Gui, Add, Radio, x123 y30 h13 vemjRAD2A gemjRAD2A Hidden, emjRAD2A
Gui, Add, Radio, x123 y48 h13 vemjRAD2B gemjRAD2B Hidden, emjRAD2B
Gui, Add, Radio, x123 y64 h13 vemjRAD2C gemjRAD2C Hidden, emjRAD2C

Gui,Font,s7 Bold
Gui, Add, GroupBox, x46 y259 w216 h120 vemjCGRP Hidden, Left Analog Stick
Gui, Add, GroupBox, x512 y259 w216 h120 vemjDGRP Hidden, Right Analog Stick
Gui, Add, GroupBox, x46 y386 w215 h90 vemjEGRP Hidden, Directional Pad
Gui, Add, GroupBox, x523 y101 w232 h91 vemjFGRP Hidden, emjFGRP
Gui,Font,s7 Norm 

Gui, Add, Text, x721 y427 h23 +0x200 vemjATXT Hidden, (1)
Gui, Add, Text, x614 y381 h17 +0x200 vemjBTXT Hidden, (3)
Gui, Add, Text, x501 y426 h23 +0x200 vemjCTXT Hidden, (2)
Gui, Add, Text, x616 y478 h13 +0x200 vemjDTXT Hidden, (0)
Gui, Add, Text, x120 y336 h23 +0x200 vemjETXT Hidden, (8)[L3] 
Gui, Add, Text, x617 y337 h23 +0x200 vemjFTXT Hidden, (9)[R3] 
Gui, Add, Text, x66 y197 h23 +0x200 vemjGTXT Hidden, Left Trigger
Gui, Add, Text, x628 y199 h23 +0x200 vemjHTXT Hidden, Right Trigger
Gui, Add, Text, x175 y221 h23 +0x200 vemjITXT Hidden, (4)Left Bumper
Gui, Add, Text, x678 y221 h23 +0x200 vemjJTXT Hidden, (5)Right Bumper
;;gui, Add, Text, x349 y297 h23 +0x200 vemjKTXT Hidden, Home Button
Gui, Add, Text, x325 y405 h16 vemjLTXT Hidden, (6)Select
Gui, Add, Text, x427 y405 h16 vemjMTXT Hidden, (7)Start
Gui,Font,s7 Bold
Gui, Add, GroupBox, x307 y6 w150 h105 Center vemjHGRP Hidden, emjHGRP
Gui,Font,s7 Norm 
Gui, Add, Text, x463 y6 w170 h90 vemjNTXT Hidden, emjNTXT
Gui, Add, Button, x220 y17 w60 h18 vemjBUTB gemjBUTB Hidden, emjBUTB
Gui, Add, Button, x220 y40 w60 h18 vemjBUTA gemjBUTA Hidden, emjBUTA
Gui, Add, Text, x197 y63 vemjOTXT Hidden,emjOTXT
Gui,Font,s7 Bold
Gui, Add, GroupBox, x248 y118 w273 h59 vemjGGRP Hidden, emjGGRP
Gui,Font,s7 Norm
Gui, Add, Radio, x317 y32 h13 vemjRAD3A gemjRAD3A Hidden, emjRAD3A
Gui, Add, Radio, x383 y32 h13 vemjRAD3B gemjRAD3B Hidden, emjRAD3B

Gui, Add, ComboBox, x409 y136 w75 vemjCBA gemjCBA Hidden, emjCBA||
Gui, Add, DDL, x254 y137 w139 vemjDDLA gemjDDLA Hidden, emjDDLA||
Gui, Add, Text, x373 y50 h23 +0x200 vemjPTXT Hidden, emjPTXT
Gui, Add, DDL, x409 y50 w40  vemjDDLB gemjDDLB Hidden, emjDDLB||
Gui, Add, Text, x146 y135 h23 +0x200 vemjQTXT Hidden, emjQTXT
Gui, Add, Text, x103 y160 w121 +0x200 vemjRTXT Hidden,emjRTXT 
Gui, Add, DropDownList,x102 y136 w40 vemjDDLC gemjDDLC Hidden, emjDDLC||
Gui, Add, Text, x31 y132 h23 +0x200 vemjSTXT Hidden, emjSTXT
Gui, Add, DropDownList, x34 y158 w40 vemjDDLD gemjDDLD Hidden, emjDDLD||
Gui, Add, CheckBox, x605 y5 h18 +0x20 vemjCHKA gemjCHKA Hidden, emjCHKA
Gui, Add, CheckBox, x624 y24 h18 +0x20 vemjCHKB gemjCHKB Hidden, emjCHKB
Gui, Add, CheckBox, x664 y44 h18 +0x20 vemjCHKC gemjCHKC Hidden, emjCHKC
Gui, Add, CheckBox, x633 y64 h18 +0x20 vemjCHKD gemjCHKD Hidden, emjCHKD
Gui, Add, CheckBox, x656 y84 h18 +0x20 vemjCHKE gemjCHKE Hidden, emjCHKE
Gui, Add, Text, x334 y77 h23 +0x200 vemjTTXT Hidden, emjTTXT
Gui, Add, DropDownList, x409 y77 w40 vemjDDLE gemjDDLE Hidden, emjDDLE||
Gui,Font,Bold
Gui, Add, GroupBox, x314 y419 w160 h80 Center vemjJGRP Hidden,emjJGRP
Gui, Font, Normal
;;gui, Add, Text, x349 y429 h18 vemjUTXT Hidden, emjUTXT
Gui, Add, Text, x320 y448 w130 h18 vemjVTXT Center Hidden, emjUTXT
Gui, Add, Slider, x320 y472 w152 h24 Range0-100000 vemjSLDA gemjSLDA Hidden, emjSLDA

Gui, Add, CheckBox, x118 y112 w83 h16 vemjCHKF gemjCHKF Hidden, emjCHKF
Gui, Add, DropDownList, x158 y88 w100 vemjDDLF gemjDDLF Hidden, emjDDLF||
Gui, Add, Text, x268 y91 w34 h15 vemjWTXT Hidden, emjWTXT

Gui, Add, GroupBox, x272 y173 w225 h70 vemjIGRP Hidden,
Gui, Add, Text, x437 y187 h18 vemjXTXT Hidden, emjXTXT
Gui, Add, Edit, x388 y184 w45 h21 vemjEDTA gemjEDTA Hidden, emjEDTA
Gui, Add, UpDown, x412 y185 w17 h21 vemjUDA Hidden, 

Gui, Add, CheckBox, x665 y110 h15 vemjCHKH gemjCHKH hidden, emjCHKH

Gui, Add, Text, x437 y209 h18 vemjYTXT Hidden, emjYTXT
Gui, Add, Edit, x388 y209 w45 h21 vemjEDTB gemjEDTB Number Hidden,
Gui, Add, UpDown, x405 y209 w17 h21 vemjUDB Hidden, 

Gui, Add, CheckBox, x49 y363 vemjCHKG gemjCHKG Hidden, emjCHKG
Gui, Add, Text, x280 y213 h17 vemjZTXT Hidden, emjZTXT

;{;;;;;;;;;;;;;  ==Emu Buttons==  ;;;;;;;;;;;;;;;;;;
Gui, Add, Button, x355 y192 w20 h20 vemjTURBOIN gemjTURBOIN Hidden, +
Gui, Add, Button, x206 y202 w20 h20 vemjLTRIGIN gemjLTRIGIN Hidden, +
Gui, Add, Button, x151 y222 w20 h20 vemjLBUMPIN gemjLBUMPIN Hidden, +
Gui, Add, Button, x598 y202 w20 h20 vemjRTRIGIN gemjRTRIGIN Hidden, +
Gui, Add, Button, x649 y225 w20 h20 vemjRBUMPIN gemjRBUMPIN Hidden, +
Gui, Add, Button, x180 y277 w20 h20 vemjLSTICKUPIN gemjLSTICKUPIN Hidden, +
Gui, Add, Button, x132 y298 w20 h20 vemjLSTICKLFTIN gemjLSTICKLFTIN Hidden, +
Gui, Add, Button, x233 y299 w20 h20 vemjLSTICKRTIN gemjLSTICKRTIN Hidden, +
Gui, Add, Button, x180 y319 w20 h20 vemjLSTICKDWNIN gemjLSTICKDWNIN Hidden, +
Gui, Add, Button, x230 y339 w20 h20 vemjLSTICKBUTIN gemjLSTICKBUTIN Hidden, +
Gui, Add, Button, x645 y280 w20 h20 vemjRSTICKUPIN gemjRSTICKUPIN Hidden, +
Gui, Add, Button, x596 y300 w20 h20 vemjRSTICKLFTIN gemjRSTICKLFTIN Hidden, +
Gui, Add, Button, x697 y300 w20 h20 vemjRSTICKRTIN gemjRSTICKRTIN Hidden, +
Gui, Add, Button, x645 y321 w20 h20 vemjRSTICKDWNIN gemjRSTICKDWNIN Hidden, +
Gui, Add, Button, x596 y341 w20 h20 vemjRSTICKBUTIN gemjRSTICKBUTIN Hidden, +
Gui, Add, Button,x179 y444 w20 h20 vemjDPADDWNIN gemjDPADDWNIN Hidden, +
Gui, Add, Button, x179 y401 w20 h20 vemjDPADUPIN gemjDPADUPIN Hidden, +
Gui, Add, Button,x128 y423 w20 h20 vemjDPADLFTIN gemjDPADLFTIN Hidden, +
Gui, Add, Button,x229 y423 w20 h20 vemjDPADRTIN gemjDPADRTIN Hidden, +
Gui, Add, Button, x375 y386 w20 h20 vemjSLCTBUTIN gemjSLCTBUTIN Hidden, +
Gui, Add, Button, x476 y386 w20 h20 vemjSTRTBUTIN gemjSTRTBUTIN Hidden, +
Gui, Add, Button, x642 y405 w20 h20 vemjYBUTIN gemjYBUTIN Hidden, +
Gui, Add, Button, x590 y428 w20 h20 vemjXBUTIN gemjXBUTIN Hidden, +
Gui, Add, Button,x641 y450 w20 h20 vemjBBUTIN gemjBBUTIN Hidden, +
Gui, Add, Button, x691 y428 w20 h20 vemjABUTIN gemjABUTIN Hidden, +
Gui, Add, Button, x484 y137 w20 h20 vemjINPBUTIN gemjINPBUTIN Hidden, +
;};;;;;;

;{;;;;;;;;;;;;;;     ==  EmuComboBoxes ==    ;;;;;;;;;;;
Gui, Add, ComboBox, x280 y191 w75 vemjTRBCMB gemjTRBCMB Hidden, 
Gui, Add, ComboBox, x521 y300 w75  vemjRXMinus gemjRXMinus Hidden,
Gui, Add, ComboBox, x570 y279 w75  vemjRYPlus gemjRYPlus Hidden,
Gui, Add, ComboBox, x574 y224 w75  vemjR gemjR Hidden,
Gui, Add, ComboBox, x76 y221 w75  vemjL gemjL Hidden,
Gui, Add, ComboBox, x622 y300 w75  vemjRXPlus gemjRXPlus Hidden,
Gui, Add, ComboBox, x570 y320 w75  vemjRYMinus gemjRYMinus Hidden,
Gui, Add, ComboBox, x521 y340 w75  vemjR3 gemjR3 Hidden,
Gui, Add, ComboBox, x155 y340 w75  vemjL3 gemjL3 Hidden,
Gui, Add, ComboBox, x57 y298 w75  vemjLXMinus gemjLXMinus Hidden, 
Gui, Add, ComboBox, x105 y277 w75  vemjLYPlus gemjLYPlus Hidden,
Gui, Add, ComboBox, x105 y318 w75  vemjLYMinus gemjLYMinus Hidden,
Gui, Add, ComboBox, x158 y298 w75  vemjLXPlus gemjLXPlus Hidden,
Gui, Add, ComboBox, x300 y385 w75  vemjselect gemjselect Hidden,
Gui, Add, ComboBox, x401 y385 w75  vemjstart gemjstart Hidden,
Gui, Add, ComboBox, x104 y401 w75  vemjup gemjup Hidden,
Gui, Add, ComboBox, x53 y422 w75  vemjleft gemjleft Hidden,
Gui, Add, ComboBox, x154 y422 w75  vemjright gemjright Hidden,
Gui, Add, ComboBox, x104 y443 w75  vemjdown gemjdown Hidden,
Gui, Add, ComboBox, x567 y404 w75  vemjY gemjY Hidden,
Gui, Add, ComboBox, x515 y427 w75  vemjX gemjX Hidden,
Gui, Add, ComboBox, x566 y449 w75  vemjB gemjB Hidden,
Gui, Add, ComboBox, x616 y427 w75  vemjA gemjA Hidden,
Gui, Add, ComboBox, x131 y201 w75  vemjl2 gemjl2 Hidden,
Gui, Add, ComboBox, x523 y202 w75  vemjr2 gemjr2 Hidden,
;;gui, Add, ComboBox, x327 y274 w75  vemjHome gemjHome Disabled Hidden,

;};;;;;;;;;;;;


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading...,
;{;;;;;;;;;;;;;;;;;;;;;;;;        [[ PLAYLISTS TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Gui, Tab, 4
Gui, Tab, Playlists
Gui, Add, DropDownList,x24 y22 w283 vDWNLPOS gPopDownloads, Downloads||%dwnlfldrs%
Gui, Add, CheckBox, x325 y15 w15 h16 vRECURSE gRECURSE hidden
Gui, Add, Text, x312 y31 w39 h13 vRECURTX hidden, Recurse

Gui, Add, Radio, x22 y46 vEXCLBOOL gINCLBool hidden checked, exclude
Gui, Add, Radio, x81 y46 vINCLBOOL gINCLBool hidden, include
Gui, Add, CheckBox, x137 y46 h17 vPARSEALL gParseAll hidden, All

Gui, Add, Radio, x22 y46 vRPOPDL gRPopDl checked, Directories
Gui, Add, Radio, x115 y46 vRPOPPL gRPopPl, Playlists

Gui, Add, ComboBox, x171 y44 w158 vEXTPARSED gExtParsed hidden, %omitxtv%
Gui, Add, Button, x329 y45 w22 h21 vFLTXT gFltXt hidden, F

Gui, Add, Listbox, x24 y66 w316 h420 vROMPOP gDragROM Multi +HScroll, %RomPLst%

Gui, Add, GroupBox, x356 y140 w58 h91 vPLGBA
Gui, Add, GroupBox, x391 y295 w58 h126 vPLGBB

Gui,Font,s7 Bold
Gui, Add, GroupBox, x447 y0 w295 h500 Right vPLGBC, Frontend
Gui, Add, GroupBox, x11 y4 w346 h493 +0x400000 vPLGBD, Drag and Drop ROMs here
Gui,Font,s7 Norm
Gui, Add, ListBox, x449 y100 w289 h394 HWNDinsel vCURPLST gCURPLST Multi +HScroll,
Gui, Add, UpDown, x740 y197 w15 h181 +0x800000 -16 vPLUPD hidden, 1

Gui, Add, GroupBox, x362 y3 w81 h74 vAPNDTYPGRP
Gui, Add, Radio, x365 y31 h13 vPLAPPND gPlaylistAppend, Append
Gui, Add, Radio, x365 y16 h13 vPLOVR gPlaylistAppend Checked, Overwrte
Gui, Add, CheckBox, x367 y46 h23 vZIPSEEK gZipSeek checked, Zip-Search

;;  Gui, Add, DropDownList, x457s y0 w120 vPLISTTYP gPLISTYP,XMB||%FELIST%
Gui,Font,Bold
Gui,Font,s9
Gui, Add, DropDownList, x457s y0 w120 vPLISTTYP gPLISTYP,XMB||EmulationStation
Gui,Font,s7 Norm
Gui, Add, DropDownList, x457s y31 w166 vPLCORE gPopulateCore disabled,||%runlist%
Gui, Add, CheckBox, x625 y29 h23 vDETECTCORE gDetectCore Checked, Detect
Gui, Add, Button,x678 y31 w60 h21 vSVPLST gSaveToPl, Create
Gui, Add, ComboBox, x450 y55 w252 vPLNAMEDT gPlaylistEdit, %sysposb%
Gui, Add, Button, x703 y54 w36 h23 vOPNPLST gOpnPlst, Open
Gui, Add, CheckBox, x541 y81 h14 +0x20 vPGCONFG gPLPerGameConfig disabled, Per-Game-Configs
Gui, Add, Button, x703 y54 w35 h23 vSVASPLST gSvAsPlst hidden, Save
Gui, Add, Button, x649 y78 w54 h19 vSVAPLST gAltTempl disabled, Template

Gui, Add, Button, x358 y150 w50 h18 vCPYPL gCopyToPl, +------>
Gui, Add, Text, x360 y170 vPLADPTXT, Add
Gui, Add, Button, x358 y191 w40 h19 vCLRPP gClearROMPop, 0=-->x
Gui, Add, Text, x365 y211 vPLCLRPTXT, Clear

Gui, Add, Button, x392 y305 w55 h24 vBRADD gAddToPL, Select+>
Gui, Add, Text, x391 y334 w59 h2 0x10 vFENWTXT
Gui, Add, Button,x396 y339 w50 h18 vREMPL gRemFromPL, x---<---o
Gui, Add, Text, x401 y357 vPLRMVTXT, Remove
Gui, Add, Button, x403 y381 w40 h19 vCLRPL gClearCurList, x<--=0
Gui, Add, Text, x416 y401 vPLCLRTXT, Clear

Gui, Add, Button, x367 y457 w75 h23 vPLINIT gPlaylistInit, Rebuild DB
Gui, Add, Text, x364 y483 h15 vPLDBTXT, Playlist Database

;;  EMULATION STATION ;;

Gui, Add, DropDownList, x451 y31 w90 vESPLCORE gESPOPCORE hidden,|Fuzzy-Match||Exact-Match|MAME-Match|
Gui, Add, CheckBox, x373 y52 h13 vESBACKUP gESBackupPl Checked hidden, Backup
Gui,Font,Bold
Gui, Add, Button,x678 y27 w60 h25 vESSVPL gESSavePl hidden, CREATE
Gui,Font,Normal
Gui, Add, ComboBox, x450 y55 w252 vESPLXMP gEsPlaylistNames hidden, %systmfldrs%|%escommon%
Gui, Add, Button, x703 y54 w36 h23 vESOPENPL gEsOpenPl hidden, Open
Gui, Add, CheckBox, x547 y23 w125 h13 vESUSESCR gESUSESCR hidden, Use Scraped Assets
Gui, Add, CheckBox, x572 y40 w97 h13 vESCPYSCR gESCPYSCR hidden disabled, `& copy to home

Gui, Add, DropDownList,x24 y22 w283 vESDWNLPOS gESPopDownloads,%systmfldrs%

Gui, Add, Radio, x22 y46 vESRPOPDL gESRPopJ checked hidden, Jackets
Gui, Add, Radio, x80 y46 vESRPOPPL gESRPopMir hidden, Mirrors
Gui, Add, Radio, x135 y46 vESRPOPROM gESRPopRom hidden, ROMs
Gui, Add, DropDownList, x195 y44 vESMIRSEL gESMIRSEL hidden,|%CMIR1%||%MIRDDLOC%
Gui, Add, Button, x195 y44 w25 h19 vESROMROOT gESROMROOT hidden,. . .
Gui, Add, Text, x230 y46 w125 h19 vESRRTXT hidden, NOT SET
Gui, Add, Button, x450 y78 w46 h19 vESBOXSRCHBUT gESBOXSRCHBUT hidden, Boxarts
Gui, Add, CheckBox, x497 y81 w14 h14 disabled hidden vESBOXCHK
Gui, Add, Button, x522 y78 w47 h19 vESTHUMBSRCHBUT gESTHUMBSRCHBUT hidden, Thumbs
Gui, Add, CheckBox, x570 y81 w14 h14 disabled hidden vESTHMBCHK
Gui, Add, Button, x591 y78 w54 h19 vESMARQSRCHBUT gESMARQSRCHBUT hidden, Marquees
Gui, Add, CheckBox, x645 y81 w14 h14 disabled hidden vESMRQCHK
Gui, Add, Button, x664 y78 w54 h19 vESVIDSRCHBUT gESVIDSRCHBUT hidden, Videos
Gui, Add, CheckBox, x718 y81 w14 h14 disabled hidden vESVIDCHK


;;  OPEN PLAYLIST FILE


Gui Add, CheckBox, x34 y320 w68 h23 vESKIDG gESKIDG hidden, Kid-Game
Gui Add, CheckBox, x124 y320 w55 h23 vESHIDDEN gESHIDDEN hidden, Hidden
Gui Add, CheckBox, x334 y225 w64 h20 vESFAV gESFAV hidden, Favorite

Gui, Add, Button, x662 y26 w75 h23 vESSAVEOPL gESSAVEOPL hidden, SAVE

Gui, Add, Text, x16 y27 w120 h13 vESNAMTXT hidden,Name
Gui, Add, Edit, x28 y41 w410 h21 vESNAMEDT gESNAMEDT hidden,

Gui, Add, Text, x19 y64 w120 h13 vESPTHTXT hidden,Path
Gui, Add, Edit, x30 y79 w370 h21 vESPTHEDT gESPTHEDT hidden,
Gui, Add, Button, x403 y79 w39 h20 vESROMPTHBUT gESROMPTHBUT hidden, . . .

Gui, Add, Text, x20 y103 w120 h13 vESDESCTXT hidden,Description
Gui, Add, Edit, x18 y120 w421 h99 vESDESCEDT gESDESCEDT hidden,

Gui, Add, Text, x307 y376 w40 h13 vESIMGTXT hidden,Image
Gui, Add, Button, x348 y389 w39 h19 vESIMGBUT gESIMGBUT hidden, . . .
Gui, Add, Text, x16 y392 w332 h13 vESOPNIMGPTHTXT hidden, ImagePath

Gui, Add, Text, x295 y411 w53 h13 vESTHMBTXT hidden, Thumbnail
Gui, Add, Button, x348 y421 w39 h19 vESTHUMBBUT gESTHUMBBUT hidden, . . .
Gui, Add, Text, x16 y425 w332 h13 vESTHUMBP hidden, ThumbnailPath

Gui, Add, Text, x311 y470 w37 h13 vESVIDTXT hidden,Video
Gui, Add, Button, x348 y480 w39 h19 vESVIDBUT gESVIDBUT hidden, . . .
Gui, Add, Text, x16 y484 w332 h13 vESVIDPTHTXT hidden, VideoPath

Gui, Add, Text, x298 y442 w50 h13 vESMARQTXT hidden,Marquee
Gui, Add, Button, x348 y453 w39 h19 vESMARQBUT gESMARQBUT hidden, . . .
Gui, Add, Text, x16 y456 w332 h13 vESMARQPTHTXT hidden, MarqueePath

Gui, Add, Text, x16 y229 w120 h13 vESPUBTXT hidden,Publisher
Gui, Add, Edit, x23 y245 w120 h21 vESPUBEDT gESPUBEDT hidden,
Gui, Add, Text, x152 y229 w120 h13 vESDEVTXT hidden,Developer
Gui, Add, Edit, x158 y244 w120 h21 vESDEVEDT gESDEVEDT hidden,

Gui, Add, Text, x290 y228 w40 h13 vESRATTXT hidden, Rating
Gui, Add, Slider, x284 y248 w120 h32 Range1-10 vESRATSLD gESRATSLD hidden, 0.5

Gui, Add, Text, x17 y273 w120 h13 vESRLSDTXT hidden, ReleaseDate
Gui, Add, DateTime, x44 y289 w100 h24 vESRLSDG gESRLSDG  hidden,

Gui, Add, Text, x161 y270 w49 h13 vESGENTXT hidden,Genre
Gui, Add, Edit, x161 y289 w120 h21 vESGENEDT gESGENEDT hidden,

Gui, Add, Text, x287 y291 w49 h13 vESPLNUMTXT hidden, Player#
Gui, Add, DropDownList, x342 y289 w35 vESDDPLNUM gESDDPLNUM hidden,1||2|3|4|5|6|7|8

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading....,
;{;;;;;;;;;;;;;;;;;;;;;;;;        [[ FRONTENDS TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Gui,Tab,5
Gui,Tab,Frontends

;{;;;;;;;;;;;;;;;;;  XMB ;;;;;;;;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x9 y8 w327 h180 vXMBGRP Center, Frontend
Gui,Font,s7 Norm 
Gui, Add, Text,x12 y27 h23 vMNUCLRTXT, Menu Colors
Gui, Add, Button, x235 y27 w49 h18 vCLRPICKR gColorPicker, Color
Gui, Add, DropDownList, x75 y25 w157 vCLRDDL gTextColor, Video Message||Menu Entry Normal|Menu Entry Hover|Menu Title
Gui, Add, Button, x52 y48 w39 h20 vOVRLBTN gOvrlBtn, Select
Gui, Add, Text, x12 y50 h16 +0x200 vOVRLYTXT, Overlay
Gui, Add, DropDownList, x92 y48 w185 vOVRLAY gOvrLay +0x2 +E0x5000 Right, Overlays||%ovr_list%
Gui, Add, CheckBox, x278 y50 h16 vOVRLTOG gOvrlTog, Enable
Gui, Add, CheckBox, x285 y66 w47 h17 +0x20 vOVRLMENU gOvrlMenu, Menu
Gui, Add, Text, x90 y117 vTHMTXT, Theme:
Gui, Add, DropDownList, x48 y113 w33 vRIBN gRibbon, 0||0|1|2
Gui ,Add, Text,x134 y117 w80 vRIBTXT, Full
Gui, Add, Text, x90 y73 vXICNTXT, Icon:
Gui, Add, Text, x120 y72 w100 h23 vICNTXT, %xmbTxt%
Gui, Add, DropDownList, x48 y69 w32 vXMBTHM gXMBThemeNum, 0||0|1|2
gui, Add,Text,x90 y96 vXMBCLRTHM, %XMBCLRTHM%
Gui, Add, DropDownList, x48 y91 w32 vCLRTHM gColorTheme, 0|1|2|3|4||5|6|7|8|9
Gui, Add, CheckBox, x217 y134 h18 vMOUSEON gEnableMouse, Enable Mouse
Gui, Add, CheckBox, x217 y151 h17 vDYNWALL gDynamicWall Checked, Dynamic Wallpaper
Gui, Add, CheckBox, x217 y169 h16 vSHADW gShadows, Shadows
Gui, Add, Text, x48 y136 h23 +0x200 vXMBSCLF, XMB Scale Factor  `%
Gui, Add, ComboBox, x152 y136 w55 vXMBSCL gXMBScale, 100||100|200|300
Gui, Add, Text, x48 y160 h23 +0x200 vXMBFTXT, XMB Font
Gui, Add, Button, x112 y160 vFONTSB gFontSel, Select Font
Gui, Add, DropDownList, x200 y85 w115 vOPACDDL gOpacityDDL, Wallpaper-Opacity||Header-Opacity|Footer-Opacity|Overlay-Opacity|Overlay-Scale
Gui, Add, Slider, x199 y109 w89 h21 vOPASLD gOpacitySlider, 75
Gui, Add, Edit, x291 y109 w37 h21 vOPAEDT gOpAEdt Number,

;{;;;;;;;;;;;;;;;  GLOBAL ;;;;;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x10 y192 w326 h314 vGLBMENSETGRP, Global Menu Settings
Gui,Font,s7 Norm 
Gui, Add, DropDownList, x48 y208 w169 vMNUACT gMenuButDDL, OK||Cancel|Info|ScrollUp|ScrollDown|Search
Gui, Add, ComboBox, x232 y208 w90 vMNUJOY gMenuJoy, 1||%JOYSET%
Gui, Add, CheckBox, x32 y264 w85 h13 vMNUPNT gMenuPointer, Menu Pointer
Gui, Add, CheckBox, x32 y236 w106 h13 vMNUFLT gMenuFilter Checked, Menu Linear Filter
Gui, Add, CheckBox, x32 y250 w111 h13 vTHRTL gThrottleMenu Checked, Throttle Frame-rate
Gui, Add, CheckBox, x32 y292 w94 h13 vPAUSMNU gPauseMenu, Pause In Menu
Gui, Add, CheckBox, x176 y251 w122 h13 vDATEMNU gShowDate Checked, Show Time and Date
Gui, Add, CheckBox, x32 y278 w135 h13 vNAVWRAP gNavigaionWrap Checked, Navigation Wraparound
Gui, Add, CheckBox, x176 y265 w86 h13 vSHWIMG gShowImages Checked, Show Images
Gui, Add, CheckBox, x176 y279 w80 h13 vSHWMSC gShowMusic Checked, Show Music
Gui, Add, CheckBox, x176 y293 w79 h13 vSHWVID gShowVideo Checked, Show Video
Gui, Add, CheckBox, x32 y334 w90 h13 vSHWSET gShowSettings Checked, Show Settings
Gui, Add, CheckBox, x32 y348 w142 h13 vSHWADV gShowAdvancedSettings Checked, Show Advanced Settings

Gui, Add, CheckBox, x176 y363 w120 h13 vMENSHOWCFG gShowConfigurations Checked, Show Configurations
Gui, Add, CheckBox, x176 y377 h13 vMENSHOWCUP gShowCoreUpdater Checked, Show Core Updater
Gui, Add, CheckBox, x32 y390 w110 h13 vMENSHOWHLP gShowHelp Checked, Show Help
Gui, Add, CheckBox, x32 y320 h13 vMENSHOWINFO gShowInformation Checked, Show Information
Gui, Add, CheckBox, x32 y418 vMENSHOWLDCONT gShowLoadContent Checked, Show Load Content
Gui, Add, CheckBox, x176 y391 h13 vMENSHOWLDCR gShowLoadCore Checked, Show Load Core 
Gui, Add, CheckBox, x176 y237 w121 h13 vMENSHOWONLUP gShowOnlineUpdater Checked, Show Online Updater 
Gui, Add, CheckBox, x32 y376 w69 h13 vMENSHOWQUIT gShowQuitRetroarch Checked, Show Quit
Gui, Add, CheckBox, x176 y405 w110 h13 vMENSHOWREB gShowReboot Checked, Show Reboot



Gui, Add, CheckBox, x176 y307 w84 h13 vSHWHIS gShowHistory Checked, Show History
Gui, Add, CheckBox, x176 y349 w110 h13 vSHWHID gShowHidden Checked, Show Hidden Files
Gui, Add, CheckBox, x32 y404 w110 h13 vCMPAN gCompanion Checked, Companion
Gui, Add, CheckBox, x32 y306 w72 h13 vSHWFPS gShowFPS, Show FPS
Gui, Add, CheckBox, x32 y362 w133 h13 vFILTEXT gFilterExt Checked, Filter Known Extensions
Gui, Add, CheckBox, x176 y335 w114 h13 vSHWBATLVL gShowBatteryLvl, Show Battery Level
Gui, Add, CheckBox, x176 y321 w121 h13 vSHWCOMPIN gShowImpCon, Show Import Content
Gui, Add, Text, x77 y432 h23 +0x200 vVMPSTXT, Video Message Position
Gui, Add, Edit, x197 y432 w55 h21 vVMSGX gVideoMesPosX, 0.050000
Gui, Add, Edit, x262 y432 w59 h21 vVMSGY gVideoMesPosY, 0.050000
Gui, Add, Text, x255 y425 h23 +0x200 vXMBGXTXT, x
Gui, Add, Text, x325 y422 h23 +0x200 vXMBGYTXT, y
Gui, Add, Checkbox, x175 y463 vVFNTEN gEnableFont Checked, VideoFont
Gui, Add, Text, x255 y455 h23 +0x200 vXMBGSZTXT,Size
Gui, Add, ComboBox, x280 y456 w40 vFNTSZ gFontSize, 32||12|24|32|48
Gui, Add, Text, x134 y477 h20 +0x200 Right vXMBGATXT, Alpha
Gui, Add, Slider,x30 y457 w103 h22 vXMBALF gAlphaSlider, 75
Gui, Add, Edit, x134 y457 w37 h21 vVIDAEDT gVidAEdt Number, 
Gui, Add, CheckBox, x187 y480 h24 +0x20 vDPIOVR gDPIOverride Checked, Override DPI
Gui, Add, ComboBox, x280 y480 w48 vDPIPT gDPISize, 200||200|300|100
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;; THUMNAILS ;;;;;;;;;;;;
Gui,Font,s7 Bold
Gui, Add, GroupBox, x343 y8 w415 h497 vXMBTHMBGRP Right, Thumbnails
Gui,Font,s7 Norm 
Gui, Add, DropDownList, x355 y30 w212 vMNUSYS gMenuSystem, Playlists||%plistNamz%
Gui, Add, Radio, x491 y55 h20 vBOXCVR gBoxThumb +0x20 Checked, Box-Cover
Gui, Add, Radio, x484 y73 h20 vTITLCVR gTitleThumb +0x20, Title Screen
Gui, Add, Radio, x487 y89 h20 vSSHTCVR gScreenShotThumb +0x20, Screenshot
Gui, Add, CheckBox, x507 y109 h20 vTHUMBON gThumbEnable +0x20 Checked, Enable
Gui, Add, CheckBox, x449 y129 h20 vSTHUMBON gSThumbEnable +0x20, SaveState Thumbs
Gui, Add, Radio, x356 y57 h15 vXMBPL gXMBPL Checked, Playlists
Gui, Add, Radio, x415 y57 h15 vXMBFL gXMBFL, Folder
Gui, Add, CheckBox, x415 y74 h13 vPLRCR gPLRCR disabled, Recurse
;;gui, Add, CheckBox, x415 y64 w64 h17 vTHMBREC gThmbRec Hidden, Recurse
Gui, Add, Text, x347 y140 h23 +0x200 Center vXMBNCTXT, New Image Name
Gui, Add, Text, x352 y190 vXMBSITXT, Select Image
Gui, Add, Button, x422 y190 w30 h16 vGTHMB gGetThumb, . . .
Gui, Add, Button, x525 y188 w40 h19 vSVTHMB gSaveThumbName, Save
Gui, Add, Edit, x348 y161 w220 h20 vTHMBNEDT gMatchThumbToROM, Match_File.png
Gui, Add, Picture, x570 y28 w183 h184 vIMGLOC gIMGLOC, Inv.png
Gui, Add, ListBox, x347 y218 w197 h290 +HScroll vROMFLS gGetROMName, PlaylistFiles
Gui, Add, ListBox, x552 y218 w204 h290 HwndIMGWIND +HScroll vIMGFLS gGetImageName, ImageFiles

;};;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading...,
;{;;;;;;;;;;;;;;;;;;;;;;;;;        FRONTEND GUI         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
fetog= Hide
fevis= Hidden
Gui, Add, Button, x128 y216 w75 h23 vfeBUTA gfeBUTA %fevis%, feBUTA
Gui, Add, Button, x128 y240 w75 h23 vfeBUTB gfeBUTB %fevis%, feBUTB
Gui, Add, Button, x128 y264 w75 h23 vfeBUTC gfeBUTC %fevis%, feBUTC
Gui, Add, Button, x368 y120 w75 h23 vfeBUTG gfeBUTG %fevis%, feBUTG
Gui, Add, Button, x368 y48 w75 h23 vfeBUTD gfeBUTD %fevis%, feBUTD
Gui, Add, Button, x368 y72 w75 h23 vfeBUTE gfeBUTE %fevis%, feBUTE
Gui, Add, Button, x368 y96 w75 h23 vfeBUTF gfeBUTF %fevis%, feBUTF
Gui, Add, Button, x640 y120 w75 h23 vfeBUTH gfeBUTH %fevis%, feBUTH
Gui, Add, Button, x640 y144 w75 h23 vfeBUTI gfeBUTI %fevis%, feBUTI
Gui, Add, Button, x689 y480 w66 h23 vfeBUTJ gfeBUTJ %fevis%, feBUTJ
Gui, Add, Button, x689 y480 w66 h23 vfeBUTK gfeBUTK %fevis%, feBUTK
Gui, Add, Button, x689 y480 w66 h23 vfeBUTL gfeBUTL %fevis%, feBUTL
Gui, Add, Button, x689 y480 w66 h23 vffeBUTM gfeBUTM %fevis%, feBUTM
Gui, Add, Picture, x0 y0 w1 h1 vfePICA gfePICA %fevis%, ins.png
Gui, Add, Picture, x0 y0 w1 h1 vfePICB gfePICB %fevis%, ins.png
Gui, Add, Picture, x0 y0 w1 h1 vfePICC gfePICC %fevis%, ins.png
Gui, Add, Picture, x0 y0 w1 h1 vfePICD gfePICD %fevis%, ins.png
Gui, Add, Picture, x0 y0 w1 h1 vfePICE gfePICE %fevis%, ins.png
Gui, Add, Picture, x0 y0 w1 h1 vfePICF gfePICF %fevis%, ins.png
Gui, Add, Picture, x0 y0 w1 h1 vfePICG gfePICG %fevis%, ins.png
Gui, Add, Link, x0 y0 w1 h1 vfeLNKA gfeLNKA %fevis%,
Gui, Add, CheckBox, x128 y120 vfeCHKD gfeCHKD %fevis%, feCHKD
Gui, Add, CheckBox, x128 y144 vfeCHKE gfeCHKE %fevis%, feCHKE
Gui, Add, CheckBox, x128 y168 vfeCHKF gfeCHKF %fevis%, feCHKF
Gui, Add, CheckBox, x128 y192 vfeCHKG gfeCHKG %fevis%, feCHKG
Gui, Add, CheckBox, x248 y72 vfeCHKH gfeCHKH %fevis%, feCHKH
Gui, Add, CheckBox, x256 y384 vfeCHKI gfeCHKI %fevis%, feCHKI
Gui, Add, CheckBox, x256 y408 vfeCHKJ gfeCHKJ %fevis%, feCHKJ
Gui, Add, CheckBox, x256 y432 vfeCHKK gfeCHKK %fevis%, feCHKK
Gui, Add, CheckBox, x256 y456 vfeCHKL gfeCHKL %fevis%, feCHKL
Gui, Add, CheckBox, x520 y400 vfeCHKM gfeCHKM %fevis%, feCHKM
Gui, Add, CheckBox, x376 y288 vfeCHKN gfeCHKN %fevis%, feCHKN
Gui, Add, CheckBox, x624 y440 vfeCHKO gfeCHKO %fevis%, feCHKO
Gui, Add, CheckBox, x624 y464 vfeCHKP gfeCHKP %fevis%, feCHKP
Gui, Add, CheckBox, x640 y216 vfeCHKQ gfeCHKQ %fevis%, feCHKQ
Gui, Add, CheckBox, x8 y440 vfeCHKA gfeCHKA %fevis%, feCHKA
Gui, Add, CheckBox, x8 y464 vfeCHKB gfeCHKB %fevis%, feCHKB
Gui, Add, CheckBox, x8 y490 vfeCHKC gfeCHKC %fevis%, feCHKC
Gui, Add, ComboBox, x248 y312 w124 vfeCBXE gfeCBXE %fevis%, feCBXE||
Gui, Add, ComboBox, x248 y336 w126 vfeCBXF gfeCBXF %fevis%, feCBXF||
Gui, Add, ComboBox, x248 y360 w126 vfeCBXG gfeCBXG %fevis%, feCBXG||
Gui, Add, ComboBox, x368 y144 w126 vfeCBXH gfeCBXH %fevis%, feCBXH||
Gui, Add, ComboBox, x368 y168 w127 vfeCBXI gfeCBXI %fevis%, feCBXI||
Gui, Add, ComboBox, x504 y272 w100 vfeCBXJ gfeCBXJ %fevis%, feCBXJ||
Gui, Add, ComboBox, x8 y248 w120 vfeCBXA gfeCBXA %fevis%, feCBXA||
Gui, Add, ComboBox, x8 y272 w120 vfeCBXB gfeCBXB %fevis%, feCBXB||
Gui, Add, ComboBox, x8 y296 w120 vfeCBXC gfeCBXC %fevis%, feCBXC||
Gui, Add, ComboBox, x8 y320 w120 vfeCBXD gfeCBXD %fevis%, feCBXD||
Gui, Add, DropDownList, x248 y168 w121 vfeDDLE gfeDDLE %fevis%, feDDLE||
Gui, Add, DropDownList, x248 y192 w121 vfeDDLF gfeDDLF %fevis%, feDDLF||
Gui, Add, DropDownList, x248 y216 w121 vfeDDLG gfeDDLG %fevis%, feDDLG||
Gui, Add, DropDownList, x504 y248 w100 vfeDDLH gfeDDLH %fevis%, feDDLH||
Gui, Add, DropDownList, x504 y344 w121 vfeDDLI gfeDDLI %fevis%, feDDLI||

Gui,Font,Bold
Gui,Font,s9
Gui, Add, DropDownList, x265 y2 w150 vfeDDLJ gfeDDLJ, XMB||Media|Mirrored_Links|EmulationStation
;Gui, Add, DropDownList, x15 y0 w150 vfeDDLJ gfeDDLJ , XMB||%FELIST%
Gui,Font,s7 NormalGui,Font,s7 Normal

Gui, Add, DropDownList, x8 y120 w121 vfeDDLC gfeDDLC %fevis%, feDDLC||
Gui, Add, DropDownList, x8 y144 w121 vfeDDLD gfeDDLD %fevis%, feDDLD||
Gui, Add, DropDownList, x8 y72 w121 vfeDDLA gfeDDLA %fevis%, feDDLA||
Gui, Add, DropDownList, x8 y96 w121 vfeDDLB gfeDDLB %fevis%, feDDLB||
Gui, Add, Edit, x128 y24 w120 vfeEDTA gfeEDTA %fevis%, feEDTA
Gui, Add, Edit, x128 y48 w120 vfeEDTB gfeEDTB %fevis%, feEDTB
Gui, Add, Edit, x128 y72 w120 vfeEDTC gfeEDTC %fevis%, feEDTC
Gui, Add, Edit, x128 y96 w88 vfeEDTD gfeEDTD %fevis%, feEDTD
Gui, Add, Edit, x256 y480 w120 vfeEDTE gfeEDTE %fevis%, feEDTE
Gui, Add, Edit, x368 y24 w88 vfeEDTF gfeEDTF %fevis%, feEDTF
Gui, Add, Edit, x560 y56 w120 vfeEDTG gfeEDTG %fevis%, feEDTG
Gui, Add, UpDown, x454 y24 w17 h21 -16 %fevis% vfeUPDA gfeUPDA
Gui, Add, Edit, x560 y80 w120 vfeEDTH gfeEDTH %fevis%, feEDTH
Gui, Add, UpDown, x726 y296 w17 h21 -16 %fevis% vfeUPDB gfeUPDB
Gui, Add, Edit, x640 y296 w88 vfeEDTI gfeEDTI %fevis%, feEDTI
Gui, Add, UpDown, x214 y96 w17 h21 -16 %fevis% vfeUPDC gfeUPDC
Gui,Font,s7 Bold
Gui, Add, GroupBox, x488 y24 w71 h29 vfeGRPA %fevis%, feGRPA
Gui, Add, GroupBox, x488 y56 w70 h29 vfeGRPB %fevis%, feGRPB
Gui, Add, GroupBox, x488 y88 w68 h29 vfeGRPC %fevis%, feGRPC
Gui, Add, GroupBox, x496 y176 w88 h19 vfeGRPD %fevis%, feGRPD
Gui, Add, GroupBox, x496 y200 w101 h19 vfeGRPE %fevis%, feGRPE
Gui, Add, GroupBox, x496 y224 w94 h19 vfeGRPF %fevis%, feGRPF
Gui, Add, GroupBox, x602 y392 w151 h45 vfeGRPG %fevis%, feGRPG
Gui, Font, normal
Gui, Add, Radio, x248 y96 vfeRad5A gfeRad5A %fevis%, feRad5A
Gui, Add, Radio, x248 y120 vfeRad5B gfeRad5B %fevis%, feRad5B
Gui, Add, Radio, x248 y144 vfeRad5C gfeRad5C %fevis%, feRad5C
Gui, Add, Slider, x128 y288 w120 h32 Range0-100 vfeSLDA gfeSLDA  %fevis%, 50
Gui, Add, Radio, x248 y24 vfeRad4A gfeRad4A %fevis%, feRad4A
Gui, Add, Radio, x248 y48 vfeRad4B gfeRad4B %fevis%, feRad4B
Gui, Add, Slider, x128 y320 w120 h32 Range0-100 vfeSLDB gfeSLDB %fevis%, 50
Gui, Add, Slider, x128 y352 w120 h32 Range0-100 vfeSLDD gfeSLDD %fevis%, 50 
Gui, Add, Radio, x376 y192 vfeRad6A gfeRad6A %fevis%, feRad6A
Gui, Add, Radio, x376 y216 vfeRad6B gfeRad6B %fevis%, feRad6B
Gui, Add, Radio, x376 y240 vfeRad6C gfeRad6C %fevis%, feRad6C
Gui, Add, Radio, x376 y264 vfeRad6D gfeRad6D %fevis%, feRad6D
Gui, Add, Slider, x504 y368 w120 h24 Range0-100 vfeSLDE gfeSLDE %fevis%, 50 
Gui, Add, Radio, x376 y320 vfeRad7A gfeRad7A %fevis%, feRad7A
Gui, Add, Radio, x376 y344 vfeRad7B gfeRad7B %fevis%, feRad7B
Gui, Add, Slider, x602 y408 w151 h25 Range0-100 vfeSLDC gfeSLDC %fevis%, 50
Gui, Add, Radio, x376 y464 vfeRad8A gfeRad8A %fevis%, feRad8A
Gui, Add, Radio, x376 y488 vfeRad8B gfeRad8B %fevis%, feRad8B
Gui, Add, Progress, x504 y296 w120 h20 -Smooth vfePRGB %fevis%, 0
Gui, Add, Radio, x504 y440 vfeRad9A gfeRad9A %fevis%, feRad9A
Gui, Add, Radio, x504 y464 vfeRad9B gfeRad9B %fevis%, feRad9B
Gui, Add, Radio, x504 y488 vfeRad9C gfeRad9C %fevis%, feRad9C
Gui, Add, Progress, x504 y320 w120 h20 -Smooth vfePRGA cBlue Range0-600 %fevis%, 0
Gui, Add, Radio, x640 y168 vfeRad10A gfeRad10A %fevis%, feRad10A
Gui, Add, Radio, x640 y192 vfeRad10B gfeRad10B %fevis%, feRad10B
Gui, Add, ListBox, x128 y392 w120 h30 vfeLBXA gfeLBXA %fevis%, feLBXA||
Gui, Add, Radio, x640 y240 vfeRad11A gfeRad11A %fevis%, feRad11A
Gui, Add, Radio, x640 y264 vfeRad11B gfeRad11B %fevis%, feRad11B
Gui, Add, ListBox, x128 y448 w120 h30 vfeLBXB gfeLBXB %fevis% +HScroll1500, feLBXB||
Gui, Add, Radio, x8 y24 vfeRad1A gfeRad1A %fevis%, feRad1A
Gui, Add, Radio, x8 y48 vfeRad1B gfeRad1B %fevis%, feRad1B
Gui, Add, ListView, x128 y424 w120 h19 hwndFELSTVA vfeLVA gfeLVA %fevis%, feLVA||
Gui, Add, Radio, x8 y168 vfeRad2A gfeRad2A %fevis%, feRad2A
Gui, Add, Radio, x8 y192 vfeRad2B gfeRad2B %fevis%, feRad2B
Gui, Add, Radio, x8 y216 vfeRad2C gfeRad2C %fevis%, feRad2C
Gui, Add, ListView, x128 y480 w121 h27 hwndFELSTVB vfeLVB gfeLVB %fevis%, feLVB||
Gui, Add, Radio, x8 y344 vfeRad3A gfeRad3A %fevis%, feRad3A
Gui, Add, Radio, x8 y368 vfeRad3B gfeRad3B %fevis%, feRad3B
Gui, Add, Radio, x8 y392 vfeRad3C gfeRad3C %fevis%, feRad3C
Gui, Add, Radio, x8 y416 vfeRad3D gfeRad3D %fevis%, feRad3D
Gui, Add, ListView, x496 y120 w141 h53 hwndFELSTVC vfeLVC gfeLVC %fevis%, feLVC||
Gui, Add, Text, x248 y240 vfeTXTA %fevis%, feTXTA
Gui, Add, Text, x248 y264 vfeTXTB %fevis%, feTXTB
Gui, Add, Text, x248 y288 vfeTXTC %fevis%, feTXTC
Gui, Add, Text, x376 y368 vfeTXTD %fevis%, feTXTD
Gui, Add, Text, x376 y392 vfeTXTE %fevis%, feTXTE
Gui, Add, Text, x376 y416 vfeTXTF %fevis%, feTXTF
Gui, Add, Text, x376 y440 vfeTXTG %fevis%, feTXTG
Gui, Add, Text, x640 y344 vfeTXTH %fevis%, feTXTH
Gui, Add, Text, x640 y368 vfeTXTI %fevis%, feTXTI
Gui, Add, Text, x696 y344 vfeTXTJ %fevis%, feTXTJ
Gui, Add, Text, x696 y368 vfeTXTK %fevis%, feTXTK
Gui, Add, Text, x624 y488 vfeTXTL %fevis%, feTXTL
Gui, Add, Text, x560 y24 vfeTXTM %fevis%, feTXTM
Gui, Add, Text, x688 y24 vfeTXTN %fevis%, feTXTN
Gui, Add, Text, x688 y48 vfeTXTO %fevis%, feTXTO
Gui, Add, Text, x688 y72 vfeTXTP %fevis%, feTXTP
Gui, Add, Text, x688 y96 vfeTXTQ %fevis%, feTXTQ
Gui, Add, Text, x504 y416 vfeTXTS %fevis%,
Gui, Add, Text, x504 y432 vfeTXTT %fevis%,
Gui, Add, Text, x505 y400 vfeTXTR %fevis%,
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading....,
;{;;;;;;;;;;;;;;;;;;;;;;;;        [[ ARCHIVE TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui, Tab, 6
Gui, Tab, Archive.org
Gui,Font,s7 Bold
Gui, Add, GroupBox, x16 y2 w332 h284 Center, SYSTEMS
Gui,Font,s7 
gui,font,normal
Gui, Add, Picture, x38 y355 w128 h119, opt.png
Gui, Add, DropDownList, x40 y20 w265 vARCSYS gArchiveSystems, Select a System||%syslist%
Gui, Add, DropDownList, x26 y48 w136 vARCCORES gArcCores, Select_a_Core||%runlist%

Gui, Add, Checkbox, x169 y47 h10 vREDWN gReDownload, Redownload
Gui, Add, CheckBox, x169 y61 h13 vDOWNONLY gDownOnly, Download Only
Gui, Add, Button,  x267 y47 w75 h23 vARCLNCH gArcLaunch disabled, PLAY

Gui, Add, ComboBox, x88 y78 w126 vCUSTMOPT gCustmOpt hidden,|%INJOPT%
Gui, Add, ComboBox, x218 y78 w123 vCUSTMARG gCustmArg hidden,|
Gui, Add, CheckBox, x26 y75 w61 h17 vCUSTSWITCH gCustSwitch, switches

Gui, Add, Button, x88 y243 w45 h20 vALTURLSET gAltURLSet hidden, URL
Gui, Add, Checkbox, x24 y263 vALTURL gEnableAltUrl, Override
Gui, Add, Text, x88 y263 w155 h13 vUrlTxt, %ArcSite%
Gui, Add, Edit, x24 y215 w159 h21 vARCLOGIN gArcLogin,
Gui, Add, Edit, x187 y215 w154 h21 Password vARCPASS gArcPass,
Gui, Add, CheckBox, x240 y238 h15 vSAVPASS gSavPass, save
Gui, Add, Text, x28 y236 h14, email login
Gui, Add, Text, x191 y236 h14, password

Gui, Add, Edit, x25 y286 w310 h21 vSRCHEDT gSearchInp,

Gui,Font,Bold
Gui,Font,s9
Gui, Add, Button, x32 y312 w75 h23 gSearchArc , SEARCH
gui,Font,s7, Normal
gui,font,normal
Gui, Add, DropDownList, x125 y314 w199 vSRCHDDL, All||%syslist%
Gui, Add, ListBox, x24 y344 w320 h158 +HScroll HWNDsrchpopu vSRCHRSLT gArcSrchRes hidden,
Gui, Add, Progress, x742 y20 w10 h459 Vertical -Smooth vARCDPRGRS, 0
Gui, Add, ListBox, x350 y19 w388 h459 +HScroll HWNDarcpopu vARCPOP gArcPopulateList,

Gui, Add, Button, x350 y480 w61 h17 vCLIPURL gClipURL, CLIP URL
Gui, Add, CheckBox, x143 y100 h17 vEXTRURL gExtractURL, Extract File
Gui, Add, CheckBox, x211 y79 w122 h17  vRUNXTRACT gRunXtract Checked Hidden, Run extracted file
Gui Add, CheckBox, x218 y100 w58 h17 vEXTEXPLD gEXTEXPLD hidden, explode


Gui, Add, Button, x25 y137 w59 h17 vSETOVD gSetOvd, BROWSE
Gui, Add, CheckBox, x26 y100 h17 vJACKETMODE gDWNINJACK, Save into Jacket
Gui, Add, CheckBox, x26 y118 h17 vOVDCHK gOvdChk, Override Save Directory
Gui, Add, DDL, x87 y135 w254 vOVDLDS gOvDlds,|Matching||%SWAPPOP%
Gui, Add, Edit, x23 y157 +Wrap w318 h55 vOVDTXT Disabled,

Gui, Font, Bold
Gui, Add, Text, cred x218 y4 w531 h15 vARCDET Center,
gui, font, normal
Gui, Add, Button, x678 y482 w75 h23 vARCNCT gARCNCT disabled, CONNECT

Gui, Add, Button,x604 y486 w49 h19 vARCHOST gArcHost disabled, HOST
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading...,
;{;;;;;;;;;;;;;;;;;;;;;;;;;       [[ NETPLAY TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui, Tab, 7
Gui, Tab, Netplay-Lobby
Gui, Add, Picture,x83 y238 w128 h113 vINVADERPIC,net.png

Gui,Font,s7 Bold
Gui, Add, GroupBox, x8 y1 w746 h503 Center, Hosted Games
Gui,Font,s7 Norm 
;;gui, Add, ListView, x14 y42 w731 h400 AltSubmit -Multi Sort  hwndHostView vNETHOSTLIST gNetHostList hidden, USER|ROM|CRC|CORE|(Ver)|IP|PORT|TYPE|PASS|
Gui, Add, ListView, x14 y42 w731 h366 AltSubmit -Multi Sort  hwndHostView vNETHOSTLIST gNetHostList hidden, User|ROM|CRC|Core|(Build)|IP|Port|Open|Password|Region|Vers|

;;gui, Add, Text, x672 y11 h15, Port-Check
;;gui, Add, CheckBox, x730 y11 w15 h14 vCHKPORTS gChkPorts,
Gui,Font,Bold
Gui,Font,s9
Gui, Add, Radio, x13 y20 h18 vHOSTSWITCH gHostSwitch, Host
Gui, Add, Radio, x70 y20 h18 vCLIENTSWITCH gClientSwitch Checked, Client
Gui,Font,s7 Norm 


Gui, Add, Button, x667 y10 w79 h30 vREFHOST gRefHosts, Refresh Hosts
Gui, Add, Button, x455 y471 w57 h18 vNETROM gNetROM, BROWSE
;;gui, Add, DropDownList, x14 y20 w108 vHOSTCORES gHostCores Disabled, |Room Filter||%coreNamz%
Gui, Font, bold
Gui, Add, Text, x123 y14 w541 h28 cred Center vNETHINFO, Connection Information:
gui, font, normal

Gui, Add, DropDownList, x13 y471 w280 vNETCOREASSETS gCLNetCoreAssets,
Gui, Add, DropDownList, x138 y446 w472 vNETROMLIST gNetROMList +0x2 +E0x5000 Right, 
Gui, Add, Radio, x16 y443 h23 vNETDWNL gNetDwnl, Folders
Gui, Add, Radio, x74 y443 h23 vNETPLIST gNetPlist, Playlists
Gui, Add, CheckBox, x516 y470 h23 vAUTOCORE gAutoCore Checked, Auto-Core
;;gui, Add, CheckBox, x620 y445 h23 vFORCEROM gForceROM, Force
Gui, Add, Button, x670 y444 w75 h23 vNETCONNECT gNetConnect disabled, CONNECT
Gui, Add, DropDownList, x585 y471 w156 vNetCore gNetCore disabled, %corelist%

Gui, Add, Edit,x561 y410 w29 h21 vIPA gIp_A Number, 
Gui, Add, Edit, x592 y410 w29 h21 vIPB gIp_B Number, 
Gui, Add, Edit, x622 y410 w28 h21 vIPC gIp_C Number, 
Gui, Add, Edit, x651 y410 w31 h21 vIPD gIp_D Number, 
Gui, Add, Edit, x685 y410 w60 h21 vCPORTNUM gCSetPort Right Number

Gui, Add, Progress, x15 y492 w736 h7 cBlue vpgrTransfer Range0-600, 0

Gui, Add, CheckBox, x300 y473 h16 vAUTSYS gAutSys Checked, Auto-Sys
Gui, Add, Checkbox,x365 y474 h13 vSRCHARCORG gArcFind Checked, Web-Lookup
Gui, Add, CheckBox, x365 y473 h16 vRETROM gRetROM hidden, Recieve ROM

;;;;;;;;;;;;;;;;;;;;;;;;;;;;    HOSTING   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Gui, Add, CheckBox, x13 y411 h13 vINETHOST gInetHost hidden, Relay-Host
Gui, Add, Checkbox, x13 y427 h13 vNOSTATE gNoState hidden, Stateless
Gui, Add, CheckBox, x172 y411 h13 vPRVTSV gPrvtSv hidden, Private
Gui, Add, CheckBox, x89 y411 h13 vALSLV gAlSlv Checked hidden, Allow Slaves
Gui, Add, CheckBox, x93 y427 h13 vSlvOnly gSlvOnly hidden, Slaves Only
;;gui, Add, Checkbox,x172 y427 h13 vINVADE gInvading, Invade
Gui, Add, ComboBox, x14 y410 w157 vROOMFILTER gRoomFilter, |Room Filter||%corenamz%
Gui, Add, Edit, x685 y410 w60 h21 vIPORTNUM gSetPort Right Number hidden, %netplayIpPort%
;;gui, Add, Text, x702 y295, PORT

Gui, Add, Text, x348 y473  h13 vCHKFTXT hidden, Check
Gui, Add, Edit, x306 y470 w40 h21 vCHECKFRAMES gGetCHKFRM hidden, %CHECKFRAMES%
Gui, Add, UpDown, x328 y470 w18 h21 vCHKFRSLD hidden, %CHECKFRAMES%
Gui, Add, Text, x432 y473 h13 vMINLATTXT hidden, Latency
Gui, Add, Edit, x390 y470 w40 h21 vMINLAT gMinLat hidden, %netplayInputLatencyFramesMin%
Gui, Add, UpDown, x313 y470 w18 h21 vMINLATSLD hidden, %netplayInputLatencyFramesMin%
Gui, Add, Text, x517 y473 h13 vLATRNGTXT hidden, Range
Gui, Add, Edit, x476 y470 w40 h21 vLATRNG gLatRng hidden, %netplayInputLatencyFramesRange%
Gui, Add, UpDown, x498 y470 w17 h21 vLATRNGSLD hidden, %netplayInputLatencyFramesRange%

Gui, Add, Button, x618 y444 w41 h23 vNETCROM gNetCROM, ROM
Gui, Add, Button, x618 y444 w41 h23 vNETHROM gNetHROM hidden, ROM
Gui, Add, Button, x670 y444 w75 h23 vHostButton gLOCALHOSTING hidden, HOST
Gui, Add, Button, x520 y411 w40 h17 vPSTIP gPstBut, Paste
;;gui, Add, Button, x656 y307 w90 h20 vCNCTBUT gConnectRA, Connect
Gui, Add, Text, x248 y431 h13 vNETPLNTXT, netplay name
Gui, Add, Text, x398 y431 h13 vNETPLPWTXT, password
Gui, Add, Edit, x228 y410 w156 h21 vNETNAME gGetNetName,
Gui, Add, Edit, x392 y410 w56 h21 vNETPW gNetPW,
Gui, Add, Edit, x392 y410 w56 h21 vNETSPECPW hidden gNetSpecPW,
Gui, Add, Edit, x575 y415 w86 h16 -E0x200 +Readonly vHOSTIP hidden, Your IP Address
Gui, Add, Text, x455 y431 w54 h13 vFSRVTXT hidden, file-server
Gui, Add, CheckBox,x450 y415 w14 h12 vFILESERV gFileServ hidden,
Gui, Add, Edit, x465 y411 w54 h18 vSERVPORT Disabled gServPort Number hidden, %fileServerPort%
Gui, Add, Button, x520 y411 w40 h17 vGETIP gIP_Get hidden, Get IP
Gui, Add, Button, x520 y411 w40 h17 vGETLAN gLAN_Get hidden, Get IP
Gui, Add, Radio, x525 y432 vNETIPRAD gNetSET Checked hidden, NET
Gui, Add, Radio, x570 y432 vLANIPRAD gLanSET hidden, LAN

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading....,
;{;;;;;;;;;;;;;;;;;;;;;;;;;       [[ UTILITIES TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
/*
Gui, Tab, 8
Gui, Tab, Utilities

utltog= Hide
utlvis= Hidden
Gui, Add, Button, x128 y216 w75 h23 vutlBUTA gutlBUTA, utlBUTA
Gui, Add, Button, x128 y240 w75 h23 vutlBUTB gutlBUTB %utlvis%, utlBUTB
Gui, Add, Button, x128 y264 w75 h23 vutlBUTC gutlBUTC %utlvis%, utlBUTC
Gui, Add, Button, x368 y120 w75 h23 vutlBUTG gutlBUTG %utlvis%, utlBUTG
Gui, Add, Button, x368 y48 w75 h23 vutlBUTD gutlBUTD %utlvis%, utlBUTD
Gui, Add, Button, x368 y72 w75 h23 vutlBUTE gutlBUTE %utlvis%, utlBUTE
Gui, Add, Button, x368 y96 w75 h23 vutlBUTF gutlBUTF %utlvis%, utlBUTF
Gui, Add, Button, x640 y120 w75 h23 vutlBUTH gutlBUTH %utlvis%, utlBUTH
Gui, Add, Button, x640 y144 w75 h23 vutlBUTI gutlBUTI %utlvis%, utlBUTI
Gui, Add, Button, x689 y480 w66 h23 vutlBUTJ gutlBUTJ %utlvis%, utlBUTJ
Gui, Add, CheckBox, x128 y120 vutlCHKD gutlCHKD %utlvis%, utlCHKD
Gui, Add, CheckBox, x128 y144 vutlCHKE gutlCHKE %utlvis%, utlCHKE
Gui, Add, CheckBox, x128 y168 vutlCHKF gutlCHKF %utlvis%, utlCHKF
Gui, Add, CheckBox, x128 y192 vutlCHKG gutlCHKG %utlvis%, utlCHKG
Gui, Add, CheckBox, x248 y72 vutlCHKH gutlCHKH %utlvis%, utlCHKH
Gui, Add, CheckBox, x256 y384 vutlCHKI gutlCHKI %utlvis%, utlCHKI
Gui, Add, CheckBox, x256 y408 vutlCHKJ gutlCHKJ %utlvis%, utlCHKJ
Gui, Add, CheckBox, x256 y432 vutlCHKK gutlCHKK %utlvis%, utlCHKK
Gui, Add, CheckBox, x256 y456 vutlCHKL gutlCHKL %utlvis%, utlCHKL
Gui, Add, CheckBox, x520 y400 vutlCHKM gutlCHKM %utlvis%, utlCHKM
Gui, Add, CheckBox, x376 y288 vutlCHKN gutlCHKN %utlvis%, utlCHKN
Gui, Add, CheckBox, x624 y440 vutlCHKO gutlCHKO %utlvis%, utlCHKO
Gui, Add, CheckBox, x624 y464 vutlCHKP gutlCHKP %utlvis%, utlCHKP
Gui, Add, CheckBox, x640 y216 vutlCHKQ gutlCHKQ %utlvis%, utlCHKQ
Gui, Add, CheckBox, x8 y440 vutlCHKA gutlCHKA %utlvis%, utlCHKA
Gui, Add, CheckBox, x8 y464 vutlCHKB gutlCHKB %utlvis%, utlCHKB
Gui, Add, CheckBox, x8 y490 vutlCHKC gutlCHKC %utlvis%, utlCHKC
Gui, Add, ComboBox, x248 y312 w124 vutlCBXE gutlCBXE %utlvis%, utlCBXE||
Gui, Add, ComboBox, x248 y336 w126 vutlCBXF gutlCBXF %utlvis%, utlCBXF||
Gui, Add, ComboBox, x248 y360 w126 vutlCBXG gutlCBXG %utlvis%, utlCBXG||
Gui, Add, ComboBox, x368 y144 w126 vutlCBXH gutlCBXH %utlvis%, utlCBXH||
Gui, Add, ComboBox, x368 y168 w127 vutlCBXI gutlCBXI %utlvis%, utlCBXI||
Gui, Add, ComboBox, x504 y272 w100 vutlCBXJ gutlCBXJ %utlvis%, utlCBXJ||
Gui, Add, ComboBox, x8 y248 w120 vutlCBXA gutlCBXA %utlvis%, utlCBXA||
Gui, Add, ComboBox, x8 y272 w120 vutlCBXB gutlCBXB %utlvis%, utlCBXB||
Gui, Add, ComboBox, x8 y296 w120 vutlCBXC gutlCBXC %utlvis%, utlCBXC||
Gui, Add, ComboBox, x8 y320 w120 vutlCBXD gutlCBXD %utlvis%, utlCBXD||
Gui, Add, DropDownList, x248 y168 w121 vutlDDLE gutlDDLE %utlvis%, utlDDLE||
Gui, Add, DropDownList, x248 y192 w121 vutlDDLF gutlDDLF %utlvis%, utlDDLF||
Gui, Add, DropDownList, x248 y216 w121 vutlDDLG gutlDDLG %utlvis%, utlDDLG||
Gui, Add, DropDownList, x504 y248 w100 vutlDDLH gutlDDLH %utlvis%, utlDDLH||
Gui, Add, DropDownList, x504 y344 w121 vutlDDLI gutlDDLI %utlvis%, utlDDLI||
Gui, Add, DropDownList, x640 y320 w100 vutlDDLJ gutlDDLJ %utlvis%, utlDDLJ||
Gui, Add, DropDownList, x8 y120 w121 vutlDDLC gutlDDLC %utlvis%, utlDDLC||
Gui, Add, DropDownList, x8 y144 w121 vutlDDLD gutlDDLD %utlvis%, utlDDLD||
Gui, Add, DropDownList, x8 y72 w121 vutlDDLA gutlDDLA %utlvis%, utlDDLA||
Gui, Add, DropDownList, x8 y96 w121 vutlDDLB gutlDDLB %utlvis%, utlDDLB||
Gui, Add, Edit, x128 y24 w120 vutlEDTA gutlEDTA %utlvis%, utlEDTA
Gui, Add, Edit, x128 y48 w120 vutlEDTB gutlEDTB %utlvis%, utlEDTB
Gui, Add, Edit, x128 y72 w120 vutlEDTC gutlEDTC %utlvis%, utlEDTC
Gui, Add, Edit, x128 y96 w88 vutlEDTD gutlEDTD %utlvis%, utlEDTD
Gui, Add, Edit, x256 y480 w120 vutlEDTE gutlEDTE %utlvis%, utlEDTE
Gui, Add, Edit, x368 y24 w88 vutlEDTF gutlEDTF %utlvis%, utlEDTF
Gui, Add, Edit, x560 y56 w120 vutlEDTG gutlEDTG %utlvis%, utlEDTG
Gui, Add, UpDown, x454 y24 w17 h21 -16 %utlvis% vutlUPDA gutlUPDA
Gui, Add, Edit, x560 y80 w120 vutlEDTH gutlEDTH %utlvis%, utlEDTH
Gui, Add, UpDown, x726 y296 w17 h21 -16 %utlvis% vutlUPDB gutlUPDB
Gui, Add, Edit, x640 y296 w88 vutlEDTI gutlEDTI %utlvis%, utlEDTI
Gui, Add, UpDown, x214 y96 w17 h21 -16 %utlvis% vutlUPDC gutlUPDC
Gui,Font,s7 Bold
Gui, Add, GroupBox, x488 y24 w71 h29 vutlGRPA %utlvis%, utlGRPA
Gui, Add, GroupBox, x488 y56 w70 h29 vutlGRPB %utlvis%, utlGRPB
Gui, Add, GroupBox, x488 y88 w68 h29 vutlGRPC %utlvis%, utlGRPC
Gui, Add, GroupBox, x496 y176 w88 h19 vutlGRPD %utlvis%, utlGRPD
Gui, Add, GroupBox, x496 y200 w101 h19 vutlGRPE %utlvis%, utlGRPE
Gui, Add, GroupBox, x496 y224 w94 h19 vutlGRPF %utlvis%, utlGRPF
Gui, Add, GroupBox, x602 y392 w151 h45 vutlGRPG %utlvis%, utlGRPG
Gui, Font, normal
Gui, Add, ListBox, x128 y392 w120 h30 vutlLBXA gutlLBXA %utlvis%, utlLBXA||
Gui, Add, ListBox, x128 y448 w120 h30 vutlLBXB gutlLBXB %utlvis%, utlLBXB||
Gui, Add, ListView, x128 y424 w120 h19 vutlLVA gutlLVA %utlvis%, utlLVA||
Gui, Add, ListView, x128 y480 w121 h27 vutlLVB gutlLVB %utlvis%, utlLVB||
Gui, Add, ListView, x496 y120 w141 h53 vutlLVC gutlLVC %utlvis%, utlLVC||
Gui, Add, Progress, x504 y296 w120 h20 -Smooth vutlPRGB %utlvis%, 0
Gui, Add, Progress, x504 y320 w120 h20 -Smooth vutlPRGA %utlvis%, 0
Gui, Add, Radio, x248 y120 vutlRad5B gutlRad5B %utlvis%, utlRad5B
Gui, Add, Radio, x248 y144 vutlRad5C gutlRad5C %utlvis%, utlRad5C
Gui, Add, Radio, x248 y24 vutlRad4A gutlRad4A %utlvis%, utlRad4A
Gui, Add, Radio, x248 y48 vutlRad4B gutlRad4B %utlvis%, utlRad4B
Gui, Add, Radio, x248 y96 vutlRad5A gutlRad5A %utlvis%, utlRad5A
Gui, Add, Radio, x376 y192 vutlRad6A gutlRad6A %utlvis%, utlRad6A
Gui, Add, Radio, x376 y216 vutlRad6B gutlRad6B %utlvis%, utlRad6B
Gui, Add, Radio, x376 y240 vutlRad6C gutlRad6C %utlvis%, utlRad6C
Gui, Add, Radio, x376 y264 vutlRad6D gutlRad6D %utlvis%, utlRad6D
Gui, Add, Radio, x376 y320 vutlRad7A gutlRad7A %utlvis%, utlRad7A
Gui, Add, Radio, x376 y344 vutlRad7B gutlRad7B %utlvis%, utlRad7B
Gui, Add, Radio, x376 y464 vutlRad8A gutlRad8A %utlvis%, utlRad8A
Gui, Add, Radio, x376 y488 vutlRad8B gutlRad8B %utlvis%, utlRad8B
Gui, Add, Radio, x504 y440 vutlRad9A gutlRad9A %utlvis%, utlRad9A
Gui, Add, Radio, x504 y464 vutlRad9B gutlRad9B %utlvis%, utlRad9B
Gui, Add, Radio, x504 y488 vutlRad9C gutlRad9C %utlvis%, utlRad9C
Gui, Add, Radio, x640 y168 vutlRad10A gutlRad10A %utlvis%, utlRad10A
Gui, Add, Radio, x640 y192 vutlRad10B gutlRad10B %utlvis%, utlRad10B
Gui, Add, Radio, x640 y240 vutlRad11A gutlRad11A %utlvis%, utlRad11A
Gui, Add, Radio, x640 y264 vutlRad11B gutlRad11B %utlvis%, utlRad11B
Gui, Add, Radio, x8 y168 vutlRad2A gutlRad2A %utlvis%, utlRad2A
Gui, Add, Radio, x8 y192 vutlRad2B gutlRad2B %utlvis%, utlRad2B
Gui, Add, Radio, x8 y216 vutlRad2C gutlRad2C %utlvis%, utlRad2C
Gui, Add, Radio, x8 y24 vutlRad1A gutlRad1A %utlvis%, utlRad1A
Gui, Add, Radio, x8 y344 vutlRad3A gutlRad3A %utlvis%, utlRad3A
Gui, Add, Radio, x8 y368 vutlRad3B gutlRad3B %utlvis%, utlRad3B
Gui, Add, Radio, x8 y392 vutlRad3C gutlRad3C %utlvis%, utlRad3C
Gui, Add, Radio, x8 y416 vutlRad3D gutlRad3D %utlvis%, utlRad3D
Gui, Add, Radio, x8 y48 vutlRad1B gutlRad1B %utlvis%, utlRad1B
Gui, Add, Slider, x128 y288 w120 h32 Range0-100 vutlSLDA gutlSLDA  %utlvis%, 50
Gui, Add, Slider, x128 y320 w120 h32 Range0-100 vutlSLDB gutlSLDB %utlvis%, 50
Gui, Add, Slider, x128 y352 w120 h32 Range0-100 vutlSLDD gutlSLDD %utlvis%, 50 
Gui, Add, Slider, x504 y368 w120 h24 Range0-100 vutlSLDE gutlSLDE %utlvis%, 50 
Gui, Add, Slider, x602 y408 w151 h25 Range0-100 vutlSLDC gutlSLDC %utlvis%, 50
Gui, Add, Text, x248 y240 vutlTXTA %utlvis%, utlTXTA
Gui, Add, Text, x248 y264 vutlTXTB %utlvis%, utlTXTB
Gui, Add, Text, x248 y288 vutlTXTC %utlvis%, utlTXTC
Gui, Add, Text, x376 y368 vutlTXTD %utlvis%, utlTXTD
Gui, Add, Text, x376 y392 vutlTXTE %utlvis%, utlTXTE
Gui, Add, Text, x376 y416 vutlTXTF %utlvis%, utlTXTF
Gui, Add, Text, x376 y440 vutlTXTG %utlvis%, utlTXTG
Gui, Add, Text, x504 y416 vutlTXTS %utlvis%,
Gui, Add, Text, x504 y432 vutlTXTT %utlvis%,
Gui, Add, Text, x505 y400 vutlTXTR %utlvis%,
Gui, Add, Text, x560 y24 vutlTXTM %utlvis%, utlTXTM
Gui, Add, Text, x640 y344 vutlTXTH %utlvis%, utlTXTH
Gui, Add, Text, x640 y368 vutlTXTI %utlvis%, utlTXTI
Gui, Add, Text, x688 y24 vutlTXTN %utlvis%, utlTXTN
Gui, Add, Text, x688 y48 vutlTXTO %utlvis%, utlTXTO
Gui, Add, Text, x688 y72 vutlTXTP %utlvis%, utlTXTP
Gui, Add, Text, x688 y96 vutlTXTQ %utlvis%, utlTXTQ
Gui, Add, Text, x696 y344 vutltTXTJ %utlvis%, utltTXTJ
Gui, Add, Text, x696 y368 vutlTXTK %utlvis%, utlTXTK
Gui, Add, Text, x624 y488 vutltTXTL %utlvis%, utltTXTL
*/
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading...,
;{;;;;;;;;;;;;;;;;;;;;;;;;;       [[ JACKETIZE TAB ]]        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui, Tab, 8
Gui, Tab, Jackets

Gui, Add, DropDownList, x14 y12 w245 vRJSYSDD gRJSYSDD, Systems||%systmfldrs%
Gui, Add, Button, x260 y11 w20 h23 vRJButA gRJButA, +
Gui, Add, DropDownList, x13 y36 w64 vRJINCEXCL gRJINCEXCL, All||A-Z|#
Gui, Add, Button, x79 y35 w37 h23 vRJSETRANGE gRJSETRANGE hidden, Range
Gui, Add, Text, x83 y40 h23 vRJRNGTXT, Range
Gui, Add, DropDownList, x126 y36 w100 vRJLSTYP gRJLSTYP, Jackets+ROMs||Jackets ONLY|ROMs ONLY|All files
Gui, Add, Button, x228 y35 w49 h23 vRJRFRSHLST gRJRFRSHLST, Refresh
;;gui, Add, Button, x237 y34 w22 h23 vRJADDQ gRJADDQ, O ;Explore Folder

Gui, Add, Edit, x13 y61 w30 h21 Number vRJEDTD gRJEDTD hidden, 0
Gui, Add, Edit, x13 y61 w30 h21 Limit1 vRJEDTDN gRJEDTDN hidden, A
Gui, Add, Text, x47 y65 h13 vRJTXTH hidden, to
Gui, Add, Edit, x58 y61 w30 h21 Number vRJEDTB gRJEDTB hidden, 1000
Gui, Add, Edit, x58 y61 w30 h21 Limit1 vRJEDTBN gRJEDTBN hidden, Z
Gui, Add, Button, x91 y59 w31 h23 vRJFLTRLST gRJFLTRLST hidden, Filter
Gui, Add, Edit, x122 y60 w118 h21 vRJEDTC gRJEDTC,
Gui, Add, Button, x241 y59 w32 h23 vRJFNDINLST gRJFNDINLST, Find
Gui, Add, ListView, x12 y86 w254 h414 hwndRJLV altsubmit Multi vRJLSTV gRJLSTV checked, Jackets
Gui, Add, Button, x267 y119 w56 h24 vRJSALITMS gRJSALITMS, ALL 
Gui, Add, Text, x267 y143 h14 vRJTXTN,Selects All items

Gui, Add, GroupBox, x265 y161 w101 h85 vRJGRPN
Gui, Add, CheckBox, x267 y175 h15 vRJCHKL gRJCHKL, Launchers
Gui, Add, CheckBox, x267 y190 h15 vRJCHKM gRJCHKM, Config Files
Gui, Add, CheckBox, x267 y207 h15 vRJCHKP gRJCHKP, Joystick Profiles
Gui, Add, Button, x284 y221 w55 h21 vRJDELCOMP gRJDELCOMP Disabled, Delete

Gui, Add, Text, x274 y252 h18 vRLSTOT,total item #

Gui, Font, Bold
Gui, Add, GroupBox, x278 y26 w107 h88 vRJGRPA, System Settings
Gui,Font, Normal

Gui, Add, CheckBox, x301 y12 h13 vRJCHKG gRJCHKG Checked, Auto-Pop
Gui, Add, Radio,x296 y45 h13 vRJSYSRADA gRJSYSRAD checked, Existing
Gui, Add, Radio, x296 y60 h13 vRJSYSRADB gRJSYSRAD, Default ;Settings
Gui, Add, Radio, x296 y76 h13 vRJSYSRADC gRJSYSRAD, Custom ;Settings
Gui, Add, Button, x281 y89 w42 h20 vRJSYSLOAD gRJSYSLOAD, Load ;Settings
Gui, Add, Button, x326 y89 w42 h20 vRJSYSSAV gRJSYSSAV, Save ;Settings

Gui, Add, Button, x368 y95 w12 h14 +0x800 vRJSYSSAVAS gRJSYSSAVAS, v ;Settings
Gui, Font, Bold

Gui, Add, GroupBox, x388 y6 w371 h109 vRJGRPG, Keymapper
Gui,Font, Normal
Gui, Add, CheckBox, x398 y27 h13 vRJENMAP gRJENMAP, Enable ;Mapper
Gui, Add, Checkbox, x679 y15 h13 vRJOVKM gRJOVKM Disabled, Overwrite
Gui, Add, Text, x513 y28 h13 vRJTXTC, JoyMapper
Gui, Add, Text, x601 y28 h13 vRJTXTF, Return Profile
Gui, Add, DropDownList, x398 y42 w167 vRJMAPDD gRJMAPDD Disabled, %keympr%||Antimicro|Xpadder|other
Gui, Add, ComboBox, x568 y42 w161 vRJMAPRET gRJMAPRET Disabled, %kmprd%\Mediacenter%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
Gui, Add, Button, x732 y41 w21 h23 vRJMAPRETOPN gRJMAPRETOPN Disabled, O ;bounceproflie
Gui, Add, Radio, x398 y64 h13 vRJMAP1ROFTYPA gRJMAP1ROFTYPA Disabled, Joy 1
Gui, Add, Radio, x398 y79 h13 vRJMAP1ROFTYPB gRJMAP1ROFTYPB Disabled Checked, Kb 1
Gui, Add, Radio, x398 y95 h13 vRJMAP1ROFTYPC gRJMAP1ROFTYPC Disabled, Blank 1
Gui, Add, Text, x514 y92 h13 vRJTXTD, Joy 1 Profile
Gui, Add, ComboBox, x449 y70 w100 vRJMAP1PL gRJMAP1PL Disabled, Player1%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
Gui, Add, Button, x550 y68 w21 h23 vRJMAP1PLOPN gRJMAP1PLOPN Disabled, O ;player1profile
Gui, Add, Radio, x579 y65 h13 vRJMAP2ROFTYPA gRJMAP2ROFTYPA Disabled, Joy 2
Gui, Add, Radio, x579 y80 h13 vRJMAP2ROFTYPB gRJMAP2ROFTYPB Disabled Checked, Kb 2
Gui, Add, Radio, x579 y96 h13 vRJMAP2ROFTYPC gRJMAP2ROFTYPC Disabled, Blank 2
Gui, Add, Text, x692 y94 h13 vRJTXTE, Joy 2 Profile
Gui, Add, ComboBox, x631 y70 w100 vRJMAP2PL gRJMAP2PL Disabled, Player2%kmprxtn%||%kmprd%\nolayout2%kmprxtn%
Gui, Add, Button, x732 y69 w21 h23 vRJMAP2PLOPN gRJMAP2PLOPN Disabled, O ;player2profile

Gui,Font,Bold
Gui, Add, GroupBox, x371 y115 w191 h117 vRJGRPI, Launchers
Gui,Font,Normal
Gui, Add, CheckBox, x391 y132 h13 vRJENLNCHR gRJENLNCHR, Create ;Launcher Creation
Gui, Add, CheckBox, x467 y122 w90 h20 +0x20 vRJLNCHOVR gRJLNCHOVR Disabled, Overwrite ;Launchers
Gui, Add, Radio, x487 y144 h13 vRJRad4B gRJRad4B Disabled, Global
Gui, Add, Radio, x487 y160 h13 vRJRad4A gRJRad4A checked  Disabled, Per-Game
Gui, Add, Text, x379 y149 vRJTXTB, Emulators
Gui, Add, Text, x379 y163 vRJTXTBP, preset
Gui, Add, DropDownList, x379 y177 w156 vRJEMUPRECFG gRJEMUPRECFG Disabled, MAME - Arcade||%emulist%
Gui, Add, Button, x537 y177 w22 h23 vRJEMUPRM gRJEMUPRM Disabled, C
Gui, Add, CheckBox, x379 y199 h21 w60 vRJCHKQ gRJCHKQ Disabled, Other
Gui, Add, Button, x484 y199 w75 h23 vRJBUTM gRJBUTM Disabled, Browse
Gui, Add, CheckBox, x394 y221 h23 +0x20 vRJCHKK gRJCHKK Disabled, Write ROM-Name to Launcher

Gui,Font,Bold
Gui, Add, GroupBox, x567 y115 w192 h97 vRJGRPE, Jacketize
Gui,Font,Normal
Gui, Add, CheckBox, x572 y130 h13 vRJCHKA gRJCHKA, Jacketize

SUBDLST= .Mem||.snaps|.sstates|.Man|.patches|.cheats
SUBDLSTR:= SUBDLST

Gui, Add, Button, x740 y152 w17 h16 vRJADDSUBD gRJADDSUBD, +
Gui, Add, Button, x740 y167 w17 h16 vRJREMSUBD gRJREMSUBD, X
Gui, Add, ComboBox, x646 y156 w92 vRJSUBDCBX gRJSUBDCBX, %SUBDLST%
Gui, Add, Text, x611 y155 w33 h18 vRJTXTA1 +0x200, sub-dir
Gui, Add, CheckBox, x683 y177 w54 h13 +0x20 vRJSUBDH gRJSUBDH checked, Hidden

Gui, Add, DropDownList, x651 y125 w84 vRJCNSLDD gRJCNSLDD Disabled, ()[]||()|[]|Individuate
Gui, Add, CheckBox,x741 y126 h13 w16 vRJENCNSLD gRJENCNSLD Disabled,  ;Consolidate Individuate
Gui, Add, CheckBox, x569 y178 h13 vRJENXTRARC gRJENXTRARC Disabled, Extract Archives
Gui, Add, Radio, x572 y192 h13 vRJXTRARCA gRJXTRARCA Disabled, Before
Gui, Add, Radio, x572 y206 h13 vRJXTRARCB gRJXTRARCB checked  Disabled, After
Gui, Add, Text, x627 y204 h13 vRJTXTK, and
Gui, Add, DropDownList, x649 y197 w100 vRJXTRARCDD gRJXTRARCDD Disabled, Store||Delete|Keep

Gui, Font,Bold
Gui, Add, GroupBox, x565 y227 w194 h112 vRJGRPF, Pre Cmd/ Post Cmd
Gui, Font,Normal
Gui, Add, Button, x568 y282 w21 h23 vRJBUTV gRJBUTV, ~ ;Edit Command
Gui, Add, Radio, x642 y247 h13 vRJRad11A gRJRad11A, Local 
Gui, Add, Radio, x694 y247 h13 vRJRad11B gRJRad11B checked, Absolute
Gui, Add, CheckBox, x595 y263 w17 h18 vRJCHKW gRJCHKW
Gui, Add, DropDownList, x612 y261 w121 vRJDDLF gRJDDLF, Pre-Command||Post-Command
Gui, Add, Button, x735 y260 w21 h23 vRJBUTG gRJBUTG, + ;PrePost Add
Gui, Add, Combobox, x590 y283 w143 vRJCBXH gRJCBXH +0x2 +E0x5000 Right hidden,
Gui, Add, DropDownList, x590 y283 w143 vRJDDLP gRJDDLP +0x2 +E0x5000 Right,
Gui, Add, Button, x620 y308 w43 h23 vRJBUTO gRJBUTO hidden, Add
Gui, Add, Edit, x590 y308 w163 vRJEDTO gRJEDTO
Gui, Add, Button, x735 y282 w21 h23 vRJBUTH gRJBUTH, X ;PrePostDelete

Gui,Font,Bold
Gui, Add, GroupBox, x524 y340 w235 h86 vRJGRPD, Disk Mounting
Gui,Font,Normal
Gui, Add, CheckBox, x627 y349 h13 vRJENDMNT gRJENDMNT, Enable ;Disc Mounting
Gui, Add, DropDownList, x530 y364 w172 vRJDMNTDD gRJDMNTDD Disabled, DaemonTools||Other
Gui, Add, Button, x704 y364 w47 h22 vRJDIMGET gRJDIMGET Disabled, Browse
Gui, Add, Radio, x536 y390 h13 vRJRad8A gRJRad8A Disabled checked, pre-Emulator Run
Gui, Add, Radio, x536 y406 h13 vRJRad8B gRJRad8B Disabled, post-Emulator Run
Gui, Add, Checkbox, x671 y386 h17 vRJENDMOV +0x20 gRJENDMOV Disabled, Disk Override

Gui,Font,Bold
Gui, Add, GroupBox, x503 y430 w256 h77 vRJGRPC, Emulator Config Files
Gui,Font,Normal
Gui, Add, Text, x510 y463 h18 vRJTXTL, Pre-Run
Gui, Add, CheckBox, x630 y443 h13 vRJCHKF gRJCHKF, Create ;CfgCreation
Gui, Add, CheckBox, x687 y443 h13 vRJCHKO gRJCHKO Disabled, Overwrite
;;gui, Add, Radio, x511 y423 h16 vRJRad6A gRJRad6A Disabled checked, Copy
;;gui, Add, Radio, x511 y439 h16 vRJRad6B gRJRad6B Disabled, Move
Gui, Add, ComboBox, x557 y459 w158 vRJPRECFGCBX gRJPRECFGCBX disabled, 
Gui, Add, Button, x715 y458 w20 h23 vRJADDPRECFG gRJADDPRECFG disabled, + ;Add Pre Cfg Cmd
Gui, Add, Button, x734 y458 w20 h23 vRJREMPRECFG gRJREMPRECFG disabled, - ;Remove Pre Cfg Cmd
Gui, Add, Text, x510 y486 h18 vRJTXTM, Post-Run
;;gui, Add, Radio, x511 y469 h15 vRJCPYMVCFGA gRJCPYMVCFG Disabled, Copy
;;gui, Add, Radio, x511 y484 h16 vRJCPYMVCFGB gRJCPYMVCFG Disabled Checked, Move
Gui, Add, ComboBox, x557 y481 w158 vRJPOSTCFGCBX gRJPOSTCFGCBX disabled, 
Gui, Add, Button, x715 y480 w20 h23 vRJADDPOSTCFG gRJADDPOSTCFG disabled, + ;Add Post Cfg Cmd
Gui, Add, Button, x734 y480 w20 h23 vRJREMPOSTCFG gRJREMPOSTCFG disabled, - ;Remove Pre Cfg Cmd


Gui, Add, CheckBox, x401 y269 h15 vRJCHKR gRJCHKR, Multi-Disk
Gui, Add, ComboBox,x372 y247 w191 vRJCBXJ gRJCBXJ Disabled, (Disk 1 of||(Disk 1 of|(Disk A|Disk 1
Gui, Add, Text, x484 y270 vRJTXTJ, disk identifiers

Gui, Add, ComboBox, x282 y289 w277 vRJEMUXTCBX gRJEMUXTCBX, .exe`,.cmd`,,bat||.bin`,.cue

Gui, Add, Text, x280 y314 h16 vRJTXTG, ROM extensions
Gui, Add, CheckBox, x383 y315 h17 vRJCHKU gRJCHKU checked, Quotes
Gui, Add, CheckBox, x440 y315 h17 vRJCHKT gRJCHKT checked, Path
Gui, Add, CheckBox, x487 y315 h17 vRJCHKS gRJCHKS checked, Extension

Gui, Add, ComboBox, x284 y345 w158 vRJEOPTSCBX gRJEOPTSCBX, %rjemuopt%
Gui, Add, Text, x454 y349 h17 vRJTXTZ, options
Gui, Add, ComboBox, x284 y369 w158 vRRJEARGSCBX gRRJEARGSCBX, %rjemuarg%
Gui, Add, Text, x456 y370 h17 vRJTXT1A, arguments

Gui, Add, Radio, x284 y410 h18 vRJRAD1A gRJRAD1A checked, Run from Emulator Directory
Gui, Add, Radio, x284 y392 h18  vRJRAD1B gRJRAD1B, Run from ROM Directory


;;gui, Add, Edit, x270 y416 w228 h39 vRJEDTA gRJEDTA ReadOnly, output
gui,add,checkbox, x278 y491 h14 vRJCHKJ gRJCHKJ Checked, Preview Jackets
Gui, Add, DropDownList, x273 y437 w199 vRJQLSTDD gRJQLSTDD, QUEUE||%SYSTMQ%
Gui, Add, Button, x276 y465 w60 h23 vRJADDQ gRJADDQ Disabled, ADD
Gui, Add, Button, x477 y436 w21 h23 vRJREMQSYS gRJREMQSYS, X
Gui, Add, Text, x340 y468 h15 v vRJTXTAB, %RJQNUM% Systems
CNFRMT= Disabled
if (RJQNUM > 0)
	{
		CNFRMT= 
	}
Gui, Add, Button, x407 y460 w91 h40 vRJPROCQ gRJPROCQ %CNFRMT%, CONFIRM %RJQNUM%





;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SplashTextOn, ,skeletonKey,skeletonKey is loading....,
;{;;;;;;;;;;;;;;;;;;;;;;;;        [[ CORE OPTIONS TAB ]]        ;;;;;;;;;;;;;;;;;;;;;
Gui, Tab, 9
Gui, Tab, Core-CFG
Gui, Add, Picture, x36 y355 w128 h94 vPICINV, cor.png

Gui,Font,s7 Bold
Gui, Add, GroupBox, x18 y24 w732 h457, Core Options
Gui,Font,s7 Norm 
Gui, Add, DropDownList, x96 y56 w194 vCOREDDLA gCoreDDLA, Select_A_Core||%corelist%
Gui, Add, Text, x56 y56 w33 h22, Core
Gui, Add, DropDownList, x136 y96 w151 vCOREDDLB gCoreDDLB,
Gui, Add, DropDownList, x136 y128 w151 vCOREDDLC gCoreDDLC,
Gui, Add, DropDownList, x136 y160 w151 vCOREDDLD gCoreDDLD,
Gui, Add, DropDownList, x136 y192 w151 vCOREDDLE gCoreDDLE,
Gui, Add, Text, x40 y96 w90 vCOREDDLTXTB, CoreDDLtxtB
Gui, Add, Text, x40 y128 w90 vCOREDDLTXTC, CoreDDLtxtC
Gui, Add, Text, x40 y160 w90 vCOREDDLTXTD, CoreDDLtxtD
Gui, Add, Text, x40 y192 w90 vCOREDDLTXTE, CoreDDLtxtE
Gui, Add, Radio, x40 y224 w118 vCORERADA gCoreRadA, CoreRadA
Gui, Add, Radio, x40 y248 w118 vCORERADB gCoreRadB, CoreRadB
Gui, Add, ComboBox, x160 y224 w127 vCORECMBA gCoreCMBA, ComboBox
Gui, Add, Text, x168 y248 w118 vCORECMBTXTA, CoreCMBtxtA
Gui, Add, Radio, x40 y280 w165 vCORERADC gCoreRadC, CoreRadC
Gui, Add, Radio, x40 y304 w165 vCORERADD gCoreRadD, CoreRadD
Gui, Add, Radio, x40 y328 w165 vCORERADE gCoreRadE, CoreRadE
Gui, Add, Radio, x40 y352 w165 vCORERADF gCoreRadF, CoreRadF
Gui, Add, CheckBox, x312 y96 w140 vCORECHKA gCoreCHKA, CoreCHKA
Gui, Add, CheckBox, x312 y120 w140 vCORECHKB gCoreCHKB, CoreCHKB
Gui, Add, CheckBox, x312 y144 w140 vCORECHKC gCoreCHKC, CoreCHKC
Gui, Add, DropDownList, x312 y176 w143 vCOREDDLF gCoreDDLF,
Gui, Add, Text, x464 y176 w95 vCOREDDLTXTF, CoreDDLtxtF
Gui, Add, Radio, x312 y208 w145 vCORERADG gCoreRadG, CoreRadG
Gui, Add, Radio, x312 y232 w145 vCORERADH gCoreRadH, CoreRadH
Gui, Add, CheckBox, x216 y296 w125 vCORECHKD gCoreCHKD, CoreCHKD
Gui, Add, CheckBox, x216 y320 w125 vCORECHKE gCoreCHKE, CoreCHKE
Gui, Add, ComboBox, x168 y352 w168 vCORECMBB gCoreCMBB, ComboBox
Gui, Add, Text, x176 y376 w160 vCORECMBTXTB, CoreCMBtxtB
Gui, Add, Slider, x352 y296 w151 h25 vCORESLDA gCoreSLDA, 50
Gui, Add, Text, x512 y296 w125 vCORESLDTXTA, CoreSLDtxtA
Gui, Add, Radio, x472 y56 w68 w90 vCORERADI gCoreRadI, CoreRadI
Gui, Add, Radio, x472 y80 w68 w90 vCORERADJ gCoreRadJ, CoreRadJ
Gui, Add, Radio, x472 y104 w128 vCORERADK gCoreRadK, CoreRadK
Gui, Add, Radio, x472 y124 w128 vCORERADL gCoreRadL, CoreRadL
Gui, Add, DropDownList, x40 y408 w169 vCOREDDLG gCoreDDLG,
Gui, Add, DropDownList, x40 y440 w169 vCOREDDLH gCoreDDLH,
Gui, Add, Text, x224 y408 w115 vCOREDDLTXTG, CoreDDLtxtG
Gui, Add, Text, x224 y440 w115 vCOREDDLTXTH, CoreDDLtxtH
Gui, Add, CheckBox, x464 y208 w90 vCORECHKF gCoreCHKF, CoreCHKF
Gui, Add, CheckBox, x464 y232 w94 vCORECHKG gCoreCHKG, CoreCHKG
Gui, Add, Radio, x360 y344 w138 vCORERADM gCoreRadM, CoreRadM
Gui, Add, Radio, x504 y344 w138 vCORERADN gCoreRadN, CoreRadN
Gui, Add, DropDownList, x560 y144 w100 vCOREDDLI gCoreDDLI,
Gui, Add, Radio, x605 y104 w150 vCORERADO gCoreRadO, CoreRadO
Gui, Add, Radio, x605 y124 w150 vCORERADP gCoreRadP, CoreRadP
Gui, Add, CheckBox, x669 y144 w85 vCORECHKH gCoreCHKH, CoreCHKH
Gui, Add, Radio, x563 y178 w72 w90 vCORERADQ gCoreRadQ, CoreRadQ
Gui, Add, Radio, x563 y201 w72 w90 vCORERADR gCoreRadR, CoreRadR
Gui, Add, DropDownList, x560 y144 w100 vCOREDDLJ gCoreDDLJ,
Gui, Add, Radio, x465 y264 w72 w132 vCORERADS gCoreRadS, CoreRadS
Gui, Add, Radio, x608 y264 w72 w132 vCORERADT gCoreRadT, CoreRadT
Gui, Add, DropDownList, x562 y228 w100 vCOREDDLK gCoreDDLK,
Gui, Add, Text, x459 y148 w95 h13 vCOREDDLTXTI, CoreDDLtxtI
Gui, Add, CheckBox, x667 y232 w85 vCORECHKI gCoreCHKI, CoreCHKI
Gui, Add, Radio, x654 y178 w72 w90 vCORERADU gCoreRadU, CoreRadU
Gui, Add, Radio, x655 y200 w72 w90 vCORERADV gCoreRadV, CoreRadV
Gui, Add, DropDownList, x560 y144 w100 vCOREDDLL gCoreDDLL, 

Gui, Add, CheckBox, x313 y57 h18 vCOREOPTCPY gCoreOptCopy, =Enable=

Gui, Add, Button, x685 y57 w50 h17 vLOADRACORE gLoadRACFG, LOAD
Gui, Add, Button, x623 y57 w50 h17 vSAVECOREOPT gSaveCoreOptions, SAVE
Gui, Add, Button, x564 y57 w50 h17 vRESETCOREOPT gResetCoreOptions, RESET

GuiControl,,COREOPTCPY,%CORECOPY%
Gui,Font,s7 Bold
Gui, Add, GroupBox, x558 y38 w184 h43, retroarch-core-options.cfg
Gui, Add, GroupBox, x347 y397 w403 h83, Core-Override Configuration File
Gui,Font,s7 Norm 
Gui, Add, Edit, x474 y425 w254 h21 vCORENAMEDT,
Gui, Add, Button, x635 y452 w50 h17 vSELCORCFGLOC gSelectCoreCfgLoc, Browse
Gui, Add, Button, x690 y452 w50 h17 vSAVECORECFG gSaveCoreCfg, Save
Gui, Add, Text, x365 y423 w102 h23 vCORENAMTXT, CoreOverride Confg
Gui, Add, Button, x731 y426 w13 h19 vDELCORECFG gDeleteCoreCfg, X

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;        ----    END MENU SYSTEM    ----        ;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;    +++         POST GUI SETUP          +++     ;;;;;;;;;;;;;;;;

Gui, Add, ListBox, x488 y330 w50 h50 gGuiDropFiles Hidden, Drop ROM here 
;;gosub GLPoP
SplashTextOn, ,skeletonKey,skeletonKey is loading.....,
gosub, NetSET
gosub, HideCoreUI
gosub, ShowBB
;;gui, color, white
TrayTip

Menu,Tray,Tip
Gui,+LastFound
GuiID:=WinExist()
Gui, Show, Autosize,skeletonKey
SplashTextOff
Guicontrol,,TABMENU,|Install-Apps|Options||JoyPad-CFG|Playlists|Frontends|Archive.org|Netplay-Lobby|Jackets
setPortable:
OnMessage(0x200, "WM_MOUSEMOVE")

WM_MOUSEMOVE(){
	
	static CurrControl, PrevControl, _TT
	CurrControl := A_GuiControl
	If (CurrControl <> PrevControl)
		{
			SetTimer, DisplayToolTip, -300 	
			PrevControl := CurrControl
	
			if (CurrControl = "ESIMGBUT")
				{
					guicontrolget,imgprev,,ESOPNIMGPTHTXT
					gosub, IMGTOOLTIPN
					return
				}
			if (CurrControl = "ESMARQBUT")
				{
					guicontrolget,imgprev,,ESMARQPTHTXT
					gosub, IMGTOOLTIPN
					return
				}
			if (CurrControl = "ESTHUMBBUT")
				{
					guicontrolget,imgprev,,ESTHUMBP
					gosub, IMGTOOLTIPN
					return
				}
					if (CurrControl = "FEPICA")
				{
					guicontrolget,imgprev,,FELBXB
					gosub, MEDIATOOLTIP
					return
				}
			if (CurrControl = "GLSHDVAR")
				{
					gosub, IMGTOOLTIP
					return
				}
			if (CurrControl = "SLSHDVAR")
				{
					gosub, IMGTOOLTIP
					return
				}
			if (CurrControl = "CGSHDVAR")
				{
					gosub, IMGTOOLTIP
					return
				}
		}
	return
	
	DisplayToolTip:
	try
			ToolTip % %CurrControl%_TT
	catch
			ToolTip
	SetTimer, RemoveToolTip, -2000
	return
	
	RemoveToolTip:
	ToolTip
	return
}

;{;;;;;;;;;;;;;;;;;;;;;;;;       -o-o-o-o-o-o-o       TOOLTIPS      o-o-o-o-o-o-o-       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ADDNSYS_TT :="Name of the new system"
ADJS_TT :="Automatically assigns joysticks."
ALTURL_TT :="Enables an alternate URL prefix for archives`n-- may be beneficial for proxies --"
ALSLV_TT :="Allows connections in slave mode.  Requires less processing power for client and host,`nbut suffers from network latency."
ANLDP_TT :="Uses the analog stick as the directional pad for systems without an analog stick"
APORTNUM_TT :="The open port to your hosting session"
APPARG_TT :="Arguments for the emulator.`nThese are specified after the $ROM`nenter ''[CUSTMARG]'' to allow custom argumnts at runtime"
APPOPT_TT :="Options for the emulator.`nThese are specified after the exe and before the $ROM`nenter ''[CUSTMOPT]'' to allow custom options at runtime"
ARCCORES_TT :="Select a core to use"
ARCHOST_TT :="Hosts the selected ROM."
ARCLOGIN_TT :="Archive.org email addresss login."
ARCLNCH_TT :="Play the selected rom using current settings."
ARCNCT_TT := "Connect to the selected host with the selected Archive.org ROM"
ARCPASS_TT :="Archive.org login password."
ARCPOP_TT :="POPULATED ROMS"
ARCSYS_TT :="Select a System to populate ROMs"
ARDCORE_TT :="Assigns an alternative retroArch core to the selected system."
ART_TT :="Rate-Control"
ASCORE_TT := "Core to assign to the specified system or extension set"
AUTSYS_TT :="Auto Selects a system based upon the selected host's core."
ASYNC_TT :="Syncs audio"
AUM_TT :="Allows all users to controll the menu"
AUO_TT :="Auto-loads core and game overrides"
AUTOASPECT_TT :="if this is true and video_aspect_ratio is not set`nthen the aspect ratio is decided by libretro implementation`nIf this is false, 1:1 PAR will always be assumed if video_aspect_ratio is not set."
AUTOCORE_TT := "Automatically match the host's selected core`nUnchecking allows users to select a core from your libretro (cores) diretectory"
AUTOLNCH_TT :="Automatically runs the dropped ROM using the settings defined in the current tab."
AUTSHD_TT :="Automatically does the thing"
AVAIL_TT :="Latest cores and updates available on the libretro buildbot."
BBOT_TT :="Cores available on the Libtretro BuildBot"
BCKCORE_TT :="Creates a backup of your original and updated cores and retroarch.`n(renamed to retroarch.exe.orig or ''.bak'' / core_libretro.dll.orig or ''.bak'')"
BFI_TT :="for 120hz monitors.  Inserts a black frame to interpolate 60hz games)"
BOXCVR_TT :="Front of the box"
BRADD_TT := "Browse for ROMs to add to your current playlist."
CGSLCT_TT := "Should work with most display modes"
CGSHDVAR_TT :="CG Shader"
CHKPORTS_TT :="Checks each host to determine if the hosting port can recieve a connection.`n-- Can slow down lobby population, but reduces trouble-shooting difficulties. --"
CHECKFRAMES_TT :="Increase this number the further away you are from your partner"
CHEMUINST_TT :="Select a destination directory for the selected emulator.`n The emulator will be installed into its own folder"
CINC_TT :="Currently Installed Cores"
CLIENTSWITCH_TT :="Connect to hosts."
CLIPURL_TT :="Copies the currently selected ROM's URL to the clipboard"
CLRCUROM_TT := "Clear the currently selected ROM and core."
CLRDDL_TT :="Define the color of menu and video display items."
CLRPL_TT :="Clears Playlist"
CLRPLYR_TT :="Clears the settings for all controls.`n''nul''"
CLRPP_TT :="Clears populated ROMs"
CLRTHM_TT :="Color theme"
CMPAN_TT :="Shows a brief description of menu items in the XMB GUI"
CNCLDWN_TT :="Cancel the download"
CNCTBUT_TT :="Connects/Invades using selected settings."
COREOPTCPY_TT :="Copies current core-options at launch`n then copies back changes made in retroarch."
CPORTNUM_TT :="Port of the Host."
CPYPL_TT :="Add selected ROMs to your current playlist"
CRNTCORS_TT :="Currently installed cores"
CROP_TT :="Crops video to fit the selected aspect ratio"
CSTCMD_TT :="Enter any options you wish to use (disables currently selected ROM)"
CSTCRE_TT :="allows you to specify a libretro core in any location"
CSTMCORE_TT :="enter the location of a core_libretro.dll"
CSTMROM_TT :="any options can be typed in here"
CURPLST_TT :="ROMs here will be added to the playlist"
CUSTSWITCH_TT :="Enables custom options/arguments replacing`n ''[CUSTMOPT]'' and ''[CUSTMARG]'''`nspecified for applications in the core-associations section of the install tab."
CUSTSWITCHS_TT :="Enables custom options/arguments replacing`n ''[CUSTMOPT]'' and ''[CUSTMARG]'''`nspecified for applications in the core-associations section of the install tab."
D3DDRV_TT :="works with the RGUI menu only"
CUSTMOPT_TT :="Custom options replacing ''[CUSTMOPT]'' specified for applications in the'`ncore-associations section of the install tab"
CUSTMOPTS_TT :="Custom options replacing ''[CUSTMOPT]'' specified for applications in the'`ncore-associations section of the install tab"
CUSTMARG_TT :="Custom arguments replacing ''[CUSTMARG]'' specified for applications in the'`ncore-associations section of the install tab"
CUSTMARGS_TT :="Custom arguments replacing ''[CUSTMARG]'' specified for applications in the'`ncore-associations section of the install tab"
DAPP_TT :="Assign an application to the selected system."
DATEMNU_TT :="Shows the time and date in the main menu"
DCORE_TT :="Resets the currently selected system to its associated retroArch core."
DELCORECFG_TT :="Deletes current core-configuration file"
DETECTCORE_TT := "Allows RetroArch to autodetect or allow uers to assign a core to ROMs upon launching from the playlist"
DISPLRATXT_TT :="The currently detected retroarch settings"
DISPLSKTXT_TT :="The currently detected skeletonkey settings"
DOPT_TT :="Downlods folder (core_assets_directory)"
DOWNONLY_TT :="Downloads the selected ROM only. "
DPIOVR_TT :="Override the dpi of the video font"
DSND_TT :="The default sound driver"
DTCOMP_TT :="Toggles desktop compositing.`n Works in windows 7 and older only"
DUTYCYCLE_TT :="How long the period of a turbo-enabled button should be.`nNumbers are in frames"
DWNLPOS_TT := "Folders populating your core-assets directory (Downloads)"
DYNWALL_TT :="Selects wallpaper which matches the current playlist item."
DirBut_TT :="Select a location"
EAVAIL_TT :="The system for which you'd like to install an emulator for."
EINSTLOC_TT :="The location of the emulator."
EMUASIGN_TT :="Sets the system's default override assignment to the selected emulator."
ESDWNLPOS_TT :="The current system-list"
ESPLCORE_TT :="The Displayed Name for the ROM and the type of search for images."
ESBACKUP_TT :="Backup the current gamelist.xml"
ESSVPL_TT :="Creates the gamelist.xml"
ESPLXMP_TT :="The name of the system"
ESOPENPL_TT :="Open a gamelist.xml for editing."
ESCPYSCR_TT :="copies and renames scraped images to the ''downloaded_images'' folder`nin the home-folder of emulationStation."
ESUSESCR_TT :="Uses any scraped content unless otherwise specified."
ESBOXSRCHBUT_TT :="Overrides and sets the path to box-art images."
ESRPOPDL_TT :="Populates the ROM-List with Jackets."
ESRPOPPL_TT :="Populates the ROM-List with Mirrored-Links."
ESRPOPROM_TT :="Populates the ROM-List with All Files found in a directory."
ESMIRSEL_TT :="The Selected mirror from which to populate the ROM-List."
ESROMROOT_TT :="Selects a directory to populate the ROM-List."
INSTEMUDDL_TT :="Select an emulator for the selected system"
EMUINST_TT :="Downloads and installs the selected emulator"
EXCLBOOL_TT :="Excludes the ROM list using filtered extensions."
EXELIST_TT :="Install RetroArch executable and assets"
EXTINP_TT :="extensions to assign.`nseparate by a comma.`neg: bin,zip,rom"
EXTRURL_TT :="If the ROM is a compressed archive, it will be extracted"
EXTPARSED_TT :="Comma separated extensions to filter ROMs.`nDo not include spaces or periods"
FILESERV_TT :="Enables the file-server to allow clients to download your currently hosted ROM"
FILTEXT_TT :="Filter files being show in 'Load Content' by supported extensions"
FILTSEL_TT :="Browse for a filter"
FLICKF_TT :="try different values"
FLK_TT :="may help with flickering"
FLTXT_TT :="Filters the ROM list for given extensions."
FNTSZ_TT :="Sets the video-font display size"
FORCEAR_TT :="Forces rendering area to stay equal to content aspect ratio or as defined in video_aspect_ratio."
FORCEROM_TT := "Forces the connection using a selected ROM"
FRAMEDELAY_TT :="Increase this number the further away you are from your partner"
FRMDL_TT :="Sets how many milliseconds to delay after VSync before running the core.`n Can reduce latency at cost of higher risk of stuttering."
FSREZ_TT :="Monitor resolution"
GCUPDT_TT :="Checks for updates to all existing cores"
GDIDRV_TT :="older machines may need to use this mode`nworks with RGUI menu only"
GLBLAUDIO_TT :="toggles the audio output."
GLSLCT_TT := "Works with OpenGL"
GLSHDVAR_TT :="GL Shader"
GMENU_TT :="For phones and crap"
GPUSS_TT :="Snaps screenshots as they are displayed through your videocard (with shaders)"
GPUVREC_TT :="Records video as it's displayed through your videocard (with shaders)"
GPUV_TT :="Sets how many frames CPU can run ahead of GPU when using video_hard_sync."
GRAVER_TT :="Detect RetroArch version and build number"
GROM_TT :="Browse for a ROM"
GTHMB_TT :="Browse for any jpg or png file to use as a thumbnail."
HKEYDD_TT :="hotkeys define emulator and retroArch abilities.`n''Input_enable_hotkey'' should be used to minimize conflicts"
HOPT_TT :="Playlists in your playlists directory"
HOSTCORES_TT := "Filter rooms using by core"
HOSTIP_TT :="Your current IP Address"
HOSTSWITCH_TT :="Host ROMS."
HOVPREV_TT :="Preview images by hovering over the button or dropdown menu."
HSYNC_TT :="Attempts to hard-synchronize CPU and GPU. Can reduce latency at cost of performance."
HostButton_TT :="Hosts the currently selected ROM"
IDDINP_TT :="direct input driver"
IDSDLINP_TT :="legacy driver"
IMGFLS_TT :="Thumnail image files"
INCLBOOL_TT :="Filter the list to include extensions."
INJPORTABLE_TT :="Saves and configures the current settings"
INTG_TT :="Only scales video in integer steps.`nhe base size depends on system-reported geometry and aspect ratio.`nIf video_force_aspect is not set, X/Y will be integer scaled independently."
INVADE_TT :="Enables the invade option allowing skeletonKey to auto-detect selected host strings."
INETHOST_TT :="Enables hosting through retroarch's relay-server if a direct connection can not be initialized or a port cannot be opened to the server."
IPORTNUM_TT :="Port for your retroArch Host to recieve clients on."
JCFGADD_TT :="Create a custom name for input-remapping configuration file."
JOYCORE_TT :="core to customize an input-remapping configuration."
JSDLDRV_TT :="legacy driver"
JXINDRV_TT :="xbox360/xbox one/ps3/ps4 and compatible joystick driver"
KARC_TT :="Keep archives after downloading and extracting"
KBGP_TT :="Enables using the keyboard as a gamepad"
LANIPRAD_TT :="Local network address" 
LATENCY_TT :="Desired audio latency in milliseconds. Might not be honored if driver can't provide given latency."
LCORE_TT :="Select a libretro core or emulator"
LNCHBUT_TT :="Launch the currently displayed ROM"
LOCEMUIN_TT :="Selects an emulator executable and assisns it to the selected systems"
LOCROMSRCH_TT :="Search for a ROM`n do not include wildcards (*) or other special characters"
LOCASSETDDL_TT :="Search within"
LOADRACORE_TT :="Loads a core-options configuration."
MGPC_TT :="The joystick button combo to open the GUI menu."
MINLAT_TT :="The number of frames of input latency for netplay to use to hide network latency.`nReduces jitter and makes netplay less CPU-intensive at the expense of input lag."
MNUACT_TT :="Define the button which will be assigned to menu functions"
MNUFLT_TT :="Filters the menu display using a linear filter"
MNUJOY_TT :="The button number as it corresponds to default values in the joystick tab"
MNUPNT_TT :="Enable touch input inside the menu."
MNUSYS_TT :="Select System"
MONUM_TT :="0 automatically detects and uses the primary monitor"
MOUSEON_TT :="Allows you to use the mouse within the XMB GUI."
MSWCHI_TT :="Tells the video driver to use a specified buffering mode.`n3 is good for slower machines.  2 for stronger."
MULTILNK_TT :="Assigns a single system nickname-identfier for all selected systems.`nf"
MUTE_TT :="Mutes all audio"
MXUSR_TT :="Maximum users displayed in the GUI"
NAVWRAP_TT :="Revolves the menu when reaching the end"
NETCONNECT_TT := "Connect to the selected host"
NETCORE_TT := "Assigns a core to the ROM to connect to the selected host"
NETCOREASSETS_TT :="Select a filter for skeletonKey to search within.`n -- Selecting ''All_Playlists'' -- will search through every playlist for a matching ROM. --"
NETDWNL_TT := "Select a subdirectory from your core-assets directory."
NETIPRAD_TT :="Internet ip address"
NETNAME_TT :="Your netplay user name"
NETPLIST_TT := "Select a playlist file to parse for the matching ROM"
NETPW_TT :="Netplay Password"
NETROMLIST_TT := "The ROM which will be used to connect with the currenly selected host"
NETROM_TT := "Browse for a ROM file"
NETHROM_TT := "Browse for a ROM file to host"
NETCROM_TT := "Browse for a ROM file to connect with"
NETSPECPW_TT :="Netplay spectator password"
NOROT_TT :="Don't rotate the video"
NOSTATE_TT := "Extremely Low-Latency netwok play can try to sync using`na mode which does not use save states."
OEMUDEL_TT :="Deletes the Current emulator from the apps.ini list."
OEMUSV_TT :="Saves the Current emulator to your Emulators list using the nickname"
OEMUNICK_TT :="NickName of the custom emulator"
OGLDRV_TT :="OpenGL is the default and most compatible option"
OMITPTH_TT :="Runs the ROM using only the file.`n--Useful for mame--"
OMITQ_TT :="Removes quqtes from the ROM`n--useful for mame--"
OPACDDL_TT :="Set the opacity of the selected item using the slider."
OPNCORE_TT :="Displays emulator and core-configuration options"
OPNPLST_TT :="Open a .lpl playlist file to edit.`n** You can not ADD items while editing an existing ''open'' playlists**"
OPNSYS_TT :="Add a customized system."
OPTDDL_TT :="A playlist file or Downloads subdirectory containing ROMs."
OUTFS_TT :="Fills the entire screen with retroArch"
OUTFW_TT :="When in fullscreen mode, will use the current monitor resolution"
OUTW_TT :="Displays retroArch in a window"
OVDCHK_TT :="Overrides the default directory for downloaded archives."
OVLIST_TT :="Up to 4 sets of extensions can be reassigned to a core or emulator."
PARSEALL_TT :="Will not filter any ROMs."
PAUSEBG_TT :="Pauses retroarch when not the top window"
PAUSMNU_TT :="Pauses the currently active media while in the menu"
PGCONFG_TT :="Creates a config file for every ROM in the currently selected playlist`nA core must be specified for playlist creation to "
PGM_TT :="Use game-specifc overrides"
PLAPPND_TT :="Appends ROMs in your currently selected playlist to a playlist with the same name."
PLCORE_TT := "Selects a core to assign to ROMs in the active playlist"
PLINIT_TT :="Recreates the playlist datbase for netplay."
PLNAMEDT_TT :="Gloabally identified pre-existing names for playlists`n(You can also type your own names)"
PLOVR_TT :="Overwrites playlists and per-ROM config files with identical names."
POLLING_TT :="Influence how input polling is done inside retroArch.`nSetting to ''Early'' or ''Late'' can result in less latency`ndepending on  your configuration"
PRBFND_TT :="String to replace`nLeaving this blank will enable skeletonKey to search for the default assets_directory:`n''\retroarch\downloads''"
PRBREP_TT := "Should be your current portable download folder`n''retroarch's assets_directory''"
PplTxt_TT :="changes absolute paths to relative paths where possible in retroarch configurations"
PSTIP_TT :="Pastes the i.p address:portnumber"
PthBut_TT := "Select the file"
PRVTSV_TT :="Disables netplay visibility for public servers`n(Private hosting)"
RALIST_TT :="Install RetroArch game and emulator cores."
RATESLD_TT :="offset"
RECURSE_TT :="Searches subdirectories for files'"
REDWN_TT :="Re-download the ROM if it exists.`n(existing ROM will be renamed to .bak"
REFHOSTS_TT :="Refreshes the lobby with currently hosted ROMs."
REFRESH_TT :="refresh rate"
REMPB_TT :="Automatically loads joystick mappings"
REMPL_TT :="Removes selected ROMs from your current playlist"
RESETCOREOPT_TT := "Resets the currently selected core options to default settings"
RETROM_TT := "Enables retrieving the rom from the host's file-server"
REWEN_TT :="Enables rewinding.`nRewind may increase lag"
REWGRAN_TT :="lower values increase the amount of smoothness of rewind"
REZV_TT :="Video resolution"
RIBN_TT :="Background ribbon display"


RJSYSDD_TT :="System to Process"
RJButA_TT :="Create or copy  a system."
RJINCEXCL_TT :="ROM-List to display"
RJCHKG_TT :="Automatically populates the ROM-List with content`nUnchecking this will enable filtering before population."
RJRFRSHLST_TT :="Refreshes the ROM-List"
RJEDTD_TT :="ROM-Number to begin listing`neg:0 will list first rom"
RJEDTDN_TT :="Any ROMs/Jackets Beginning with and alphabetically after this letter are listed.`neg: Enter 0 to include all ''numbered'' ROMs/Jackets"

RJEDTB_TT :="ROM-Number to end listing`neg:0 will list LAST ROM"
RJEDTBN_TT :="Any ROMs/Jackets beginning with this letter will not be listed"
RJEDTO_TT :="Options to add to the current command"

RJLSTYP_TT :=" Content to list"
RJFLTRLST_TT :="Filters between two alphanumeric characters"
RJEDTC_TT :="Filters the ROM-List for all content containing the entered characters."
RJFNDINLST_TT :="Searches and displays content for the current system"
RJLSTV_TT :="ROM-List`nJackets have a '':'' prefix."
RJSALITMS_TT :="Selects ALL items in the ROM-List"

RJCHKL_TT :="Deletes Launchers for the selected items in the ROM-List"
RJCHKM_TT :="Deletes Config Files for the selected items in the ROM-List"
RJCHKP_TT :="Deletes Joystick Profiles for the selected items in the ROM-List"
RJDELCOMP_TT :="Deletes checked items for the selected items in the ROM-List"

RJSYSRADA_TT :="Loads the previous existing settings for the system"
RJSYSRADB_TT :="Loads the default settings for the system"
RJSYSRADC_TT :="Changing the default or previous settings will toggle this"
RJSYSSAV_TT :="Previous settings for the system are overwritten with current ones."

RJENMAP_TT :="Enables the keymapper"
RJOVKM_TT :="Will create new keymapper profiles`nand overwrite any existing ones"
RJMAPDD_TT :="Keymapper program"
RJMAPRET_TT :="Profile to load when the emulator exits."
RJMAPRETOPN_TT :="Select the Return-profile`n(this is usaually a profile which can control the frontend"
RJMAP1ROFTYPA_TT :="Assigns Joystick presets for player 1"
RJMAP1ROFTYPB_TT :="Assigns Keyboard presets for player 1"
RJMAP1ROFTYPC_TT :="Assigns a blank profile for player 1"
RJMAP1PL_TT :="Profile to load for Player 1"
RJMAP1PLOPN_TT :="Select the profile for player 1"
RJMAP2ROFTYPA_TT :="Assigns Joystick presets for player 2"
RJMAP2ROFTYPB_TT :="Assigns Keyboard presets for player 2"
RJMAP2ROFTYPC_TT :="Assigns a blank profile for player 2"
RJMAP2PL_TT :="Player 2 keymapper profile"
RJMAP2PLOPN_TT :="Select the profile for player 2"
RJSYSSAVAS_TT :="Save As"
RJSYSLOAD_TT :="Load a preset"
RJENLNCHR_TT :="Create launchers"
RJLNCHOVR_TT :="Overwrites existing launchers with current settings"
RJRad4B_TT :="Disables Per-Game configurations"
RJRad4A_TT :="Enables Per-Game configurations"
RJEMUPRECFG_TT :="Emulator Preset"
RJEMUPRM_TT :="Configure Emulator Preset"
RJCHKQ_TT :="Enables a user-defined alternative emulator to be selected"
RJBUTM_TT :="Select an emulator executable"
RJCHKK_TT :="Each launcher is injected with the unique ROM's name.`nif disabled, the ROM is ''found'' by the launcher.`nEnabling this option will dramatically increase launcher-creation time"
RJCHKW_TT :="Wait for command to exit"
RJCHKA_TT :="ROMs are moved into folders of their respective names"
RJENCNSLD_TT :="Will help wrangle multi-disk games, duplicates, clones and regional versions of ROMs.`n''()'' and ''[]'' notations are removed from ROM-Jacket names."
RJENXTRARC_TT :="Extracts .7z, .zip and .rar files"
RJXTRARCA_TT :="Archives are extracted before jackets are created."
RJXTRARCB_TT :="Archives are extracted after jackets are created."
RJXTRARCDD_TT :="Store will move archives to skeletonKey's temp directory`nDelete will delete the archive after extraction`nKeep will not delete or move the archive"

RJRad11A_TT :="File is in the jacket`nLocal path: eg: run.cmd"
RJRad11B_TT :="File is anywhere`nAbsolute path: eg: C:\run.cmd"
RJDDLF_TT :="Pre-command is a file executed before the emulator launches`nPost-command is a file executed after the emulator launches"
RJBUTG_TT :="Adds a command"
RJBUTV_TT :="Edits selected command"
RJDDLP_TT :="Current absolute command"
RJCBXH_TT :="Current local command"
RJBUTH_TT :="Deletes the selected command"

RJENDMNT_TT :="Enables Disc-Mounting"
RJDMNTDD_TT :="Disc-Mounting program"
RJDIMGET_TT :="Overrides any disc found by skeletonKey"
RJRad8A_TT :="Mounts the disc before the emulator is run"
RJRad8B_TT :="Mounts the disc after the emulator is run"
RJENDMOV_TT :="Enables a disc to be selected and override any disc found in a jacket"

RJCHKF_TT :="Create emulator configuration files"
RJCHKO_TT :="Overwrites existing configuration files"
RJRad6A_TT :="Copies configuration files to the emulator directory"
RJRad6B_TT :="Moves configuration files to the emulator directory"

RJADDPRECFG_TT :="Add Pre-Config files"
RJREMPRECFG_TT :=" Remove Pre-Config files"
RJCPYMVCFGA_TT :="Copies configuration files back to the jacket"
RJCPYMVCFGB_TT :="Moves configuration files back to the jacket"
RJPOSTCFGCBX_TT :="Pre and Post Configs"
RJADDPOSTCFG_TT :="Add Post-run Cfg "
RJREMPOSTCFG_TT :="Remove Post-run Cfg"

;;RJCHKK_TT :="Brings forth a checkbox listview window for each system's`n jackets which are to be created prior to queue processing." 

RJEMUXTCBX_TT :="Extensions- seperate by comma. do not include periods."

RJRAD1A_TT :=" Runs the emulator from emulator's directory"
RJRAD1B_TT :=" Runs the emulator from ROM's directory"
RJCHKU_TT :="Quotes surround the ROM and ROM-Path`nthis should only be disabled for emulators which require an un-quoted ROM name`neg: MAME/Demul/FBA"
RJCHKT_TT :="Includes the path to the ROM as part of the run command.`nThis should only be disabled for emulators which run the game from a list or local to the ROM`n(eg"
RJCHKS_TT :="Includes the extension. `nThis should only be disabled for emulators which require an only the ROM name`neg: MAME/Demul/FBA"
RRJEARGSCBX_TT :="Arguments. `n   be sure to include a space before the argument.`neg: '' -argument''"

RJEOPTSCBX_TT :="Options.`n   be sure to include a space before and after the command`neg: '' -option ''"
RJCHKR_TT :="Enable Searching for multi-disk ROMs."
RJCBXJ_TT :="comma seperate strings to search for."

RJEDTA_TT :="command line output"

RJQLSTDD_TT :="System queue"
RJADDQ_TT :="Adds the selected ROMs in the ''Include'' ROM-List to the system's queue"
RJREMQSYS_TT :="Remove system from queue"

RJCNSLDD_TT :="Consolidation Methods:`n ''() []'' removes any (region) and any [tags] the Title may have.`n''()''  removes the region`n''[]'' removes any tags"

RJPROCQ_TT :="Processes the system queue."

RJADDSUBD_TT :="Add the subdirectory to the jackets."
RJREMSUBD_TT :="Remove the subdirectory from the jackets.`n      **This will not remove the directory if it is already created.**"
RJSUBDH_TT :="sets the visibility of the currently selected sub-directory."
RJSUBDCBX__TT :="The subdirectory to be created."

RJPRECFGCBX_TT :="Batch-script command to perform prior to emulator launch.`neg: copy /y ''*.cfg'' ''`%EMUL`%''"
RJPOSTCFGCBX_TT :="Batch-script command to perform after emulator exit.`neg: copy /y ''`%EMUL`%\*.cfg'' ''`%GAMDIR`%''"
RMPLOAD_TT :="Automatically load the core-input-remap file"
RMENU_TT :="bare-bones gui."
MROMDLOC_TT :="Select the location where ROMs exist.`nA junction-link will be made to this directory for each selected`nsystem into your retroarch downloads directory"
ROMDLOC_TT :="Select the location where ROMs exist.`nA junction-link will be made into your retroarch downloads directory"
ROMDEDT_TT :="Location of your ROM directory"
ROMFLS_TT :="Playlist ROM files"
ROMLOC_TT :="ROM which will be launched"
ROMPOP_TT :="Select ROMs to add from here"
ROOMFILTER_TT :="Filter the Lobby using any search term"
RSTPLYR_TT :="Resets the currently selected player controls to default"
RUNXTRACT_TT :="skeletonkey will try to run the extracted file"
EXTEXPLD_TT :="archive will be extracted (exploded) ignoring any subdirectories."
SALIST_TT :="Install standalone emulators"
SAVECOREOPT_TT := "Saves core-options config file for skeletonkey."
SAVEXIT_TT :="Saves retroarch settings upon exit.  Turning this on will allow skeletonKey to reload new settings after retroArch shuts down."
SAVNSYS_TT :="Save the new system"
SAVSRT_TT :="Battery and memory saves are stored in your specified save-location."
SDL2DRV_TT :="older machines may need to use this mode`nworks with RGUI menu only"
SDL2_TT :="older machines may need to use this option"
SAVPASS_TT :="Saves your archive.org password in skeletonkey's Settings.ini`n--note--`nthis is stored in plaintext --"
SEEKREP_TT :="Select a file to search for a ''retroarch's assets_directory'' location"
SERVPORT_TT :="Port for the file-server/client"
SETPSK_TT :="Select and set the portable skeletonKey location"
SETPRA_TT :="Select and set the portable retroarch location"
SETSYSTMP_TT :="Assigns the cache_directory (file-extraction) to the system's temp directory`nThe portable drive will be used for all temp-files if this is not enabled."
SHADW_TT :="Text shadows"
SHAREDV_TT :="Use a shared context for HW rendered libretro cores.`nAvoids having to assume HW state changes inbetween frames."
SHDSEL_TT :="Browse for a shader"
SHWADV_TT :="Shows the advanced settings for all menu items"
SHWFPS_TT :="Display the current Frames-Per-Second"
SHWHID_TT :="Show hidden files"
SHWHIS_TT :="Shows the history menu item"

MENSHOWCFG_TT :="Shows configurations menu"
MENSHOWCUP_TT :="Shows core-updater menu"
MENSHOWHLP_TT :="shows help menu"
MENSHOWINFO_TT :="shows info menu"
MENSHOWLDCONT_TT :="shows load-content menu"
MENSHOWLDCR_TT :="shows load-core menu"
MENSHOWONLUP_TT :="shows online-updater menu"
MENSHOWQUIT_TT :="shows quit menu item"
MENSHOWREB_TT :="shows reboot-menu item"

SHWIMG_TT :="Shows the Image-Menu item for any images in the history"
SHWMSC_TT :="Shows the Music-Menu item for any music in the history"
SHWSET_TT :="Shows Settings"
SHWVID_TT :="Shows the Video-Menu item for any videos in the history"
SLSHDVAR_TT :="Slang Shader"
SLSLCT_TT := "Works with Vulkan"
SLVONLY_TT :="Disallows connections not in slave mode.`nNOT reccommended except for very fast networks with weak machines."
SMTHV_TT :="Filters video output.  Turn this option off when enabling shaders."
SRCHARCORG_TT :="Automatically searches archive.org repository for matching ROM if a local copy is not found."
SRCHEDT_TT :="Search for an Archive.org ROM`ndo NOT include wildcards (*) or other special characters."
SRCHRSLT_TT :="SEARCH_RESULTS"
SSHTCVR_TT :="Video-snapshots"
STAI_TT :="# When saving a savestate, save state index is automatically increased before`nit is saved.`nAlso, when loading content, the index will be set to the highest existing index.`nThere is no upper bound on the index."
STAL_TT :="automatically loads your save-state upon starting the ROM"	
STAS_TT :="Automatically saves your state in incriments"
STORT_TT :="Save states are saved in the specified save-state location"
STRCH_TT :="Only scales video in integer steps.`nhe base size depends on system-reported geometry and aspect ratio.`nIf video_force_aspect is not set, X/Y will be integer scaled independently."
SVAPLST_TT :="Allows you to define a template for per-ROM config files generated.`nIf this is not defined prior to creation, the current skeletonKey settings are used."
SVNICK_TT :="Saves the current application settings with the nickname of the system identfier"
SVNICK_TT :="Deletes current application settings with the nickname of the system identfier"
SVPLST_TT :="Saves the current playlist"
SVTHMB_TT :="Save the currently selected thumbnail."
SWPV_TT :="Sets the v-sync frame number to buffer" 
SWPFRMTXT_TT :="changes the current items in the window to switch from excuded to included or included to excluded."
SWAPOKC_TT :="Swaps the ok and cancel menu buttons."
SWHOST_TT :="Hosts the ROM using settings defined in the ''Netplay'' tab."
SYSNICK_TT :="Unique System Identifer"
TGLREP_TT :="Enable string replacement"
THMBNEDT_TT :="This should match the name of the ROM in your playlist."
THRDV_TT :="Use threaded video driver.`nUsing this might improve performance at possible cost of latency and more video stuttering."
THRTL_TT :="Keeps the menu from going crazy"
THUMBON_TT :="Enables thumbnails for the XMB GUI"
TITLCVR_TT :="ROM titlle screen"
TRIPB_TT :="Decreases screen tearing."
TURBOP_TT :="Describes the period when turbo-enabled buttons are toggled`nNumbers are in frames"
UNIFMENU_TT :="Uses the same controls in the menu as with the current game. `nApplies to the keyboard"
UNIQLNK_TT :="Creates and assigns a unique system nickname identifier for each selected system.`nPer-system emulator configurations"
UPDBTN_TT :="Download selected components"
UPDCL_TT :="Refresh cores in your installation"
VFNTEN_TT :="Enables custom font display"
VIDASPECT_TT :="Aspect Ratio Mode"
VIDSCL_TT :="Multiplier for the window size"
VIDSYNC_TT :="Video V-Sync"
VLKDRV_TT :="requires a newer videocard capable of opengl 4x"
VidXLoc_TT :="horizontal position (in pixels) of the video on your monitor (only available in custom mode)"
VidYLoc_TT :="vertical position (in pixels) of the video on your monitor (only available in custom mode)"
XAUD_TT :="Another sound driver"
XMBALF_TT :="Menu opacity"
XMBSCL_TT :="Scales the XMB display"
XMBTHM_TT :="Icon theme number"
XMENU_TT :="Playstation-style GUI.  The Default"
ZIPSEEK_TT :="Searches within archives (.zip/.7z) for files.`nturn this off for Arcade/MAME-Style ROMs and archives." 
ZMENU_TT :="dunno.  might work."
vSHDEN_TT :="Toggles shader"
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

if (SETPORTABLE = 1)
	{
			gui,submit,nohide
			return
	}

if (locfnd = 1)
	{
		TrayTip,Installer,Install RetroArch and any cores you may desire,20,48
		GuiControl, Choose, TABMENU, 1
	}
	
gosub, IPDisplay
gosub, GetIniVars
gosub, PopFolders
gosub, MUTEJACKOPT

gosub, NetplaySet
guicontrol,,ARCSYS,|Select a System||%syslist%
guicontrol,,ARCPOP,|
gosub, RecentWrite
gosub, ArchivePop
romfj1= 
romfj2= 
stringsplit, romfj, romf,#
stringmid,romhnck,romf,2,1
if (romhnck <> ":")
	{
		ifexist, %raexeloc%\%romfj1%
			{
				romf= %raexeloc%\%romfj1%
				if (romfj2 <> "")
					{
						romf= %raexeloc%\%romfj1%#%romfj2%
					}
			}
	}

guicontrol,,ROMLOC,|%romf%||%HISTORY%%romf%
guicontrol,,LCORE,|%coreselv%||%runlist%
guicontrol,,JCORE,|%runlist%
PLAYERNUM= 1
INPKVR= J
JSTSET= %JOYSET%
CLJXT= _btn
gosub, JoyNT
gui, submit, nohide
if (locfnd = 1)
	{
		gosub, QINSTALL
	}
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    RETURN FUNCTIONS     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

LVGetCheckedItems(cN,wN) {
    ControlGet, LVItems, List,, % cN, % wN
    Pos:=!Pos,Item:=Object()
    While Pos
        Pos:=RegExMatch(LVItems,"`am)(^.*?$)",_,Pos+StrLen(_)),mCnt:=A_Index-1,Item[mCnt]:=_1
    Loop % mCnt {
        SendMessage, 0x102c, A_Index-1, 0x2000, % cN, % wN
        ChkItems.=(ErrorLevel ? Item[A_Index-1] "`n" : "")
    }
    Return ChkItems
}
return
;;F1::Msgbox % LVGetCheckedItems("", "ahk_id" . RJLV)
return





ResolveHostname(hostname)
{
    VarSetCapacity(WSADATA, 394 + (A_PtrSize - 2) + A_PtrSize, 0)
    if (DllCall("ws2_32\WSAStartup", "ushort", 0x0202, "ptr", &WSADATA) != 0)
        return "WSAStartup failed", DllCall("ws2_32\WSACleanup")

    VarSetCapacity(hints, 16 + 4 * A_PtrSize, 0)
    NumPut(2, hints, 4, "int") && NumPut(1, hints, 8, "int") && NumPut(6, hints, 12, "int")
    if (DllCall("ws2_32\getaddrinfo", "astr", hostname, "ptr", 0, "ptr", &hints, "ptr*", result))
        return "getaddrinfo failed with error: " DllCall("ws2_32\WSAGetLastError"), DllCall("ws2_32\WSACleanup")

    addr := result, IPList := []
    while (addr) {
        ipaddr := DllCall("ws2_32\inet_ntoa", "uint", NumGet(NumGet(addr+0, 16 + 2 * A_PtrSize) + 4, 0, "uint"), "astr")
        IPList[A_Index] := ipaddr, addr := NumGet(addr+0, 16 + 3 * A_PtrSize)
    }
    return IPList, DllCall("ws2_32\WSACleanup")
}
return

IMGTOOLTIP:
gui,submit, nohide
guicontrolget, HOVPREV
if (HOVPREV = 0)
	{
		return
	}
	
shdtyp= 
guicontrolget, shdtyp,,CGSLCT
if (shdtyp = 1)
{
shaderloc= shaders_cg
guicontrolget,shaderfile,,CGSHDVAR
}
guicontrolget, shdtyp,,SLSLCT
if (shdtyp = 1)
{
shaderloc= shaders_slang
guicontrolget,shaderfile,,SLSHDVAR
}
guicontrolget, shdtyp,,GLSLCT
if (shdtyp = 1)
{
shaderloc= shaders_glsl
guicontrolget,shaderfile,,GLSHDVAR
}

splitpath,shaderfile,,,,shadername
loop, %videoshaderdir%\%shaderloc%\*%shadernm%.*,1,1
	{
		if  (A_LoopFileName = shaderfile)
		{
			Splitpath,A_LoopFileFullPath,shaderfile,shaderfp,,shadername
			StringReplace,shaderpth,shaderfp,%videoshaderdir%\%shaderloc%\,,All
		}
	}
		IfNotExist, %assetsDirectory%\shaderPreviews\%shaderpth%
			{
				FileCreateDir, %assetsDirectory%\shaderPreviews\%shaderpth%
			}
	shdprvsz= 
	FileGetSize,shdprvsz,%assetsDirectory%\shaderPreviews\%shaderpth%\%shadername%.png
	if (shdprvsz < 20)
		{
			FileDelete,%assetsDirectory%\shaderPreviews\%shaderpth%\%shadername%.png
		}
	IfNotExist,%assetsDirectory%\shaderPreviews\%shaderpth%\%shadername%.png
				{
					FileReadLine,shaderHost,arcorg.set,4
					URLDownloadToFile,%shaderHost%\%shaderpth%/%shadername%.png,%assetsDirectory%\shaderPreviews\%shaderpth%\%shadername%.png
					
	}
ifnotexist,%assetsDirectory%\shaderPreviews\%shaderpth%\%shadername%.png
	return
hovershd= %assetsDirectory%\shaderPreviews\%shaderpth%\%shadername%.png
coordmode,mouse,screen
mousegetpos,x,y
imagex:=x+20
imagey:=y+20
splashimage,%hovershd%,b x%imagex% y%imagey%,,,MouseImageID
sleep,100
loop, 30
{
	imagex:=x+20
	imagey:=y+20
	winmove,MouseImageID,,%imagex%,%imagey%
}
SplashImage, Off
return

IMGTOOLTIPN:
gui,submit, nohide
guicontrolget, HOVPREV
if (HOVPREV = 0)
	{
		return
	}
	
coordmode,mouse,screen
mousegetpos,x,y
imagex:=x+20
imagey:=y+20
splashimage,%imgprev%,b x%imagex% y%imagey%,,,MouseImageID
sleep,100
loop, 30
{
	imagex:=x+20
	imagey:=y+20
	winmove,MouseImageID,,%imagex%,%imagey%
}
SplashImage, Off
return

XMBTOOLTIP:
gui,submit, nohide
guicontrolget, HOVPREV
if (HOVPREV = 0)
	{
		return
	}
	
coordmode,mouse,screen
mousegetpos,x,y
imagex:=x+20
imagey:=y+20
absolmedimg= %thumbnailsDirectory%\%MNUSYS%\%thumbType%\%IMGFLS%
splashimage,%absolmedimg%,b x%imagex% y%imagey%,,,MediaMID
sleep,100
loop, 30
{
	imagex:=x+20
	imagey:=y+20
	winmove,MediaMID,,%imagex%,%imagey%
}
SplashImage, Off
return

MEDIATOOLTIP:
gui,submit, nohide
guicontrolget, HOVPREV
if (HOVPREV = 0)
	{
		return
	}
	
coordmode,mouse,screen
mousegetpos,x,y
imagex:=x+20
imagey:=y+20
absolmedimg= rj\netArt\scrapeArt\%FEDDLA%\%curtxt%\%FEDDLE%\%imgdat%
splashimage,%absolmedimg%,b x%imagex% y%imagey%,,,MediaMID
sleep,100
loop, 30
{
	imagex:=x+20
	imagey:=y+20
	winmove,MediaMID,,%imagex%,%imagey%
}
SplashImage, Off
return

QUITOUT:
AHKsock_Close()
Process, close, Invader.exe
Process, close, skeletonKey.exe
GuiEscape:
GuiClose:
ExitApp
	
CancelDown:
Process, close, %inspid%
DWNCNCL= 1
gosub, InteruptDwn
return

InteruptDwn:
msgbox, 8707,Cancel Download, Would you like to terminate downloads and close skeletonKey?
ifmsgbox, yes
	gosub QUITOUT
ifmsgbox, no
	{
		DWNCNCL= 
		return
	}
return
ifmsgbox,Cancel
	{
		DWNCNCL= 
		return
	}
return

GuiContextMenu:
gui,submit,nohide
If A_GuiControlEvent RightClick
	{
		if A_GuiControl = NETHOSTLIST
			{
				if (SelectedRow <> 0)
					{
						Menu, ContextMenu, Show, %A_GuiX% %A_GuiY%
						return
					}
			}
	}
		
GuiScrapeMenu:
URLFILE= 
save= 
IMTG= 
gui,submit,nohide
if A_GuiControl = ROMFLS
		{
			Menu, ScrapeMenu, Show, %A_GuiX% %A_GuiY%
			return
		}

if A_GuiControl = LOCROMPOP
			{
				if (SelectedRow <> 0)
					{
						Menu, RunWithDD, Show, %A_GuiX% %A_GuiY%
						return
					}
			}		
			
if A_GuiControl = RJLSTV			
	{
		if (SelectedRow <> 0)
			{
				Menu, RJRCLMENU, Show, %A_GuiX% %A_GuiY%
				return	
			}
	}

if A_GuiControl = FELVA
	{
		if (FEDDLJ = "EmulationStation")
			{
				if (SelectedRow <> 0)
					{
						Menu, ESRCLMENU, Show, %A_GuiX% %A_GuiY%
						return	
					}			
			}
		if (SelectedRow <> 0)
			{
				Menu, FERCLMENU, Show, %A_GuiX% %A_GuiY%
				return	
			}
	}
	
if A_GuiControl = RETAL
	{
		Menu, RUNMENU, show, %a_guix% %a_guiy%
		return	
	}
	
if A_GuiControl = ARCPOP	
	{
		Menu, ARCART, show, %a_guix% %a_guiy%
		return	
	}

if A_GuiControl = SRCHRSLT
	{
		Menu, ARCART, show, %a_guix% %a_guiy%
		return
	}
Return
 
Emulator_Add:
multisel= 
guicontrolget,romf,,LOCROMPOP
Loop, Parse, romf,`n|
	{
		multisel+=1		
		if (multisel > 1)
			{
				break
			}
	}
Menu,Emulator_Add, Add
if (multisel <> 1)
	{
		SB_SetText("Select a single item only")	
		return
	}
if (multisel = 1)
	{
		Loop, Parse, runlist,|
		{
			emuta= %A_loopField%
			gosub, AddEmuTOList
		}
		mousegetpos,Ngx,Ngy
		Menu,Emulator_Add, Show, %Ngx% %Ngy%
	}
Menu,Emulator_Add,DeleteAll
return
 
Open_Add:
gui,submit,nohide
multisel= 
Loop, Parse, romf,`n|
	{
		multisel+= 1		
		if (multisel > 1)
			{
				break
			}
	}
	
if (multisel = 1)
	{
		guicontrolget,srchfsel,,LOCROMPOP
		SplitPath, srchfsel,,popdir
		Run, Explorer "%popdir%"
		return
	}
SB_SetText("Select a single item only")	
return
Playlist_Add:
gui,submit,nohide
itmlst= 
guicontrolget,itmlst,,LOCROMPOP
if (noadpl = 1)
	{
		return
		SB_SetText("Cannot add items to playlist currently being edited")
	}
Loop, Parse, itmlst,`n|
	{
		LBEX_Add(insel,A_LoopField)
	}
IF (itmlst <> "")
		{
			GuiControl,Choose,TABMENU,4
		}
return

AddEmuTOList:
Menu, Emulator_Add, Add, %emuta%, RunRCL
return

RunRCL:
gui,submit,nohide
coreselv= %A_ThisMenuItem%
guicontrol,,LCORE,|%A_ThisMenuItem%||%runlist%
gosub,RecentRead
gosub, LNCH
return

Scrape_BoxArt:
imgrept= Named_Boxarts
gosub, ImageGrab
return
Scrape_TitleArt:
imgrept= Named_Titles
gosub, ImageGrab
return
Scrape_SnapArt:
imgrept= Named_Snaps
gosub, ImageGrab
return


ImageGrab:
ifnotexist, %thumbnailsDirectory%\%MNUSYS%\%imgrept%\
	{
		FileCreateDir, %thumbnailsDirectory%\%MNUSYS%\%imgrept%
	}
guicontrolget,IMTG,,ROMFLS
if (IMTG = "")
	{
		return
	}
if (MNUSYS = "")
	{
		return
	}
	
splitpath,IMTG,,,,IMTN
URLFILE= %imgrepo%/%MNUSYS%/%imgrept%/%IMTN%.png
save=%thumbnailsDirectory%\%MNUSYS%\%imgrept%\%IMTN%.png

DownloadFile(URLFILE, save, True, True)
ifnotexist, %save%
	{
		SB_SetText(" " MNUSYS " " IMTN ".png could not be found.")
		return
	}
IMGSZ=
FileGetSize,IMGSZ,%save%
if (IMGSZ < 100)
	{
		FileDelete,%save%
		SB_SetText(" " MNUSYS " " IMTN ".png could not be found.")
		return
	}
gosub, RefreshImg	
SB_SetText(" " IMTN ".png was downloaded successfully.")					
return

Check_Port:
PORTOPEN=
RowNum := LV_GetNext(,"Focused")
LV_GetText(SELECTEDUSER,RowNum,1)
LV_GetText(HOSTINGIPS,RowNum,6)
LV_GetText(HOSTINGPORTS,RowNum,7)
gosub, PortCheck
if (PORTOPEN = 1)
	{
		LV_Modify(RowNum,"Col8","Yes")
		SB_SetText(" "SELECTEDUSER " CAN HOST ON PORT: " HOSTINGPORTS " "),4
		return
	}
		LV_Modify(RowNum,"Col8","No")
		SB_SetText(" "SELECTEDUSER "'S PORT: " HOSTINGPORTS " is NOT open"),4
Return

RecentRead:
guicontrolget,coreselv,,LCORE
splitpath,coreselv,,,dlx
if (HOPT = 0)
	{
		guicontrolget,TOXTN,,ROMLOC
		SplitPath,TOXTN,rton,rtod,inputext
		FileGetSize,romsz,%TOXTN%,K
		APLN= 1
		if (dlx = "dll")
			{
				APLN= 
				gosub, ExtensionLookup
			}
		guicontrol,,LCORE,|%coreselv%||%runlist%
		gosub, CoreAuto
		if (dlx <> "dll")
			{
				APLN= 1
			}
		return
	}

if (OPTYP = "History")
	{
		curline= 0
		guicontrolget,HISROM,, ROMLOC
		Loop, Read, %contentHistoryPath%
			{	
				curline+=1
				if (A_LoopReadLine = HISROM)
				{
					coreline := curline+2
					break
				}
			}
		if (coreline <> "")
			{
				FileReadLine, stcl, %contentHistoryPath%,%coreline%
				SplitPath, stcl, coreselv
				guicontrol,, LCORE,|%coreselv%||%runlist%
			}
		APLN= 
		APLA= 
		splitpath,coreselv,,,dlx		
		gosub, CoreAuto
		if (dlx <> "dll")
			{
				APLN= 1
			}
		return
	}

curline= 
coreline= 
guicontrolget,PLROM,, ROMLOC
ttnf1=
ttnf2= 
StringSplit,ttnf,PLROM,#
Loop, Read, %playlistDirectory%\%OPTYP%
	{	
		curline+=1
		plrls1= 
		plrls2= 
		stringsplit,plrls,A_LoopReadLine,#
		if (plrls1 = PLROM)
			{
				coreline:= curline+2
				break
			}
	}
FileReadLine, stcl, %playlistDirectory%\%OPTYP%,%coreline%
if (stcl <> "DETECT")
	{
		SplitPath, stcl, coreselv
		guicontrol,, LCORE,|%coreselv%||%runlist%
		return
	}

if (ttnf2 = "")
	{
		ttnf2= %ttnf1%
	}

SplitPath,ttnf2,,,inputext
FileGetSize,romsz,%ttnf1%,K
if (dlx = "dll")
	{
		gosub, ExtensionLookup
	}
guicontrol,,LCORE,|%coreselv%||%runlist%
gosub, CoreAuto
if (dlx <> "dll")
	{
		APLN= 1
	}
return


SHRTNMLkUp:
SHRTNM= 
Loop, Read, LkUp.set
	{
		avir1= 
		avir2= 
		StringSplit,avir,A_LoopReadLine,=
		if (avir1 = RVLKUP)
			{
				SHRTNM= %avir2%
			}
	}
if (SHRTNM = "")
	{
		avkv1= 
		avkv2= 
		avkv3= 
		avkv4= 
		avkv5= 
		StringSplit,avkv,RVLKUP,%A_Space%_-
		StringLeft,shrtnc,avkv1,4
		shrtnd= 
		shrtne= 
		shrtnf= 
		shrtng= 
		if (avkv2 <> "")
			{
				StringLeft,shrtnd,avkv2,4
			}
		if (avkv3 <> "")
			{
				StringLeft,shrtne,avkv3,4
			}
		if (avkv4 <> "")
			{
				StringLeft,shrtnf,avkv4,4
			}
		if (avkv5 <> "")
			{
				StringLeft,shrtng,avkv5,4
			}
	}
	SHRTNM= %shrtnc%%shrtnd%%shrtne%%shrtnf%%shrtng%
return

RecentWrite:
ifnotexist,%contentHistoryPath%
	{
		return
	}
rlin= 1
HISTORY=
curline= 1
Loop, Read, %contentHistoryPath%
	{	
		if (romf = "")
			{
				romf = %A_LoopReadLine%
				coreline := curline+2
				FileReadLine,popcore,%contentHistoryPath%,%coreline%
				splitpath,popcore,coreselv
			}
		newvl= 
		FilereadLine, newvl, %contentHistoryPath%,%rlin%
		if (newvl = "")
			{
				break
			}
		HISTORY .= newvl . "|"
		rlin+=6
	}
return

GuiDropFiles:
ROMDRP= 1
If ( (A_GuiX >= RegionX) && (A_GuiX <= RegionX+RegionW) && (A_GuiY >= RegionY) && (A_GuiY <= RegionY+RegionH) )
	{
romlst= %A_GuiEvent%
Loop, Parse,romlst,`n
	{
	if (A_Index = 1)
		{
		romf= %A_LoopField%	
		}
	}
		iniwrite, "%romf%", Settings.ini,GLOBAL,last_rom
		SB_SetText(" Loading " romf " ")
		guicontrol,, ROMLOC, |%romf%||%HISTORY%
		guicontrolget,AUTOLNCH, ,AUTOLNCH
		if (AUTOLNCH = "0")
			{
				coreselv= 
				CHOSEN= 1
				gosub,DragonDrop
				if (coreselv <> "")
					{
						guicontrol,,LCORE,|%coreselv%||%runlist%
						return
					}
				Control, ShowDropDown, , %LCORE%, skeletonKey
				ControlFocus, %LCORE%,skeletonKey
				return
			}
		if (AUTOLNCH = 1)
			{
				CHOSEN= 
				coreselv= 
				gui,submit,nohide
				gosub, DragonDrop
				if (CHOSEN = 1)
					{
						Control, ShowDropDown, , %LCORE%, skeletonKey
						ControlFocus, %LCORE%,skeletonKey
						return
					}
			}
	}
else if ( (A_GuiX >= bRegionX) && (A_GuiX <= bRegionX+bRegionW) && (A_GuiY >= bRegionY) && (A_GuiY <= bRegionY+bRegionH) )
	{
		RPDND= 1
			SB_SetText("Loading items")
		RomPlst= 
FileDelete, plst.ini
FileAppend, `n,plst.ini
FileAppend, %A_GuiEvent%, plst.ini
Loop,Read,plst.ini
	RomPLst .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
GuiControl,,ROMPOP,|%RomPLst%
	}
else if ( (A_GuiX >= cRegionX) && (A_GuiX <= cRegionX+cRegionW) && (A_GuiY >= cRegionY) && (A_GuiY <= cRegionY+cRegionH) )
	{
		SB_SetText("Sorting BIOS files")
FileDelete, bios.ini
FileAppend, %A_GuiEvent%, bios.ini
arcdec= 
ifnotexist, tmp\bios
	{
		FileCreateDir, tmp\bios
		FileCreateDir, tmp\arc
	}
Loop,Read,bios.ini
	{
	SB_SetText(" Categorizing BIOS files ")
	splitpath,A_LoopReadLine,biosfile,biospath,biosxt,biosn,biosdrv
	if (biosxt = "zip")
		{
			arcdec= 1
			SB_SetText("extracting " A_LoopReadLine " ")
			Runwait, %comspec% cmd /c "7za.exe e -y "%A_LoopReadLine%" -O"%A_WorkingDir%\tmp\bios" ",,hide
		}
	if (biosxt = "7z")
		{
			arcdec= 1
			SB_SetText("extracting " A_LoopReadLine " ")
			Runwait, %comspec% cmd /c "7za.exe e -y "%A_LoopReadLine%" -O"%A_WorkingDir%\tmp\bios" ",,hide
		}
	if (biosxt = "rar")
		{
			arcdec= 1
			SB_SetText("extracting " A_LoopReadLine " ")
			Runwait, %comspec% cmd /c "UnRAR.exe e -y "%A_LoopReadLine%" "*" +o "%A_WorkingDir%\tmp\bios" ",,hide
		}
FileCopy,%A_LoopReadLine%,tmp\bios\%biosfile%,1
	}
gosub, BiosProc
	}
ROMDRP= 
return

CRC32GET:
ApndCRC= % FileCRC32( CrCFLN )
FileCRC32(sFile="",cSz=4 ) { 
 cSz := (cSz<0||cSz>8) ? 2**22 : 2**(18+cSz), VarSetCapacity( Buffer,cSz,0 ) 
 hFil := DllCall( "CreateFile", Str,sFile,UInt,0x80000000, Int,3,Int,0,Int,3,Int,0,Int,0 )
 IfLess,hFil,1, Return,hFil
 hMod := DllCall( "LoadLibrary", Str,"ntdll.dll" ), CRC32 := 0
 DllCall( "GetFileSizeEx", UInt,hFil, UInt,&Buffer ),    fSz := NumGet( Buffer,0,"Int64" )
 Loop % ( fSz//cSz + !!Mod( fSz,cSz ) )
   DllCall( "ReadFile", UInt,hFil, UInt,&Buffer, UInt,cSz, UIntP,Bytes, UInt,0 )
 , CRC32 := DllCall( "NTDLL\RtlComputeCrc32", UInt,CRC32, UInt,&Buffer, UInt,Bytes, UInt )
 DllCall( "CloseHandle", UInt,hFil )
 SetFormat, Integer, % SubStr( ( A_FI := A_FormatInteger ) "H", 0 )
 CRC32 := SubStr( CRC32 + 0x1000000000, -7 ), DllCall( "CharUpper", Str,CRC32 )
 SetFormat, Integer, %A_FI%
Return CRC32, DllCall( "FreeLibrary", UInt,hMod )
}
ApndADD= 0X%ApndCRC%
SetFormat, Integer, D
ApndINT:= ApndADD+0
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    MENU FUNCTIONS     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

IMPRTCFG:
if (INITIAL = 1)
	{
		msgbox,260,Config File Detected,Would you like to use the detected retroarch.cfg file?`n%raexeloc%\retroarch.cfg	
		ifmsgbox,Yes
			{			
				NwCfgFile= %raexeloc%\retroarch.cfg
				gosub,NWCFGSPLIT
			}
	ifexist, %raexeloc%\retroarch-core-options.cfg
		{
			NwCoreCfg= %raexeloc%\retroarch-core-options.cfg
			MsgBox,260,Config File Detected,Would you like to use the detected retroarch-core-options.cfg file?`n%raexeloc%\retroarch-core-options.cfg	
			ifmsgbox,Yes
				{			
					ifexist, racoreopt.cfg
					{
					FileCopy,racoreopt.cfg,racoreopt.cfg.bak,1
					}
					FileCopy,%NwCoreCfg%,racoreopt.cfg,1
				}
			}
return
	}

FileSelectFile, NwCfgFile, 3, , Select a skeletonKey/retroarch config file, config (*.cfg)
NWCFGSPLIT:
SplitPath,NwCfgFile,NwCfgF,NwCfgD
FileReadLine,glbv,%NwCfgFile%,1
if (NwCfgFile = "")
	{
		return
	}
if glbv = [OPTIONS]
	{
		gosub SetNewCfg
	}
if (NwCfgF = "retroarch.cfg")
		{
			if (INITIAL = 1)
				{
					curcfg= config.cfg
					IfExist, %curcfg%
							{
								FileCopy,%curcfg%,%curcfg%.bak,1
							}
						gosub, ApndOpt
						return
				}
			gosub, ApndOpt
			return
		}
msgbox,4,Warning, This is not a skeletonKey configuration`nWould you like to use this file anyway?
ifmsgbox, yes
	{
		gosub ApndOpt
		return
	}
		ifmsgbox, no
			{
				NwCfgFile= 
			}
return

SETJKD:
RJSYSTEMF=
FileSelectFolder, RJSYSTEMF,,3,Select the Root folder for all systems
if (RJSYSTEMF = "")
	{
		if (INITIAL = 1)
			{
				MsgBox,1,--=REQUIRED=--,You must select a location for your systems.
				ifmsgbox,OK
					{
						goto, SETJKD						
					}
				FileDelete,Settings.ini
				Run, %comspec% cmd /c taskkill /f /im skeletonKey.exe,,hide
				ExitApp
			}
		return
	}
RJSYSTEMS= %RJSYSTEMF%
if (INITIAL = 1)
	{
		return
	}
guicontrol,,SKSYSDISP,%RJSYSTEMS%
IniWrite, "%RJSYSTEMS%",Settings.ini,GLOBAL,systems_directory
gosub, RJSYSRESET
if (coreassetsdirectory <> RJSYSTEMS)
	{
		MsgBox,3,Set core_assets_directory,Would you like to set your retroArch ''downloads'' directory to`n %RJSYSTEMS%`n?
		ifMsgBox,Yes
			{
				ARNMB= 0
				dwnltom= 
					Loop, %coreassetsdirectory%\*,2
						{	
							ARBNMB+=1
							dwnltom.= A_LoopField . "|"
						}
					if (ARBNMB >= 1)
							{
								MsgBox,3,Import,Would you like to import your retroArch ''downloads'' directories into your Systems folder?`n      This will MOVE all content.
									IfMsgBox,Yes
										{
											Loop, Parse, dwntom,|
												{
													FLBND= 
													cnimp= 
													ccsyst= %A_LoopField%
													IfNotExist,%RJSYSTEMS%\%ccsyst%\
														{
															FileCreateDir,%RJSYSTEMS%\%ccsyst%
														}
													Loop, %coreassetsdirectory%\%ccsyst%\*,2
															{
																FileMove, %A_LoopFileFullPath%,%RJSYSTEMS%\%ccsyst%\%A_LoopFileName%
																	if (errorlevel <> 0)
																		{
																			if (FLBND > 5)
																				{
																					if (FLBND = 6)
																						{
																							cnimp.= cnimp . "|" . "...more..."
																						}
																						continue
																				}
																			FLBND+=1
																			cnimp.= A_LoopFileFullPath . "|"
																		}
															}
														Loop, %coreassetsdirectory%\%ccsyst%\*
															{
																FileMove, %A_LoopFileFullPath%,%RJSYSTEMS%\%ccsyst%\%A_LoopFileName%
																	if (errorlevel <> 0)
																		{
																			if (FLBND > 5)
																				{
																					if (FLBND = 6)
																						{
																							cnimp.= cnimp . "|" . "...more..."
																						}
																						continue
																				}
																			FLBND+=1
																			cnimp.= A_LoopFileFullPath . "|"
																		}
															}
												}
										}
								coreassetsDirectory= %RJSYSTEMS%
								dwnlfldrs= %systmfldrs%
								If (FLBND <> "")
									{
										stringreplace,cnimp,cnimp,|,`n,all
										Msgbox,0,,Import Notice,Some Files or folders could not be imported`n%cnimp%,
										return
									}
								MsgBox,1,Success,retroArch systems imported successfully,10
							}
			}
	}
return

SETEMUD:
RJEMUF=
FileSelectFolder, RJEMUF,,3,Select the Root folder for all emulators
if (RJEMUF = "")
	{
		if (INITAL = 1)
			{
				MsgBox,1,--=REQUIRED=--,You must select a directory for emulators.
					ifmsgbox,OK
						{
							goto, SETEMUD
						}
				FileDelete,Settings.ini
				Run, %comspec% cmd /c taskkill /f /im skeletonKey.exe,,hide
				ExitApp
			}
		return
	}

RJEMUD= %RJEMUF%
IfNotExist,%RJEMUD%\BSL\BSL.exe
	{
		FileCreateDir,%RJEMUD%\BSL
		FileCopy,BSL.exe,%RJEMUD%\BSL\BSL.exe,1
		iniwrite,"%RJEMUD%\BSL\BSL.exe",apps.ini,EMULATORS,BSL
	}
IniWrite, "%RJEMUD%",Settings.ini,GLOBAL,emulators_directory

if (INITIAL = 1)
	{
		return
	}
guicontrol,,SKEMUDISP,%RJEMUD%
return

SKBEFCMD:
gui, submit, nohide
return

SKAFTCMD:
gui, submit, nohide
return

SKENBF:
gui,submit,nohide
guicontrol,disable,SKAFTCMD
guicontrolget,SKENBF,,SKENBF
if (SKENBF =  1)
	{
		guicontrol,enable,SKBEFCMD		
	}
return

DISCFG:
gui,submit,nohide
guicontrolget,DISCFG,,DISCFG
if (DISCFG = 1)
	{
		iniwrite,1,%BSLPTH%\BSL.ini,OPTIONS,configurations
		return
	}
	
iniwrite,"",%BSLPTH%\BSL.ini,OPTIONS,configurations
return

SKENAF:
guicontrol,disable,SKENAF
gui,submit,nohide
guicontrol,disable,SKAFTCMD
guicontrolget,SKENAF,,SKENAF
if (SKENAF =  1)
	{
		guicontrol,enable,SKAFTCMD
	}
return

SKOVRJM:
guicontrol,disable,SKPROFOV
guicontrol,disable,SKAMOV
guicontrol,disable,SKXPADOV

gui,submit,nohide
guicontrolget,SKOVRJM,,SKOVRJM
if (SKOVRJM = 1)
	{
		guicontrol,enable,SKPROFOV
		guicontrol,enable,SKAMOV
		guicontrol,enable,SKXPADOV
		iniwrite,1,%BSLPTH%\BSL.ini,OPTIONS,Joystick
		guicontrolget,bsljtt,,SKAMOV
		if (bsljtt = 1)
			{
				iniwrite,0,%BSLPTH%\BSL.ini,OPTIONS,Xpadder
				return
			}
		iniwrite,1,%BSLPTH%\BSL.ini,OPTIONS,Xpadder	
	}
return

SKXPADOV:
gui,submit,nohide
iniwrite,1,%BSLPTH%\BSL.ini,OPTIONS,Xpadder
return

SKAMOV:
gui,submit,nohide
iniwrite,0,%BSLPTH%\BSL.ini,OPTIONS,Xpadder
return

SKPROFOV:
gui,submit,nohide
return

SKFROVDD:
gui,submit,nohide
return

SKFROV:
guicontrol,disable,SKFROVDD
gui,submit,nohide
guicontrolget,SKFROV,,SKFROV

if (SKFROV = 1)
	{
		guicontrol,enable,SKFROVDD
		guicontrolget,SKPROFOV,,SKPROFOV
		iniwrite,%SKPROFOV%,%BSLPTH%\BSL.ini,OPTIONS,Profile
	}
return

ApndOpt:
if (NwCfgFile <> "")
	{
		filecopy, %NwCfgFile%, %curcfg%, 1
	}
newline := "[OPTIONS]"
FilePath= %curcfg%
input := FileOpen(FilePath, 0)
text := input.Read()
input.Close()
output := FileOpen(FilePath, 5)
output.WriteLine(newline)
output.Write(text)
output.Close()
return

SetNewCfg:
filecopy,config.cfg,config.bak,1
filecopy, %NwCfgFile%,config.cfg,1
if (INITIAL <> 1)
	{
		gosub GetIniVars
	}
return

SAVECFG:
gosub, VARtoINI
FileSelectFile, ToCfgFile, S27, , Save Config, config file (*.cfg)
if (ToCfgFile = "")
	{
		SB_SetText("Save Cancelled")
		return
	}
filecopy, %curcfg%, %ToCfgFile%,1
SB_SetText("Saved Config as " ToCfgFile " ")
return

UpdateSK:
FileDelete, version.txt
FileReadLine,sourceHost,arcorg.set,5
FileReadLine,UPDATEFILE,arcorg.set,7
URLDownloadToFile, %sourceHost%,version.txt
ifnotexist, version.txt
	{
	SB_SetText(" Update not found. ")
	return
	}
FileReadLine,DATECHK,version.txt,1
stringsplit,VERCHKC,DATECHK,=
if (VERCHKC1 <> RELEASE)
	{
		msgbox,4,Update, Update available`n%VERCHKC1%`nWould you like to update skeletonKey?`n(program will close)
		IfMsgBox, yes
			{
			gosub, getupdate
			return
			}
		ifmsgbox, no
			return
	}
return

MenuHandler:
Process,close,Invader.exe
Process,close,skeletonKey.exe
Exitapp
Return

getupdate:
upcnt=
loop, tmp\sk*.zip
	{
		upcnt+=1
	}
upcnt+=1
URLFILE= %UPDATEFILE%/skeletonKey.zip
save= tmp\sk%upcnt%.zip
DownloadFile(URLFILE, save, True, True)
IfNotExist, tmp
	{
		FileCreateDir, tmp
	}
ifexist,tmp\sk%upcnt%.zip
	{
		Runwait, %comspec% cmd /c "7za.exe x -y "tmp\sk%upcnt%.zip" -O"tmp" ",,hide
		Run, tmp\skeletonkey_Install.exe
		Process, close, Invader.exe
		Process, close, skeletonKey.exe
		gosub, QUITOUT
		exitapp
	}
	return
	
Help:
MsgBox,4353,Help,%VERSION%`n%RELEASE%`nWould you like to open help documentation?
IfMsgBox,Yes
	{
		run, skeletonkey.html
	}
return
Donate:
run, %HOSTINGURL%/arigatokudasai.html
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    BIOS FUNCTION   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
BiosProc:


FileDelete, crcs.ini
sysDir= %systemDirectory%
IniRead, bsys,Apps.ini,EMULATORS
kbemu= 
Loop, Parse, bsys,`n,`r
	{
		efi1= 
		efi2= 
		stringsplit,efi,A_LoopField,=
		kbemu.= A_loopField . "`n"
	}
biosnum= 0
Loop, Files, tmp\bios\*,
	{	
		ApndCRC= 
		CrCFLN= %A_LoopFileFullPath%
		gosub, CRC32GET
		Loop, Read,BIOS.set
			{
				CRCM1= 
				CRCM2= 
				CRCM3= 
				CRCM4= 
				CRCM5= 
				CRCM6= 
				stringsplit, CRCM, A_LoopReadLine,:,>
				prib= 
				kfn= 
				stringright,prib,A_LoopReadLine,1
				if (prib = ">")
					{
						kfn= >
					}
				if (CRCM3 = ApndCRC)
					{
						biosnum++
						fileappend,%A_LoopFileFullPath%|%CRCM1%|%CRCM2%%kfn%`n,crcs.ini
					}						
			}
	}
Fileread,curbios,crcs.ini
Loop, Parse, curbios, `n
	{
		juf1= 
		juf2= 
		juf3= 
		stringsplit,juf,A_LoopField,|,>
		stringreplace,juf3,juf3,>,,All
		Loop, Parse, kbemu, `n
			{
				stringsplit,fia,A_LoopField,=,"
				;"
				SplitPath,fia2,,fiad
				sysex= %fia1%
				emif1= 
				emif2= 
				emif3= 
				emif4= 
				stringsplit,emif,juf2,=
				ifinstring,juf2,%sysex%
					{
						fong1=
						Loop, 6
							{
								stringsplit,fong,emif%A_Index%,\
								if (fong1 = sysex)
									{
										apndpth=
										stringreplace,apndpth,emif%A_Index%,%fia1%,,All
										ifinstring,juf2,.zip
											{
												splitpath,juf2,fnm
												RunWait, %comspec% /c " 7za.exe a -y "%fiad%%apndpth%" "%juf3%" "
												ifinstring,A_LoopField,>
													{
														FileSetAttrib,+R,%fiad%%apndpth%\%juf3%
													}
												break	
											}
										ifnotexist,%fiad%%apndpth%
											{
												FilecreateDir,%fiad%%apndpth%
											}
										FileCopy,%juf1%,%fiad%%apndpth%,1
										ifinstring,A_LoopField,>
											{
												FileSetAttrib,+R,%fiad%%apndpth%\%juf3%
											}
										break	
									}
							}
					}
			}
	}
					
SB_SetText(" Found " biosnum " bios files ")
;;FileDelete,tmp\bios\*
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    NETPLAY PROCEDURE    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
NetplaySet:
IniRead,netplayRomLocation,Settings.ini,GLOBAL,netplay_rom_location
if (netplayRomLocation = "2")
	{
		guicontrol,,NETPLIST,1
		guicontrol,,NETDWNL,0
		IniRead,netplayPlaylistDirectory,Settings.ini,GLOBAL,netplay_playlist_directory
		guicontrol,,NETCOREASSETS,|%netplayPlaylistDirectory%||All_Playlists|%plistfiles%
		gosub, NetCoreAssets
		guicontrol,,NETROMLIST,|%matchlist%
	}
if (netplayRomLocation = "1")
	{
		guicontrol,,NETPLIST,0
		guicontrol,,NETDWNL,1
		IniRead,netplayCoreAssetsDirectory,Settings.ini,GLOBAL,netplay_core_assets_directory
		splitpath,netplayCoreAssetsDirectory,netplayCoreAssetsDirName
		guicontrol,,NETCOREASSETS,|%netplayCoreAssetsDirName%||%dwnlfldrs%
		gosub, NetCoreAssets
		guicontrol,,NETROMLIST,|%matchlist%
	}
if (netplayRomLocation = "")
	{
		guicontrol,,NETDWNL,0
		guicontrol,,NETPLIST,1
		guicontrol,,NETCOREASSETS,|All_Playlists||%plistfiles%
	}
IniRead,fileServerEnable,Settings.ini,GLOBAL,file_server_enable
if (fileServerEnable = "true")
{
guicontrol,enable,SERVPORT
guicontrol,,FILESERV,1
}
if (fileServerEnable = "false")
{
guicontrol,disable,SERVPORT
guicontrol,,FILESERV,0
}
iniRead, fileServerPort,Settings.ini,GLOBAL,file_server_port
if (fileServerPort = "")
{
fileServerPort= 54354
}
guicontrol,,SERVPORT,%fileServerPort%

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    INI-READING FUNCTION      ;;;;;;;;;;;;;;;;;;;;;;;;

ArchivePop:
IniRead,ARCLOGIN,Settings.ini,GLOBAL,archive_login
if (ARCLOGIN <> "")
	{
		guicontrol,,ARCLOGIN,%ARCLOGIN%
	}
IniRead,ARCPASS,Settings.ini,GLOBAL,archive_password
if (ARCPASS <> "")
	{
		guicontrol,,ARCPASS,%ARCPASS%
		guicontrol,,SAVPASS,1
	}
IniRead,JACKETMODE,Settings.ini,GLOBAL,jacket_mode
guicontrol,,JACKETMODE, %JACKETMODE%
return


GetIniVars:
FileReadLine, optline, %curcfg%, 1
if optline <> [OPTIONS]
{
	gosub WriteTop
}
;;;;;;;;;;;;;;;;;;;;;;;;;;       READ OPTIONS       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText(" Loading Config ")
Loop, parse,optiterate,|
	{
		iniread, inivar, %curcfg%,OPTIONS,%A_LoopField%
		INPDBX= 
		readvl= 
		inival1=
		inival2= %inivar%
		stringsplit, inival, A_LoopField,=,"
		;"
		StringReplace,INPDBX,inival1,_,,All
		readvl= % (%INPDBX%)
		inival2= %inivar%
		gosub, %INPDBX%
	}
;;;;;;;;;;;;;;;;;;;;;;;;;;       READ AV OPTIONS       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText(" Loading Audio Video ")
Loop, parse,viditerate,|
	{
		iniread, inivar, %curcfg%,OPTIONS,%A_LoopField%
		readvl= 
		INPDBX= 
		inival1=
		inival2= %inivar%
		stringsplit, inival, A_LoopField,=,"
		;"
		StringReplace,INPDBX,inival1,_,,All
		readvl= % (%INPDBX%)
		inival2= %inivar%
		gosub, %INPDBX%
	}
;;;;;;;;;;;;;;;;;;;;;;;;;;       READ DIR LOCATIONS       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

SB_SetText(" Loading Directory Locations ")

Loop, parse, dirlocations,|
	{
		iniread, inivar, %curcfg%,OPTIONS,%A_LoopField%
		readvl= 
		INPDBX= 
		inival1=
		inival2= %inivar%
		stringsplit, inival, A_LoopField,=,"
		;"
		StringReplace,INPDBX,inival1,_,,All
		readvl= % (%INPDBX%)
		rewtmp= 
		rewtmpd= 
		stringLeft, rewtmp, inivar,1
		stringRight, rewtmpd, inivar,255
		if (rewtmp = ":")
			{
				readvl := raexeloc . SubStr(rewtmpd,2,255)
				iniwrite, "%readvl%",%curcfg%,OPTIONS,%A_LoopField%
			}
		gosub, %INPDBX%
	}

;;;;;;;;;;;;;;;;;;;;;;;;;;       READ PATH LOCATIONS       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText(" Loading Path Locations ")
Loop, parse,pathlocations,|
	{
		iniread, inivar, %curcfg%,OPTIONS,%A_LoopField%
		INPDBX= 
		inival1=
		inival2= %inivar%
		stringsplit, inival,A_LoopField,=,"
		;"
		StringReplace,INPDBX,inival1,_,,All
		readvl= % (%INPDBX%)
		inival2= %inivar%
		rewtmp= 
		rewtmpd= 
		stringLeft, rewtmp, inivar,1
		stringRight, rewtmpd, inivar,255
		if (rewtmp = ":")
			{
				readvl := raexeloc . SubStr(rewtmpd,2,255)
				iniwrite, "%readvl%",%curcfg%,OPTIONS,%A_LoopField%
			}
		gosub, %INPDBX%
	}


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     READ NETPLAY    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText("Loading Netplay Options")
Loop, parse,netiterate,|
	{
		inivar= 
		iniread, inivar, %curcfg%,OPTIONS,%A_LoopField%
		readvl= 
		INPDBX= 
		inival1=
		inival2= %inivar%
		stringsplit, inival, A_LoopField,=,"
		;"
		StringReplace,INPDBX,inival1,_,,All
		readvl= % (%INPDBX%)
		inival2= %inivar%
		gosub, %INPDBX%
	}
iniread, HPORTNUM, Settings.ini,GLOBAL,last_port
iniread, IPtoPARSE, Settings.ini,GLOBAL,last_connect

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;       READ MENU     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText(" Loading Menu Options ")
Loop, parse,menuiterate,|
	{
		inivar= 
		iniread, inivar, %curcfg%,OPTIONS,%A_LoopField%
		readvl= 
		INPDBX= 
		inival1=
		inival2= %inivar%
		stringsplit, inival, A_LoopField,=,"
		;"
		StringReplace,INPDBX,inival1,_,,All
		readvl= % (%INPDBX%)
		inival2= %inivar%
		gosub, %INPDBX%
	}

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;       READ JOYSTICK    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
JINR=J

Joyvalz:
JXT= 
CLJXT= 

Loop, Parse, INPKND,|
	{	
		INPKVR= %A_LoopField%
		JSTSET= %KBSET%
		if (INPKVR= "J")
			{
				JXT= btn
				CLJXT= _btn
				JSTSET= %JOYSET%
			}
	if (INPKVR= "AXIS")
			{
				JXT= axis
				CLJXT= _axis
				JSTSET= %JOYSET%
			}
	Loop, Parse, PLAYERSET,|
		{
			if (A_LoopField > inputMaxUsers)
				{
					break
				}
			PLAYERNUM= %A_LoopField%
			SB_SetText("Loading Player " PLAYERNUM " ")
				Loop, parse,joyiterate,|
					{
						INPDBX= 
						StringReplace,INPDBX,A_LoopField,_,,All
						iniread,JTCTRL,%joycfg%,OPTIONS,input_player%PLAYERNUM%%A_LoopField%%CLJXT%
						if (JTCTRL = "ERROR")
							{
								JTCTRL= nul
							}
						%INPKVR%%PLAYERNUM%%INPDBX%= %JTCTRL%
					}
			}
	}
gui,submit,nohide
Loop, parse,joyiterate,|
	{
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,All
		GUIVL= % J1%INPDBX%
		guicontrol,,%INPDBX%, %GUIVL%
	}		
gui,submit,nohide
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;             READ HOTKEY          ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

HkeyRead:
Loop, Parse, INPKND,|
	{	
		INPKVR= %A_LoopField%
		JSTSET= %KBSET%
		JXT= 
		CLJXT= 
		if (INPKVR= "J")
			{
				JXT= btn
				CLJXT= _btn
				JSTSET= %JOYSET%
			}
	if (INPKVR= "AXIS")
			{
				JXT= axis
				CLJXT= _axis
				JSTSET= %JOYSET%
			}
	Loop, Parse, PLAYERSET,|
		{
			if (A_LoopField > inputMaxUsers)
				{
					break
				}
				
			PLAYERNUM= %A_LoopField%
			SB_SetText(" Loading Player " PLAYERNUM " Hotkeys ")
			Loop, parse,hkiterate,|
				{
					INPDBX= 
					StringReplace,INPDBX,A_LoopField,_,,All
					iniread,JTCTRL,%joycfg%,OPTIONS,%A_LoopField%%CLJXT%
					if (JTCTRL = "ERROR")
						{
							JTCTRL= nul
						}
					%INPDBX%%JXT%= %JTCTRL%
					GUIVL= % J1%INPDBX%
					guicontrol,,%INPDBX%, %GUIVL%
				}
			}
	}
gui,submit,nohide
if (iremp = 1)
	{
		return
	}
;;;;;;;;;;;;;;;;;;;;;;;    READ CORE OPTIONS    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
GetOptVars:
SB_SetText(" Loading Core options ")
FileReadLine, optline, %racoreopt%, 1

if optline <> [OPTIONS]
	{
		gosub WriteCORETop
	}

Loop, parse,COREVARS,|
	{
		inivar= 
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		StringReplace,INPDBX,INPDBX,-,,All
		StringReplace,INPDBX,INPDBX,%A_Space%,,All
		iniread, inivar, %racoreopt%,OPTIONS,%A_LoopField%
		if (inivar <> "ERROR")
			{
				%INPDBX%= %inivar%
			}
	}
SB_SetText("Configuration Loaded")
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    GLOBAL FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

LNCHCHK:
lnchcc= 
lnchrc= 
guicontrol,hide,RETAL
guicontrol,move,CLRCUROM,x740 y30
guicontrolget,lnchcc,,LCORE
guicontrolget,lnchrc,,ROMLOC
if (lnchrc = "")
	{
		guicontrol,disable,LNCHBUT
		return
	}
if (lnchcc = "")
	{
		guicontrol,disable,LNCHBUT		return
	}
guicontrol,enable,LNCHBUT	
return

Hopt:
gui,submit,nohide
guicontrol,,OPTDDL,|History||%plistfiles%				
gosub, OPTDDL
return

Dopt:
gui,submit,nohide
guicontrolget,lcrtst,,LCORE

SWAPLOC= %RJSYSTEMS%
SWAPNAM= ROMJACKETS
SWAPPOP= %systmfldrs%
ifinstring,lcrtst,_libretro
	{
		SWAPLOC= %coreassetsDirectory%
		SWAPNAM= Downloads
		SWAPPOP= %dwnlfldrs%
	}
guicontrol,,OPTDDL,|%SWAPNAM%||%SWAPPOP%
gosub, OPTDDL
return

OptDDL:
gui,submit,nohide
guicontrolget,OPTDLT,,HOPT
guicontrolget,OPTYP,,OPTDDL
poptadd= 
romf= 
if (OPTDLT = 1)
	{
		if (OPTYP = "History")
			{
				guicontrol,,ROMLOC,|%romf%||%HISTORY%%romf%
				gosub, LNCHCHK
				return
			}
		PLineNum= 
		PLineAdd= 
		splitpath,OPTYP, , , ,DDLUX
		Loop, Read, %playlistDirectory%\%OPTYP%,|
			{
				PLineNum+=1
				PLineAdd+=1
				if (PLineAdd = 1)
					{
						romhn1= 
						romhn2= 
						StringSplit,romhn,A_LoopReadLine,#
						if (romhn2 = "")
							{
								romhn2= %romhn1%
							}							
						if (romf = "")
							{
								romf= %romhn1%
							}
						poptadd.= romhn1 . "|"
					}
				if (PLineAdd =  6)
					{
						PLineAdd= 
					}
			}
			romfj1= 
			romfj2= 
			stringsplit, romfj, romf,#
			stringmid,romhnck,romfj1,2,1
			if (romhnck <> ":")
				{
					ifexist, %raexeloc%\%romfj1%
						{
							romf= %raexeloc%\%romfj1%
							if (romfj2 <> "")
								{
									romf= %raexeloc%\%romfj1%#%romfj2%
								}
						}
				}
		guicontrol,,ROMLOC,|%romf%||%poptadd%
		gosub, EDTROM
		return
	}
guicontrolget,lcrtst,,LCORE

SWAPLOC= %RJSYSTEMS%
SWAPNAM= ROMJACKETS
SWAPPOP= %systmfldrs%
ifinstring,lcrtst,_libretro
	{
		SWAPLOC= %coreassetsDirectory%
		SWAPNAM= Downloads
		SWAPPOP= %dwnlfldrs%
	}
	
if (OPTYP = "%SWAPNAM%")
	{
		guicontrol, ,ROMLOC
		guicontrol, ,LCORE
		coreselv= 
		romf= 
		if (dlx <> "dll")
			{
				gosub, RAOPTSHOW
			}
		gosub, LNCHCHK	
		return
	}

DDLUX= %OPTYP%
omitxtn= 
REVSPL= 1
iniread,omitxtz,emuCfgPresets.set,%OPTYP%,RJROMXT
if (omitxtz <> "ERROR")
	{
		stringreplace,omitxtz,omitxtz,.,,All
		stringreplace,omitxtz,omitxtz,`,,|,All
		stringsplit,omitxtn,omitxtz,= | ""
		omitxtn.= omitxtn . "|" . zip
	}


if (omitxtn = "")
	{
		REVSPL= 
		stringsplit,omitxtn,omitxt,= | ""
	}
ar := Object()
Loop, %omitxtn0%
	{
		new= % (omitxtn%a_index%)
		if (omitxtn%a_index% <> "")
			{
				ar.insert(new)
			}
	}
SB_SetText("...Searching...")
Loop,%SWAPLOC%\%OPTYP%\*.*,0,1
	{
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		if (noapl = REVSPL)
			{
				if (romf = "")
					{
						romf= %A_LoopFileLongPath%
					}
				poptadd .= A_LoopFileLongPath . "|"
			}
	}

stringmid,romhnck,romf,2,1
if (romhnck <> ":")
	{
		ifexist, %raexeloc%\%romf%
			{
				romf= %raexeloc%\%romf%
			}
	}
guicontrol,,ROMLOC,|%romf%||%poptadd%
gosub, EDTROM
return

Rewind:
gui, submit, nohide
rewindEnable= false
guicontrolget, REWEN
if (REWEN = 0)
	{
		guicontrol, Disable, REWGRAN
	}
else if (REWEN = 1)
	{
		rewindEnable= true
		guicontrol, Enable, REWGRAN
	}
IniWrite, "%rewindEnable%", %curcfg%,OPTIONS,rewind_enable
return

EnableCR:
gui, submit, nohide
if (CSTCRE = 1)
	{
		guicontrol,disable,LCORE
		guicontrol,enable,CSTMCORE
	}
if (CSTCRE = 0)
	{	
		RUNCORE= 
		guicontrol,Disable,CSTMCORE
	}
return


EnableCC:
gui, submit, nohide
if (CSTCMD = 1)
	{
		guicontrol,enable,CSTCRE
		guicontrol,disable,ROMLOC
		guicontrol,disable,GROM
		guicontrol,disable,LCORE
		guicontrol,enable,CSTMROM
	}
if (CSTCMD = 0)
	{
		guicontrol,disable,CSTCRE
		guicontrol,,CSTMCORE,0
		guicontrol,disable,CSTMCORE
		guicontrol,enable,ROMLOC
		guicontrol,enable,GROM
		guicontrol,enable,LCORE
		RUNROM= 
		guicontrol,Disable,CSTMROM
	}
return

SwHost:
gui,submit,nohide
guicontrolget,SWHOST,,SWHOST
if (SWHOST = 1)
	{
		guicontrol,hide,LNCHBUT 
		guicontrol,show,HLNCHBUT 
	}
if (SWHOST = 0)
	{
		guicontrol,hide,HLNCHBUT 
		guicontrol,show,LNCHBUT 
	}
return

CORECommand:
gui, submit, nohide
RUNCORE= %CSTMCORE%
return

SaveSort:
gui, submit, nohide
sortSavefilesEnable= false
if (SAVSRT = 1)
	{
		sortSavefilesEnable= true
	}
iniwrite, "%sortSavefilesEnable%",%curcfg%,OPTIONS,sort_savefiles_enable
return
ROMOverride:
gui, submit, nohide
RUNROM= %CSTMROM%
return

Granularity:
gui, submit, nohide
rewindGranularity= %REWGRAN%
guicontrolget, REWGRAN
IniWrite, "%rewindGranularity%", %curcfg%,OPTIONS,rewind_granularity
return

autoSave:
gui, submit, nohide
autoSaveInterval= %SVINT%
IniWrite, "%autoSaveInterval%", %curcfg%,OPTIONS,auto_savestate_interval
return

StateAutoIndex:
savestateAutoIndex= false
gui, submit, nohide
if (STAI = 1)
	{
		savestateAutoIndex= true
	}
IniWrite, "%savestateAutoIndex%", %curcfg%,OPTIONS,savestate_auto_index
return

StateAutoSave:
gui, submit, nohide
savestateAutoSave= false
if (STAS = 1)
	{
		savestateAutoSave= true
		guicontrol, enable, SVINT
	}
IniWrite, "%savestateAutoSave%", %curcfg%,OPTIONS,savestate_auto_save
return

StateAutoLoad:
gui, submit, nohide
STAL = 0
savestateAutoLoad= false
if (STAL = 1)
	{
		savestateAutoLoad= true
	}
guicontrol,,STAL, %STAL%
IniWrite, "%savestateAutoLoad%", %curcfg%,OPTIONS,savestate_auto_load
return

SortState:
gui, submit, nohide
sortSavestatesEnable= false
if (STORT = 1)
	{
		sortSavestatesEnable= true
	}
IniWrite, "%sortSavestatesEnable%", %curcfg%,OPTIONS,sort_savestates_enable
return

PerGameOverride:
gui, submit, nohide
guicontrol,, PGM, %PGM%
gameSpecificOptions= false
if PGM= 1
	{
		gameSpecificOptions= true
	}
IniWrite, "%gameSpecificOptions%", %curcfg%,OPTIONS,game_specific_options
return
AutoOverride:
gui, submit, nohide
guicontrol,, AUO, %AUO%
autoOverridesEnable= false
if AUO= 1 
	autoOverridesEnable= false
IniWrite, "%autoOverridesEnable%", %curcfg%,OPTIONS,auto_overrides_enable
return

CoreOverride:
gui, submit, nohide
guicontrol,, COV, %COV%
coreSpecificConfig= false
if COV= 1
coreSpecificConfig= true	
IniWrite, "%coreSpecificConfig%", %curcfg%,OPTIONS,core_specific_config
return

GPURecord:
gui, submit, nohide
videoGpuRecord= false
if GPUVREC= 1
	{
		videoGpuRecord= true
		BSV= -R
	}
IniWrite, "%videoGpuRecord%", %curcfg%,OPTIONS,video_gpu_record
return
GPUScreenShot:
gui, submit, nohide
videoGpuScreenshot= true
if GPUSS= 0 
	videoGpuScreenshot= false
IniWrite, "%videoGpuScreenshot%", %curcfg%,OPTIONS,video_gpu_screenshot
return

CustmOpts:
gui, submit, nohide
CUSTMOPT= 
if (CUSTSWITCHS = 1)
	{
		guicontrolget,CUSTMOPT,,CUSTMOPTS
		guicontrol,,CUSTMOPT,|%CUSTMOPT%||%INJOPT%
		return
	}
return

CustmArgs:
gui, submit, nohide
CUSTMARG= 
if (CUSTSWITCH = 1)
	{
		guicontrolget,CUSTMARG,,CUSTMARGS
		guicontrol,,CUSTMARG,|%CUSTMARG%||%INJOPT%
		return
	}
return

CustSwitchs:
gui,submit,nohide
iscor= 
iscorext= 
guicontrolget,iscor,,LCORE
splitpath,iscor,,,iscorext
if (iscorext = "dll")
	{
		guicontrol,,CUSTSWITCHS,0
	}
guicontrolget,CUSTSWITCHS,,CUSTSWITCHS
if (CUSTSWITCHS = 0)
	{
		guicontrol, hide, CUSTMOPT
		guicontrol, hide, CUSTMARG
		guicontrol, hide, CUSTMOPTS
		guicontrol, hide, CUSTMARGS
		guicontrol, move, ROMLOC, x18 y22 w640
		guicontrol,,CUSTSWITCH,0
		;;gosub, CustSwitch
		CUSTMARG= 
		CUSTMOPT= 
		return
	}
guicontrol, show, CUSTMOPT
guicontrol, show, CUSTMARG
guicontrol, show, CUSTMOPTS
guicontrol, show, CUSTMARGS
guicontrol,,CUSTSWITCH,1
guicontrol, move, ROMLOC, x18 y22 w440
;;gosub, CustSwitch
return

LocAssetDDL:
gui,submit,nohide
guicontrolget,lcrtst,,LCORE
SWAPLOC= %RJSYSTEMS%
SWAPNAM= ROMJACKETS
SWAPPOP= %systmfldrs%
ifinstring,lcrtst,_libretro
	{
		SWAPLOC= %coreassetsDirectory%
		SWAPNAM= Downloads
		SWAPPOP= %dwnlfldrs%
	}
guicontrolget,LOCASSETDDL,,LOCASSETDDL
return

LocFldrs:
gui,submit,nohide
guicontrol,show,LOCSRCHREC
guicontrolget,lcrtst,,LCORE

SWAPLOC= %RJSYSTEMS%
SWAPNAM= ROMJACKETS
SWAPPOP= %systmfldrs%

ifinstring,lcrtst,_libretro
	{
		SWAPLOC= %coreassetsDirectory%
		SWAPNAM= Downloads
		SWAPPOP= %dwnlfldrs%
	}


guicontrol,,LOCASSETDDL,|%SWAPNAM%||%SWAPPOP%
return


LocSrchRec:
gui,submit,nohide
guicontrolget,LOCSRCHREC,,LOCSRCHREC
return

LocPlsts:
gui,submit,nohide
guicontrol,hide,LOCSRCHREC
guicontrol,,LOCASSETDDL,|All_Playlists||%plistfiles%
return

LocROMSrchBut:
guicontrol, show, LOCROMPOP
guicontrol, hide, DRAGIMAGE
gui,submit,nohide
guicontrolget,LOCFLDRS
guicontrolget,LOCPLSTS
guicontrolget,LOCASSETDDL,,LOCASSETDDL
guicontrolget, LOCROMSRCH,,LOCROMSRCH
guicontrol,,LOCROMPOP,|..searching...
guicontrol,disable,LocROMSrchBut
sanm:= LOCROMSRCH
gosub,SanitizeN
LOCROMSRCH:= sanm
if (LOCPLSTS = 1)
	{
		if (LOCASSETDDL = "All_Playlists")
			{
				lsrchpop= 
				Loop, Read, hashdb.ini
					{
						hashsrch1= 
						hashsrch2= 
						hashsrch3= 
						stringsplit,hashsrch,A_LoopReadLine,|
						IfInString, hashsrch1, %LOCROMSRCH%
							{	
									lsrchpop .= hashsrch2 . "=" . hashsrch1 . "|"
							}
					}
					guicontrol,,LOCROMPOP, |%lsrchpop%
					guicontrol,enable,LocROMSrchBut
				return
			}
		lsrchpop=	
		plnuminc=	
		Loop, Read, %playlistDirectory%\%LOCASSETDDL%
			{
				plnuminc+=1
				if (plnuminc = 1)
					{
						IfInString, A_LoopReadLine, %LOCROMSRCH%
							{	
									lsrchpop .= A_LoopReadLine . "|"
							}
					}
			if (plnuminc = 6)
				{
					plnuminc= 
				}
			}
		guicontrol,,LOCROMPOP, |%lsrchpop%	
		guicontrol,enable,LocROMSrchBut
		return
	}

LOCSRCHFLDR= %SWAPLOC%\%LOCASSETDDL%
guicontrolget,LOCSRCHREC,,LOCSRCHREC
if (LOCASSETDDL = "%SWAPNAM%")
	{
		LOCSRCHFLDR= %SWAPLOC%
	}

stringsplit,omitxtn,omitxt,= | ""
ar := Object()
Loop, %omitxtn0%
{
	new= % (omitxtn%a_index%)
	if (omitxtn%a_index% <> "")
		{
			ar.insert(new)
		}
}
SB_SetText("...Searching...")
LPOPLDWN= 
existingpop= 
Loop,%LOCSRCHFLDR%\*%LOCROMSRCH%*,,%LOCSRCHREC%
	{
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		if (noapl = "")
			{
				LPOPLDWN .= A_LoopFileFullPath . "|"
			}
	}
guicontrolget, existingpop,,LOCROMPOP
guicontrol,,LOCROMPOP,|%existingpop%|%LPOPLDWN%
SB_SetText("Search Complete")
guicontrol,enable,LocROMSrchBut
return

LocROMSrch:
gui,submit,nohide
guicontrolget, LOCROMSRCH,,LOCROMSRCH
return


LocROMPop:
gui,submit,nohide
guicontrolget, LOCFLDRS,,LOCFLDRS
guicontrolget, LOCPLSTS,,LOCPLSTS
guicontrol,,HOPT,%LOCPLSTS%
guicontrol,,DOPT,%LOCFLDRS%
guicontrolget,romOVf,,LOCROMPOP

if (LOCFLDRS = 1)
	{
		if (LOCASSETDDL = "%SWAPLOC%")
				{
					stringreplace,nocad,romf,%SWAPLOC%\,,All
					StringSplit,isofldr,nocad,\
					LOCASSETDDL:= isofldr1
				}
		guicontrol,,OPTDDL,|%LOCASSETDDL%||%SWAPPOP%
		guicontrolget,romOVf,,LOCROMPOP
		gosub, OPTDDL
		romf= %romOVf%
		
	}
if (LOCPLSTS = 1)
	{	
		if (LOCASSETDDL = "All_Playlists")
			{
				guicontrolget,romf,,LOCROMPOP
				LOCRSPL1= 
				LOCRSPL2= 
				stringsplit,LOCRSPL,LOCROMPOP,=
				guicontrol,,OPTDDL,|%LOCRSPL1%||History|%plistfiles%
				gosub, OPTDDL
				romf:= LOCRSPL2
				;;guicontrolget, 	romf,,LOCROMPOP
				romfj1= 
				romfj2= 
				stringsplit, romfj, romf,#
				stringmid,romhnck,romfj1,2,1
				if (romhnck <> ":")
					{
						ifexist, %raexeloc%\%romfj1%
							{
								romf= %raexeloc%\%romfj1%
								if (romfj2 <> "")
									{
										romf= %raexeloc%\%romfj1%#%romfj2%
									}
							}
					}
				guicontrol,,ROMLOC,|%romf%||%poptadd%
				gosub, EDTROM
				return
			}
		guicontrol,,OPTDDL,|%LOCASSETDDL%||History|%plistfiles%
		gosub, OPTDDL
	}
romfj1= 
romfj2= 
stringsplit, romfj, romf,#
stringmid,romhnck,romfj1,2,1
if (romhnck <> ":")
	{
		ifexist, %raexeloc%\%romfj1%
			{
				romf= %raexeloc%\%romfj1%
				if (romfj2 <> "")
					{
						romf= %raexeloc%\%romfj1%#%romfj2%
					}
			}
	}
guicontrol,,ROMLOC,|%romf%||%poptadd%
gosub, EDTROM
gui,submit,nohide
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    AUDIO FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

AudioToggle:
gui, submit, nohide
if (GLBLAUDIO = 0)
	{
		audioEnable = false
		guicontrol, disable, DSND
		guicontrol, disable, SDL2
		guicontrol, disable, XAUD
		guicontrol, disable, ASYNC
		guicontrol, disable, ART
		guicontrol, disable, MUTE
		guicontrol, disable, LATENCY
		guicontrol, disable, WASAPI
		guicontrol, disable, OPENAL
	}
if (GLBLAUDIO = 1)
	{
		audioEnable = true
		guicontrol, enable, DSND
		guicontrol, enable, SDL2
		guicontrol, enable, XAUD
		guicontrol, enable, ASYNC
		guicontrol, enable, ART
		guicontrol, enable, MUTE
		guicontrol, enable, LATENCY
		guicontrol, enable, WASAPI
		guicontrol, enable, OPENAL
	}
IniWrite, "%audioEnable%", %curcfg%,OPTIONS,audio_enable
return

dSound:
gui, submit, nohide
audioDriver= dsound
IniWrite, "%audioDriver%", %curcfg%,OPTIONS,audio_driver
return

xaudioSound:
gui, submit, nohide
audioDriver= xaudio
IniWrite, "%audioDriver%", %curcfg%,OPTIONS,audio_driver
return

sdlSound:
gui, submit, nohide
audioDriver= sdl2
IniWrite, "%audioDriver%", %curcfg%,OPTIONS,audio_driver
return

Wasapi:
gui, submit, nohide
audioDriver= wasapi
IniWrite, "%audioDriver%", %curcfg%,OPTIONS,audio_driver
return

OpenAL:
gui, submit, nohide
audioDriver= openal
IniWrite, "%audioDriver%", %curcfg%,OPTIONS,audio_driver
return


AudSync:
gui, submit, nohide
guicontrol,, ASYNC, %ASYNC%
audioSync= false
If (ASYNC = 1)
	{
		audioSync= true
	}
IniWrite, "%audioSync%", %curcfg%,OPTIONS,audio_sync
return

Rate:
gui, submit, nohide
audioRateControl= true
if (ART = 0)
	{
		audioRateControl= false
	}
IniWrite, "%audioRateControl%", %curcfg%,OPTIONS,audio_rate_control
return

RateSlider:
gui, submit, nohide
IniWrite, "%audioRateControlDelta%", %curcfg%,OPTIONS,audio_rate_control_delta
return

AudMute:
gui, submit, nohide
audioMuteEnable= false
if (MUTE = 1)
	{
	audioMuteEnable= true
	}
IniWrite, "%audioMuteEnable%", %curcfg%,OPTIONS,audio_mute_enable
return

AudLat:
gui, submit, nohide
audioLatency= %LATENCY%
guicontrol,, LATENCY, |%LATENCY%||32|64|128
IniWrite, "%audioLatency%", %curcfg%,OPTIONS,audio_latency
Return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    VIDEO FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;       RESOLUTION SWITCHING        ;;;;;;;;;;;;;;;;;;;
FullScreenRez:
Gui, Submit, nohide
StringSplit fscrez, FSREZ, x,
gosub, FSEditUpdt
return

FSEditUpdt:
Gui, submit, nohide
GuiControl,, MONXREZ, %fscrez1%
GuiControl,, MONYREZ, %fscrez2%
videoFullscreenX= %fscrez1%
videoFullscreenY= %fscrez2%
IniWrite, "%videoFullscreenX%", %curcfg%,OPTIONS,video_fullscreen_x
IniWrite, "%videoFullscreenY%", %curcfg%,OPTIONS,video_fullscreen_y
return


GetRez:
Gui, Submit, nohide
StringSplit nwrez, REZV, x,
gosub XYRES
return

XYRES:
Gui, submit, nohide
GuiControl,, IntXres, %nwrez1%
GuiControl,, IntYres, %nwrez2%
customViewportWidth= %nwrez1%
customViewportHeight= %nwrez2%
IniWrite, "%IntYres%", %curcfg%,OPTIONS,custom_viewport_height
IniWrite, "%IntXres%", %curcfg%,OPTIONS,custom_viewport_width
return

GetIntYrez:
Gui, submit, nohide
GuiControlget, IntYres
IniWrite, "%IntYres%", %curcfg%,OPTIONS,custom_viewport_height
return

GetIntXrez:
Gui, submit, nohide
GuiControlget, IntXres
IniWrite, "%IntXres%", %curcfg%,OPTIONS,custom_viewport_width
return


MonResX:
gui, submit, nohide
guicontrolget, MONXREZ,,MONXREZ
videoFullscreenX= %MONXREZ%
IniWrite, "%videoFullscreenX%", %curcfg%,OPTIONS,video_fullscreen_x
return

MonResY:
gui, submit, nohide
guicontrolget, MONYREZ,,MONYREZ
videoFullscreenY= %MONYREZ%
IniWrite, "%videoFullscreenY%", %curcfg%,OPTIONS,video_fullscreen_y
return

VidPosY:
Gui, submit, nohide
GuiControlget, VidYLoc
IniWrite, "%VidYLoc%", %curcfg%,OPTIONS,custom_viewport_y
return

VidPosX:
Gui, submit, nohide
GuiControlget VidXLoc
IniWrite, "%VidXLoc%", %curcfg%,OPTIONS,custom_viewport_x
return


rerez:
gui, submit, nohide
if (videoFullscreenX = "")
	{
		gosub, DEFREZ
	}
guiControl,, FSREZ, |%videoFullscreenX%x%videoFullscreenY%||%qres%
guiControl,, REZV, |%customViewportWidth%x%customViewportHeight%||%qres%
guiControl,, VidXLoc, %customViewportX%
guiControl,, VidYLoc, %customViewportY%

guiControl,, IntXres, %customViewportWidth%
guiControl,, IntYres, %customViewportHeight%
guicontrol,, OUTFW 0
guiControl,, MONXREZ, %videoFullscreenX%
guiControl,, MONYREZ, %videoFullscreenY%

IniWrite, "%IntYres%", %curcfg%,OPTIONS,custom_viewport_height
IniWrite, "%IntXres%", %curcfg%,OPTIONS,custom_viewport_width
IniWrite, "%IntXres%", %curcfg%,OPTIONS,video_fullscreen_x
IniWrite, "%IntYres%", %curcfg%,OPTIONS,video_fullscreen_y
IniWrite, "%VidXLoc%", %curcfg%,OPTIONS,custom_viewport_x
IniWrite, "%VidYLoc%", %curcfg%,OPTIONS,custom_viewport_y
gui, submit, nohide
return

DEFREZ:
customViewportX= 0
customViewportY= 0
customViewportWidth= %MonitorWorkAreaRight%
customViewportHeight= %MonitorWorkAreaBottom%
videoFullscreenX= %MonitorWorkAreaRight%
videoFullscreenY= %MonitorWorkAreaBottom%
IniWrite, "%MonitorWorkAreaBottom%", %curcfg%,OPTIONS,custom_viewport_height
IniWrite, "%MonitorWorkAreaRight%", %curcfg%,OPTIONS,custom_viewport_width
IniWrite, "%MonitorWorkAreaRight%", %curcfg%,OPTIONS,video_fullscreen_x
IniWrite, "%MonitorWorkAreaBottom%", %curcfg%,OPTIONS,video_fullscreen_y
IniWrite, "0", %curcfg%,OPTIONS,custom_viewport_x
IniWrite, "0", %curcfg%,OPTIONS,custom_viewport_y

guiControl,, FSREZ, |%videoFullscreenX%x%videoFullscreenY%||%qres%
guiControl,, REZV, |%customViewportWidth%x%customViewportHeight%||%qres%
guiControl,, VidXLoc, %customViewportX%
guiControl,, VidYLoc, %customViewportY%

guiControl,, IntXres, %customViewportWidth%
guiControl,, IntYres, %customViewportHeight%
guicontrol,, OUTFW 0
guiControl,, MONXREZ, %videoFullscreenX%
guiControl,, MONYREZ, %videoFullscreenY%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


GetFRMDL:
gui, submit, nohide
guicontrolget, FRAMEDELAY,,FRAMEDELAY
netplayDelayFrames= %FRAMEDELAY%
IniWrite, "%netplayDelayFrames%", %curcfg%,OPTIONS,netplay_delay_frames
return

GetCHKFRM:
gui, submit, nohide
guicontrolget, CHECKFRAMES,,CHECKFRAMES
netplayCheckFrames= %CHECKFRAMES%
IniWrite, "%netplayCheckFrames%", %curcfg%,OPTIONS,netplay_check_frames
return

MinLat:
gui,submit,nohide
guicontrolget,MINLAT,,MINLAT
netplayInputLatencyFramesMin= %MINLAT%
iniwrite, "%netplayInputLatencyFramesMin%",%curcfg%,OPTIONS,netplay_Input_Latency_Frames_Min
return

LatRng:
gui,submit,nohide
guicontrolget,LATRNG,,LATRNG
netplayInputLatencyFramesRange= %LATRNG%
iniwrite, "%netplayInputLatencyFramesRange%",%curcfg%,OPTIONS,netplay_Input_Latency_Frames_Range
return


GLPoP:
gui, submit, nohide
GuiControl Hide, CGSHDVAR
GuiControl Hide, SLSHDVAR
GuiControl Show, GLSHDVAR
return

CGPoP:
gui, submit, nohide
GuiControl Hide, GLSHDVAR
GuiControl Hide, SLSHDVAR
GuiControl Show, CGSHDVAR
return

SLPoP:
gui, submit, nohide
GuiControl Hide, GLSHDVAR
GuiControl Hide, CGSHDVAR
GuiControl Show, SLSHDVAR
return

SelectShader:
gui, submit, nohide
videoShader=
FileSelectFile, videoShader, 3, %raexeloc%\shaders, any shader, (*.*)
IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
return

SelectFilter:
gui, submit, nohide
videoFilter=
FileSelectFile, videoFilter, 3, %raexeloc%\filters\video, any filter, (*.*)
IniWrite, "%filtvar%", %curcfg%,OPTIONS,video_filter
return

MswChI:
gui,submit,nohide
guicontrolget,videoMaxSwapchainImages,,MSWCHI
IniWrite, "%videoMaxSwapchainImages%",%curcfg%,OPTIONS,video_max_swapchain_images
return

AutoShd:
gui, submit, nohide
autoShadersEnable= true
if (AUTSHD = 0)
{
autoShadersEnable= false
}
IniWrite, "%autoShadersEnable%", %curcfg%,OPTIONS,auto_shaders_enable
return

GPUIV:
gui, submit, nohide
videoHardSyncFrames= %GPUV%
IniWrite, "%videoHardSyncFrames%", %curcfg%,OPTIONS,video_hard_sync_frames
return

SyncGPU:
Gui, Submit, NoHide
videoHardSync= false
If (HSYNC = 1)
	{
		videoHardSync= true
		guicontrol, enable, GPUV
	}
else if (HSYNC = 0)
	{
		guicontrol, disable, GPUV
	}
IniWrite, "%videoHardSync%", %curcfg%,OPTIONS,video_hard_sync
return

VidFrmDelay:
Gui, Submit, NoHide
videoFrameDelay= %FRMDL%
IniWrite, "%videoFrameDelay%", %curcfg%,OPTIONS,video_frame_delay
return

GLDISP:
gui, submit, nohide
videoDriver= gl
IniWrite, "%videoDriver%", %curcfg%,OPTIONS,video_driver
return

D3DDISP:
gui, submit, nohide
videoDriver= d3d
guicontrol,,RMENU,1
gosub, RGUI
IniWrite, "%videoDriver%", %curcfg%,OPTIONS,video_driver
return

SDLDISP:
gui, submit, nohide
videoDriver= sdl2
IniWrite, "%videoDriver%", %curcfg%,OPTIONS,video_driver
return

GDIDISP:
gui, submit, nohide
videoDriver= gdi
IniWrite, "%videoDriver%", %curcfg%,OPTIONS,video_driver
return

VLKDISP:
gui, submit, nohide
videoDriver= Vulkan
guicontrol,,SLCT,1
IniWrite, "%videoDriver%", %curcfg%,OPTIONS,video_driver
return

Refresh:
gui,submit,nohide
guicontrolget,REFRESH,,REFRESH
stringsplit,reftmp,REFRESH,.
guicontrol,,REFSLD,%reftmp1%
guicontrol,,REFUD,%reftmp1%
return

RefSld:
gui,submit,nohide
guicontrolget,REFSLDV, ,REFSLD
stringsplit,Reftmp,REFSLDV,.
guicontrol,,REFUD,%Reftmp1%
guicontrol,,REFRESH,%reftmp1%
return

RefUD:
gui,submit,nohide
return

TriplBuf:
gui, submit, nohide
guicontrol,, TRIPB, %TRIPB%
Gui, Submit, NoHide
tripleBufferingEnable= false
If TRIPB = 1
tripleBufferingEnable= true
IniWrite, "%tripleBufferingEnable%", %curcfg%,OPTIONS,triple_buffering_enable
return

SHATOG:
gui, submit, nohide
guicontrol,, SHDEN, %SHDEN%
if (SHDEN = 1)
	{
		videoShaderEnable= true
		guicontrol, Enable, CGSLCT
		guicontrol, Enable, GLSLCT
		guicontrol, Enable, SLCT
		guicontrol, Enable, GLSHDVAR
		guicontrol, Enable, SLSHDVAR
		guicontrol, Enable, CGSHDVAR
		guicontrol, Enable, SHDSEL
		guicontrol,, SMTHV, 0
	}
else if (SHDEN = 0)
	{
		videoShaderEnable= false
		guicontrol, Disable, GLSLCT
		guicontrol, Disable, SLCT
		guicontrol, Disable, CGSLCT
		guicontrol, Disable, GLSHDVAR
		guicontrol, Disable, SLSHDVAR
		guicontrol, Disable, CGSHDVAR
		guicontrol, Disable, SHDSEL
	}
IniWrite, "%videoShaderEnable%", %curcfg%,OPTIONS,video_shader_enable
return

SmoothVid:
gui, submit, nohide
videoSmooth= false
if (SMTHV= 1)
{
	videoSmooth= true
}
IniWrite, "%videoSmooth%", %curcfg%,OPTIONS,video_smooth
return

VideoShrdCtx:
gui, submit, nohide
guicontrol,, SHAREDV, %SHAREDV%
videoSharedContext= false
if SHAREDV= 1
	videoSharedContext= true
IniWrite, "%videoSharedContext%", %curcfg%,OPTIONS,video_shared_context
return

VIDTHR:
gui, submit, nohide
guicontrol,, THRDV, %THRDV%
Gui, Submit, NoHide
If (THRDV = 0)
	{
		videoThreaded= false
		guicontrol, enable, REFRESH
		guicontrol, enable, REFSLD
	}
If (THRDV = 1)
	{
		videoThreaded= true
		guicontrol, disable, REFRESH
		guicontrol, disable, REFSLD
	}
IniWrite, "%videoThreaded%", %curcfg%,OPTIONS,video_threaded
return

Rotate:
gui, submit, nohide
guicontrolget,ROTATE,,ROTATE
videoRotaton= %ROTATE%
IniWrite, "%videoRotation%", %curcfg%,OPTIONS,video_rotation
return

VideoMon:
gui, submit, nohide
guicontrol,, MONUM, |%MONUM%||0|1|2|3|4
videoMonitorIndex= %MONUM%
IniWrite, "%videoMonitorIndex%", %curcfg%,OPTIONS,video_monitor_index
return

NetPW:
gui,submit,nohide
guicontrolget,NETWP,,NETPW
netplayPassword= %NETPW%
IniWrite, "%netplayPassword%",%curcfg%,OPTIONS,netplay_password
return

NetSpecPW:
gui,submit,nohide
guicontrolget,NETSPECPW,,NETSPECPW
netplaySpectatePassword= %NETSPECPW%
IniWrite, "%netplaySpectatePassword%",%curcfg%,OPTIONS,netplay_spectate_password
return

DeskComp:
gui, submit, nohide
if (DTCOMP = 1)
	{
		videoDisableCompositing= false
	}
if (DTCOMP = 0)
	{
		videoDisableCompositing= true
	}
IniWrite, "%videoDisableComposition%", %curcfg%,OPTIONS,video_disable_composition
return

FLICK:
gui, submit, nohide
flickerFilterEnable= false
if (FLK = 1)
	{
		flickerFilterEnable= true
		Guicontrol,enable, FLICKF
	}
else if (FLK = 0)
	{
		Guicontrol,disable, FLICKF
	}
IniWrite, "%flickerFilterEnable%", %curcfg%,OPTIONS,flicker_filter_enable
return

FlckFrms:
gui, submit, nohide
guicontrol,, FLICKF, |%FLICKF%||0|1|2|3
flickerFilterIndex= %FLICKF%
IniWrite, "%flickerFilterIndex%", %curcfg%,OPTIONS,flicker_filter_index
return


FSCRN:
gui, submit, nohide
videoWindowedFullscreen= false
videoFullscreen= true
guicontrol, enable, OUTFW
IniWrite, "%videoFullscreen%", %curcfg%,OPTIONS,video_fullscreen
IniWrite, "%videoWindowedFullscreen%", %curcfg%,OPTIONS,video_windowed_fullscreen
return

WIND:
gui, submit, nohide
videoFullscreen= false
guicontrol, disable, OUTFW
IniWrite, "%videoFullscreen%", %curcfg%,OPTIONS,video_fullscreen
return

FWIND:
gui, submit, nohide
guicontrolget, OUTFW, ,OUTFW
if (OUTFW =1) 
	{
		videoWindowedFullscreen= true
		guicontrol, disable, FSREZ
	}
if (OUTFW= 0)
	{
		guicontrol, enable, FSREZ
		vidoWindowedFullscreen= false
	}
IniWrite, "%videoFullscreen%", %curcfg%,OPTIONS,video_fullscreen
IniWrite, "%videoWindowedFullscreen%", %curcfg%,OPTIONS,video_windowed_fullscreen
return

FAspect:
gui, submit, nohide
videoForceAspect= true
if (FORCEAR = 0)
	videoForceAspect= false
IniWrite, "%videoForceAspect%", %curcfg%,OPTIONS,video_force_aspect
return

CropOS:
gui, submit, nohide
videoCropOverscan= false
if (CROP = 1)
	videoCropOverscan = true
IniWrite, "%videoCropOverscan%", %curcfg%,OPTIONS,video_crop_overscan
return

BlackFrame:
if (BFI = 1)
	{
		videoBlackFrameInsertion= true
	}
if (BFI = 0)
	{
		videoBlackFrameInsertion= false
	}
IniWrite, "%videoBlackFrameInsertion%", %curcfg%,OPTIONS,video_black_frame_insertion
return

SwapFrames:
Gui, Submit, nohide
videoSwapInterval= %SWPV%
IniWrite, "%videoSwapInterval%", %curcfg%,OPTIONS,video_swap_interval
return

SyncVideo:
Gui, Submit, NoHide
videoVsync= false
If (VIDSYNC= 1)
	{
		videoVsync= true
		guicontrol,Enable, SWPV
	}
else if (VIDSYNC = 0)
	{
		guicontrol,Disable, SWPV
	}
IniWrite, "%videoVsync%", %curcfg%,OPTIONS,video_vsync
return

AARatio:
gui, submit, nohide
videoAspectRatioAuto= true
if (AUTOASPECT = 0)
	videoAspectRatioAuto= false
IniWrite, "%videoAspectRatioAuto%", %curcfg%,OPTIONS,video_aspect_ratio_auto
return

SclVid:
Gui, submit, nohide
guicontrolget, VIDSCL, ,VIDSCL
videoScale= %VIDSCL%
IniWrite, "%videoScale%", %curcfg%,OPTIONS,video_scale
return

ScaleMode:
gui, submit, nohide
videoScaleInteger= true
if (INTG = 0)
	{
		STRCH= 1
		videoScaleInteger= false
	}
guicontrol,,INTG, %INTG%
guicontrol,,STRCH, %STRCH%
IniWrite, "%videoScaleInteger%", %curcfg%,OPTIONS,video_scale_integer
return

Gamma:
gui, submit, nohide
gammaCorrection= false
if (GCOR = 1)
	gammaCorrection= true
IniWrite, "%gammaCorrection%", %curcfg%,OPTIONS,gamma_correction
return

Aspect:
gui, submit, nohide
ARIAPND= 
VIDTMP= 
aspectRatioIndex:= Abs(VIDASPECT-2)

Array := Object()
  Array[j] := A_LoopField
  Array%j%_%k% := A_LoopReadLine
  Array[j, k] := A_LoopReadLine
  ArrayCount := 0                        
  Loop, Parse, ARI,|
   {
      ArrayCount += 1
      Array[ArrayCount] := A_LoopField
	}
Loop %ArrayCount%
  {
   if (A_Index = aspectRatioIndex)
		{
			ARIENUM := Array[A_Index]
		}
	  element := Array[A_Index]
	  ARIAPND .= Array[A_Index]"|"
	}
VIDTMP .= "|"ARIENUM "||" ARIAPND
IniWrite, "%aspectRatioIndex%", %curcfg%,OPTIONS,aspect_ratio_index
return

GLShdGet:
Gui, Submit, NoHide
shdvar= %GLSHDVAR%
if (shdvar = "nul")
	{
		videoShader=
		IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
		return
	}
ShaderDir=
ShaderName=
loop files, %raexeloc%\shaders\shaders_glsl\*.glslp, R
	{
		ShaderName= %A_LoopFilename%
		ShaderDir= %A_LoopFileDir%
		if (ShaderName = GLSHDVAR)
			break
	}
if (ShaderName <> "")
	videoShader= %ShaderDir%\%ShaderName%
if ShaderName = nul
	videoShader=
SB_SetText(" " ShaderName " ")
IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
return

HovPrev:
gui, submit, nohide
IniWrite, %HOVPREV%,Settings.ini,GLOBAL,hover_preview
return

SLShdGet:
Gui, Submit, NoHide
shdvar= %SLSHDVAR%
if (shdvar = "nul")
	{
		videoShader=
		IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
		return
	}
ShaderDir=
ShaderName=
loop files, %raexeloc%\shaders\shaders_slang\*.slangp, R
	{
		ShaderName= %A_LoopFilename%
		ShaderDir= %A_LoopFileDir%
		if (ShaderName = SLSHDVAR)
			break
	}
if (ShaderName <> "")
	videoShader= %ShaderDir%\%ShaderName%
if ShaderName = nul
	videoShader=
SB_SetText(" " ShaderName " ")
IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
return

CGShdGet:
Gui, Submit, NoHide
shdvar= %CGSHDVAR%
ShaderDir=
ShaderName=
if (shdvar = "nul")
	{
		videoShader=
		IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
		return
	}
loop files, %raexeloc%\shaders\shaders_cg\*.cgp, R
	{
		ShaderName= %A_LoopFilename%
		ShaderDir= %A_LoopFileDir%
		if (ShaderName = CGSHDVAR)
			break
	}
if (ShaderName <> "")
	videoShader= %ShaderDir%\%ShaderName%
SB_SetText(" " ShaderName " ")
IniWrite, "%videoShader%", %curcfg%,OPTIONS,video_shader
return

FltShdGet:
Gui, Submit, NoHide
vfilt= %FLTFILE%
if (vfilt = "nul")
	{
		videoFilter= nul
		IniWrite, "%videoFilter%", %curcfg%,OPTIONS,video_filter
		return
	}
FilterDir=
FilterName=
loop files, %raexeloc%\filters\video\*.filt, R
	{
		FilterName= %A_LoopFilename%
		FilterDir= %A_LoopFileDir%
		if (FilterName = FLTFILE)
			break
	}
if (FilterName <> "")
	videoFilter= %FilterDir%\%FilterName%
SB_SetText(" " FilterName " ")
IniWrite, "%videoFilter%", %curcfg%,OPTIONS,video_filter
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    NET FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

IPtoP:
stringsplit, RetIP, IPtoPARSE, .
goto PARSEBEGIN

PstBut:
gui, submit, nohide
stringsplit, RetIP, clipboard, . :,

PARSEBEGIN:
IPA= %RetIP1%
IPB= %RetIP2%
IPC= %RetIP3%
IPD= %RetIP4%
if (IPA = "")
	return
if (IPB = "")
	return
if (IPC = "")
	return
if (IPD = "")
	return
if (RetIP5 <> "")
	{
		HPORTNUM= %RetIP5%
	}
guicontrol,, CPORTNUM, %HPORTNUM%
guicontrol,, HIPA, %IPA%
guicontrol,, HIPB, %IPB%
guicontrol,, HIPC, %IPC%
guicontrol,, HIPD, %IPD%
guicontrol,, IPA, %IPA%
guicontrol,, IPB, %IPB%
guicontrol,, IPC, %IPC%
guicontrol,, IPD, %IPD%
return	

LAN_Get:
ipsplit1=
ipsplit2=
ipsplit3=
ipsplit4=
objWMIService := ComObjGet("winmgmts:{impersonationLevel = impersonate}!\\.\root\cimv2")
colItems := objWMIService.ExecQuery("Select * from Win32_NetworkAdapterConfiguration WHERE IPEnabled = True")._NewEnum
while colItems[objItem]
	{
		LANIPADR:= objItem.IPAddress[0]
	}
stringsplit, ipsplit, LANIPADR, .
guicontrol,, HHOSTIP, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
guicontrol,, HOSTIP, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
guicontrol,, NETINFO, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
Return


GetNetName:
guicontrolget, netplayNickname,,NETNAME
guicontrol,, HNETNAME, %netplayNickname%
goto, NETNMC


NETNMC:
if (netplayNickname = "")
	{
		netplayNickname= %A_UserName%%OSVRX%
		guicontrol,, HNETNAME, %netplayNickname%
		guicontrol,, NETNAME, %netplayNickname%
	}
IniWrite, "%netplayNickname%", %curcfg%,OPTIONS,netplay_nickname
return

IP_Get:
FileDelete,ShowIP.txt
FileReadLine,ipLookup,arcorg.set,6
URLDownloadToFile,%ipLookup%,%A_ScriptDir%\ShowIP.txt
if ErrorLevel = 1
  {
    MsgBox,16,IP Addresses,Your public IP address could not be detected., 3
  }

FileReadLINE,MainIP,%A_ScriptDir%\ShowIP.txt,1

ipsplit1=
ipsplit2=
ipsplit3=
ipsplit4=
stringsplit, ipsplit, MainIP, .
guicontrol,, HHOSTIP, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
guicontrol,, HOSTIP, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
Return

CSetPort:
gui, submit, nohide
guicontrolget, clientPlayIpPort,,CPORTNUM
IniWrite, "%clientPlayIpPort%", %curcfg%,OPTIONS,netplay_ip_port
IniWrite, "%clientPlayIpPort%", Settings.ini,GLOBAL,last_port
return

SetPort:
gui, submit, nohide
guicontrolget, HostplayIpPort,, IPORTNUM
return

IP_A:
gui, submit, nohide


gosub ConCatIP
return
IP_B:
gui, submit, nohide


gosub ConCatIP
return
IP_C:
gui, submit, nohide


gosub ConCatIP
return
IP_D:
gui, submit, nohide


gosub ConCatIP
return

ConCatIP:
IPADR= %IPA%.%IPB%.%IPC%.%IPD%
return

IPDisplay:
gui, submit, nohide
ifexist, ShowIP.txt
	{
		FileReadLINE,MainIP,%A_ScriptDir%\ShowIP.txt,1
		ipsplit1=
		ipsplit2=
		ipsplit3=
		ipsplit4=
		stringsplit, ipsplit, MainIP, .
		guicontrol,, HHOSTIP, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
		guicontrol,, HOSTIP, %ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%
	}
return

InetHost:
gui,submit,nohide
guicontrol,hide,SlvOnly
guicontrol,,SLVONLY,0
guicontrol,disable,AlSlv
netplayUseMitmServer= false
guicontrolget,INETHOST,,INETHOST
if (INETHOST = 1)
	{
		guicontrolget, HOSTSWITCH
		if (HOSTSWITCH =  1)
			{
				guicontrol,show,SlvOnly
			}
		guicontrol,enable,AlSlv
		netplayUseMitmServer= true
	}
iniwrite, "%netplayUseMitmServer%",%curcfg%,OPTIONS,netplay_use_mitm_server
return

AlSlv:
gui,submit,nohide
guicontrol,show,SLVONLY
netplayAllowSlaves= true
guicontrolget,ALSLV,,ALSLV
if (ALSLV = 0)
	{
		guicontrol,hide,SLVONLY
		netplayAllowSlaves= false
	}
iniwrite, "%netplayAllowSlaves%",%curcfg%,OPTIONS,netplay_allow_slaves
return


SlvOnly:
gui,submit,nohide
netplayRequireSlaves= false
if (SLVONLY = 1)
	{
		netplayRequireSlaves= true
	}
iniwrite, "%netplayRequireSlaves%",%curcfg%,OPTIONS,netplay_require_slaves
return

NoState:
gui,submit,nohide
netplayStatelessMode= false
guicontrolget,NOSTATE,,NOSTATE
if (NOSTATE = 1)
	{
		netplayStatelessMode= true
	}	
iniwrite, "%netplayStatelessMode%",%curcfg%,OPTIONS,netplay_stateless_mode
return

NetSET:
gui, submit, nohide
guicontrol,,NOSTATE,0
;;guicontrol,hide,NOSTATE
guicontrol,,HNETIPRAD,1
guicontrol,,HLANIPRAD,0
guicontrol,,NETIPRAD,1
guicontrol,,LANIPRAD,0
return

LanSET:
gui, submit, nohide
guicontrol,,NOSTATE,1
;;guicontrol,show,NOSTATE
guicontrol,,HNETIPRAD,0
guicontrol,,HLANIPRAD,1
guicontrol,,NETIPRAD,0
guicontrol,,LANIPRAD,1
GuiControl, Show, HGETLAN
GuiControl, Hide, HGETIP
GuiControl, Show, GETLAN
GuiControl, Hide, GETIP
return

FileServ:
gui, submit, nohide
guicontrolget, FILESERV,,FILESERV
if (FILESERV = 0)
	{
		guicontrol,disable,SERVPORT
		AHKsock_Close()
		fileServerEnable= false
		nwnm1= 
		nwnm2= 
		nwnm3= 
		nwnm4= 
		stringsplit,nwnm,netplayNickname,_
		
		if (nwnm2 <> "")
			{
			nwnm2= %nwnm2%
			}
		if (nwnm3 <> "")
			{
			nwnm3= _%nwnm3%
			}
		if (nwnm4 <> "")
			{
			nwnm4= _%nwnm4%
			}
		unrnm= %nwnm2%%nwnm3%%nwnm4%
		if (nwnm2 = "")
			{
				unrnm= %netplayNickname%
			}
	
		guicontrol,,NETNAME,%unrnm%
		gosub, GETNETNAME
	}
if (FILESERV = 1)
	{
		AHKsock_Close()
		guicontrol,enable,SERVPORT
		guicontrolget,fileServerPort,,SERVPORT
		fileServerEnable= true
		nwnm1= 
		nwnm2= 
		nwnm3= 
		nwnm4= 
		stringsplit,nwnm,netplayNickname,_
		
		if (nwnm2 = "")
			{
				unrnm= %nwnm1%
			}
			
		if (nwnm2 <> "")
			{
				nwnm2= %nwnm2%
			}
		if (nwnm3 <> "")
			{
				nwnm3= _%nwnm3%
			}
		if (nwnm4 <> "")
			{
				nwnm4= _%nwnm4%
			}
		if (nwnm2 <> "")
			{
				unrnm= %nwnm2%%nwnm3%%nwnm4%
			}
			
			
		guicontrol,,NETNAME,[%fileServerPort%]_%unrnm%
		gosub, GETNETNAME
	}
	iniwrite, "%fileServerEnable%",Settings.ini,GLOBAL,file_server_enable
return

PrvtSv:
gui,submit,nohide
netplayPublicAnnounce= true
guicontrolget,PRVTSV,,PRVTSV
if (PRVTSV =1)
{
netplayPublicAnnounce= false
}
IniWrite, "%netplayPublicAnnounce%",%curcfg%,OPTIONS,netplay_public_announce
return



;{;;;;;;;;;;;;;;;;;;;;;     INVADER  FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;

Invading:
gui, submit, nohide
COPYINFO= 




if (INVADE = 1)
	{
		guicontrol,,CNCTBUT,Invade
		guicontrol, disable,IPA
		guicontrol, disable,IPB
		guicontrol, disable,IPC
		guicontrol, disable,IPD
		guicontrol, disable,IPORTNUM
		guicontrol, disable,CPORTNUM
		COPYINFO= 1
	}




if (INVADE = 0)
	{
		guicontrol,,HCNCTBUT,Connect
		guicontrol,,CNCTBUT,Connect
		guicontrol, enable,IPA
		guicontrol, enable,IPB
		guicontrol, enable,IPC
		guicontrol, enable,IPD
		guicontrol, enable,IPHA
		guicontrol, enable,IPHB
		guicontrol, enable,IPHC
		guicontrol, enable,IPHD
		guicontrol, enable,IPORTNUM
		guicontrol, enable,CPORTNUM
	}
return

splitClip:
URLDWN= 
StringGetPos,ntp,clipboard,NET|
stringMid,getnet,clipboard,ntp+1
stringsplit,netstr,getnet,|
iptc= %netstr2%
ipprt= %netstr3%
ipdlf= %netstr4%
cortm= %netstr5%
romtg= %netstr6%
romsys= %netstr7%
crctm= %netstr8%
stringsplit,prsnetip,iptc,.
guicontrol,,IPA,%prsnetip1%
guicontrol,,IPB,%prsnetip2%
guicontrol,,IPC,%prsnetip3%
guicontrol,,IPD,%prsnetip4%
guicontrol, ,OPORTNUM,%ipprt%
guicontrol, ,APORTNUM,%ipprt%
guicontrol,,FRAMEDELAY,%ipdlf%
guicontrol,,HFRAMEDELAY,%ipdlf%
coreselv= %cortm%
URLFILE= %romtg%

ArcSplit:
stringsplit,netchk,URLFILE,:
stringLeft,httpchk,netchk1,4
StringReplace,revsl,URlFILE,/,\,All
SplitPath,revsl,dwnlchk,,,romnmspl
stringreplace,dwnlchk,dwnlchk,`%26,&,All

rjinsfldr= 
rjdwnfldr= 
if (JACKETMODE = 1)
	{
		rjinsfldr= %romnmspl%\
		if (RJCHKJ = 1)
			{
				StringGetPos, fldrdlmt, rjinsfldr,%RJCNSLDD%
				stringtrimright,rjdwnfldr,rjinsfldr,%fldrdlmt%
				rjinsfldr= %rjdwnfldr%
			}
			IfNotExist,%coreassetsdirectory%\%romsys%\%rjinsfldr%
				{
					FileCreateDir,%coreassetsdirectory%\%romsys%\%rjinsfldr%
				}
	}
save= %raexeloc%\downloads\%romsys%\%rjinsfldr%%dwnlchk%
if (httpchk = "http")
{
	URLDWN= 1
}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    OPTIONS FUNCTIONS    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
AskOnExit:
gui, submit, nohide
confirmOnExit= false
guicontrolget, CONFEXIT
if (CONFEXIT = 1)
confirmOnExit= true	
IniWrite, "%confirmOnExit%", %curcfg%,OPTIONS,confirm_on_exit
return

SaveOnExit:
gui, submit, nohide
guicontrolget, SAVEXIT
if (SAVEXIT = 1)
	{
		configSaveOnExit= true
		guicontrol, hide, RLDISP
	}
else if (SAVEXIT = 0)
	{
		configSaveOnExit= false
		guicontrol, show, RLDISP
	}
IniWrite, "%configSaveOnExit%", %curcfg%,OPTIONS,config_save_on_exit
return

BGPause:
gui, submit, nohide
pauseNonactive= true
if (PAUSEBG = 0)
{
	pauseNonactive= false
}
IniWrite, "%pauseNonactive%", %curcfg%,OPTIONS,pause_nonactive
return

RGUI:
gui, submit, nohide
menuDriver= rgui
IniWrite, "%menuDriver%", %curcfg%,OPTIONS,menu_driver
return
XMB:
gui, submit, nohide
menuDriver= xmb
IniWrite, "%menuDriver%", %curcfg%,OPTIONS,menu_driver
return
GLUI:
gui, submit, nohide
menuDriver= glui
IniWrite, "%menuDriver%", %curcfg%,OPTIONS,menu_driver
return
ZARCH:
gui, submit, nohide
menuDriver= zarch
IniWrite, "%menuDriver%", %curcfg%,OPTIONS,menu_driver
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    INSTALL FUNCTIONS    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    URLGET PROC     ;;;;;;;;;;;;;;;;;;;;;;;;

DownloadFile(UrlToFile, _SaveFileAs, Overwrite := True, UseProgressBar := True) {
		FinalSize= 
	
      If (!Overwrite && FileExist(_SaveFileAs))
      {
        FileSelectFile, _SaveFileAs,S, %_SaveFileAs%
        if !_SaveFileAs 
          return
      }

    
      If (UseProgressBar) {
          
            SaveFileAs := _SaveFileAs
          
            try WebRequest := ComObjCreate("WinHttp.WinHttpRequest.5.1")
			catch {
			}
          
            try WebRequest.Open("HEAD", UrlToFile)
            catch {
			}
			try WebRequest.Send()
			catch {
			}
          
			try FinalSize := WebRequest.GetResponseHeader("Content-Length") 
			catch {
				FinalSize := 1
			}
			SetTimer, DownloadFileFunction_UpdateProgressBar, 100
		
 
      }
    
      
      UrlDownloadToFile, %UrlToFile%, %_SaveFileAs%
    
      If (UseProgressBar) {
          Progress, Off
          SetTimer, DownloadFileFunction_UpdateProgressBar, Off
      }
      return

      DownloadFileFunction_UpdateProgressBar:
    
      try CurrentSize := FileOpen(_SaveFileAs, "r").Length 
	  catch {
			}
			
      try CurrentSizeTick := A_TickCount
    catch {
			}
			
      try Speed := Round((CurrentSize/1024-LastSize/1024)/((CurrentSizeTick-LastSizeTick)/1000)) . " Kb/s"
	  catch {
			}
    
      LastSizeTick := CurrentSizeTick
      try LastSize := FileOpen(_SaveFileAs, "r").Length
    catch {
			}
	
      try PercentDone := Round(CurrentSize/FinalSize*100)
    catch {
			}
			
	 if (PercentDone > 100)
		{
			PercentDone= 
		}
	 SB_SetText(" " Speed " " updtmsg " at " . PercentDone . `% " " CurrentSize " bytes completed")
      Guicontrol, ,ARCDPRGRS, %PercentDone%
      Guicontrol, ,DWNPRGRS, %PercentDone%
      Guicontrol, ,FEPRGA, %PercentDone%
      return
  }
	  Guicontrol, ,ARCDPRGRS, 0
      Guicontrol, ,DWNPRGRS, 0
      Guicontrol, ,FEPRGA, 0
    return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    RETROARCH FUNCTIONS     ;;;;;;;;;;;;;;;;

QINSTALL:
GuiControl, Enable, CNCLDWN
GuiControl, Disable, AVAIL
GuiControl, Disable, UPDBTN
GuiControl, Disable, EXELIST
MsgBox,4100,Quick Install,Would you like to install RetroArch and popular emulator cores?
IfMsgBox, Yes
	{
		GuiClose(skelWin) {  ; Declaring this parameter is optional.
		MsgBox 4,, Are you sure you want to close the GUI?
		ifMsgBox No
			{
				return true  ; true = 1
			}
	}
		EXELIST= 1		
		gosub, STABLE
		EXELIST= 0
		RALIST= 1
		SLCTCORES= 4do_libretro.dll.zip|bluemsx_libretro.dll.zip|desmume_libretro.dll.zip|doxbox_libretro.dll.zip|fbalpha2012_libretro.dll.zip|gambatte_libretro.dll.zip|genesis_plus_gx_libretro.dll.zip|pcsx_rearmed_libretro.dll.zip|handy_libretro.dll.zip|mame_libretro.dll.zip|mednafen_ngp_libretro.dll.zip|mednafen_pce_fast_libretro.dll.zip|mdednafen_pcfx_libretro.dll.zip|mednafen_psx_libretro.dll.zip|mednafen_supergrafx_libretro.dll.zip|mednafen_vb_libretro.dll.zip|mednafen_wsawn_libretro.dll.zip|mess2014_libretro.dll.zip|mgba_libretro.dll.zip|nestopia_libretro.dll.zip|parallel_n64_libretro.dll.zip|picodrive_libretro.dll.zip|prosystem_libretro.dll.zip|snes9x_libretro.dll.zip|stella_libretro.dll.zip|virtualjaguar_libretro.dll.zip|crocods_libretro.dll.zip|px68k_libretro.dll.zip|openlara_libretro.dll.zip|atari800_libretro.dll.zip|np2kai_libretro.dll.zip|vice_x64_libretro.dll.zip|vice_xplus4_libretro.dll.zip|vice_xvic_libretro.dll.zip|pokemini_libretro.dll.zip
		if (ARCH = "64")
			{
				SLCTCORES .= "|" . "reicast_libretro.dll.zip" . "|" . "dolphin_libretro.dll.zip" . "|" . "mednafen_saturn_libretro.dll.zip" . "|" . "nekop2_libretro.dll.zip" . "|" . "citra_libretro.dll.zip"
			}
		gosub, UpdateCores
	}
GuiControl, Disable, CNCLDWN
GuiControl, Enable, AVAIL
GuiControl, Enable, UPDBTN
GuiControl, Enable, EXELIST
return

AVAILSEL:
gui, submit, nohide
guicontrolget,availsel,,AVAIL
guicontrol, enable, UPDBTN
Loop, Read, coreupdt.ini
	{
		stringsplit,avcrc,A_LoopReadLIne, %A_Space%
		if (avcrc3 = availsel)
			{
				stringsplit,ctmtc,avcrc3,.
				loccrc= 
				ifexist, %libretrodirectory%\%ctmtc1%.%ctmtc2%
					{
						CrCFln= %libretrodirectory%\%ctmtc1%.%ctmtc2%
						ApndCRC= 
						gosub, CRC32GET
						loccrc= Local hash is %ApndCRC%
						if (avcrc2 = ApndCRC)
						{
							loccrc= Local hash matches
						}
					}
				SB_SetText("  " avcrc3 " has crc hash: " avcrc2 " " loccrc " ")
			}
	}
return

KeepArchives:
if (KARC = 1)
	{
		DWNOV= False
		DELARC= 0
		guicontrol,,EMUINST,Install
	}
if (KARC = 0)
	{
		DWNOV= True
		DELARC= 1
	}
return

getBBCORES:
		filedelete, coreupdt.ini
		URLDownloadToFile, %BLDBOT%/latest/.index-extended, coreupdt.ini
return

CoreUpdtChk:
rewrlibv= 
rewrlibd= 

ifnotexist,,%libretroDirectory%,
	{
		filecreatedir, %libretroDirectory%
	}
filedelete, corupdlst.ini
filedelete, coreavail.ini
FileDelete, updlstcrc.ini

if (UPDTCHKFILE = "")
	{
		gosub, getBBCORES
	}

ifexist, coreupdt.ini
	{
		UPDTCHKFILE= 1
		Loop, read, coreupdt.ini
			{
				stringsplit, crtmp, A_LoopReadline,%A_Space%
				splitpath, crtmp3,,,,spldll
				FileAppend, %crtmp2% %spldll% `n, updlstcrc.ini
				FileAppend, %crtmp3%`n, corupdlst.ini
			}
		FileRead, cormm, corupdlst.ini
			{
				Sort, cormm , Alphabetically
				fileappend, %cormm%`n, coreavail.ini
			}

		Loop,Read,coreavail.ini
			AVAILCORES .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
		if (RALIST = 1)
			{
				guicontrol,, AVAIL, |%AVAILCORES%
			}
		if (EXELIST = 1)
			{
				guicontrol,, AVAIL,|stable|redist.7z|bundle.zip|assets.zip|info.zip|database-rdb.zip|cheats.zip|database-cursors.zip|overlays.zip|shaders_glsl.zip|shaders_cg.zip|shaders_slang.zip|autoconfig.zip|%RAUPDF%
			}
	}

gui, submit, nohide
return

BckCore:
gui,submit,nohide
guicontrolget,BCKCORE,,BCKCORE
return

UpdSelct:
gui, submit, nohide
guicontrolget, SLCTCORES, ,AVAIL
GuiControl, Enable, CNCLDWN
GuiControl, Disable, AVAIL
GuiControl, Disable, UPDBTN
GuiControl, Disable, EXELIST
gosub, UpdateCores
return

crcChk:
rewrlibv= 
rewrlibd= 

nocoredwn= 
filedelete, crc.ini
dll= %dwncore%
stringsplit, dcsp, dll, .


ApndCRC= 
CrCFLN= %libretroDirectory%\%dcsp1%.%dcsp2%
gosub, CRC32GET
Loop, read, coreupdt.ini
	{
		stringsplit, crtmp, A_LoopReadline,%A_Space%
		if (crtmp3 = dwncore)
			{
				gosub, newcrc
				break
			}
	}		
return

newcrc:
if  (crtmp2 = ApndCRC)
		nocoredwn= 1
SB_SetText(" " dwncore " " " is current ")
GuiControl, Enable, AVAIL
GuiControl, Enable, UPDBTN
GuiControl, Disable, CNCLDWN
return

ShowBB:
RAUPDF= RetroArch.7z
ifexist, %raexeloc%\retroarch.exe
	{
		RAUPDF= %UPDATERAEXE%
	}
UPDTONLY= 
IF (UPDTCHKFILE = "")
	{
		gosub, CoreUpdtChk
	}
gui, submit, nohide
if (RALIST = 1)
	{
		guicontrol,, AVAIL, |%AVAILCORES%
	}
if (EXELIST = 1)
	{
		guicontrol,, AVAIL,|stable|redist.7z|bundle.zip|assets.zip|info.zip|database-rdb.zip|cheats.zip|database-cursors.zip|overlays.zip|shaders_glsl.zip|shaders_cg.zip|shaders_slang.zip|autoconfig.zip|%RAUPDF%
	}
gosub, NoSelCores
return

NoSelCores:
PostMessage, 0x186, -1, 0,,ahk_id %nocrsl%
gui, submit, nohide
return

ShowCIC:
RAUPDF= RetroArch.7z
ifexist, %raexeloc%\retroarch.exe
	RAUPDF= %UPDATERAEXE%
	UPDTONLY= 1
gui, submit, nohide
if (RALIST = 1)
	{
		guicontrol,, AVAIL, |%AVAILCORES%
	}
if (EXELIST = 1)
	{
		guicontrol,, AVAIL,|stable|redist.7z|bundle.zip|assets.zip|info.zip|database-rdb.zip|cheats.zip|database-cursors.zip|overlays.zip|shaders_glsl.zip|shaders_cg.zip|shaders_slang.zip|autoconfig.zip|%RAUPDF%
	}
return

RaList:
gui,submit,nohide
guicontrol,show,RALIST
guicontrol,show,EXELIST
guicontrol,show,UPDBTN
guicontrol,show,UPDCL
guicontrol,enable,GCUPDT
guicontrol,show,GCUPDT
guicontrol,show, AVAIL
guicontrol,show,OPNSYS
guicontrol,show,CRNTCORS
guicontrol,show,BCKCORE
guicontrol,move, CACGRP, x7 y5 w242 h478
guicontrol, move, CCGRP, x251 y5 w212 h366
guicontrol,,CRNTCORS,|%CoreNamz%
guicontrol,,CCGRP,Current Cores
guicontrol,,CACGRP,Components and Cores

guicontrol,hide,EMUINST
guicontrol,hide,MULTLNK
guicontrol,hide,UNIQLNK
guicontrol, hide,OPNSYS
guicontrol, hide,LOCEMUIN
guicontrol, hide,OEMUDEL
guicontrol, hide,OEMUSV
guicontrol, hide,OEMUNICK
guicontrol, hide,OEMUTXT
guicontrol, hide,MULTINST
guicontrol, hide,INSEMUDDL
guicontrol, hide,AddCore
guicontrol,hide,EMUASIGN
guicontrol,hide, EXDISPL
guicontrol,hide, EAVAIL
guicontrol, hide, EMUDDL
guicontrol, hide,EINSTTXT
guicontrol, hide,MROMDLOC
guicontrol, hide,ROMDLOC
guicontrol, hide,ROMDTXT
guicontrol, hide,ROMDEDT
guicontrol, hide,OPNSYS
guicontrol, hide,ROMDEDT
guicontrol, hide,EINSTLOC
guicontrol, hide,INSTEMUDDL
guicontrol, hide,CHEMUINST
guicontrol, hide,Dapp
guicontrol, hide,DCORE
guicontrol, hide,ARDCORE
guicontrol, hide,OVLIST
guicontrol, hide,OVSETTXT
guicontrol, hide,ROMDLOC	
guicontrol,,AVAIL,|%AVAILCORES%
return

ExeList:
gui,submit,nohide
guicontrol, hide,LOCEMUIN
guicontrol, hide,OEMUDEL
guicontrol, hide,OEMUSV
guicontrol, hide,OEMUNICK
guicontrol, hide,OEMUTXT
guicontrol, hide,MULTINST
guicontrol, hide,EMUINST
guicontrol,hide,MULTLNK
guicontrol,hide,UNIQLNK
guicontrol,hide,EMUASIGN
guicontrol,move, CACGRP, x7 y5 w242 h478
guicontrol,hide, EAVAIL
guicontrol,show, PAVAIL
guicontrol,show, AVAIL
guicontrol, move, CCGRP,x251 y5 w212 h366
guicontrol,,CRNTCORS,|%CoreNamz%
guicontrol,show,CRNTCORS
guicontrol,show,BCKCORE
guicontrol,,CCGRP,Current Cores
guicontrol,,CACGRP,Components and Cores
guicontrol, hide, EMUDDL
guicontrol,show,UPDBTN
guicontrol,hide,UPDCL
guicontrol,hide,GCUPDT
guicontrol, hide,EINSTTXT
guicontrol, hide,ROMDLOC
guicontrol, hide,MROMDLOC
guicontrol, hide,ROMDTXT
guicontrol, hide,ROMDEDT
guicontrol, hide,EINSTLOC
guicontrol, hide,CHEMUINST
guicontrol,,AVAIL,|stable|redist.7z|bundle.zip|assets.zip|info.zip|database-rdb.zip|cheats.zip|database-cursors.zip|overlays.zip|shaders_glsl.zip|shaders_cg.zip|shaders_slang.zip|autoconfig.zip|%UPDATERAEXE%
return

;};;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    EMULATOR FUNCTIONS    ;;;;;;;;;;;;;;;;;;
SaList:
gui,submit,nohide
guicontrolget,SALIST,,SALIST
guicontrol, hide, UAVAIL
guicontrol,show,ADDCORE
guicontrol,show,CRNTCORS
guicontrol,show,OPNSYS
guicontrol,show,OVLIST
guicontrol,show,OVSETTXT
guicontrol,show,DCORE
guicontrol,show,ARDCORE
guicontrol,show,DAPP

;;guicontrol,hide,CRNTCORS
;;guicontrol,hide,OPNSYS
;;guicontrol,hide,ADDCORE
;;guicontrol,hide,OVLIST
guicontrol,hide,ADDNYS
guicontrol,hide,SAVNSYS
;;guicontrol,hide,OVSETTXT
;;guicontrol,hide,DCORE
;;guicontrol,hide,ARDCORE
;;guicontrol,hide,DAPP
guicontrol,hide,SYSIDENT
guicontrol,hide,SYSNICK
guicontrol,hide,SVNICK
guicontrol,hide,DELNICK
guicontrol,hide,EXTINP
guicontrol,hide,APPOPT
guicontrol,hide,APPARG
guicontrol,hide,EMUPGC
guicontrol,hide,ERUN
guicontrol,hide,LRUN
guicontrol,hide,NOEXTN
guicontrol,hide,OMITPTH
;;guicontrol,hide,EXDISPL
guicontrol,hide,OMITQ
guicontrol,hide,UNIQLNK
guicontrol,hide,MULTLNK
guicontrol,hide,MULTINST
guicontrol, hide,EMUASIGN
guicontrol, hide,ROMDLOC
guicontrol, hide,MROMDLOC
guicontrol, hide,ROMDTXT
guicontrol, hide,ROMDEDT
guicontrol, hide,SELAPP
guicontrol, hide,OPTTXT
guicontrol, hide,ARGTXT

guicontrol,disable,EMUASIGN
guicontrol,disable,ROMDLOC
guicontrol,disable,LOCEMUIN
guicontrol,disable,EMUINST
guicontrol,disable,INSTEMUDDL
guicontrol,disable,CHEMUINST

if (SALIST = "RetroArch")
	{
		guicontrol,,RALIST,1
		goto, RALIST
	}
/*
guicontrol, hide, RALIST
guicontrol, hide, EXELIST
;;guicontrol,hide,KARC
guicontrol,hide,UPDCL
guicontrol,hide,GCUPDT
guicontrol,move,CACGRP, x7 y5 w268 h478 
guicontrol,move,CCGRP,x278 y5 w185 h359
guicontrol, hide, AVAIL
guicontrol, hide, BCKCORE
guicontrol, show, EAVAIL
guicontrol,,CCGRP,Installer
guicontrol,,CACGRP,Systems
guicontrol,hide,CRNTCORS
guicontrol, show,EINSTTXT
guicontrol, show,EINSTLOC
guicontrol, show,CHEMUINST
guicontrol, show,INSTEMUDDL
guicontrol, show,LOCEMUIN
guicontrol, show,EMUINST
guicontrol,show,EMUASIGN
guicontrol, show,ROMDLOC
guicontrol, show,ROMDTXT
guicontrol, show,ROMDEDT
multiemu= 
*/

if (SALIST = "Systems")
	{
		guicontrol,hide,UAVAIL
		guicontrol,,SKRAstch,Skeletonkey-System-Associations
		guicontrol,show,EAVAIL
		guicontrol,hide,UPDBTN
		guicontrol, hide, RALIST
		guicontrol, hide, EXELIST
		;;guicontrol,hide,KARC
		guicontrol,hide,UPDCL
		guicontrol,hide,GCUPDT
		guicontrol,move,CACGRP, x7 y5 w268 h478 
		guicontrol,move,CCGRP,x278 y5 w185 h366
		guicontrol, hide, AVAIL
		guicontrol, hide, BCKCORE
		guicontrol, show, EAVAIL
		guicontrol,,CCGRP,Installer
		guicontrol,,CACGRP,Systems
		guicontrol,hide,CRNTCORS
		guicontrol, show,EINSTTXT
		guicontrol, show,EINSTLOC
		guicontrol, show,CHEMUINST
		guicontrol, show,INSTEMUDDL
		guicontrol, show,LOCEMUIN
		guicontrol, show,EMUINST
		guicontrol,show,EMUASIGN
		guicontrol, show,ROMDLOC
		guicontrol, show,ROMDTXT
		guicontrol, show,ROMDEDT
		
		guicontrol,show,OPNSYS
		guicontrol,show,ADDCORE
		guicontrol,show,OVLIST
		guicontrol,show,OVSETTXT
		guicontrol,show,DCORE
		guicontrol,show,ARDCORE
		guicontrol,show,DAPP
		
		guicontrol,show,EXDISPL
		;;guicontrol,show,UNIQLNK
		
	}
if (SALIST = "Frontends")
	{
		guicontrol,,UAVAIL,|Mirrored_Links|Media|retroFE|Hyperspin|EmulationStation|Kodi_XBMC|IRAL|AdvancedLauncher|ROM_Collection_Browser|MediaBrowser|CabrioFE|ICE
		guicontrol,hide,UPDBTN
		guicontrol, hide, RALIST
		guicontrol, hide, EXELIST
		;;guicontrol,hide,KARC
		guicontrol,hide,UPDCL
		guicontrol,hide,GCUPDT
		guicontrol,move,CACGRP, x7 y5 w268 h478 
		guicontrol,move,CCGRP,x278 y5 w185 h366
		guicontrol, hide, EAVAIL
		guicontrol, hide, AVAIL
		guicontrol, hide, BCKCORE
		guicontrol, show, UAVAIL
		guicontrol, show,EINSTTXT
		guicontrol, show,EINSTLOC
		guicontrol, show,CHEMUINST
		guicontrol, show,EMUINST
		guicontrol, show,INSTEMUDDL
		guicontrol, show,LOCEMUIN
		guicontrol,,CCGRP,Installer
		guicontrol,,CACGRP,Systems
		guicontrol,hide,CRNTCORS
		guicontrol,hide,OPNSYS
		guicontrol,hide,ADDCORE
		guicontrol,hide,OVLIST
		guicontrol,hide,ADDNYS
		guicontrol,hide,SAVNSYS
		guicontrol,hide,OVSETTXT
		guicontrol,hide,DCORE
		guicontrol,hide,ARDCORE
		guicontrol,hide,DAPP
		guicontrol,hide,SYSIDENT
		guicontrol,hide,SYSNICK
		guicontrol,hide,SVNICK
		guicontrol,hide,EXTINP
		guicontrol,hide,APPOPT
		guicontrol,hide,APPARG
		guicontrol,hide,EMUPGC
		guicontrol,hide,ERUN
		guicontrol,hide,LRUN
		guicontrol,hide,NOEXTN
		guicontrol,hide,OMITPTH
		guicontrol,hide,EXDISPL
		guicontrol,hide,OMITQ
		guicontrol,hide,UNIQLNK
		guicontrol,hide,MULTLNK
		guicontrol,hide,MULTINST
		guicontrol, hide,EMUASIGN
		guicontrol, hide,ROMDLOC
		guicontrol, hide,MROMDLOC
		guicontrol, hide,ROMDTXT
		guicontrol, hide,ROMDEDT
		guicontrol, hide,SELAPP
		guicontrol, hide,OPTTXT
		guicontrol, hide,ARGTXT
	}
if (SALIST = "Utilities")
	{
		guicontrol,,UAVAIL,|Xinput_Drivers|DirectX|Daemon_Tools|DS4Windows|Display_Changer|Xpadder|Antimicro|Visual_C++_Runtimes
		guicontrol,hide,UPDBTN
		guicontrol, hide, RALIST
		guicontrol, hide, EXELIST
		;;guicontrol,hide,KARC
		guicontrol,hide,UPDCL
		guicontrol,hide,GCUPDT
		guicontrol,move,CACGRP, x7 y5 w268 h478 
		guicontrol,move,CCGRP,x278 y5 w185 h366
		guicontrol, hide, EAVAIL
		guicontrol, hide, AVAIL
		guicontrol, hide, BCKCORE
		guicontrol, show, UAVAIL
		guicontrol, show,EINSTTXT
		guicontrol, show,EINSTLOC
		guicontrol, show,CHEMUINST
		guicontrol, show,EMUINST
		guicontrol, show,INSTEMUDDL
		guicontrol,,CCGRP,Installer
		guicontrol,,CACGRP,Systems
		guicontrol,hide,CRNTCORS
		guicontrol,hide,OPNSYS
		guicontrol,hide,ADDCORE
		guicontrol,hide,OVLIST
		guicontrol,hide,ADDNYS
		guicontrol,hide,SAVNSYS
		guicontrol,hide,OVSETTXT
		guicontrol,hide,DCORE
		guicontrol,hide,ARDCORE
		guicontrol,hide,DAPP
		guicontrol,hide,SYSIDENT
		guicontrol,hide,SYSNICK
		guicontrol,hide,SVNICK
		guicontrol,hide,DELNICK
		guicontrol,hide,EXTINP
		guicontrol,hide,APPOPT
		guicontrol,hide,APPARG
		guicontrol,hide,EMUPGC
		guicontrol,hide,ERUN
		guicontrol,hide,LRUN
		guicontrol,hide,NOEXTN
		guicontrol,hide,OMITPTH
		guicontrol,hide,EXDISPL
		guicontrol,hide,OMITQ
		guicontrol,hide,UNIQLNK
		guicontrol,hide,MULTLNK
		guicontrol,hide,MULTINST
		guicontrol, show,LOCEMUIN
		guicontrol, hide,EMUASIGN
		guicontrol, hide,ROMDLOC
		guicontrol, hide,MROMDLOC
		guicontrol, hide,ROMDTXT
		guicontrol, hide,ROMDEDT
		guicontrol, hide,SELAPP
		guicontrol, hide,OPTTXT
		guicontrol, hide,ARGTXT
	}

if (SALIST = "Emulators")
	{
		guicontrol,,UAVAIL,|%emuinstpop%
		guicontrol,hide,UPDBTN
		guicontrol,,SKRAstch,Skeletonkey-Emulator-Associations
		guicontrol, hide, RALIST
		guicontrol, hide, EXELIST
		;;guicontrol,hide,KARC
		guicontrol,hide,UPDCL
		guicontrol,hide,GCUPDT
		guicontrol,move,CACGRP, x7 y5 w268 h478 
		guicontrol,move,CCGRP,x278 y5 w185 h366
		guicontrol, hide, EAVAIL
		guicontrol, hide, AVAIL
		guicontrol, hide, BCKCORE
		guicontrol, show, UAVAIL
		guicontrol, show,EINSTTXT
		guicontrol, show,EINSTLOC
		guicontrol, show,CHEMUINST
		guicontrol, show,EMUINST
		guicontrol, show,INSTEMUDDL
		guicontrol, show,LOCEMUIN
		guicontrol,,CCGRP,Installer
		guicontrol,,CACGRP,Systems
		
		guicontrol,hide,CRNTCORS
		guicontrol,hide,ADDNYS
		guicontrol,hide,SAVNSYS
		guicontrol,hide,SYSIDENT
		guicontrol,hide,SYSNICK
		guicontrol,hide,SVNICK
		guicontrol,hide,DELNICK
		guicontrol,hide,EXTINP
		guicontrol,hide,APPOPT
		guicontrol,hide,APPARG
		guicontrol,hide,EMUPGC
		guicontrol,hide,ERUN
		guicontrol,hide,LRUN
		guicontrol,hide,NOEXTN
		guicontrol,hide,OMITPTH
		guicontrol,hide,EXDISPL
		guicontrol,hide,OMITQ
		guicontrol,hide,UNIQLNK
		guicontrol,hide,MULTLNK
		guicontrol,hide,MULTINST
		guicontrol, hide,EMUASIGN
		guicontrol, hide,MROMDLOC
		guicontrol, hide,SELAPP
		guicontrol, hide,OPTTXT
		guicontrol, hide,ARGTXT
	
		gosub, Dapp
		guicontrol, hide,DCORE
		guicontrol, hide,ARDCORE
		guicontrol, hide,OVLIST
		guicontrol, hide,OVSETTXT
		guicontrol, hide,ROMDLOC	
		guicontrol, hide,ROMDTXT	
		guicontrol, hide,ROMDEDT	
		guicontrol,show,EMUASIGN
		guicontrol, show,ROMDTXT
		guicontrol, show,ROMDEDT		
		guicontrol,show,OPNSYS
		guicontrol,show,ADDCORE
		guicontrol,show,DAPP
		guicontrol,show,EXDISPL
	}

Loop, Read, Emuparts.set
	{
	
		stringsplit, multabc, A_LoopReadLine,=,:
		multiemu .= multabc1 . "|"
	}
return

ChEmuInst:
xtractmu= 
xtractmul= 
FileSelectFolder,xtractmul,,,Select Destination Directory for %selfnd%
if (xtractmul = "")
	{
		return
	}
guicontrolget,selfnd,,INSTEMUDDL
xtractmu= %xtractmul%\%selfnd%
Loop, read, EmuParts.set
		{
			emuxetmp1=
			emuxetmp2=
			emuxetmp3=
			emuxetmp4=
			emuxetmp5=
			emuxetmp6=
			StringSplit, emuxetmp, A_LoopReadline,=,;
			if (emuxetmp1= "%selfnd")
				{
					xtractmu= %xtractmu%\%emuxetmp3%
				}
		}
guicontrol,,EINSTLOC,%xtractmu%
INSTLRS= Xinput_Drivers|DirectX|Daemon_Tools|Visual_C++_Runtimes|MediaBrowser|Kodi_XBMC
noselb= 
Stringsplit,noselb,INSTLRS,|

ar := Object()
Loop, %noselb0%
	{
		new= % (noselb%a_index%)
		if (noselb%a_index% <> "")
			{
				ar.insert(new)
			}
	}

nigb:= semu
noini= 
for k, v in ar
	{
		extm:= v
		if (nigb = extm)
			{
				goto, INST_%semu%
			}
	}
return



INST_Kodi_XBMC:
guicontrol,enable,CNCLDWN
kodiinst= 
Loop, apps\%semu%\*.exe
	{
		kodiinst:= A_LoopFileFullPath
	}
ifnotexist, %kodiinst%
	{
		return
	}
XBLOPT= 
if (xtractmul = "")
	{
		XBLOPT= /S
		xtractmul= %A_ScriptDir%\apps\Kodi
	}	
Runwait,"%kodiinst%" %XBLOPT% /D=%xtractmul%,,,inspid
guicontrol,disable,CNCLDWN
return

INST_MediaBrowser:
guicontrol,enable,CNCLDWN
mbinst= 
Loop, apps\%semu%\MediaBrowser*.msi
	{
		mbinst:= A_LoopFileFullPath
	}
ifnotexist, %mbinst%
	{
		return
	}
mbinstopt= /norestart
if (xtractmul = "")
	{
		mbinstopt= /qb /norestart /i
		xtractmul= %A_ProgramFiles%
	}	
Runwait,msiexec %mbinstopt% "%mbinst%",,,inspid
guicontrol,disable,CNCLDWN
return

INST_Xinput_Drivers:
guicontrol,enable,CNCLDWN
xbdrvinst= 
Loop, apps\%semu%\Xbox360_*eng.exe
	{
		xbdrvinst:= A_LoopFileFullPath
	}
ifnotexist, %xbdrvinst%
	{
		return
	}
Runwait,"%xbdrvinst%" /q:a,,,inspid
guicontrol,disable,CNCLDWN
return

INST_Visual_C++_Runtimes:
guicontrol,enable,CNCLDWN
vcdrvinst= 
Loop, apps\%semu%\VBCRedist_AIO_x86_x64.exe
	{
		vcdrvinst:= A_LoopFileFullPath
	}
ifnotexist, %vcdrvinst%
	{
		return
	}
Runwait,"%vcdrvinst%" /ai /y,,,inspid
guicontrol,disable,CNCLDWN
return

INST_DirectX:
guicontrol,enable,CNCLDWN
dxdrvinst= 
Loop, apps\%semu%\dxwebsetup.exe
	{
		dxdrvinst:= A_LoopFileFullPath
	}
ifnotexist, %dxdrvinst%
	{
		return
	}
Runwait,"%dxdrvinst%" /Q,,,inspid
guicontrol,disable,CNCLDWN
return


INST_Daemon_Tools:
guicontrol,enable,CNCLDWN
dtdrvinst= 
Loop, apps\%semu%\DTLite.exe
	{
		dtdrvinst:= A_LoopFileFullPath
	}
ifnotexist, %dtdrvinst%
	{
		return
	}
if (xtractmul = "")
	{
		xtractmul= %A_ProgramFiles%
	}
Runwait,"%dtdrvinst%" /S /nogadget /notoolbar /sptd /D="%xtractmul%",,,inspid
RegWrite, REG_SZ, HKEY_LOCAL_MACHINE\SOFTWARE\TestKey, MyValueName, Test Value
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Config, Automount,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Config /f /v Autostart,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Config,CheckForUpdate,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Config,SendStatistic,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Config,UpdateCheckCounter,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Config,UseTrayAgent,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\GuiNamespace,AskDeleteICItem,1
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\GuiNamespace,AskImageInUse,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\GuiNamespace,AskRemoveVD,0
RegWrite, REG_DWORD, HKEY_CURRENT_USER\Software\Disc Soft\DAEMON Tools Pro\Options,ManageIsImageInfoEnable,0
Daemon_Tools=%xtractmul%\DTLite.exe
guicontrol,disable,CNCLDWN
return



UAvailSel:
gui, submit, nohide
xtractmu= 
MULTICHK= 
MULTISYS= 
guicontrol,hide,EMUASIGN
guicontrol,hide,OEMUDEL
guicontrol,hide,OEMUSV
guicontrol,hide,OEMUNICK
guicontrol,hide,OEMUTXT
guicontrol,,EMUASIGN,Assign to System
guicontrol,,EMUASIGN,0
guicontrol,,EMUINST,Install
guicontrol,,EINSTLOC
guicontrolget,semu,,UAVAIL

guicontrol,hide,MULTLNK
guicontrol,hide,UNIQLNK
guicontrol,hide,MULTINST
guicontrol,hide,MROMDLOC

guicontrol,show,LOCEMUIN
guicontrol,show,EINSTTXT
guicontrol,show,ChEmuInst
guicontrol,show,EINSTLOC
;;guicontrol,hide,EMUINST

guicontrol,enable,ROMDLOC


guicontrol,hide,OEMUNICK
guicontrol,hide,OEMUDEL
guicontrol,hide,OEMUSV
guicontrol,hide,OEMUTXT

guicontrol,enable,LOCEMUIN
guicontrol,enable,EMUINST
guicontrol,enable,INSTEMUDDL
guicontrol,enable,CHEMUINST



LineNum= 

Loop,Read,Programs.set
	{
		
		LineNum+=1
		selfnd= 
		stemu= 
		stemu1= 
		stemu2= 
		stemu3= 
		stemu4= 
		stemu5= 
		emuplst=
		stringsplit,stemu,A_LoopReadLine,|
		emuplst= %stemu2%
		if (stemu3 <> "")
			{
				emuplst .= "|" . stemu3
				if (stemu4 <> "")
					{
						emuplst .= "|" . stemu4
						if (stemu5 <> "")
							{
								emuplst .= "|" . stemu5
							}
					}
			}
		if (stemu1 = semu)
			{
				selfnd= %stemu2%
				guicontrol,,INSTEMUDDL,|%stemu2%||%emuplst%|%emulist%Other
				gosub, ChkMu
			}
			guicontrolget,selfnd,,INSTEMUDDL
			emuname= %semu%
	}

noBrws= Xinput_Drivers|DirectX|Visual_C++_Runtimes|Winows_Icons|IRAL|AdvancedLauncher|ICE|ROM_Collection_Browser
noselb= 
Stringsplit,noselb,noBrws,|

if (SALIST = "Emulators")
	{
		guicontrol,,INSTEMUDDL,|%semu%||%emulist%
		IniRead, ksvel,apps.ini,EMULATORS,%semu%
		if (ksvel = "")
			{
				return
			}
		if (ksvel = "ERROR")
			{
				return
			}
		guicontrol,,EINSTLOC,%ksvel%
		guicontrolget,SYSPOPD,,UAVAIL
		guicontrol,,ADDCORE,|%SYSPOPD%||Select_A_System|%reasign%,
		guicontrol,,SYSNICK,%SYSPOPD%
		gosub, DApp
		guicontrol, hide,ROMDTXT	
		guicontrol, hide,ROMDEDT
		return
	}

ar := Object()
Loop, %noselb0%
	{
		new= % (noselb%a_index%)
		if (noselb%a_index% <> "")
			{
				ar.insert(new)
			}
	}

nigb:= semu 
noini= 
for k, v in ar
	{
		extm:= v
		if (nigb = extm)
			{
				noini= 1
				guicontrol,hide,LOCEMUIN
				guicontrol, hide,OEMUDEL
				guicontrol, hide,OEMUSV
				guicontrol, hide,OEMUNICK
				guicontrol, hide,OEMUTXT
				guicontrol,hide,EINSTTXT
				guicontrol,hide,ChEmuInst
				guicontrol,hide,EINSTLOC
			}
	}
	
if (UAVAIL = "Xpadder")
	{
		guicontrol,enable,EMUASIGN
		IniRead, kmprt, Settings.ini,GLOBAL,Keymapper
		if (kmprt = "Xpadder")
			{
				guicontrol,,EMUASIGN,1
			}
		guicontrol,show,EMUASIGN
		guicontrol,,EMUASIGN,Default Keymapper
	}
if (UAVAIL = "Antimicro")
	{
		guicontrol,enable,EMUASIGN
		IniRead, kmprt, Settings.ini,GLOBAL,Keymapper
		if (kmprt = "Antimicro")
			{
				guicontrol,,EMUASIGN,1
			}	
		guicontrol,show,EMUASIGN
		guicontrol,,EMUASIGN,Default Keymapper
	}
return

EAvailSel:
gui, submit, nohide
xtractmu= 
MULTICHK= 
MULTISYS= 
guicontrol,,EMUASIGN,Assign to System
guicontrol,,EMUINST,Install
guicontrol,,EINSTLOC
guicontrol,show,CHEMUINST
guicontrol,show,ROMDLOC
guicontrol,show,DCORE
guicontrol,show,ARDCORE
guicontrol,show,OVLIST
guicontrol,show,SYSNICK
guicontrol,show,SELAPP
guicontrol,show,DAPP
guicontrol,show,SVNICK
guicontrol,show,DELNICK
guicontrol,show,OPNSYS
guicontrol,show,LOCEMUIN
guicontrol,show,EMUASIGN
guicontrolget,semu,,EAVAIL

guicontrol,enable,EMUASIGN
guicontrol,enable,ROMDLOC
guicontrol,enable,LOCEMUIN
guicontrol,enable,EMUINST
guicontrol,enable,INSTEMUDDL
guicontrol,enable,CHEMUINST

guicontrol,hide,OEMUNICK
guicontrol,hide,OEMUDEL
guicontrol,hide,OEMUSV
guicontrol,hide,OEMUTXT

Loop, Parse, semu,|
	{
		MULTICHK+=1
		if (MULTICHK = 2)
			{
				reasign= %multiemu%
				break
			}
	}
if (MULTICHK = 2)
	{
		MULTISYS= 1
		;;guicontrol,hide,EMUINST
		guicontrol,show,MULTLNK
		guicontrol,show,UNIQLNK
		;;guicontrol,show,MULTINST
		guicontrol,hide,ROMDLOC
		guicontrol,disable,ROMDLOC
		guicontrol,show,MROMDLOC
		guicontrol,enable,MROMDLOC
		gosub, AppSetReset
		guicontrol,,ADDCORE,|MULTISYSTEM||
		gosub, DApp
		guicontrol,,INSTEMUDDL,||%emuPos%|%emulist%Other
		guicontrol,hide,DCORE
		guicontrol,hide,ARDCORE
		guicontrol,hide,OVLIST
		guicontrol,hide,SELAPP
		guicontrol,hide,DAPP
		guicontrol,hide,DELNICK
		guicontrol,hide,SVNICK
		guicontrol,hide,OPNSYS
		return
	}

guicontrol,show,EMUINST
guicontrol,hide,MULTLNK
guicontrol,hide,UNIQLNK
guicontrol,hide,MULTINST
guicontrol,hide,MROMDLOC
guicontrol,enable,ROMDLOC
guicontrol,,ADDCORE,|%EAVAIL%||Select_A_System|%reasign%
guicontrol,,DCORE,0
guicontrol,,ARDCORE,0
guicontrol,,DAPP,1
gosub, AppSetReset
IniRead, ksiv,Assignments.ini,OVERRIDES,%semu%
if (ksiv <> 0)
	{
		gosub,DApp
	}
else, if (ksiv = 0)
	{
		gosub,AddCore
	}
gosub, AppParamPop
guicontrol,,EMUASIGN,0

if (SALIST = "Emulators")
	{
		GuiControl, choose, UAVAIL,0
	}
Loop, Parse, reasign,|
	{
		if (semu = A_LoopField)
			{
				ADDCORE:= semu
				guicontrol,,ADDCORE,|%semu%||Select_A_System|%reasign%
				gosub, AddCore
			}
	}
LineNum= 

Loop,Read,SystemEmulators.set
	{
		LineNum+=1
		selfnd= 
		stemu= 
		stemu1= 
		stemu2= 
		stemu3= 
		stemu4= 
		stemu5= 
		emuplst=
		stringsplit,stemu,A_LoopReadLine,|
		emuplst= %stemu2%
		if (stemu3 <> "")
			{
				emuplst .= "|" . stemu3
				if (stemu4 <> "")
					{
						emuplst .= "|" . stemu4
						if (stemu5 <> "")
							{
								emuplst .= "|" . stemu5
							}
					}
			}
		if (stemu1 = semu)
			{
				selfnd= %stemu2%
				guicontrol,,INSTEMUDDL,|%stemu2%||%emuplst%|%emulist%Other
				gosub, ChkMu
			}
			guicontrolget,selfnd,,INSTEMUDDL
			emuname= %semu%
	}
guicontrol,,ROMDEDT,	
ifexist, %coreassetsdirectory%\%semu%
	{
		gosub, LnkGet
		if (JNKLNK= "")
			{
				guicontrol,,ROMDEDT,%coreassetsdirectory%\%semu%
			}
	}
return

MultInst:
gui, submit, nohide
guicontrolget,APPOPT,,APPOPT
guicontrolget,APPARG,,APPARG
guicontrolget,EMUPGC,,EMUPGC
guicontrolget,LRUN,,LRUN
guicontrolget,NOEXTN,,NOEXTN
guicontrolget,OMITQ,,OMITQ
guicontrolget,OMITPTH,,OMITPTH
splitpath,EINSTLOC,EINSTFNM,EINSTDIR,EINSTX,EINSTNAM
if (EINSTX = "exe")
{
	EINSTLOC:= EINSTDIR
	emuxe:= EINSTFNM
}
guicontrol,,EINSTLOC,%EINSTLOC%\%emuxe%
Loop, Parse, EAVAIL,|
	{
		guicontrolget,UNIQLNK,,UNIQLNK
		if (UNIQLNK = 1)
			{
				OVRKND= 
				semu:= A_LoopField
				gosub, MultiAssign
			}
		if (UNIQLNK = 0)
			{
				iniwrite, "%EINSTLOC%\%emuxe%",apps.ini,EMULATORS,%selfnd%
				iniwrite, "%EINSTLOC%\%emuxe%",Assignments.ini,ASSIGNMENTS,%semu%
				iniwrite, "%OVRKND%",Assignments.ini,OVERRIDES,%semu%
				iniwrite, "%APPOPT%",AppParams.ini,%OVRKND%,options
				if (APOPT = "")
					{
						iniwrite, " ",AppParams.ini,%OVRKND%,options
					}
				iniwrite, "%APPARG%",AppParams.ini,%OVRKND%,arguments
				iniwrite, "%NOEXTN%",AppParams.ini,%OVRKND%,extension
				iniwrite, "%EMUPGC%",AppParams.ini,%OVRKND%,per_game_configurations
				iniwrite, "%OMITQ%",AppParams.ini,%OVRKND%,no_quotes
				iniwrite, "%OMITPTH%",AppParams.ini,%OVRKND%,no_path
				iniwrite, "%LRUN%",AppParams.ini,%OVRKND%,run_location
				reasign .= semu . "|"
				}
				gosub, ResetEmuList
				gosub, EAvailSel
	}
return

EmuInst:
gui,submit,nohide
guicontrolget,selfnd,,INSTEMUDDL
guicontrolget,EINSTLOC,,EINSTLOC
if (EINSTLOC <> "")
	{
		goto, MultiSys
		sb_settext(" MultiSys ")
	}
urlprfx= %repoloc%
;;gui,submit,nohide
if (selfnd = "")
	{
		return
	}

GuiControl, Disable, EAVAIL
GuiControl, Disable, EMUASIGN
GuiControl, Disable, EMUINST
GuiControl, Enable, CNCLDWN

Loop, Read, urls.set
	{
		urloc= 
		urloc1= 
		urloc2= 
		stringsplit,urloc,A_LoopReadLine,/
		stringreplace,urloc2,urloc2,[ARCH],%ARCH%,All
		if (urloc1 = selfnd)
			{
				URLFILE= %repoloc%/%urloc1%/%urloc2%
				ifinstring,repoloc,github
					{
						URLFILE= %repoloc%/%urloc1%/raw/master/%urloc2%
					}
				sb_settext(" " URLFILE " ")	
				save=%urloc2%
				if (xtractmu = "")
					{
						;;break
						xtractmu= %RJEMUD%\%selfnd%
					}
				DownloadFile(URLFILE, save, DWNOV, True)
				ifnotexist, %save%
					{
						msgbox,0,, %selfnd%`n''%URLFILE%`n'' could not be downloaded, 20
						GuiControl, Enable, EAVAIL
						GuiControl, Enable, EMUASIGN
						GuiControl, Enable, EMUINST
						GuiControl, Disable, CNCLBTN
						guicontrol,,ADDCORE,|Select_A_System||%reasign%
						gosub, DCore
						guicontrol,,DCORE,1
						break
					}
				gosub, XTRACTEMU
				Loop, read, EmuParts.set
					{
						emuxetmp1=
						emuxetmp2=
						emuxetmp3=
						emuxetmp4=
						emuxetmp5=
						emuxetmp6=
						StringSplit, emuxetmp, A_LoopReadline,=,:
						if (emuxetmp1 = selfnd)
							{
								xtractmu= %xtractmu%\%emuxetmp3%
							}
					}
				guicontrol,,EINSTLOC,%xtractmu%
				guicontrolget,INSTLTYP,,SaList
				if (INSTLTYP = "Frontends")
					{
						if (selfnd = "Mirrored_Links")
							{
								xtractmu= Installed
							}
						if (selfnd = "ROM_Collection_Browser")
							{
								xtractmu= Installed
							}
						if (selfnd = "IRAL")
							{
								xtractmu= Installed
							}
						if (selfnd = "Mirrored_Links")
							{
								xtractmu= Installed
							}
						if (selfnd = "Advanced_Launcher")
							{
								xtractmu= Installed
							}
					iniwrite, "%xtractmu%",apps.ini,HTPC_FRONTENDS,%selfnd%
					}
				if (INSTLTYP = "Utilities")
					{
						inisect= UTILITIES
						if (selfnd = "DirectX")
							{
								xtractmu= Installed
							}
						if (selfnd = "Visual_C++_Runtimes")
							{
								xtractmu= Installed
							}
						if (selfnd = "Xinput_Drivers")
							{
								xtractmu= Installed
							}
						if (selfnd = "Xpadder")
							{
								inisect= KEYBOARD_MAPPERS
							}
						if (selfnd = "Display_Changer")
							{
								DCHANGER= %xtractmu%
							}
						if (selfnd = "Daemon_Tools")
							{
								DAMVAR= %xtractmu%
							}
						if (selfnd = "Antimicro")
							{
								inisect= KEYBOARD_MAPPERS
							}
					iniwrite, "%xtractmu%",apps.ini,%inisect%,%selfnd%
					}
				if (INSTLTYP = "Emulators")
					{
						inisect= EMULATORS
						iniwrite, "%xtractmu%",apps.ini,%inisect%,%selfnd%
					}
;			}
				if (EMUASIGN = 1)
						{
							OVRKND= 
							emuxe= 
							emuprt1=
							emuprt2=
							emuprt3=
							emuprt4=
							Loop, Read, EmuParts.Set
								{
									StringReplace,emuvers,A_LoopReadLine,[ARCH],%ARCH%,All
									StringSplit,emuprt,emuvers,=,:
									if (emuprt1 = selfnd)
										{
											emuxe= %emuprt3%
											OVRKND= %emuprt1%
											iniwrite, "%xtractmu%\%emuxe%",apps.ini,EMULATORS,%selfnd%
											iniwrite, "%xtractmu%\%emuxe%",Assignments.ini,ASSIGNMENTS,%semu%
											iniwrite, "%OVRKND%",Assignments.ini,OVERRIDES,%semu%
										}
								}
							gosub, ResetRunList
							gosub, ResetEmuList
							guicontrol,,JCORE,|%runlist%
							guicontrol,,LCORE,|%runlist%
							guicontrol,,PLCORE,|%lastcore%||%runlist%
							reasign .= semu . "|"
							ADDCORE:= semu
							guicontrol,,ADDCORE,|%semu%||Select_A_System|%reasign%
							SB_SetText(" ")
							gosub, DApp
							guicontrol,,DAPP,1
							Guicontrol, ,DWNPRGRS, 0
							GuiControl, Enable, EAVAIL
							GuiControl, Enable, EMUINST
							GuiControl, Enable, EMUASIGN
							GuiControl, Disable, CNCLDWN
							return
						}
			}
		SB_SetText(" " selfnd " installed")
	}

if (INSTLTYP = "Systems")
	{
		iniwrite, "%xtractmu%",apps.ini,EMULATORS,%selfnd%	
	}
gosub, ResetEmuList
reasign .= semu . "|"
GuiControl,,ADDCORE,|Select_A_System||%reasign%
Guicontrol, ,DWNPRGRS, 0
GuiControl, Enable, EAVAIL
GuiControl, Enable, EMUINST
GuiControl, Enable, EMUASIGN
GuiControl, Disable, CNCLDWN
if (EMUASIGN = 1)
	{
		if (MULTISYS = 1)
			{
				goto, MultInst
			}
	}
return

MultiSys:
EmuAsign:
gui, submit, nohide
guicontrolget,EMUASIGN,,EMUASIGN
guicontrol,hide,MULTINST
guicontrol,show,EMUINST
guicontrol,show,LOCEMUIN
guicontrolget,UAVAIL,,UAVAIL
EINSTLOC= 
OVRKND= 
guicontrolget, EINSTLOC,, EINSTLOC
if (UAVAIL = "Antimicro")
	{
		if (EMUASIGN = 1)
			{
				iniwrite, "Antimicro",Settings.ini,GLOBAL,Keymapper
			}
	}
if (UAVAIL = "Xpadder")
	{
		if (EMUASIGN = 1)
			{
				iniwrite, "Xpadder",Settings.ini,GLOBAL,Keymapper
			}
	}
if (EINSTLOC <> "")
	{
		if (EMUASIGN = 1)
			{
				guicontrol,hide,EMUINST
				guicontrol,show,MULTINST
			}
		splitpath, EINSTLOC,,,,selfnd
		Loop, Read, EmuParts.Set
			{
				emuprt1= 
				emuprt2= 
				emuprt3= 
				emuprt4= 
				StringReplace,emuvers,A_LoopReadLine,[ARCH],%ARCH%,All
				StringSplit,emuprt,emuvers,=,:
				if (emuprt1 = selfnd)
					{
						emuxe= %emuprt3% 
						OVRKND= %emuprt1%
					}
			}
	}	
return

MultLnk:
gui,submit,nohide
return

UniqLnk:
gui,submit,nohide
gosub, AppParamPop
return

SysToEmuWrite:
iniread,skex,Assignments.ini,OVERRIDES,
Loop, Parse,skex,`n
	{
		stringsplit,skexa,A_LoopField,=,"
;;"
		if (skexa2 = OVRKND)
			{
				enumsys= 
				if skexa2 is not digit
					{
						enumsys+=1
						OVRKND= %skexa2%%enumsys%
					}
			}
	}
iniwrite, "%EINSTLOC%",apps.ini,EMULATORS,%selfnd%
gosub, ResetEmuList
iniwrite, "%EINSTLOC%",Assignments.ini,ASSIGNMENTS,%semu%
iniwrite, "%OVRKND%",Assignments.ini,OVERRIDES,%semu%
gosub, ResetRunList
guicontrol,,JCORE,|%runlist%
guicontrol,,LCORE,|%runlist%
guicontrol,,PLCORE,|%lastcore%||%runlist%
ADDCORE:= semu
guicontrol,,ADDCORE,|%semu%||Select_A_System|%reasign%
guicontrol,,DAPP,1
gosub,DApp
return

InstEmuDDL:
gui,submit,nohide
guicontrol,,EINSTLOC
guicontrol,show,EMUINST
guicontrol,show,CHEMUINST
guicontrol,show,EMUASIGN
guicontrol,show,LOCEMUIN
guicontrol, hide,OEMUDEL
guicontrol, hide,OEMUSV
guicontrol, hide,OEMUNICK
guicontrol, hide,OEMUTXT
guicontrolget,selfnd,,INSTEMUDDL
guicontrol, disable,OEMUDEL
guicontrol, disable,OEMUSV
guicontrol, disable,OEMUNICK
gosub, ChkMu
if (selfnd = "Other")
	{
		OEMUNICK= 
		guicontrol,hide,EMUINST
		guicontrol,hide,CHEMUINST
		guicontrol,hide,EMUASIGN
		guicontrol,hide,MULTINST		
		guicontrol, show,OEMUDEL
		guicontrol, show,OEMUSV
		guicontrol, show,OEMUNICK
		guicontrol, show,OEMUTXT
		exintmp= 
		guicontrolget,exintmp,,EINSTLOC
		if (exintmp <> "")
			{			
				guicontrol, enable,OEMUDEL
				guicontrol, enable,OEMUSV
				guicontrol, enable,OEMUNICK
			}
	}
return

EmuLkup:
Loop, Read, EmuParts.Set
	{
		emupts1= 
		emupts2= 
		emupts3= 
		emupts4= 
		StringReplace,emuvers,A_LoopReadLine,[ARCH],%ARCH%,All
		StringSplit,emupts,emuvers,=,:
		if (emupts1 = selfnd)
			{
				emuxe:= emupts3
			}
}
return

ChkMu:
ifexist, %RJEMUD%\%selfnd%\
	{
		gosub,EmuLkup
		SB_SetText(" " selfnd " is installed")
		guicontrol,,EINSTLOC,%RJEMUD%\%selfnd%\%emuxe%
	}
ifexist,%selfnd%*.7z
	{
		guicontrol,,EMUINST,Initialize
	}
iniread,avar,Assignments.ini,ASSIGNMENTS,
oemum= 
Loop, Parse, avar,`n
	{
		nplc1= 
		nplc2= 
		stringsplit,nplc,A_LoopField,=,"
;;"
		if (nplc1 = semu)
			{
				nple= 
				npld= 
				nplx= 
				SplitPath,nplc2,nple,npld,nplx,npln
				if (nplx <> "dll")
					{
						Loop, Read, EmuParts.set
							{
								emuprt1= 
								emuprt2= 
								emuprt3= 
								StringSplit,emuprt,A_LoopReadLine,=
								if (emuprt3 = nple)
									{
										SB_SetText(" " selfnd " is installed")
										guicontrol,,EINSTLOC,%npld%\%nple%
										return
									}
							}
						SB_SetText(" " npln " is installed")
						guicontrol,hide,EMUINST
						guicontrol,hide,EMUASIGN
						guicontrol,hide,CHEMUINST
						guicontrol,hide,EINSTTXT
						guicontrol,,EINSTLOC,%npld%\%nple%
						oemum:= nplc2
						guicontrol,,INSTEMUDDL,|Other||%emulist%
						IniRead, xemt, apps.ini,EMULATORS
						guicontrol, show,OEMUDEL
						guicontrol, enable,OEMUDEL
						guicontrol, show,OEMUSV
						guicontrol, enable,OEMUSV
						guicontrol, show,OEMUNICK
						guicontrol, enable,OEMUNICK
						guicontrol, show,OEMUTXT
					}
						Loop, Parse, xemt,`n
							{
								armm1= 
								armm2= 
								StringSplit,armm,A_LoopField,=,"
;;"
								if (armm2 = oemum)
									{
										guicontrol,,OEMUNICK,|%armm1%||%emulist%
									}
							}	
			}
	}
return

LocEmuIn:
gui,submit,nohide
guicontrolget,systatus,,SALIST
if (systatus <> "Systems")
	{
		EMUINSTLOCT= 
		FileSelectFile, EMUINSTLOCT,3,,Select the executable,*.exe
		if (EMUINSTLOCT= "")
			{
				return
			}
		SplitPath,EMUINSTLOCT,emuxe,EINSTPTH,,emunm
		guicontrol,,EINSTLOC,%EMUINSTLOCT%

		splitpath,EINSTPTH,EINSTFNM,EINSTDIR,EINSTX,EINSTNAM
		if (EINSTX = "exe")
			{
				EINSTPTH:= EINSTDIR
				emuxe:= EINSTFNM
			}
		
		Loop, Parse, UAVAIL,|
			{
				if (systatus = "Emulators")
					{
						iniwrite, "%EMUINSTLOCT%",apps.ini,EMULATORS,%semu%
					}
				if (systatus = "Utilities")
					{
						if (semu = "Daemon_Tools")
							{
								DAMVAR= %EMUINSTLOCT%
							}
						if (semu = "Xpadder")
							{
								xpaddrpth= %EMUINSTLOCT%
								iniwrite, "%EMUINSTLOCT%",apps.ini,KEYBOARD_MAPPERS,%semu%
								return
							}
						if (semu = "Antimicro")
							{
								amicropth= %EMUINSTLOCT%
								iniwrite, "%EMUINSTLOCT%",apps.ini,KEYBOARD_MAPPERS,%semu%
								return
							}
						if (semu = "Display_Changer")
							{
								DCHANGER= %EMUINSTLOCT%
							}
						iniwrite, "%EMUINSTLOCT%",apps.ini,UTILITIES,%semu%
						;;iniwrite, "%EMUINSTLOCT%",apps.ini,UTILITIES,%semu%
					}
				if (systatus = "Frontends")
					{
						iniwrite, "%EMUINSTLOCT%",apps.ini,HTPC_FRONTENDS,%semu%
						;;iniwrite, "%EMUINSTLOCT%",apps.ini,HTPC_FRONTENDS,%semu%
					}
			}
return
	}
EMUINSTLOCT= 
FileSelectFile, EMUINSTLOCT,3,,Select an emulator executable,*.exe
if (EMUINSTLOCT= "")
	{
		return
	}
SplitPath,EMUINSTLOCT,emuxe,EINSTLOC,,emunm
guicontrolget,OVRKND,,SYSNICK
guicontrolget,APPOPT,,APPOPT
guicontrolget,APPARG,,APPARG
guicontrolget,EMUPGC,,EMUPGC
guicontrolget,LRUN,,LRUN
guicontrolget,NOEXTN,,NOEXTN
guicontrolget,OMITQ,,OMITQ
guicontrolget,OMITPTH,,OMITPTH
guicontrol,,EINSTLOC,%EINSTLOC%\%emuxe%
splitpath,EINSTLOC,EINSTFNM,EINSTDIR,EINSTX,EINSTNAM
if (EINSTX = "exe")
	{
		EINSTLOC:= EINSTDIR
		emuxe:= EINSTFNM
	}

Loop, Parse, EAVAIL,|
	{
		guicontrolget,UNIQLNK,,UNIQLNK
		if (UNIQLNK = 1)
			{
				OVRKND= 
				semu:= A_LoopField
				gosub, MultiAssign
			}
		
		if (UNIQLNK = 0)
			{
				iniwrite, "%EINSTLOC%\%emuxe%",Assignments.ini,ASSIGNMENTS,%semu%
				iniwrite, "%OVRKND%",Assignments.ini,OVERRIDES,%semu%
				iniwrite, "%APPOPT%",AppParams.ini,%OVRKND%,options
				if (APOPT = "")
					{
						iniwrite, " ",AppParams.ini,%OVRKND%,options
					}
				iniwrite, "%APPARG%",AppParams.ini,%OVRKND%,arguments
				iniwrite, "%NOEXTN%",AppParams.ini,%OVRKND%,extension
				iniwrite, "%EMUPGC%",AppParams.ini,%OVRKND%,per_game_configurations
				iniwrite, "%OMITQ%",AppParams.ini,%OVRKND%,no_quotes
				iniwrite, "%OMITPTH%",AppParams.ini,%OVRKND%,no_path
				iniwrite, "%LRUN%",AppParams.ini,%OVRKND%,run_location
				reasign .= semu . "|"
				}
	}

guicontrol,enable,OEMUNICK
guicontrol,enable,OEMUDEL
guicontrol,enable,OEMUSV
oemunn=
splitpath,emuxe,,,,oemunn
guicontrol,,OEMUNICK,|%oemunn%|%emulist%
;;iniwrite, "%EMUINSTLOCT%",apps.ini,EMULATORS,%selfnd%
gosub, AppParamPop
if (selfnd <> "Other")
	{
		gosub, EAvailSel
	}
return

OEmuNick:
gui,submit,nohide
guicontrol,,OEMUTXT,Emulator Nickname
guicontrol,show,OEMUDEL
guicontrol,show,OEMUSV
return

OEmuDel:
gui,submit,nohide
guicontrolget,OEMUNICK,,OEMUNICK
if (OEMUNICK = "")
	{
		return
		guicontrol,,OEMUTXT,Emu is Blank
	}
IniRead,EMUXST,apps.ini,EMULATORS
restrg= 
Loop, Parse, EMUXST,`n
	{
		appmu1= 
		appmu2= 
		StringSplit,appmu,A_LoopField,=
		if (appmu1 = OEMUNICK)
			{
				IniDelete,apps.ini,EMULATORS,%appmu1%
				SB_SetText(" " OEMUNICK " has been removed")
				restrg= 1
			}				
	}
if (restrg = 1)
	{
		gosub, ResetEmuList
	}
guicontrol,,OEMUNICK,|%emulist%
guicontrol,hide,OEMUNICK
guicontrol,hide,OEMUDEL
guicontrol,hide,OEMUSV
guicontrol,hide,OEMUTXT
return

OEmuSv:
gui,submit,nohide
guicontrolget,OEMUNICK,,OEMUNICK
if (OEMUNICK = "")
			{
				guicontrol,hide,OEMUDEL
				guicontrol,hide,OEMUSV
				guicontrol,,OEMUTXT,Name Empty.
				return			
			}
/*
Loop, Read, EmuParts.set
	{
		sva1= 
		StringSplit,sva,A_LoopReadLine,=
		if (sva1 = OEMUNICK)
			{
				guicontrol,hide,OEMUDEL
				guicontrol,hide,OEMUSV
				guicontrol,,OEMUTXT,Nick Reserved.
				return
		}
	}
*/
IniWrite, "%EINSTLOC%",apps.ini,EMULATORS,%OEMUNICK%
gosub, ResetEmuList
guicontrol,,EINSTLOC
guicontrol,hide,OEMUNICK
guicontrol,hide,OEMUDEL
guicontrol,hide,OEMUSV
guicontrol,hide,OEMUTXT
return

MultiAssign:
Loop, Read, LkUp.set
	{
		LKUP1= 
		LKUP2= 
		stringsplit, LKUP, A_LoopReadLine, =
		if (semu = LKUP1)
			{
				OVRKND= %LKUP2%
				SHRTN= % %LKUP2%
				%LKUP2%= %LKUP1%
				break
			}
	}
if (OVRKND = "")
	{
		stringsplit,SHRTMP,LKUP1,%A_Space%,-
		StringRight,SHK,SHRTMP,7
		OVRKND= %SHK%Z				
	}
splitpath,EINSTLOC,EINSTFNM,EINSTDIR,EINSTX,EINSTNAM
if (EINSTX = "exe")
	{
		EINSTLOC:= EINSTDIR
		emuxe:= EINSTFNM
	}
if (selfnd = "Other")
	{
		oemunn=
		splitpath,emuxe,,,,oemunn
		guicontrol,,OEMUNICK,|%oemunn%|%emulist%
	}
if (selfnd <> "Other")
	{
		iniwrite, "%EINSTLOC%\%emuxe%",apps.ini,EMULATORS,%selfnd%
	}
iniwrite, "%EINSTLOC%\%emuxe%",Assignments.ini,ASSIGNMENTS,%semu%
iniwrite, "%OVRKND%",Assignments.ini,OVERRIDES,%semu%
iniwrite, "%APPOPT%",AppParams.ini,%OVRKND%,options
if (APOPT = "")
	{
		iniwrite, " ",AppParams.ini,%OVRKND%,options
	}
iniwrite, "%APPARG%",AppParams.ini,%OVRKND%,arguments
iniwrite, "%NOEXTN%",AppParams.ini,%OVRKND%,extension
iniwrite, "%EMUPGC%",AppParams.ini,%OVRKND%,per_game_configurations
iniwrite, "%OMITQ%",AppParams.ini,%OVRKND%,no_quotes
iniwrite, "%OMITPTH%",AppParams.ini,%OVRKND%,no_path
iniwrite, "%LRUN%",AppParams.ini,%OVRKND%,run_location
reasign .= semu . "|"
return

MRomDLoc:
ROMDFLDR= 
FileSelectFolder,ROMDFLDR,,,Select a source directory for multiple systems
if (ROMDFLDR = "")
	{
		return
	}
Loop, Parse, EAVAIL,|
	{
		semu:= A_LoopField
		gosub, RomDLoc
	}
return


RomDLoc:
Filecont= 1
ifexist,%coreassetsDirectory%\%semu%
	{
		Filecont= 
		SB_SetText("This folder already exists in the %coreassetsdirectory% directory")
		gosub, LnkGet
		if (JNKLNK= "")
			{
				guicontrol,,ROMDEDT,%coreassetsdirectory%\%semu%
			}
		if (MULTISYS = 1)
			{
				Filecont= 2
			}
		if (MULTISYS = "")
			{
				MsgBox,259,Rename Folder,The %semu% folder exists in the %coreassetsdirectory% folder.`nWould you like to rename %semu% to %semu%(bak) and proceed to link your new folder?
				IfMsgBox, Yes
					{
						Filecont= 2
					}
			}
		}
if (Filecont = "")
	{
		return
	}
if (MULTISYS = "")
	{
		ROMDFLDR= 
		FileSelectFolder,ROMDFLDR,,,Locate the %semu% folder
		if (ROMDFLDR = "")
			{
				SB_SetText("No folder selected")
				return
			}
	}
if (Filecont = 2)
	{
		FileMoveDir,%coreassetsdirectory%\%semu%,%coreassetsdirectory%\%semu%(bak),R
	}
RunWait, %comspec% cmd /c "mklink /J "%coreassetsdirectory%\%semu%" "%ROMDFLDR%" ",,hide
ifexist, %coreassetsdirectory%\%semu%
	{
		gosub, LnkGet
		SB_SetText("Linked " ROMDFLDR " to " coreassetsdirectory "")
		gosub, resetCoreAssets
		return
	}
SB_SetText("Could not create link to " ROMDFLDR "  Do you have write access to the " coreassetsdirectory " directory?")
return	

LnkGet:
JNKLNK= 
junct= 
junctv1= 
junctv2= 
FileDelete,dxt.ini
runwait, %comspec% cmd /c "for /f "tokens=2`,3 delims=<>" `%a in ('dir /a:d "%coreassetsdirectory%\%semu%?`"') do if "`%~a"=="JUNCTION" for /f "tokens=* delims= " `%n in ("`%~b") do echo."`%~n" >dxt.ini &&exit /b ",,hide
ifexist, dxt.ini
	{
		FileReadLine,dxtini,dxt.ini,1
		stringreplace,junct,dxtini,%semu%,,
		StringSplit,junctv,junct,[, ] `"
;;"
		guicontrol,,ROMDEDT,%junctv2%
		JNKLNK= 1
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;     UPDATE SELECTED     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;

UpdateCores:
guicontrol, disable, AVAIL
guicontrol, disable, UPDBTN
guicontrol, disable, EXELIST
guicontrol, disable, UPDSELCT
guicontrol, disable, UPDCL
guicontrol, disable, GCUPDT
guicontrol, enable, CNCLDWN

corexist=
redistr= redist.7z
RAUPDF= RetroArch.7z
ifexist, %raexeloc%\retroarch.exe
	{
		RAUPDF= %UPDATERAEXE%
	}
Loop, Parse, SLCTCORES,|
	{
		URLFILE= %BLDBOT%/latest/%A_LoopField%
		save= %libretroDirectory%\%A_LoopField%
		saveloc= %libretroDirectory%
		dwncore= %A_LoopField%
		crdll1= 
		crdll2= 
		crdll3= 
		dbtyp1= 
		dbtyp2= 
		stringsplit, crdll, dwncore,.
		stringsplit,dbtyp,crdll1,-
		stringreplace, crdub,dbtyp1,-,,All
		stringreplace, crdub,crdub,_,,All
		coredll= %crdll1%.%crdll2%
		if (EXELIST = 1)
			{
				if (A_LoopField = RAUPDF)
					{
						goto, UpdtArch
					}
				try, goto, R%crdub%
				catch {
				}
			}
		bwSpeed= 
		ifnotexist, coreavail.ini
			{
				gosub, CoreupdtChk
			}
		ifexist, coreavail.ini
			{
				bwSpeed= 1
			}
		if (bwSpeed = 1)
			{
				if (locfnd <> 1)
					{
						
						Loop, Read, coreavail.ini
							{
								if (A_LoopReadLine = coredll | ".zip")
									{
										corexist= 1
										gosub, crcChk
										break
									}
							}
							if (corexist= "")
								{
									break
								}
							if (nocoredwn = 1)
								{
									break
								}
					}
				}
		gosub, downloadingcores
		ifnotexist, %save%
			{
				msgbox,0,, %dwncore%`n%URLFILE%`n could not be downloaded,3
				GuiControl, Enable, UPDBTN
				GuiControl, Enable, EXELIST
				GuiControl, Enable, AVAIL
				GuiControl, Disable, CNCLDWN
				continue
			}
			gosub, XTRACTCORE
			GuiControl, Enable, EXELIST
			GuiControl, Enable, UPDBTN
			GuiControl, Enable, AVAIL
			GuiControl, Disable, CNCLDWN
			guicontrol, enable, UPDSELCT
			guicontrol, enable, UPDCL
			guicontrol, enable, GCUPDT
	}
	gosub, GetCoreList
return



downloadingcores:
if (nocoredwn = "")
	{
		updtmsg= %coredll%
		DownloadFile(URLFILE,save, DWNOV, True)
	}
	
Guicontrol, ,DWNPRGRS, 0
SB_SetText(" ")
GuiControl, Enable, AVAIL
GuiControl, Enable, UPDBTN
GuiControl, Enable, EXELIST
GuiControl, Disable, CNCLDWN
guicontrol, enable, UPDSELCT
guicontrol, enable, UPDCL
guicontrol, enable, GCUPDT
nocoredwn= 
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;    RA UPDATE   ;;;;;;;;;;;;;;;;;;;;;
UpdtArch:
if (DWNCNCL= 1)
	{
		goto, InteruptDwn
	}
URLFILE= %BLDBOT%/%RAUPDF%
save= %A_SCRIPTDIR%\%RAUPDF%
saveloc= %A_SCRIPTDIR%
XTRACTLOC= %raexeloc%
updtmsg= %RAUPDF%
DownloadFile(URLFILE,save, DWNOV, True)
	
	SB_SetText(" Complete ")
	      Guicontrol, ,DWNPRGRS, 100
FileGetSize, updfilsz,%RAUPDF%,K
if (updfilsz < 110)
	{
		filedelete,%RAUPDF%
	}
ifnotexist, %A_WorkingDir%\%RAUPDF%
	{
		GuiControl, Enable, AVAIL
		GuiControl, Enable, UPDBTN
		GuiControl, Enable, EXELIST
		GuiControl, disable, CNCLBTN
		DayCnt+=1
		if (DayCnt = 6)
			{
				msgbox,0,, %UPDATERAEXE%`n''%URLFILE%`n'' could not be downloaded, 20
				return 
			}
			Yesterday := A_Now
		Yesterday += -%DayCnt%, Days
		FormatTime, Yesterday, %Yesterday%, yyyy-MM-dd
		RAUPDF= %Yesterday%_RetroArch.7z
		goto, UpdtArch
	}
	
Guicontrol, ,DWNPRGRS, 0
SB_SetText(" ")
nocoredwn= 
guicontrolget, NETNAME,,NETNAME
ntna1= 
ntna2= 
stringsplit,ntna,NETNAME,( )
if (ntna2 = RASTABLE)
	{
		NETNAME:= ntna1
	}
 if (ntna2 = "nightly")
	{
		NETNAME:= ntna1
	}
guicontrol,,NETNAME,%NETNAME%(nightly)
GuiControl, Enable, UPDBTN
GuiControl, Enable, EXELIST
GuiControl, Enable, AVAIL
GuiControl, Disable, CNCLDWN
guicontrol, enable, UPDSELCT
guicontrol, enable, UPDCL
guicontrol, enable, GCUPDT
gosub, XTRACTRA
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;   PARTS DOWNLOAD  ;;;;;;;;;;;;;;
STABLE:
updtmsg= RetroArch.7z
XTRACTLOC= %raexeloc%
URLFILE= %buildBotCore%/stable/%RASTABLE%/windows/x86%ARCHR%/%updtmsg%
gosub, GettingRA
guicontrolget, NETNAME,,NETNAME
ntna1= 
ntna2= 
stringsplit,ntna,NETNAME,( )
if (ntna2 = RASTABLE)
	{
		NETNAME:= ntna1
	}
 if (ntna2 = "nightly")
	{
		NETNAME:= ntna1
	}
guicontrol,,NETNAME,%NETNAME%(%RASTABLE%)
return


RBundle:
updtmsg= bundle.zip
XTRACTLOC= %raexeloc%
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return

RRedist:
updtmsg= redist.7z
XTRACTLOC= %raexeloc%
URLFILE= %BLDBOT%/%updtmsg%
gosub GettingRA
return

RAssets:
updtmsg= assets.zip
XTRACTLOC= %raexeloc%\assets
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return


Rinfo:
updtmsg= info.zip
XTRACTLOC= %raexeloc%\info
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return

Rdatabaserdb:
Rdatabasecursors:
updtmsg= %crdll1%.zip
XTRACTLOC= %raexeloc%\database\%crdll1%
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return

RCheats:
updtmsg= cheats.zip
XTRACTLOC= %raexeloc%\cheats
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return

ROverlays:
updtmsg= overlays.zip
XTRACTLOC= %raexeloc%\overlays
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return

RShadersslang:
RShaderscg:
RShadersglsl:
shdtg1= 
shdtg2= 
stringsplit,shdtg,crdll1,_
updtmsg= shaders_%shdtg2%.zip
XTRACTLOC= %raexeloc%\shaders\shaders_%shdtg2%
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return

RAutoconfig:
updtmsg= autoconfig.zip
XTRACTLOC= %raexeloc%\autoconfig
URLFILE= %buildBotCore%/assets/frontend/%updtmsg%
gosub GettingRA
return


RStable:
updtmsg= _RetroArch.7z
XTRACTLOC= %raexeloc%
URLFILE= %buildBotCore%/stable/%RASTABLE%/windows/x86%ARCHR%/%updtmsg%
gosub GettingRA
guicontrolget, NETNAME,,NETNAME
ntna1= 
ntna2= 
stringsplit,ntna,NETNAME,()
if (ntna2 = RASTABLE)
	{
		NETNAME:= ntna1
	}
 if (ntna2 = "nightly")
	{
		NETNAME:= ntna1
	}
guicontrol,,NETNAME,%NETNAME%(%RASTABLE%)
return


GettingRA:
if (DWNCNCL= 1)
	{
		gosub, InteruptDwn
		return
	}
save= %A_WorkingDir%\%updtmsg%
saveloc= %A_WorkingDir%
DownloadFile(URLFILE, save, DWNOV, True)
ifnotexist, %A_WorkingDir%\%updtmsg%
	{
		msgbox,0,, %updtmsg%`n''%URLFILE%`n'' could not be downloaded, 20
		GuiControl, Enable, AVAIL
		GuiControl, Enable, UPDBTN
		GuiControl, Enable, EXELIST
		GuiControl, Disable, CNCLBTN
		return
	}
;;UPDATERAEXE= %updtmsg%
	
	Guicontrol, ,DWNPRGRS, 0
SB_SetText(" ")
gosub, XTRACTRA
GuiControl, Enable, AVAIL
GuiControl, Enable, UPDBTN
GuiControl, Enable, EXELIST
GuiControl, Disable, CNCLDWN
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     XTRACT     ;;;;;;;;;;;;;;;;;;;;;;;;
XTRACTRA:
splitpath, save, raname, savepth, ext, ranoxt, radrive
SB_SetText(" " save " " "extracting")
guicontrolget,BCKCORE,,BCKCORE
if (BCKCORE = 1)
	{
		ifexist,%raexeloc%\retroarch.exe
			{
				bak= .bak
				ifnotexist,%raexeloc%\retroarch.exe%bak%
					{
						bak= .orig
					}
				FileCopy,%raexeloc%\retroarch.exe,%raexeloc%\retroarch.exe%bak%,1
			}
	}
runwait, %comspec% cmd /c "7za.exe x -y "%save%" -x"!*.cfg" -O"%XTRACTLOC%" ", ,hide
SB_SetText(" " save " " "was extracted")
if (KARC= 0)
	{
		filedelete, %save%
	}
gosub, GRAVER
return

XTRACTCORE:
splitpath, save, corename, savepth, ext, corenoxt, coredrive
SB_SetText(" " save " " "extracting")
guicontrolget,BCKCORE,,BCKCORE
if (BCKCORE = 1)
	{
		ifexist,%saveloc%\%coredll%
			{
				bak= .bak
				ifnotexist,%saveloc%\%coredll%%bak%
					{
						bak= .orig
					}
				FileCopy,%saveloc%\%coredll%,%saveloc%\%coredll%%bak%,1
			}
			}
runwait, %comspec% cmd /c "7za.exe x -y "%save%" -O"%savepth%" ", ,hide
SB_SetText(" " save " " "was extracted")
if (KARC= 0)
{
filedelete, %save%
}
return

XTRACTEMU:
SB_SetText(" " save " " "extracting")
runwait, %comspec% cmd /c "7za.exe x -y "%save%" -O"%xtractmu%" ", ,hide
SB_SetText(" " save " " "was extracted")
ifnotexist, %xtractmu%
		{
			SB_SetText(" " save " " "was NOT extracted")
						
		}
if (KARC= 0)
	{
		filedelete, %save%
	}

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    REASSIGNMENT FUNCTIONS    ;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    SYSTEM DROPDOWN    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

AddCore:
sysni= 
systyp= 
ovfile= 
ovdir= 
ovextn= 
ovdrv= 
gui, submit, nohide
guicontrol,hide,SAVNSYS
guicontrol,hide,ADDNSYS
guicontrol,hide,APPOPT
guicontrol,hide,APPARG
guicontrol,hide,NOEXTN
guicontrol,hide,EMUPGC
guicontrol,hide,SYSNICK
guicontrol,hide,SVNICK
guicontrol,hide,DELNICK
guicontrol,hide,SYSIDENT
guicontrol,hide,ERUN
guicontrol,hide,LRUN
guicontrol,hide,SELAPP
guicontrol,hide,OPTTXT
guicontrol,hide,ARGTXT
guicontrol,hide,OMITQ
guicontrol,hide,OMITPTH
instog= hide
if (SALIST = "Systems")
	{
			instog= show
	}
guicontrol,%instog%,OVLIST
guicontrol,%instog%,OVSETTXT
guicontrol,%instog%,DCORE
guicontrol,%instog%,ARDCORE
guicontrol,%instog%,DAPP

guicontrol,,EXDISPL,
guicontrol,show,EXDISPL

guicontrol,enable,DCORE
guicontrol,enable,OPNSYS

guicontrol,,DCORE,Default Core
guicontrol,,ASCORE,|%corelist%

guicontrolget,ADDCORE,,ADDCORE
if (ADDCORE = "Select_A_System")
	{
		guicontrol,disable,ARDCORE
		guicontrol,disable,DAPP
		guicontrol,hide,APPOPT
		guicontrol,hide,APPARG
		guicontrol,hide,NOEXTN
		guicontrol,hide,EMUPGC
		guicontrol,hide,SYSNICK
		guicontrol,hide,SVNICK
		guicontrol,hide,DELNICK
		guicontrol,hide,SYSIDENT
		guicontrol,hide,ERUN
		guicontrol,hide,LRUN
		guicontrol,hide,SELAPP
		guicontrol,hide,OPTTXT
		guicontrol,hide,ARGTXT
		guicontrol,enable,OVLIST
		guicontrol,,DCORE,1
		guicontrol,,DAPP,0
		guicontrol,,ARDCORE,0
		return
	}
guicontrol,hide,EXTINP
if (SALIST = "Emulators")
	{
		GuiControl, choose, UAVAIL,0
	}

OVLIST= 
guicontrol,enable,ARDCORE
guicontrol,enable,DAPP
guicontrol,,OVLIST,|1|2|3|4

iniread,sysni,Assignments.ini,OVERRIDES,%ADDCORE%
iniread,systyp,Assignments.ini,ASSIGNMENTS,%ADDCORE%
splitpath,systyp,ovfile,ovdir,ovextn,ovnm,ovdrv
if (sysni = 1)
		{
			guicontrol,,DAPP,0
			guicontrol,,DCORE,0
			guicontrol,,ARDCORE,1
			gosub, ARDCore
			return	
		}		
if (sysni = 0)
		{
			guicontrol,,DAPP,0
			guicontrol,,DCORE,1
			guicontrol,,ARDCORE,0
			return	
		}	
	guicontrol,,DAPP,1
	guicontrol,,DCORE,0
	guicontrol,,ARDCORE,0
	gosub,DApp
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;  Extension Override Dropdown  ;;;;;;;;;;;;;;;;;;;;;

OvList:
gui, submit, nohide
sysni= 
extvar= 
extstrm= 
guicontrolget,OVLIST,,OVLIST

guicontrol,hide,SAVNSYS
guicontrol,hide,ADDNSYS

guicontrol,show,DCORE
guicontrol,show,ARDCORE
guicontrol,show,DAPP

guicontrol,enable,DCORE
guicontrol,enable,OPNSYS

guicontrol,,ASCORE,|%corelist%

if (OVLIST = "")
	{
		guicontrol,,DCORE,Default Core
		guicontrol,,DCORE,1
		guicontrol,,DAPP,0
		guicontrol,,ARDCORE,0
		return
	}

guicontrol,,ADDCORE,|Select_A_System||%reasign%

guicontrol,disable,OPNSYS

guicontrol,hide,APPOPT
guicontrol,hide,APPARG
guicontrol,hide,NOEXTN
guicontrol,hide,EMUPGC
guicontrol,hide,SYSNICK
guicontrol,hide,SVNICK
guicontrol,hide,DELNICK
guicontrol,hide,SYSIDENT
guicontrol,hide,ERUN
guicontrol,hide,LRUN
guicontrol,hide,SELAPP
guicontrol,hide,OPTTXT
guicontrol,hide,ARGTXT

guicontrol,show,EXTINP

guicontrol,enable,ARDCORE
guicontrol,enable,DAPP

guicontrol,,DCORE,clear

guicontrol,,DCORE,0
guicontrol,,DAPP,0
guicontrol,,ARDCORE,1

iniread,sysni,Assignments.ini,OVERRIDES,%OVLIST%
iniread, extvar,Assignments.ini,EXTENSIONS,%OVLIST%
if (extvar <> "")
	{
		Loop,Parse,extvar,|
			{
				if (A_LoopField <> "")
					{
							extstrm .= A_LoopField . "`,"
					}
			}
		guicontrol,,EXTINP,%extstrm%
	}
iniread,systyp,Assignments.ini,ASSIGNMENTS,%OVLIST%
splitpath,systyp,ovfile,ovdir,ovextn,ovnm,ovdrv
if sysni is not digit
	{
		ovfile= 
		systyp= 
		sysni= 
		aprun= 
		apext=
		tmpnp= 
		tmpq= 
		aparg= 
		apopt= 
		
		gosub, AppSetReset
		gosub, AppParamPop
		
		guicontrol,enable,SYSNICK
		guicontrol,enable,SVNICK
		guicontrol,enable,DELNICK
		guicontrol,enable,SYSIDENT
		guicontrol,,DCORE,0
		guicontrol,,DAPP,1
		guicontrol,,ARDCORE,0
		return
	}
	gosub,ARDCore
	guicontrol,,ASCORE,|%ovfile%||%corelist%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;   System Identifier   ;;;;;;;;;;;;;;;;;;;

SysNick:
gui,submit,nohide
guicontrolget,ADDCORE,,ADDCORE
guicontrolget,sysni,,SYSNICK
gosub, AppParamPop
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;; SAVE SYSTEM ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SvNick:
sysni= 
gui,submit,nohide
guicontrolget,SALIST,,SALIST
guicontrolget,sysni,,SYSNICK
guicontrolget,ADDCORE,,ADDCORE
guicontrolget,NOEXTN,,NOEXTN
guicontrolget,OMITQ,,OMITQ
guicontrolget,OMITPTH,,OMITPTH
guicontrolget,LRUN,,LRUN
guicontrolget,EMUPGC,,EMUPGC
guicontrolget,APPOPT,,APPOPT
guicontrolget,APPARG,,APPARG
guicontrolget,OMITPTH,,OMITPTH

sanm:= sysni
gosub, SanitizeN
sysni:= sanm
if (sysni = "")
	{
		SB_SetText("Cannot Save Empty Nickname")
		return
	}
gosub,AppOpt
gosub,AppArg
gosub,OmitQ
gosub,OmitPth
gosub,NoExtn
gosub,EmuPGC
gosub,LRun

if (SALIST = "Systems")
	{
		appasi= 
		iniread,appasi,Assignments.ini,ASSIGNMENTS,%sysni%
		if (appasi = "ERROR")
			{
				SB_SetText(" Cannot save " sysni " until an executable has been assigned ")
				return
			}
	}
if (SALIST = "Emulators")
	{
		guicontrolget,ksvel,,EINSTLOC
		if (ksvel = "")
			{
				SB_SetText("You must assign an emulator executable to this nickname to save a system associaiton")
				return
			}
		IniWrite, "%ksvel%",Assignments.ini,ASSIGNMENTS,%sysni%
	}
iniwrite, "%appopt%",AppParams.ini,%sysni%,options
if (apopt = "")
	{
		apopt= %A_Space%
		iniwrite, " ",AppParams.ini,%sysni%,options
	}

if (aparg = "")
	{
		apparg= 

	}

iniwrite, "%appasi%",Assignments.ini,ASSIGNMENTS,%sysni%
iniwrite, "%sysni%",Assignments.ini,OVERRIDES,%ADDCORE%
iniwrite, "%aparg%",AppParams.ini,%sysni%,arguments
iniwrite, "%NOEXTN%",AppParams.ini,%sysni%,extension
iniwrite, "%EMUPGC%",AppParams.ini,%sysni%,per_game_configurations
iniwrite, "%OMITQ%",AppParams.ini,%sysni%,no_quotes
iniwrite, "%OMITPTH%",AppParams.ini,%sysni%,no_path
iniwrite, "%LRUN%",AppParams.ini,%sysni%,run_location

gosub, ResetRunList

guicontrol,,JCORE,|%runlist%
guicontrol,,LCORE,|%runlist%
guicontrol,,PLCORE,|%lastcore%||%runlist%
guicontrol,,JOYCORE,|Global||%runlist%|Xpadder|Antimicro

preEmuCfg .= sysni . "|"
guicontrol,,SYSNICK,|%sysni%||%preEmuCfg%
gosub,AppParamPop
return

DelNick:
sysni= 
gui,submit,nohide
guicontrolget,sysni,,SYSNICK
if (sysni = "")
	{
		SB_SetText("select a nickname")
		return
		}
pemu= 		
Loop, parse, preEmuCfg, |
	{
		if (A_LoopField = sysni)
			{
				continue
				}
	pemu.= A_LoopField . "|"		
		}
preemucfg= %pemu%	
Guicontrol,,SYSNICK,|%preEmuCfg%
IniDelete, Assignments.ini,OVERRIDES,%sysni%
IniDelete, Assignments.ini,ASSIGNMENTS,%sysni%
IniDelete, AppParams.ini,%sysni%
guicontrol,,EXDISPL,
guicontrol,,DCORE,1
gosub,DCORE
gosub, AppParamPop
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;   Default Core Radio Button   ;;;;;;;;;;;;;

DCore:
ctdef= 
SYSPOPD= 
gui,submit,nohide
guicontrolget,OVLIST,,OVLIST
guicontrol,hide,ASCORE
guicontrol,hide,APPOPT
guicontrol,hide,SYSNICK
guicontrol,hide,SVNICK
guicontrol,hide,DELNICK
guicontrol,hide,SYSIDENT
guicontrol,hide,APPARG
guicontrol,hide,NOEXTN
guicontrol,hide,EMUPGC
guicontrol,hide,ERUN
guicontrol,hide,LRUN
guicontrol,hide,OMITQ
guicontrol,hide,OMITPTH
guicontrol,hide,SELAPP
guicontrol,hide,OPTTXT
guicontrol,hide,ARGTXT
SYSPOPD= %OVLIST%
if (ADDCORE <> "Select_A_System")
	{
		SYSPOPD= %ADDCORE%		
		iniread, ctdef,Assignments.set,ASSIGNMENTS,%SYSPOPD%
		iniwrite, "%ctdef%",Assignments.ini,ASSIGNMENTS,%SYSPOPD%
		guicontrol,,ASCORE,|%ctdef%||%corelist%
	}
;;if (SYSPOPD = "")
;;	{
;;		iniwrite, "",Assignments.ini,EXTENSIONS,%SYSPOPD%
;;		iniwrite, "",Assignments.ini,ASSIGNMENTS,%SYSPOPD%
;;		return
;;	}
;;iniwrite, "0",Assignments.ini,OVERRIDES,%SYSPOPD%

guicontrol,show,ASCORE
guicontrol,,ARDCORE,1
guicontrol,,DCORE,0
guicontrol,,DAPP,0

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;   Alternate Core Radio Button   ;;;;;;;;;;;;
ARDCore:
ovrst= 
corpop= 
updtclst= 
gui,submit,nohide
SYSPOPD= %OVLIST%
if (ADDCORE <> "Select_A_System")
	{
		SYSPOPD= %ADDCORE%
	}
guicontrol,hide,APPOPT
guicontrol,hide,SYSNICK
guicontrol,hide,SVNICK
guicontrol,hide,DELNICK
guicontrol,hide,SYSIDENT
guicontrol,hide,APPARG
guicontrol,hide,NOEXTN
guicontrol,hide,EMUPGC
guicontrol,hide,ERUN
guicontrol,hide,LRUN
guicontrol,hide,OMITQ
guicontrol,hide,OMITPTH
guicontrol,hide,SELAPP
guicontrol,hide,OPTTXT
guicontrol,hide,ARGTXT
guicontrol,show,ASCORE
iniread,ovrst,Assignments.ini,ASSIGNMENTS,%SYSPOPD%
guicontrol,,EXDISPL,%ovrst%
splitpath,ovrst,corpop,,updtclst

if (updtclst = "dll")
	{
		guicontrol,,ASCORE,|%corpop%||%corelist%
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;   Core Dropdown   ;;;;;;;;;;
ASCore:
gui,submit,nohide
guicontrolget,ASCORE,,ASCORE
guicontrolget,ADDCORE,,ADDCORE
if (ADDCORE <> "Select_A_System")
	{
		iniwrite, "1",Assignments.ini,OVERRIDES,%ADDCORE%
		iniwrite, "%ASCORE%",Assignments.ini,ASSIGNMENTS,%ADDCORE%
		return
	}
if (OVLIST <> "")
	{
		iniwrite, "1",Assignments.ini,OVERRIDES,%OVLIST%
		iniwrite, "%ASCORE%",Assignments.ini,ASSIGNMENTS,%OVLIST%
		return
	}
return

ExtInp:
gui,submit,nohide
extenlist= 
if (ADDCORE <> "Select_A_System")
	{
		return
	}
guicontrolget, EXTINP,,EXTINP
StringReplace,EXTINP,EXTINP,%A_Space%,,All
StringReplace,EXTINP,EXTINP,.,,All
Loop,Parse,EXTINP,`,
	{
		extenlist .= A_LoopField . "|"
	}
		if (extenlist = "")
			{
				iniwrite, "0",Assignments.ini,OVERRIDES,%OVLIST%
			}
iniwrite, "%extenlist%",Assignments.ini,EXTENSIONS,%OVLIST%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;    APPLICATION PARAMATERS   ;;;;;;;;;;;

;{;;;;;;;   Application Radio Button  ;;;;;;;;;;;;
DApp:
pthdisp= $ROMPATH\
xdisp= .ext
runfr= $ROMPATH
gui,submit,nohide
SYSPOPD= %OVLIST%
if (ADDCORE <> "Select_A_System")
	{
		guicontrolget, SYSPOPD,,ADDCORE
	}
guicontrol,hide,ASCORE
guicontrol,enable,OVLIST

gosub, AppSetReset
if (Salist = "Emulators")
	{
		guicontrol,,DApp,1
		PRECFGLIST=
		guicontrolget,PRECFGLIST,,UAVAIL
		if (PRECFGLIST <> "")
			{
				SYSPOPD= %PRECFGLIST%
			}
		guicontrol,,ADDCORE,|%SYSPOPD%||Select_A_System|%reasign%,
		guicontrol,,SYSNICK,|%SYSPOPD%||%preEmuCfg%
	}

iniread, systyp,Assignments.ini,ASSIGNMENTS,%SYSPOPD%
splitpath, systyp,ovfile,ovdir,ovextn,ovnm,ovdrv
iniread, sysni,Assignments.ini,OVERRIDES,%SYSPOPD%
if (sysni = "ERROR")
	{
		sysni= 
	}

if sysni is not digit
	{
		guicontrol,enable,SYSNICK
		guicontrol,enable,SVNICK
		guicontrol,enable,DELNICK
		guicontrol,,SYSNICK,|%sysni%||%preEmucfg%
		gui, submit, nohide
		gosub, AppParamPop
	}
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%$ROM%xdisp%%qdisp%%aparg%, %runfr%
return
;};;;;;;;;;;;;;;

;{;;;;;;;;;;;;;  Update Varables  ;;;;;;;;;;;;;;;;
AppOpt:
gui, submit, nohide
guicontrolget, apopt,, APPOPT
if (apopt = "")
	{
		apopt= %A_Space%
	}
if (apopt = "ERROR")
	{
		apopt= %A_Space%
	}
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%$ROM%xdisp%%qdisp%%aparg%, %runfr%
return

AppArg:
gui, submit, nohide
guicontrolget, aparg,, APPARG
if (aparg = "")
	{
		aparg= %A_Space%
	}
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%$ROM%xdisp%%qdisp%%aparg%, %runfr%
return

NoExtn:
gui,submit,nohide
xdisp= .ext
if (NOEXTN = 1)
	{
		xdisp= 
	}
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%ROM%xdisp%%qdisp%%aparg%, %runfr%
return

OmitQ:
gui,submit,nohide
guicontrolget,OMITQ,,OMITQ
qdisp= "
;;"
if (OMITQ = 1)
	{
		qdisp= 
	}
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%%ROM%%xdisp%%qdisp%%aparg%, %runfr%
return

OmitPth:
gui,submit,nohide
guicontrolget,OMITPTH,,OMITPTH
pthdisp= $ROMPATH\
if (OMITPTH = 1)
	{
		pthdisp= 
	}
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%ROM%xdisp%%qdisp%%aparg%, %runfr%
return

EmuPGC:
gui,submit,nohide
guicontrolget,EMUPGC,,EMUPGC

return

ERun:
gui,submit,nohide
guicontrolget,ERUN,,ERUN
runfr= $EMUPATH
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%ROM%xdisp%%qdisp%%aparg%, %runfr%
return

LRun:
gui,submit,nohide
guicontrolget,LRUN,,LRUN
if (LRUN = 1)
	{
		runfr= $ROMPATH
		guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%ROM%xdisp%%qdisp%%aparg%, %runfr%
		return
	}
guicontrolget,ERUN,,ERUN
runfr= $EMUPATHf
guicontrol,,EXDISPL,"..\%ovfile%"%apopt%%qdisp%%pthdisp%ROM%xdisp%%qdisp%%aparg%, %runfr%
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;  POPULATE APPLICATION PARAMATERS  ;;;;;;;;;;;;;;;;

AppParamPop:
gui,submit,nohide
SB_SetText(" ...POPULATING...")

iniread, appasi, Assignments.ini,ASSIGNMENTS,%sysni%
if (appasi = "ERROR")
	{
		ovfile= $Executable.exe
	}
if (appasi <> "ERROR")
	{
		splitpath, appasi,ovfile
	}
emupgc= 
iniread, emupgc, AppParams.ini, %sysni%,per_game_configurations
if (emupgc <> "ERROR")
	{
		guicontrol,,EMUPGC,%emupgc%
	}

apopt= %A_Space%
iniread, apopt, AppParams.ini, %sysni%,options
if (apopt = "ERROR")
	{
		apopt= %A_Space%
	}
guicontrol,,APPOPT,|%apopt%||%INJOPT%

aparg= 
iniread, aparg, AppParams.ini,%sysni%,arguments
if (aparg = "ERROR")
	{
		aparg= %A_Space%
	}
guicontrol,,APPARG,|%aparg%||%INJARG%
	
apext= 
iniread, apext, AppParams.ini,%sysni%,extension
if (apext <> "ERROR")
	{
		guicontrol,,NOEXT,%apext%
		if (apext = 1)
			{
				xdisp= 		
			}
	}

aprun= 
iniread, aprun, AppParams.ini,%sysni%,run_location
if (aprun = 0)
	{
		guicontrol,,ERUN,1
		guicontrol,,LRUN,0
		runfr= $EMUPATH
	}

tmpnp= 
iniread, tmpnp, AppParams.ini,%sysni%,no_path
if (tmpnp <> "ERROR")
	{
		guicontrol,,OMITPTH,%tmpnp%
		if (tmpnp = 1)
			{
				pthdisp= 
			}
	}

tmpq= 
iniread, tmpq, AppParams.ini,%sysni%,no_quotes
if (tmpq <> "ERROR")
	{
		guicontrol,,OMITQ,%tmpq%
		if (omitq = 1)
			{
				qdisp= 
			}
	}
guicontrol, ,EXDISPL, "..\%ovfile%"%apopt%%qdisp%%pthdisp%ROM%xdisp%%qdisp%%aparg%, %runfr%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;  RESET APPPLICATION PARAMATERS  ;;;;;;;;;;;;;;;;;;

AppSetReset:
guicontrol,show,SELAPP
guicontrol,show,APPOPT
guicontrol,show,SYSNICK
guicontrol,show,SVNICK
guicontrol,show,DELNICK
guicontrol,show,SYSIDENT
guicontrol,show,APPARG
guicontrol,show,NOEXTN
guicontrol,show,EMUPGC
guicontrol,show,EMUPGC
guicontrol,show,ERUN
guicontrol,show,LRUN
guicontrol,show,OMITQ
guicontrol,show,OMITPTH
guicontrol,show,OPTTXT
guicontrol,show,ARGTXT
guicontrol, , APPOPT,| ||
guicontrol, , SYSNICK,|%preEmuCfg%
guicontrol, , APPARG,| ||
guicontrol,,OMITPTH, 0
guicontrol,,OMITQ, 0
guicontrol,,NOEXTN,0
guicontrol,,EMUPGC,0
guicontrol,,LRUN,1
guicontrol,,ERUN,0
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;     Browse for Application    ;;;;;;;;;;;;;;;;;;;;;;
SelApp:
gui,submit,nohide
guicontrolget,sysni,,SYSNICK
guicontrolget,ADDCORE,,ADDCORE
guicontrolget,NOEXTN,,NOEXTN
guicontrolget,OMITQ,,OMITQ
guicontrolget,OMITPTH,,OMITPTH
guicontrolget,LRUN,,LRUN
guicontrolget,EMUPGC,,EMUPGC
guicontrolget,APPOPT,,APPOPT
guicontrolget,APPARG,,APPARG
guicontrolget,OMITPTH,,OMITPTH
if (sysni = "")
	{
		SB_SetText("You must enter a nickname to assign an executable")
		return
	}
appasi= 
FileSelectFIle,appasi,3,,Select and Executable,*.exe
if (appasi = "")
	{
		return
	}
SplitPath,appasi,edxe,,,appasn
if (SALIST = "Emulators")
	{
		IniWrite, "%appasi%",Assignments.ini,ASSIGNMENTS,%sysni%
		IniWrite, "%sysni%",Assignments.ini,OVERRIDES,%sysni%
		iniwrite, "%appopt%",AppParams.ini,%sysni%,options
		iniwrite, "%aparg%",AppParams.ini,%sysni%,arguments
		iniwrite, "%NOEXTN%",AppParams.ini,%sysni%,extension
		iniwrite, "%EMUPGC%",AppParams.ini,%sysni%,per_game_configurations
		iniwrite, "%OMITQ%",AppParams.ini,%sysni%,no_quotes
		iniwrite, "%OMITPTH%",AppParams.ini,%sysni%,no_path
		iniwrite, "%LRUN%",AppParams.ini,%sysni%,run_location	
	}
	
if (SALIST = "Systems")
	{
/*
		systyp= %appasi%
		StringReplace,appasn,appasn,%A_Space%,,All
		StringReplace,appasvn,appasvn,A_Space,,All
		StringLeft,nnick,appasn,25
		iniread,skex,Assignments.ini,OVERRIDES,

		Loop, Parse,skex,`n	
			{
				stringsplit,skexa,A_LoopField,=,"
				;"
				if (skexa2 = nnick)
					{
						enumsys= 
						if skexa2 is not digit
							{
								enumsys+=1
								if (sysni = "")
									{
										nnick= %skexa2%%enumsys%
										break
									}
							}
					}
			}
		guicontrol,, SYSNICK,|%nnick%||%preEmuCfg%
*/
		apopt= %appopt%
		qdisp= "
		;;"
		pthdisp= $ROMPATH\
		xdisp= .ext
		aparg= %apparg%
		IniWrite, "%appasi%",Assignments.ini,ASSIGNMENTS,%sysni%
		IniWrite, "%sysni%",Assignments.ini,OVERRIDES,%ADDCORE%
		iniwrite, "%APPOPT%",AppParams.ini,%appasn%,options
		iniwrite, "%APPARG%",AppParams.ini,%appasn%,arguments
		iniwrite, "%NOEXTN%",AppParams.ini,%appasn%,extension
		iniwrite, "%LRUN%",AppParams.ini,%appasn%,run_location
		iniwrite, "%EMUPGC%",AppParams.ini,%appasn%,per_game_configurations
		iniwrite, "%OMITQ%",AppParams.ini,%appasn%,no_quotes
		iniwrite, "%OMITPTH%",AppParams.ini,%appasn%,no_path

		if (OVLIST <> "")
			{
				iniwrite, "%appasi%",Assignments.ini,ASSIGNMENTS,%OVLIST%
				iniwrite, "%sysni%",Assignments.ini,OVERRIDES,%OVLIST%
			}

		if (ADDCORE <> "Select_A_System")
			{
				iniwrite, "%appasi%",Assignments.ini,ASSIGNMENTS,%ADDCORE%
				iniwrite, "%sysni%",Assignments.ini,OVERRIDES,%ADDCORE%
			}
	}

guicontrol,,EXDISPL,"..\%edxe%"%apopt%%qdisp%%pthdisp%$ROM%xdisp%%qdisp%%aparg%, %runfr%
guicontrol,show,APPOPT
guicontrol,show,SYSNICK
guicontrol,show,SVNICK
guicontrol,show,DELNICK
guicontrol,show,SYSIDENT
guicontrol,show,APPARG
guicontrol,show,NOEXTN
guicontrol,show,EMUPGC
guicontrol,show,ERUN
guicontrol,show,LRUN
guicontrol,show,OPTTXT
guicontrol,show,ARGTXT
guicontrol,enable,SYSNICK
guicontrol,enable,SVNICK
guicontrol,enable,DELNICK
guicontrol,enable,SYSIDENT
gosub, ResetRunList
guicontrol,,JCORE,|%runlist%
guicontrol,,LCORE,|%runlist%
guicontrol,,PLCORE,|%lastcore%||%runlist%
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJSYSRESET:
systmfldrs= 
totsys= 
allsys= 
Loop, %RJSYSTEMS%\*,2
	{
		sysnam= %A_LoopFileName%
		systmfldrs.= A_LoopFileName . "|"
		Loop, Read, SystemEmulators.set
			{
				if (A_LoopReadLine = "")
					{
						continue
					}
				avnu1= 
				allsys+=1
				stringsplit,avnu,A_LoopReadLine,|
				if (avnu1 = sysnam)
					{
						totsys+=1
					}
			}
	}
guicontrol,,DWNLPOS,|ROMJACKETS||%systmfldrs%
guicontrol,,OVDLDS,|Matching||%systmfldrs%
guicontrol,,SKDETSTXT,Detected Systems: %totsys% and %allsys% total
guicontrol,,RJSYSDD,|Systems||%systmfldrs%
return

;{;;;;;;;;;;;;;; Emulator detection ;;;;;;;;;;;;;;;;;;;;
EmuDetect:	
emucnt= 0
fecnt= 0
emuxelst= 
Loop, Read, EmuParts.set
	{
		if (A_LoopReadLine = "")
			{
				continue
			}
		emunmz= 
		emupx1= 
		emupx2= 
		emupx3= 
		emupx4= 
		emupx5= 
		stringsplit,emupx,A_LoopReadLine,=
		emunmz= %emupx3%
		StringReplace,emunmz,emunmz,[ARCH],%ARCH%,All
		emuxelst.= emupx1 . ">" . emunmz . "|"
		ifexist, %RJEMUD%\%emupx1%\%emunmz%
			{
				prgom= 
				Loop, Read, Frontends.set
					{
						prga1= 
						stringsplit,prga,A_LoopReadLine,|
						if (prga1 = emupx1)
							{
								prgom= 1
							}		
					}
				if (prgom = 1)
					{
						fecnt+=1
						iniread,fetmp,apps.ini,HTPC_FRONTENDS,%emupx1%
						if (fetmp = "ERROR")
							{
								IniWrite, "%RJEMUD%\%emupx1%\%emunmz%",apps.ini,HTPC_FRONTENDS,%emupx1%
							}
						stringreplace,emuxelst,emuxelst,%emupx1%>%emunmz%,,All
						SB_SetText(" " emupx1 " found ")
						continue
					}
				prgom= 
				Loop, Read, Keymappers.set
					{
						prga1= 
						stringsplit,prga,A_LoopReadLine,|
						if (prga1 = emupx1)
							{
								prgom= 1
							}		
					}
				if (prgom = 1)
					{
						fecnt+=1
						iniread,fetmp,apps.ini,KEYBOARD_MAPPERS,%emupx1%
						if (fetmp = "ERROR")
							{
								IniWrite, "%RJEMUD%\%emupx1%\%emunmz%",apps.ini,KEYBOARD_MAPPERS,%emupx1%
							}
						stringreplace,emuxelst,emuxelst,%emupx1%>%emunmz%,,All
						SB_SetText(" " emupx1 " found ")
						continue
					}
				prgom= 
				Loop, Read, Utilities.set
					{
						prga1= 
						stringsplit,prga,A_LoopReadLine,|
						if (prga1 = emupx1)
							{
								prgom= 1
							}		
					}
				if (prgom = 1)
					{
						fecnt+=1
						iniread,fetmp,apps.ini,UTILITIES,%emupx1%
						if (fetmp = "ERROR")
							{
								IniWrite, "%RJEMUD%\%emupx1%\%emunmz%",apps.ini,UTILITIES,%emupx1%
							}
						stringreplace,emuxelst,emuxelst,%emupx1%>%emunmz%,,All
						SB_SetText(" " emupx1 " found ")
						continue
					}
				emucnt+=1
				fetmp=
				;;msgbox,,, n
				iniread,fetmp,apps.ini,EMULATORS,%emupx1%
				if (fetmp = "ERROR")
					{
						IniWrite, "%RJEMUD%\%emupx1%\%emunmz%",apps.ini,EMULATORS,%emupx1%
					}
					
				fetmp=
				iniread,fetmp,Assignments.ini,OVERRIDES,%emupx1%
				if (fetmp = "ERROR")
					{
						IniWrite, "%emupx1%",Assignments.ini,OVERRIDES,%emupx1%
						IniWrite, "0",AppParams.ini,%emupx1%,per_game_configurations
						IniWrite, "[CUSTMOPT]",AppParams.ini,%emupx1%,options
						IniWrite, "[CUSTMARG]",AppParams.ini,%emupx1%,arguments
						IniWrite, "0",AppParams.ini,%emupx1%,extension
						IniWrite, "1",AppParams.ini,%emupx1%,run_location
						IniWrite, "0",AppParams.ini,%emupx1%,no_path
						IniWrite, "0",AppParams.ini,%emupx1%,no_quotes
						SB_SetText(" " emupx1 " found ")
						volley=
						IniRead,volley,emuCfgPresets.set,%emupx1%
						if (volley <> "ERROR")
							{
								Loop, parse, volley, `n, `r
									{
										fie1=
										fie2=
										stringsplit,fie,A_LoopField,=
										if (fie1 = "RJEMUOPTS")
											{
												stringreplace,fie2,fie2,<,%A_Space%,All
												IniWrite, "%fie2%",AppParams.ini,%emupx1%,options
											}
										if (fie1 = "RJEMUARGS")
											{
												stringreplace,fie2,fie2,<,%A_Space%,All
												IniWrite, "%fie2%",AppParams.ini,%emupx1%,arguments
											}
										if (fie1 = "RJRUNDIR")
											{
												IniWrite, "%fie2%",AppParams.ini,%emupx1%,runlocation
											}
										if (fie1 = "RJEXT")
											{
												if (fie2 = 0)
													{
														IniWrite, "1",AppParams.ini,%emupx1%,extension
													}
												if (fie2 = 1)
													{
														IniWrite, "0",AppParams.ini,%emupx1%,extension
													}
											}
										if (fie1 = "RJQUOTES")
											{
												if (fie2 = 0)
														{
															IniWrite, "1",AppParams.ini,%emupx1%,no_quotes
														}
													if (fie2 = 1)
														{
															IniWrite, "0",AppParams.ini,%emupx1%,no_quotes
														}
											}
										if (fie1 = "RJPATH")
											{
												if (fie2 = 0)
													{
														IniWrite, "1",AppParams.ini,%emupx1%,no_path
													}
												if (fie2 = 1)
													{
														IniWrite, "0",AppParams.ini,%emupx1%,no_path
													}
											}
									}
								continue		
							}
					}		
				
				fetmp=
				iniread,fetmp,Assignments.ini,ASSIGNMENTS,%emupx1%
				if (fetmp = "ERROR")
					{
						IniWrite, "%RJEMUD%\%emupx1%\%emunmz%",Assignments.ini,ASSIGNMENTS,%emupx1%
					}
					
				stringreplace,emuxelst,emuxelst,%emupx1%>%emunmz%,,All
				SB_SetText(" " emupx1 " found ")
			}
				
	}
		

emuncnt= 0
emucnt= 
Loop, %RJEMUD%\*.exe,,1
	{
		emuxenm= %A_LoopFileName%
		emuxefp= %A_LoopFileFullPath%
		Loop, Parse, emuxelst,|
			{
				SB_SetText("Searching for " splemu1 " ")
				if (A_LoopField = "")
					{
						continue
					}
				splemu1= 
				splemu2= 
				stringsplit,splemu,A_LoopField,>
				if (emuxenm = splemu2)
					{
						emucnt+=1
						emuncnt+=1
						IniWrite, "%emuxefp%",apps.ini,EMULATORS,%splemu1%
						IniWrite, "%splemu1%",Assignments.ini,OVERRIDES,%splemu1%
						IniWrite, "%emuxefp%",Assignments.ini,ASSIGNMENTS,%splemu1%
						iniread, siiv,emuCfgPresets.set,%splemu1%
												
						IniWrite, "0",AppParams.ini,%splemu1%,per_game_configurations
						IniWrite, "[CUSTMOPT]",AppParams.ini,%splemu1%,options
						IniWrite, "[CUSTMARG]",AppParams.ini,%splemu1%,arguments
						IniWrite, "0",AppParams.ini,%splemu1%,extension
						IniWrite, "1",AppParams.ini,%splemu1%,run_location
						IniWrite, "0",AppParams.ini,%splemu1%,no_path
						IniWrite, "0",AppParams.ini,%splemu1%,no_quotes
						SB_SetText(" " splemu1 " found ")
						Loop, parse, siiv,`n, `r
							{
								fie1=
								fie2=
								stringsplit,fie,A_LoopField,=
								if (fie1 = "RJEMUOPTS")
									{
										stringreplace,fie2,fie2,<,%A_Space%,All
										IniWrite, "%fie2%",AppParams.ini,%splemu1%,options
									}
								if (fie1 = "RJEMUARGS")
									{
										stringreplace,fie2,fie2,<,%A_Space%,All
										IniWrite, "%fie2%",AppParams.ini,%splemu1%,arguments
									}
								if (fie1 = "RJRUNDIR")
									{
										IniWrite, "%fie2%",AppParams.ini,%splemu1%,runlocation
									}
								if (fie1 = "RJEXT")
									{
										if (fie2 = 0)
											{
												IniWrite, "1",AppParams.ini,%splemu1%,extension
											}
										if (fie2 = 1)
											{
												IniWrite, "0",AppParams.ini,%splemu1%,extension
											}
									}
								if (fie1 = "RJQUOTES")
									{
										if (fie2 = 0)
												{
													IniWrite, "1",AppParams.ini,%splemu1%,no_quotes
												}
											if (fie2 = 1)
												{
													IniWrite, "0",AppParams.ini,%splemu1%,no_quotes
												}
									}
								if (fie1 = "RJPATH")
									{
										if (fie2 = 0)
											{
												IniWrite, "1",AppParams.ini,%splemu1%,no_path
											}
										if (fie2 = 1)
											{
												IniWrite, "0",AppParams.ini,%splemu1%,no_path
											}
									}
							}
						SB_SetText(" " splemu1 " found ")
					}
			}		
	}

IniRead,amultmp,apps.ini,EMULATORS
emunumtot:= 0
Loop, Parse, amultmp,`n, `r
	{
		emunumtot+=1
	}
SB_SetText(" " emucnt " emulators found and appended.   TOTAL is:" emunumtot " ")
reasign= 
IniRead,asig,Assignments.ini,ASSIGNMENTS,
	Loop,Parse,asig,`n
		{
			StringSplit,rasig,A_LoopField,=
			if rasig1 is not digit
				{
					reasign .= rasig1 . "|"
				}
		}
runlist= 		
runlist .= corelist . "|" . reasign	
guicontrol,,JCORE,|%runlist%
guicontrol,,LCORE,|%runlist%
guicontrol,,AddCore,|Select_A_System||%reasign%
guicontrol,,SKDSETXT,%emunumtot% 
gosub, resetEmuList
return
;};;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;     New Systems    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
OpnSyS:
gui,submit,nohide
guicontrol,show,SAVNSYS
guicontrol,show,ADDNSYS

guicontrol,hide,OVLIST
guicontrol,hide,OVSETTXT
guicontrol,hide,DCORE
guicontrol,hide,ARDCORE
guicontrol,hide,DAPP
guicontrol,hide,ASCORE
guicontrol,hide,APPOPT
guicontrol,hide,SYSNICK
guicontrol,hide,SVNICK
guicontrol,hide,DELNICK
guicontrol,hide,SYSIDENT
guicontrol,hide,APPARG
guicontrol,hide,NOEXTN
guicontrol,hide,EMUPGC
guicontrol,hide,ERUN
guicontrol,hide,LRUN
guicontrol,hide,OMITQ
guicontrol,hide,OMITPTH
guicontrol,hide,SELAPP
guicontrol,hide,OPTTXT
guicontrol,hide,ARGTXT

return

AddNSys:
gui,submit,nohide
return

SavNSys:
sysnw= 
POPADC= 
gui,submit,nohide
guicontrol,hide,SAVNSYS
guicontrol,hide,ADDNSYS

guicontrol,show,OVLIST
guicontrol,show,OVSETTXT
guicontrol,show,EXDISPL
guicontrol,show,DCORE
guicontrol,show,ARDCORE
guicontrol,show,DAPP

guicontrolget,POPADC,,ADDNSYS

if (POPADC = "")
	{
		SB_SetText(" You must assign a name to the new system ")
		return
	}

sanm:= POPADC
gosub, SanitizeN
POPADC:= sanm
nmchkr= 
iniread,nmchkr,Assignments.ini,ASSIGNMENTS,%POPADC%
	if (nmchkr <> "ERROR")
		{
			SB_SetText(" This system already exists ")
			return
		}

stringRight,sysnw,POPADC, 25
iniwrite, "%raexeloc%\%raexefile%",Assignments.ini,ASSIGNMENTS,%POPADC%
if (sysnw <> "")
	{
		iniwrite, "%sysnw%",Assignments.ini,OVERRIDES,%POPADC%
	}
reasign .= "|" .POPADC
guicontrol,,ADDCORE,|%POPADC%||%reasign%
gosub, AddCore
guicontrol,,ADDCORE,|%POPADC%||%reasign%
return

SanitizeN:
stringreplace,sanm,sanm,:,-,All
stringreplace,sanm,sanm,>,-,All
stringreplace,sanm,sanm,<,-,All
stringreplace,sanm,sanm,?,-,All
stringreplace,sanm,sanm,*,-,All
stringreplace,sanm,sanm,\,-,All
stringreplace,sanm,sanm,/,-,All
stringreplace,sanm,sanm,|,-,All
stringreplace,sanm,sanm,=,-,All
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;    PLAYLIST FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
PLISTYP:
gui, submit, nohide
guicontrolget,fenam,,PLISTTYP
if (fenam = "XMB")
	{
		;; SET DEFAULTS ;;
		xmbtog= show
		opltog= hide
		gosub,HideOtherFEPL
		guicontrol,%xmbtog%,DWNLPOS
		guicontrol,%xmbtog%,RECURSE
		guicontrol,hide,RECURTX
		guicontrol,hide,EXCLBOOL
		guicontrol,hide,INCLBOOL
		guicontrol,hide,PARSEALL
		guicontrol,%xmbtog%,RPOPDL
		guicontrol,%xmbtog%,RPOPPL
		guicontrol,hide,EXTPARSED
		guicontrol,hide,FLTXT
		guicontrol,%xmbtog%,ROMPOP
		guicontrol,%xmbtog%,PLGBA
		guicontrol,%xmbtog%,PLGBB
		guicontrol,%xmbtog%,PLGBC
		guicontrol,%xmbtog%,PLGBD
		guicontrol,%xmbtog%,CURPLST
		guicontrol,hide,PLUPD
		guicontrol,%xmbtog%,APNDTYPGRP
		guicontrol,%xmbtog%,PLAPPND
		guicontrol,%xmbtog%,PLOVR
		guicontrol,%xmbtog%,ZIPSEEK
		guicontrol,%xmbtog%,PLCORE
		guicontrol,%xmbtog%,DETECTCORE
		guicontrol,%xmbtog%,SVPLST
		guicontrol,%xmbtog%,PLNAMEDT
		guicontrol,%xmbtog%,OPNPLST
		guicontrol,%xmbtog%,PGCONFG
		guicontrol,hide,SVASPLST
		guicontrol,%xmbtog%,SVAPLST
		guicontrol,%xmbtog%,CPYPL
		guicontrol,%xmbtog%,PLADPTXT
		guicontrol,%xmbtog%,CLRPP
		guicontrol,%xmbtog%,PLCLRPTXT
		guicontrol,%xmbtog%,BRADD
		guicontrol,%xmbtog%,FENWTXT
		guicontrol,%xmbtog%,REMPL
		guicontrol,%xmbtog%,PLRMVTXT
		guicontrol,%xmbtog%,CLRPL
		guicontrol,%xmbtog%,PLCLRTXT
		guicontrol,%xmbtog%,PLINIT
		guicontrol,%xmbtog%,PLDBTXT
		return
	}
if (fenam = "EmulationStation")
	{
		pltog= hide
		ESPLPLST=  
		ESPLPLSTA= 
		ESHOME= %CURSRPTH%\.emulationstation
		Loop, read, %ESHOME%\es_systems.cfg
			{
				if (A_LoopReadline = "")
					{
			 			continue
					}
				fjf1= 	
				fjf2= 	
				fjf3= 	
				stringsplit,fjf,A_loopreadline,<>
				if (fjf2 = "name")
					{
						ESPLPLST.= fjf3 . "|"
						ESPLPLSTA.= fjf3 . ","
					}	
				if (fjf2 = "path")
					{
						ESPLPLSTA.=  fjf3 . ","
					}	
				if (fjf2 = "extension")
					{
						ESPLPLSTA.=  fjf3 . "|"
					}	
			}
		escommon= 
		Loop, Read, rj\ES\eslkup.set
			{
				if (A_LoopReadLine = "")
					{
						continue
					}
				stringsplit,ffa,A_LoopReadLine,=	
				escommon.=	ffa1 . "|"
			}
		if (ESRPOPPL = 1)
			{
				guicontrol,%ofetog%,ESMIRSEL
			}
		if (ESRPOPROM = 1)
			{
				guicontrol,,ESPLXMP,|%ESPLPLST%|%escommon%				
				guicontrol,%ofetog%,ESROMROOT
				guicontrol,%ofetog%,ESRRTXT
			}
		guicontrol,,ESDWNLPOS,|%systmfldrs%
		guicontrol,,ESPLXMP,|%ESPLPLST%|%systmfldrs%|%escommon%
		guicontrol,%pltog%,RECURSE
		guicontrol,%pltog%,RECURTX
		guicontrol,%pltog%,EXCLBOOL
		guicontrol,%pltog%,INCLBOOL
		guicontrol,%pltog%,PARSEALL
		guicontrol,%pltog%,RPOPDL
		guicontrol,%pltog%,RPOPPL
		guicontrol,%pltog%,EXTPARSED
		guicontrol,%pltog%,FLTXT
		guicontrol,%pltog%,ZIPSEEK
		guicontrol,%pltog%,PLCORE
		guicontrol,%pltog%,DETECTCORE
		guicontrol,%pltog%,SVPLST
		guicontrol,%pltog%,PLNAMEDT
		guicontrol,%pltog%,OPNPLST
		guicontrol,%pltog%,PGCONFG
		guicontrol,%pltog%,SVASPLST
		guicontrol,%pltog%,SVAPLST
		guicontrol,%pltog%,PLINIT
		guicontrol,%pltog%,PLDBTXT
		guicontrol,%pltog%,DWNLPOS

		ofetog= show
		;;Shared plstelements
		guicontrol,%ofetog%,ROMPOP
		guicontrol,%ofetog%,PLGBA
		guicontrol,%ofetog%,PLGBB
		guicontrol,%ofetog%,PLGBC
		guicontrol,%ofetog%,PLGBD
		guicontrol,%ofetog%,CURPLST
		guicontrol,%ofetog%,PLUPD
		guicontrol,%ofetog%,APNDTYPGRP
		guicontrol,%ofetog%,PLAPPND
		guicontrol,%ofetog%,PLOVR
		guicontrol,%ofetog%,CPYPL
		guicontrol,%ofetog%,PLADPTXT
		guicontrol,%ofetog%,CLRPP
		guicontrol,%ofetog%,PLCLRPTXT
		guicontrol,%ofetog%,BRADD
		guicontrol,%ofetog%,FENWTXT
		guicontrol,%ofetog%,REMPL
		guicontrol,%ofetog%,PLRMVTXT
		guicontrol,%ofetog%,CLRPL
		guicontrol,%ofetog%,PLCLRTXT
		;;;;;;;;;

		guicontrol,%ofetog%,ESDWNLPOS
		guicontrol,%ofetog%,ESRPOPDL
		guicontrol,%ofetog%,ESRPOPPL
		guicontrol,%ofetog%,ESRPOPROM
		guicontrol,%ofetog%,ESPLCORE
		guicontrol,%ofetog%,ESBACKUP
		guicontrol,%ofetog%,ESSVPL
		guicontrol,%ofetog%,ESPLXMP
		guicontrol,%ofetog%,ESOPENPL
		guicontrol,%ofetog%,ESUSESCR
		guicontrol,%ofetog%,ESCPYSCR
		guicontrol,%ofetog%,ESBOXSRCHBUT
		guicontrol,%ofetog%,ESBOXCHK
		guicontrol,%ofetog%,ESMRQCHK
		guicontrol,%ofetog%,ESTHMBCHK
		guicontrol,%ofetog%,ESVIDCHK
		guicontrol,%ofetog%,ESMARQSRCHBUT
		guicontrol,%ofetog%,ESTHUMBSRCHBUT
		guicontrol,%ofetog%,ESVIDSRCHBUT

		opntog= hide
		gosub, ESOPNPL
	}
return

ESOPNPL:
guicontrol,%opntog%,ESNAMTXT
guicontrol,%opntog%,ESNAMEDT
guicontrol,%opntog%,ESPTHTXT
guicontrol,%opntog%,ESDESCTXT
guicontrol,%opntog%,ESDESCEDT
guicontrol,%opntog%,ESIMGBUT
guicontrol,%opntog%,ESIMGTXT
guicontrol,%opntog%,ESVIDPTHTXT
guicontrol,%opntog%,ESVIDTXT
guicontrol,%opntog%,ESVIDBUT
guicontrol,%opntog%,ESPTHEDT
guicontrol,%opntog%,ESSAVEOPL
guicontrol,%opntog%,ESMARQTXT
guicontrol,%opntog%,ESMARQBUT
guicontrol,%opntog%,ESMARQPTHTXT
guicontrol,%opntog%,ESOPNIMGPTHTXT
guicontrol,%opntog%,ESPUBTXT
guicontrol,%opntog%,ESPUBEDT
guicontrol,%opntog%,ESDEVTXT
guicontrol,%opntog%,ESDEVEDT
guicontrol,%opntog%,ESRATTXT
guicontrol,%opntog%,ESRATSLD
guicontrol,%opntog%,ESRLSDTXT
guicontrol,%opntog%,ESRLSDG
guicontrol,%opntog%,ESGENTXT
guicontrol,%opntog%,ESGENEDT
guicontrol,%opntog%,ESDDPLNUM
guicontrol,%opntog%,ESPLNUMTXT
guicontrol,%opntog%,ESROMPTHBUT
guicontrol,%opntog%,ESKIDG
guicontrol,%opntog%,ESFAV
guicontrol,%opntog%,ESHIDDEN
guicontrol,%opntog%,ESTHMBTXT
guicontrol,%opntog%,ESTHUMBBUT
guicontrol,%opntog%,ESTHUMBP
return

REMSYSTOG:
;;hide commons
guicontrol,%opltog%,ESBACKUP
guicontrol,%opltog%,ESSVPL
guicontrol,%opltog%,ESPLXMP
guicontrol,%opltog%,ESCPYSCR
guicontrol,%opltog%,ESUSESCR
guicontrol,%opltog%,ESRPOPDL
guicontrol,%opltog%,ESRPOPPL
guicontrol,%opltog%,ESPLCORE
guicontrol,%opltog%,ESRPOPROM
guicontrol,%opltog%,ESROMROOT
guicontrol,%opltog%,ESRRTXT
guicontrol,%opltog%,ESMIRSEL
guicontrol,%opltog%,ROMPOP
guicontrol,%opltog%,PLDBTXT
guicontrol,%opltog%,PLGBA
guicontrol,%opltog%,PLGBD
guicontrol,%opltog%,PLUPD
guicontrol,%opltog%,APNDTYPGRP
guicontrol,%opltog%,PLAPPND
guicontrol,%opltog%,PLOVR
guicontrol,%opltog%,ZIPSEEK
guicontrol,%opltog%,BRADD
guicontrol,%opltog%,PLCORE
guicontrol,%opltog%,DETECTCORE
guicontrol,%opltog%,SVPLST
guicontrol,%opltog%,PLNAMEDT
guicontrol,%opltog%,OPNPLST
guicontrol,%opltog%,PGCONFG
guicontrol,%opltog%,SVASPLST
guicontrol,%opltog%,SVAPLST
guicontrol,%opltog%,CPYPL
guicontrol,%opltog%,PLADPTXT
guicontrol,%opltog%,ESDWNLPOS
guicontrol,%opltog%,CLRPP
guicontrol,%opltog%,ESBOXSRCHBUT
guicontrol,%opltog%,ESBOXCHK
guicontrol,%opltog%,ESMRQCHK
guicontrol,%opltog%,ESTHMBCHK
guicontrol,%opltog%,ESVIDCHK
guicontrol,%opltog%,ESMARQSRCHBUT
guicontrol,%opltog%,ESTHUMBSRCHBUT
guicontrol,%opltog%,ESVIDSRCHBUT
guicontrol,%opltog%,PLCLRPTXT
return

HideOtherFEPL:
guicontrol,,ESPLXMP,|%ESPLPLST%|%escommon%|%systmfldrs%
guicontrol,%opltog%,ESPLCORE
guicontrol,%opltog%,ESBACKUP
guicontrol,%opltog%,ESSVPL
guicontrol,%opltog%,ESPLXMP
guicontrol,%opltog%,ESOPENPL
guicontrol,%opltog%,ESUSESCR
guicontrol,%opltog%,ESCPYSCR
guicontrol,%opltog%,ESDWNLPOS
guicontrol,%opltog%,ESRPOPDL
guicontrol,%opltog%,ESRPOPPL
guicontrol,%opltog%,ESRPOPROM
guicontrol,%opltog%,ESMIRSEL
guicontrol,%opltog%,ESROMROOT
guicontrol,%opltog%,ESRRTXT
guicontrol,%opltog%,ESBOXSRCHBUT
guicontrol,%opltog%,ESBOXCHK
guicontrol,%opltog%,ESMRQCHK
guicontrol,%opltog%,ESTHMBCHK
guicontrol,%opltog%,ESVIDCHK
guicontrol,%opltog%,ESMARQSRCHBUT
guicontrol,%opltog%,ESVIDSRCHBUT

guicontrol,%opltog%,ESNAMTXT
guicontrol,%opltog%,ESNAMEDT
guicontrol,%opltog%,ESPTHTXT
guicontrol,%opltog%,ESDESCTXT
guicontrol,%opltog%,ESDESCEDT
guicontrol,%opltog%,ESIMGBUT
guicontrol,%opltog%,ESIMGTXT
guicontrol,%opltog%,ESOPNIMGPTHTXT
guicontrol,%opltog%,ESVIDPTHTXT
guicontrol,%opltog%,ESVIDTXT
guicontrol,%opltog%,ESVIDBUT
guicontrol,%opltog%,ESPTHEDT
guicontrol,%opltog%,ESMARQTXT
guicontrol,%opltog%,ESMARQBUT
guicontrol,%opltog%,ESMARQPTHTXT
guicontrol,%opltog%,ESPUBTXT
guicontrol,%opltog%,ESPUBEDT
guicontrol,%opltog%,ESDEVTXT
guicontrol,%opltog%,ESDEVEDT
guicontrol,%opltog%,ESRATTXT
guicontrol,%opltog%,ESRATSLD
guicontrol,%opltog%,ESRLSDTXT
guicontrol,%opltog%,ESRLSDG
guicontrol,%opltog%,ESGENTXT
guicontrol,%opltog%,ESGENEDT
guicontrol,%opltog%,ESDDPLNUM
guicontrol,%opltog%,ESPLNUMTXT
guicontrol,%opltog%,ESROMPTHBUT
guicontrol,%opltog%,ESKIDG
guicontrol,%opltog%,ESFAV
guicontrol,%opltog%,ESHIDDEN
guicontrol,%opltog%,ESTHMBTXT
guicontrol,%opltog%,ESTHUMBBUT
guicontrol,%opltog%,ESTHUMBP
return


CURPLST:
gui,submit,nohide
guicontrolget,CURPLST,,CURPLST
crpln= 
Loop, Parse, CURPLST,|
	{
		crpln+=1
	}
if (fenam = "EmulationStation")
	{					
		gosub, ESEDTPOP
	}
return	

DragROM:
if (RPDND = 1)
	{
		Guicontrol,,ESCPYSCR,1
	}
return

Recurse:
gui,submit,nohide
;;guicontrol, move, ROMPOP, x24 y44 w316 h433
guicontrol, hide, EXTPARSED 
guicontrol,show, RPOPDL
guicontrol,show, RPOPPL
guicontrol, hide, PARSEALL
guicontrol, hide, INCLBOOL 
guicontrol, hide, EXCLBOOL 
guicontrol, hide, FLTXT
guicontrolget, RECURSE,,RECURSE
gosub, ClearROMPop

if (RECURSE = 1)
	{
		;;guicontrol, move, ROMPOP, x24 y66 w316 h420
		guicontrol, show, EXTPARSED 
		guicontrol,hide, RPOPDL
		guicontrol,hide, RPOPPL
		guicontrol, show, PARSEALL 
		guicontrol, show, INCLBOOL 
		guicontrol, show, EXCLBOOL 
		guicontrol, show, FLTXT
		gosub, ExtParsing
		return
	}
gosub, PopDownloads
return


RPopPl:
gui,submit,nohide
guicontrol,,DWNLPOS,|Playlists||%plistfiles%
return


RPopDl:
gui,submit,nohide
guicontrolget,fenam,,PLISTTYP

SWAPLOC= %RJSYSTEMS%
SWAPNAM= ROMJACKETS
SWAPPOP= %systmfldrs%
if (fenam = "XMB")
	{
		SWAPLOC= %coreassetsDirectory%
		SWAPNAM= Downloads
		SWAPPOP= %dwnlfldrs%
	}

guicontrol,,DWNLPOS,|%SWAPNAM%||%SWAPPOP%
return

DetectCore:
gui, submit,nohide
guicontrol,disable,PLCORE
if (DETECTCORE = 0)
{
guicontrol,enable,SVAPLST
guicontrol,enable,PLCORE
guicontrol,enable,PGCONFG
guicontrol,enable,SVAPLST
gosub, CorePLInfo
return
}
guicontrol,disable,PGCONFG
guicontrol,disable,SVAPLST
guicontrol,disable,PLCORE
guicontrol,,PLCORE,||%runlist%
guicontrol,,PGCONFG,0
CRDETECT= DETECT
NMDETECT= DETECT
return

ClearCurList:
gui, submit, nohide
popPlist= 
poptl= 
curplist= 
newplst= 
existlst= 
if (plopen = 1)
	{
		guicontrol,enable,ROMPOP
		guicontrol,enable,DWNLPOS
		guicontrol,enable,SVPLST
		guicontrol,enable,BRADD
		guicontrol,enable,CPYPL
		guicontrol,enable,PLAPPND
		guicontrol,enable,PLOVR
		guicontrol,enable,PLCORE
		guicontrol,enable,DETECTCORE
		guicontrol,enable,PLNAMEDT
		guicontrol,disable,SVASPLST
		guicontrol,hide,SVASPLST
		guicontrol,show,OPNPLST
		guicontrol,enable,OPNPLST
		guicontrol,enable,PGCONFG
		guicontrol,enable,SVAPLST
	}
if (fenam = "EmulationStation")
	{
		FileDelete,rj\ES\%syssub%\*.ini
	}
guicontrol,,CURPLST,|
existingpop= 
POPLDWN= 
return

ClearROMPop:
popPlist= 
poptl= 
curplist= 
newplst= 
existlst= 
if (plopen = 1)
	{
		guicontrol,enable,ROMPOP
		guicontrol,enable,DWNLPOS
		guicontrol,enable,SVPLST
		guicontrol,enable,BRADD
		guicontrol,enable,CPYPL
		guicontrol,enable,PLAPPND
		guicontrol,enable,PLOVR
		guicontrol,enable,PLCORE
		guicontrol,enable,DETECTCORE
		guicontrol,enable,PLNAMEDT
		guicontrol,disable,SVASPLST
		guicontrol,hide,SVASPLST
		guicontrol,show,OPNPLST
		guicontrol,enable,OPNPLST
		guicontrol,enable,PGCONFG
		guicontrol,enable,SVAPLST
	}
guicontrol,,ROMPOP,|,
existingpop= 
POPLDWN= 
noadpl= 
gui, submit, nohide
return

CorePLInfo:
gui, submit, nohide
guicontrolget,plcortmp,,PLCORE
stringtrimright,ccv,plcortmp,13`
splitpath,plcortmp,slkp,,dlx
CRDETECT= %libretrodirectory%\%plcortmp%
NMDETECT= %corcfgnam%
gosub, getCREN
if (dlx <> "dll")
	{
		iniread,RDETECT,Assignments.ini,OVERRIDES,
		StringSplit,lvtd,RDETECT,=
		if (lvtd2 = plcortmp)
			{
				iniread,CRDETECT,Assignments.ini,ASSIGNMENTS,%lvtd1%
				NMETECT= %plcortmp%
			}
		return
	}
if (szip = 1)
	{
		guicontrol,,ZIPSEEK,0
	}
return

PlaylistAppend:
return

SvAsPlst:
gui,submit,nohide
svplst=
FileSelectFile,svplst,S2,%playlistDirectory%,Save Playlist File,*.lpl
if (svplst = "")
	{
		return
	}
noadpl= 
splitpath,svplst,svplf,svpld,svplext,SYSNAME
FileMove,%popPlist%,%svplst%,1
SB_SetText(" " svplst " saved")
gosub, ClearROMPop
gosub, ClearCurList
return

OpnPlst:
plopen= 
popAlist= 
FileSelectFile,popAlist,3,%playlistDirectory%
if (popAlist = "")
	{
		return
	}
noadpl= 1	
SplitPath,popAlist,,popPth,,popPname
FileCopy,%popAList%,%popPth%\tmp.lpl,1
popPlist= %popPth%\tmp.lpl
SplitPath,popPlist,,,,popPname
plopen= 1
popnum= 1
SB_SetText(" " popPname ".lpl currently selected ")
guicontrol,disable,ROMPOP
guicontrol,disable,DWNLPOS
guicontrol,disable,SVPLST
guicontrol,disable,BRADD
guicontrol,disable,CPYPL
guicontrol,disable,PLAPPND
guicontrol,disable,PLOVR
guicontrol,disable,PLCORE
guicontrol,disable,DETECTCORE
guicontrol,disable,PLNAMEDT
guicontrol,enable,SVASPLST
guicontrol,show,SVASPLST
guicontrol,hide,OPNPLST
guicontrol,disable,OPNPLST
guicontrol,disable,PGCONFG
guicontrol,disable,SVAPLST
guicontrol,,CURPLST, 
Loop, Read, %popPlist%
	{
		if (popnum = 7)
			{
				popnum= 1
			}
		if (popnum = 1)
			{
				poptl.= A_LoopReadLine . "|"
			}
		popnum+=1
	}
guicontrol,,CURPLST,|%poptl%
;;guicontrol,enable,ROMPOP
;;guicontrol,enable,DWNLPOS
;;guicontrol,enable,SVPLST
;;guicontrol,enable,BRADD
;;guicontrol,enable,CPYPL
;;guicontrol,enable,PLAPPND
;;guicontrol,enable,PLOVR
;;guicontrol,enable,PLCORE
;;guicontrol,enable,DETECTCORE
;;guicontrol,enable,PLNAMEDT
;;guicontrol,enable,SVASPLST
;;guicontrol,show,SVASPLST
;;guicontrol,hide,OPNPLST
;;guicontrol,enable,OPNPLST
;;guicontrol,enable,PGCONFG
;;guicontrol,enable,SVAPLST
return

ExtParsed:
gui, submit, nohide
guicontrolget,omitxtv,,EXTPARSED
return

INCLBool:
gui, submit, nohide
guicontrolget, filtxtnl, ,EXTPARSED
guicontrolget, popfiltlst, ,ROMPOP
guicontrolget, DWNLPOS,,DWNLPOS
guicontrolget, RECURSE,,RECURSE
StringReplace, xtnprs, filtxtnl,`,,|,All
stringsplit,omitxtn,xtnprs,|

if (INCLBOOL = 1)
	{
		gosub, ExtParsing
	}
if (EXCLBOOL = 1)
	{
		guicontrol,,EXTPARSED,|%omitxj%||
		gosub, EXFilter
	}
gosub, FltXt
return

FltXt:
gui,submit,nohide
guicontrolget,EXCLBOOL,,EXCLBOOL
guicontrolget, filtxtnl, ,EXTPARSED
guicontrolget, popfiltlst, ,ROMPOP
guicontrolget, DWNLPOS,,DWNLPOS
guicontrolget, RECURSE,,RECURSE
stringreplace,splfilt,filtxtnl,., ,All
stringsplit,fltselc,splfilt,|
StringReplace, xtnprs, fltselc1,`,,|,All
stringsplit,omitxtn,xtnprs,|
omitxtv= 
guicontrol,,ROMPOP,
POPLDWN= 
if (EXCLBOOL = 1)
	{
		gosub, OutList
		return
	}

gosub, FilterTargetButton
return

PopFolders:
Iniread, RJSYSTEMS, Settings.ini,GLOBAL,systems_directory
if (RJSYSTEMS = "ERROR")
	{
		RJSYSTEMS= %coreassetsdirectory%
		IniWrite, "%coreassetsdirectory%",Settings.ini,GLOBAL,systems_directory
	}
if (RJSYSTEMS = "")
	{
		RJSYSTEMS= %coreassetsdirectory%
		IniWrite, "%coreassetsdirectory%",Settings.ini,GLOBAL,systems_directory
	}
totsys:= 0
allsys= 
systmfldrs= 
dwnlfldrs= 
Loop, %RJSYSTEMS%\*,2
	{
		allsys+=1
		sysnam= %A_LoopFileName%
		systmfldrs .= A_LoopFileName . "|"
		dwnlfldrs .= A_LoopFileName . "|"
		Loop,Read, LkUp.set
			{
				systmpnm1= 
				systmpnm2= 
				stringsplit, systmpnm, A_LoopReadLine,=
				if (sysnam = systmpnm1)
					{
						totsys+= 1
					}
			}
	}
SWAPNAM= ROMJACKETS
SWAPLOC= %RJSYSTEMS%
SWAPPOP= %systmfldrs%
guicontrol,,DWNLPOS,|%SWAPNAM%||%SWAPPOP%
guicontrol,,SKSYSDISP,%SWAPLOC%
guicontrol,,RJSYSDD,|Systems||%systmfldrs%
return

PopDownloads:
gui, submit, nohide
omitxtv= 
guicontrolget,RPOPDL,,RPOPDL
guicontrolget, EXCLBOOL,,EXCLBOOL
guicontrolget, DWNLPOS,,DWNLPOS
guicontrol,,PLNAMEDT,|%DWNLPOS%||%sysposb%
guicontrolget, RECURSE,,RECURSE
guicontrol, show, RECURTX
guicontrol, show, RECURSE
guicontrol,,EXTPARSED

if (DWNLPOS = "%SWAPNAM%")
	{
		guicontrol, hide, RECURTX
		guicontrol, hide, RECURSE
		guicontrol,,RECURSE,0
		;;guicontrol, move, ROMPOP, x24 y44 w316 h433
		guicontrol, hide, EXTPARSED 
		guicontrol, hide, PARSEALL
		guicontrol, hide, INCLBOOL 
		guicontrol, hide, EXCLBOOL 
		guicontrol, hide, FLTXT
		guicontrol, enable,EXCLBOOL
		guicontrol, ,EXCLBOOL, 1
		guicontrol, enable, INCLBOOL
		guicontrol, enable, EXTPARSED
		guicontrol, ,EXTPARSED, |%omitxtv%
		return
	}


if (DWNLPOS = "Playlists")
	{
		guicontrol, hide, RECURTX
		guicontrol, hide, RECURSE
		guicontrol,,RECURSE,0
		;;guicontrol, move, ROMPOP, x24 y44 w316 h433
		guicontrol, hide, EXTPARSED 
		guicontrol, hide, PARSEALL
		guicontrol, hide, INCLBOOL 
		guicontrol, hide, EXCLBOOL 
		guicontrol, hide, FLTXT
		guicontrol, enable,EXCLBOOL
		guicontrol, ,EXCLBOOL, 1
		guicontrol, enable, INCLBOOL
		guicontrol, enable, EXTPARSED
		guicontrol, ,EXTPARSED, |%omitxtv%
		return
	}

Loop, Read, libmatch.set
	{
		libmlk1= 
		libmlk2= 
		StringSplit,libmlk, A_LoopReadLine,|
		if (libmlk2 = DWNLPOS)
			{
				ifExist, %libretrodirectory%\%libmlk1%
					{
						guicontrol,,PLCORE,|%libmlk1%||%runlist%
					}
			}
	}
if (RPOPDL = 0)
	{
		goto, PopPLpl
	}

omitxtv:= omitxj

if (EXCLBOOL = 1)
	{		
		stringreplace, omitxtt, omitxtt,`,,|, All
		guicontrol,,EXTPARSED, |%omitxtv%
		goto, EXFilter
	}

ExtParsing:	
listswp= 
matchinfo= 
POPLDWN= 
EXTPARSED= 
extoutp1= 
extoutp2= 
Loop, Read, libmatch.set
	{
		libmlk1= 
		libmlk2= 
		StringSplit,libmlk, A_LoopReadLine,|
		if (libmlk2 = DWNLPOS)
			{
				SplitPath,libmlk1,,,,matchinfo
				matchinfo= %matchinfo%.info
				Loop, Read, %raexeloc%\info\%matchinfo%
					{
						extoutp1= 
						extoutp2= 
						stringsplit,extoutp, A_LoopReadLine,=,%A_Space% ""
						if (extoutp1 = "supported_extensions")
							{
								listswp= 1
								StringReplace, omitxtr, extoutp2,|,`,,All
								omitxtv:= omitxtr . "|" . "|" . omitxtv
								guicontrol,,INCLBOOL,1
								break
							}
					}
			}
	}

if (extoutp2 = "")
	{
		if (EXCLBOOL = 1)
			{			
				{
					listswp= 1
					extoutp2:= omitxi
					stringreplace, omitxtv, extoutp2,|,`,, All
				}
			}
	}

guicontrol,,EXTPARSED, |%omitxtv%
stringsplit,omitxtf,omitxtv,|
stringreplace, pipxtr, omitxtf1,`,,|, All
stringsplit,omitxtn,pipxtr,|

FilterTargetButton:
ar := Object()
Loop, %omitxtn0%
	{
		new= % (omitxtn%a_index%)
		if (omitxtn%a_index% <> "")
			{
				ar.insert(new)
			}
	}
Loop,%coreassetsdirectory%\%DWNLPOS%\*.*,,%RECURSE%
	{
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		if (noapl = 1)
			{
				POPLDWN .= A_LoopFileFullPath . "|"
			}
	}
guicontrol,,ROMPOP,|%POPLDWN%
return

PopPLpl:
gui,submit,nohide
guicontrol, hide, RECURTX
guicontrol, hide, RECURSE
PLineNum= 
PLineAdd=
poptadd= 
splitpath,DWNLPOS, , , ,DDLUX
Loop, Read, %playlistDirectory%\%DWNLPOS%,|
	{
		PLineNum+=1
		PLineAdd+=1
		if (PLineAdd = 1)
			{
				romhn1= 
				romhn2= 
				StringSplit,romhn,A_LoopReadLine,#
				if (romhn2 = "")
					{
						romhn2= %romhn1%
					}							
				if (romf = "")
					{
						romf= %romhn1%
					}
				poptadd.= romhn1 . "|"
			}
		if (PLineAdd =  6)
			{
				PLineAdd= 
			}
	}
guicontrol,,ROMPOP,|%poptadd%
gosub, EDTROM
return

EXFilter:
listswp= 
matchinfo= 
EXTPARSED= 
extoutp1= 
extoutp2= 
omitxtd= 

guicontrolget,omitxtt,, EXTPARSED
stringsplit,omitxtp,omitxtt,|
stringreplace,omitxty,omitxp1,`,,|,All
stringsplit,omitxtn,omitxty,|

OutList:
POPLDWN= 
ar := Object()
Loop, %omitxtn0%
	{
		new= % (omitxtn%a_index%)
		if (omitxtn%a_index% <> "")
			{
				ar.insert(new)
			}
	}
Loop,%coreassetsdirectory%\%DWNLPOS%\*.*,,%RECURSE%
	{
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		if (noapl = "")
			{
				POPLDWN .= A_LoopFileFullPath . "|"
			}
	}
guicontrol,,ROMPOP,|%POPLDWN%
return

ParseAll:
gui, submit, nohide
guicontrolget,PARSEALL,,PARSEALL

if (PARSEALL = 1)
	{
		guicontrol,,EXCLBOOL,1
		guicontrol,,EXTPARSED,|%omitxi%||
		guicontrol, disable, EXCLBool
		guicontrol, disable, INCLBool
		guicontrol, disable, EXTPARSED
		POPLDWN= 
		Loop,%coreassetsdirectory%\%DWNLPOS%\*.*,,%RECURSE%
			{
				POPLDWN .= A_LoopFileFullPath . "|"
			}
		guicontrolget, existingpop,,ROMPOP
		if (existingpop = "")
			{
				guicontrol,,ROMPOP,|%POPLDWN%
				return
			}
		guicontrol,,ROMPOP,|%existingpop%|%POPLDWN%
		return
	}

if (PARSEALL = 0)
	{
		guicontrol, enable, EXCLBool
		guicontrol, enable, INCLBool
		guicontrol, enable, EXTPARSED
		guicontrolget,INCLBOOL,,INCLBOOL
		if (INCLBOOL = 1)
			{
				gosub, ExtParsing
				guicontrol,,EXTPARSED, |%omitxtv%
				return
			}
	}

gosub, ExFilter	
guicontrol,,EXTPARSED, |%omitxtv%
return


PLPerGameConfig:
gui, submit, nohide
if (PGCONFG = 1)
	{
		gameSpecificOptions= true
		IniWrite, "%gameSpecificOptions%", %curcfg%,OPTIONS,game_specific_options
	}
return

PopulateCore:
gui, submit, nohide
gosub, CorePLInfo
return

FoundRemove:
stringreplace, newplst,existlst,%itmprsed%,|,All
stringreplace, newplst,newplst,||,|,All
existlst= %newplst%
RemLP:
if (plopen = 1)
	{
		delpline= 
		farline= 
		Loop, Read, %popPlist%
			{
				delpline+=1
				if (A_LoopReadLine = itmprsed)
					{
					   farline:= delpline
					   farline+=5
						return
					}
			}			
	}
	if (deltd > delnum)
		{
			goto, RemLP
		}
return

RemFromPL:
if (fenam = "EmulationStation")
	{
		FileDelete,rj\ES\%syssub%\%gamesel%.ini
	}
existlst= 
curpllst= 
ControlGet,curpllst, List,,,ahk_id %insel%
delnum= 
Loop, Parse,curpllst,`n
	{
		delnum+=1
		existlst .= (A_Index == 1 ? "" : "|") . A_LoopField
	}
guicontrolget,torempl,,CURPLST

Loop,Parse,torempl,|
	{
		itmprsed= %A_LoopField%
		gosub, FoundRemove		
		if (plopen = 1)
		{
			TF_RemoveLines("!"popPlist,delpline,farline)
		}
}
;Sort,newplst,D|
guicontrol,,CURPLST,|%newplst%
return


CopyToPl:
guicontrolget, passlist, ,ROMPOP
guicontrol,,CURPLST, %passlist%
existlst= %passlist%
gui, submit, nohide
return

NiceName:
Loop, Read, gam\MAME.gam
	{
		stringsplit,romtitl,A_LoopReadLine,=
		if (romn = romtitl1)
			{
				romname= %romtitl2%
			}
	}
return

createPLNAME:
msgbox,,No Playlist Name,A playlist name must be specified to create a playlist.
return

SaveToPl:
SB_SetText("Creating Playlist ... ")
;{;;;;;fold
if (plsave = "") 
	{
		plsave= %raexeloc%\playlists
	}
coreloc= %libretroDirectory%
plstdir= %playlistDirectory%
ifnotexist, %plstdir%
	{
		FileCreateDir,%plstdir%
	}
;};;;;;;;;;;;
ControlGet,curpllst, List,,,ahk_id %insel%
existlst= 
Loop, Parse,curpllst,`n
	{
		if (A_LoopField <> ",")
		{
			existlst .= (A_Index == 1 ? "" : "|") . A_LoopField
		}
	}
plmatch= 
plsep= 
plsep1= 
plsep2= 
coretitle= 
SYSNAME= 
guicontrolget,SYSNAME,,PLNAMEDT
if (SYSNAME = "")
	goto, createPLNAME

guicontrolget,ZIPSEEK,,ZIPSEEK

PlaylistSaving:
guicontrol, disable, CLRPP
guicontrol, disable, PLINIT
guicontrol, disable, CLRPL
guicontrol, disable, BRADD
guicontrol, disable, CPYPL
guicontrol, disable, SVAPLST
guicontrol, disable, SVPLST
guicontrol, disable, REMPL
ARCDTYP= 
guicontrolget, plmatch, ,PLCORE
stringreplace, plsep,plmatch,_libretro.dll,|,All
stringsplit, plund,plsep,_ |
stringreplace, ccv, plmatch,_libretro.dll, ,All
coretitle= %plund1% %plund2% %plund3%
stringleft,arcdt,plsep,4
if (SYSNAME = "MAME")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "MAME - Arcade")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Sega - Model 2")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Sega - Model 3")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Capcom Play System - CPS III")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Capcom Play System - CPS II")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Capcom Play System - CPS")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "SNK - Neo Geo MVS")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "SNK - Neo Geo AES")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Sega - NAOMI")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "Sammy - Atomiswave")
	{
		ARCDTYP= 1
	}
if (arcdt = "mame")
	{
		ARCDTYP= 1
	}
if (arcdt = "fbal")
	{
		ARCDTYP= 1
	}
FileDelete,tmp.lpl
Loop, Parse, existlst,|
	{
		INZIP= 
		ApndCRC= 
		CrCFLN= %A_LoopField%
		if (A_LoopField = "")
			{
				continue
			}
		if (A_LoopField = ".")
			{
				continue
			}
		splitpath,A_LoopField,romn,romind,romext,romname
		if (romext = "zip")
			{
				INZIP= 1
			}
		if (romext = "7z")
			{
				INZIP= 1
			}
		if (ZIPSEEK = 1)
			{
				gosub, ZIPCRC
			}
		if (ZIPSEEK = 0)
			{
				INZIP= 
			}
		if (INZIP = "")
			{
				Fileappend, %A_LoopField%`n,tmp.lpl
				if (ARCDTYP = 1)
						{	
							gosub NiceName
						}
				FileAppend,%romname%`n,tmp.lpl
				FileAppend,%CRDETECT%`n,tmp.lpl
				FileAppend,%NMDETECT%`n,tmp.lpl
						gosub, CRC32GET
				FileAppend,%ApndCRC%|crc`n,tmp.lpl
				
				FileAppend,[PLSYS]`n,tmp.lpl
			}
	}
FileRead, planm, tmp.lpl
StringReplace, grb, planm, [PLSYS],%SYSNAME%.lpl, All
rbldb= 
ifexist,%plsave%\%SYSNAME%.lpl
	{
		rbldb= 1
	}
guicontrolget,PLCTYP,,PLOVR
if (PLCTYP = 1)
	{
		FileDelete,%plsave%\%SYSNAME%.lpl
	}
FileAppend, %grb%, %plsave%\%SYSNAME%.lpl
if (TmplCfg = "")
	{
		TemplCfg= %curcfg%
	}
if (PGCONFG = 1)
	{
		gosub, getCREN
		ifnotexist,,%raexeloc%\config\%corcfgnam%
			{
				FileCreateDir,%raexeloc%\config\%corcfgnam%
			}
		Loop,Parse,existlst,|
			{
				splitpath,A_LoopField,romn, ,romext,romname
				FileCopy,%TemplCfg%,%raexeloc%\config\%corcfgnam%\%romname%.cfg,%PLOVR%
			}
	}
guicontrol, enable, CLRPP
guicontrol, enable, CLRPL
guicontrol, enable, PLINIT
guicontrol, enable, BRADD
guicontrol, enable, CPYPL
guicontrol, enable, SVAPLST
guicontrol, enable, SVPLST
guicontrol, enable, REMPL
msgbox,0,,"%plsave%\%SYSNAME%.lpl" playlist created.,5
gosub, resetPlaylists
SB_SetText(" Playlsit -" SYSNAME "- created ")
if (rbldb = 1)
	{
		gosub, PlaylistInit
		return
	}
gosub, ApndPL
return

ZipSeek:
gui, submit,nohide
return

ApndPL:
FileDelete,tmp.ini
Loop, Read, %plsave%\%SYSNAME%.lpl
	{
			totn+= 1
			anum+= 1
			if (anum = 1)
				{
					fnm= %A_LoopReadLine%
				}
			if (anum = 5)
				{
					gten:= ""
					gten:= totn - 4
					stringsplit, crchsh,A_LoopReadLine,|
					FileAppend,%fnm%|%pln%|%gten%|%crchsh1%`n,tmp.ini
				}
			if (anum = 6)
				{
					anum= 
				}
		}
FileRead, newpl,tmp.ini
Runwait, %comspec% cmd /c "copy /b tmp.ini + hashdb.ini fullhash.ini",,Hide
FileMove,fullhash.ini,hashdb.ini,1
return

PlaylistEdit:
SYSNAME= %PLNAMEDT%
gui, submit, nohide
return

MatchCore:
loop, read, libmatch.set
	{
		stringsplit,crmt,A_LoopReadLine,|
		if (crmt1 = curcore)
			{
				SySMat= %crmt2%
			}
	}
return

MatchSyst:

Loop,read,libmatch.set
					{
					stringsplit, symt,A_LoopReadLine,|
				if (symt2 = ARCSYS)
					{
						ifexist, %libretroDirectory%\%symt1%
							{
								recore .= symt1 . "|"
								selctdcore= %symt1%
							}
					}
				}
		if (selctdcore <> "")
			{
				coreselv= %selctdcore%
			}
		topcore .= recore . "|" . runlist
		guicontrol,,LCORE, |%topcore%
		guicontrol,,ARCCORES, |%topcore%
		if (CLActive = 1)
			{
				guicontrol,,NETCORE, |%topcore%
			}
return

AddToPL:
addedfiles= 
FileSelectFile,AddToPl,M3,,Add ROMs,
if (AddToPl = "")
	{
		return
	}
Loop, Parse,AddToPl,`n
	{
		if (A_index = 1)
			{
				FPTH= %A_LoopField%
			}
		If (A_index <> 1)
			{
				addedFiles .= FPTH . "\" . A_LoopField . "|"
			}
	}
ControlGet,curpllst, List,,,ahk_id %insel%
existlst= 
Loop, Parse,curpllst,`n
	{
		existlst .= (A_Index == 1 ? "" : "|") . A_LoopField
	}
newplst .= existlst . "|" . addedFiles
guicontrol,,CURPLST, |%newplst%
return

AltTempl:
TemplCfg= 
FileSelectFile, TemplCfg, S27, %plstdir%, Select Template Config, retroarch cfg (*.cfg)
if (TemplCfg = "")
	{
		return
	}
splitpath, TemplCfg, Tmplcfgfile, tmplcfgloc, tmplcfgxt, tmplcfgnm, tmplcfgdrv
return

ZIPCRC:
FileDelete,adpl.ini
if (ARCDTYP = 1)
	{
		INZIP= 
		return
	}
linfo= 
ROMZ= 
Runwait,%comspec% /c "7za.exe l -slt "%CrCFLN%" >7z.ini ",,hide
Loop, Read, 7z.ini
	{
		line1= 
		line2= 
		StringSplit,line,A_loopReadline,=,%A_Space%
		if (line1 = "----------")
			{
				linfo= 1
			}
		if (linfo = "1")
			{
				if (line1 = "Path")
					{
						ROMZ:= line2
					}
				if (line1 = "CRC")
					{
						FileAppend,%ROMZ%=%line2%`n,adpl.ini
					}
			}
	}
Loop, Read,adpl.ini
	{
		zipspl1= 
		zipspl2= 
		zipt= 
		zipxt= 
		ziprn= 
		zipp= 
		StringSplit,zipspl,A_LoopReadLine,=
		SplitPath,zipspl1,zipt,zipp,zipxt,ziprn
		FileAppend, %CrCFLN%#%zipt%`n,tmp.lpl
		FileAppend,%ziprn%`n,tmp.lpl
		FileAppend,%CRDETECT%`n,tmp.lpl
		FileAppend,%NMDETECT%`n,tmp.lpl
		FileAppend,%zipspl2%|crc`n,tmp.lpl		
		FileAppend,[PLSYS]`n,tmp.lpl
	}
return


;{;;;;;;;;;;;;;;;;;;;;;;;;;  EMULATIONSTATION PLAYLIST FUNCTIONS  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ESROMROOT:
gui,submit,nohide
ESROOTFLDTMP= 
SB_SetText("Current ROM folder is set to " ESROOTFLD "")
FileSelectFolder,ESROOTFLDTMP,3,Select the ROM folder
if (ESROOTFLDTMP = "")
	{
		return
	}
ESROOTFLD= %ESROOTFLDTMP%
SB_SetText("Current ROM folder is set to " ESROOTFLD "")
guicontrol,,ESRRTXT, ROM Directory is SET
ESROMLST= 
Loop, %ESROOTFLD%\*.*
	{
		ESROMLST.= A_LoopFileFullPath . "|"
	}
guicontrol,,ROMPOP,|%ESROMLST%
return

ESPOPCORE:
gui,submit,nohide
return
ESBackupPl:
gui,submit,nohide
return

ESSavePl:
gui,submit,nohide
SB_SetText("Creating Playlist ... ")
SYSNAME= 
guicontrolget,SYSNAME,,ESPLXMP
if (SYSNAME = "")
	{
		SB_SetText("You Must have a name for your playlist.")
		return
	}	
;{;;;;;fold
plsave= 
if (plsave = "") 
	{
		plsave= %ESHOME%\gamelists
	}
plstdir= %plsave%\%SYSNAME%

ifnotexist, %plstdir%
	{
		FileCreateDir,%plstdir%
	}
;};;;;;;;;;;;
ControlGet,curpllst, List,,,ahk_id %insel%
existlst= 
Loop, Parse,curpllst,`n
	{
		if (A_LoopField <> ",")
		{
			existlst .= (A_Index == 1 ? "" : "|") . A_LoopField
		}
	}
plmatch= 
plsep= 
plsep1= 
plsep2= 
coretitle= 

ESPlaylistSaving:
guicontrol, disable, SVAPLST
guicontrol, disable, SVPLST
guicontrol,disable,ESPLCORE
guicontrol,disable,ROMPOP
guicontrol,disable,CURPLST
guicontrol,disable,CLRPP
guicontrol,disable,PLINIT
guicontrol,disable,CLRPL
guicontrol,disable,BRADD
guicontrol,disable,CPYPL
guicontrol,disable,REMPL
guicontrol,disable,ESSVPL
guicontrol,disable,ESOPENPL
guicontrol,disable,ESTHUMBSRCHBUT
guicontrol,disable,ESMARQSRCHBUT
guicontrol,disable,ESVIDSRCHBUT

ARCDTYP= 
guicontrolget, ESPLCORE, ,ESPLCORE
if (SYSNAME = "MAME")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "arcade")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "model2")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "model3")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "cps3")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "cps2")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "cps")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "neogeo")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "neocd")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "naomi")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "atomiswave")
	{
		ARCDTYP= 1
	}
if (SYSNAME = "fba")
	{
		ARCDTYP= 1
	}
FileDelete,tmp.xml
FileAppend,<gameList>`n,tmp.xml

if (ESCPYSCR = 1)
	{
		FileCreateDir, %ESHOME%\downloaded_images\%SYSNAME%
		FileCreateDir, %ESHOME%\downloaded_videos\%SYSNAME%
	}
Loop, Parse, existlst,|
	{		
		TOTPTH= %ESROOTFLD%\%A_LoopField%
/*
		ifinstring,A_LoopField,:
			{
				ESABSOL= 1
				TOTPTH= %A_LoopField%
			}
			*/
		splitpath,TOTPTH,romn,romind,romext,romname,romdd
		imgetn= %romname%
		if (ESPLCORE = "Fuzzy-Match")
			{
				stringsplit,romspl,romname,([
				imgetn= %romspl1%*
			}
		ESK= 
		imgetb= %imgetn%
		if (ESUSESCR = 1)
			{
				ESBOXPATH= rj\netArt\ScrapeArt\%SYSNAME%\%romname%\BoxArt
				imgetb= %imgetn%
			}
		if (ESBOXPATH = "")
			{
				ESBOX= 1
				ESBOXPATH= %ESHOME%\downloaded_images\%SYSNAME%
				imgetb= %imgetn%-image
			}
		ROMIMAGEMATCH= 
		  Loop, %ESBOXPATH%\%imgetb%.*
			{	
				ROMIMAGEMATCH= %A_LoopFileFullPath%
				newxt= 
				splitpath,ROMIMAGEMATCH,,,newxt
				if (ESCPYSCR = 1)
					{
						ESIMG= 1
						FileCopy, %ROMIMAGEMATCH%, %ESHOME%\downloaded_images\%SYSNAME%\%romname%-image.%newxt%
					}
				break
			}
		ESMARQ= 	
		imgetm= %imgetn%
		if (ESUSESCR = 1)
			{
				ESMARQUEEPATH= rj\netArt\ScrapeArt\%SYSNAME%\%romname%\Marquees
				imgetb= %imgetn%
			}
		if (ESMARQUEEPATH = "")
			{
				ESMARQ= 1
				ESMARQUEEPATH= %ESHOME%\downloaded_images\%SYSNAME%
				imgetm= %imgetn%-marquee

			}
		ROMMARQUEEMATCH= 
		Loop, %ESMARQUEEPATH%\%imgetm%.*
			{	
				ROMMARQUEEMATCH= %A_LoopFileFullPath%
				newxt= 
				splitpath,ROMMARQUEEMATCH,,,newxt
				if (ESCPYSCR = 1)
					{
						ESMARQ= 1
						FileCopy, %ROMMARQUEEMATCH%, %ESHOME%\downloaded_images\%SYSNAME%\%romname%-marquee.%newxt%
					}
				break
			}
		ESTHU= 
		imgett= %imgetn%
		if (ESUSESCR = 1)
			{
				ESTHUMBNAILPATH= rj\netArt\ScrapeArt\%SYSNAME%\%romname%\Snapshots
				imgetb= %imgetn%
			}
		if (ESTHUMBNAILPATH = "")
			{
				ESTHU= 1
				ESTHUMBNAILPATH= %ESHOME%\downloaded_images\%SYSNAME%
				imgett= %imgetn%-thumb
				
			}
		ROMTHUMBNAILMATCH= 
		Loop, %ESTHUMBNAILPATH%\%imgett%.*
			{	
				ROMTHUMBNAILMATCH= %A_LoopFileFullPath%
				newxt= 
				splitpath,ROMTHUMBNAILMATCH,,,newxt
				if (ESCPYSCR = 1)
					{
						ESTHU= 1
						FileCopy, %ROMTHUMBNAILMATCH%, %ESHOME%\downloaded_images\%SYSNAME%\%romname%-thumb.%newxt%
					}
				break
			}
		ESVID= 
		imgetv= %imgetn%
		if (ESUSESCR = 1)
			{
				ESVIDEOPATH= rj\netArt\ScrapeArt\%SYSNAME%\%romname%\Videos
				imgetb= %imgetn%
			}
		if (ESVIDEOPATH = "")
			{
				ESVID= 1
				ESVIDEOPATH= %ESHOME%\download_videos\%SYSNAME%
				imgetv= %imgetn%-video
			}
		ROMVIDEOMATCH= 
		Loop, %ESVIDEOPATH%\%imgetv%.*
			{	
				ROMVIDEOEMATCH= %A_LoopFileFullPath%
				newxt= 
				splitpath,ROMVIDEOEMATCH,,,newxt
				if (ESCPYSCR = 1)
					{
						ESVID= 1
						FileCreateDir, %ESHOME%\downloaded_videos\%SYSNAME%\
						FileCopy, %ROMVIDEOEMATCH%, %ESHOME%\downloaded_videos\%SYSNAME%\%romname%-video.%newxt%
					}
				break
			}
		if (ESUSESCR = 1)
			{
				pulmeta= 
				pulrate= 
				puldate= 
				pulhid= 
				puldev= 
				pulpub= 
				pulgen= 
				pulpl= 
				pulkid= 
				pulfav= 
				metaspl1=
				metaspl2=
				metaspl3=
				Loop, rj\netArt\scrapeArt\%SYSNAME%\%romname%\MetaData\*.xml
					{
						fndmet= 
						FileRead,metadt,%A_loopfilefullpath%
						Loop, Parse, metadt, `n, `r
							{
								stringsplit,metaspl,A_LoopField,<>
								if (metaspl2 = "hidden")
									{
										pulhid= %metaspl3%
									}
								if (metaspl2 = "kidgame")
									{
										pulfav= %metaspl3%
									}
								if (metaspl2 = "favorite")
									{
										pulfav= %metaspl3%
									}
								if (metaspl2 = "released")
									{
										puldate= %metaspl3%
									}
								if (metaspl2 = "developer")
									{
										puldev= %metaspl3%
									}
								if (metaspl2 = "publisher")
									{
										pulpub= %metaspl3%
									}
								if (metaspl2 = "genre")
									{
										pulgen= %metaspl3%
									}
								if (metaspl2 = "players")
									{
										pulpl= %metaspl3%
									}
								if (metaspl2 = "lastplayed")
									{
										pullast= %metaspl3%
									}
								if (metaspl2 = "playcount")
									{
										pulcnt= %metaspl3%
									}
								if (metaspl2 = "rating")
									{
										pulrate= %metaspl3%
									}
								if (metaspl2 = "desc")
									{
										fndmet= 1
										pulmeta.= metaspl3
										if (metaspl4 = "/desc")
											{
												fndmet= 
											}
									}
							if (metaspl2 = "plot")
									{
										fndmet= 1
										pulmeta.= metaspl3
										if (metaspl4 = "/")
											{
												fndmet= 
											}
									}
							if (metaspl2 = "overview")
									{
										fndmet= 1
										pulmeta.= metaspl3
										if (metaspl4 = "/overview")
											{
												fndmet= 
											}
									}
							if (metaspl2 = "notes")
									{
										fndmet= 1
										pulmeta.= metaspl3
										if (metaspl4 = "/notes")
											{
												fndmet= 
											}
									}
								if (fndmet = 1)
									{
										pulmeta.= A_loopfield . "`n"
										ifinstring, pulmeta,</desc>
											{
												fndmet= 
											}
									}
							}
				break	
					}
			}
		pthrom= %A_LoopField%
		if (ESVID = 1)
			{
				stringreplace,ROMVIDEOMATCH,ROMVIDEOMATCH,%ESVIDEOPATH%,/.emulationstation/downloaded_videos/%SYSNAME%,All
			}
		if (ESMARQ = 1)
			{
				stringreplace,ROMMARQUEEMATCH,ROMMARQUEEMATCH,%ESMARQUEEPATH%,/.emulationstation/downloaded_images/%SYSNAME%,All
			}
		if (ESTHU = 1)
			{
				stringreplace,ROMTHUMBNAILMATCH,ROMTHUMBNAILMATCH,%ESTHUMBNAILPATH%,/.emulationstation/downloaded_images/%SYSNAME%,All
			}
		if (ESBOX = 1)
			{
				stringreplace,ROMIMAGEMATCH,ROMIMAGEMATCH,%ESBOXPATH%,/.emulationstation/downloaded_images/%SYSNAME%,All
			}
		stringreplace,pthrom,pthrom,\,/,All
		romsfi= ./%romn%
		
		;;FileAppend,<folder>`n,tmp.xml
		if (pulfav = "")
			{
				pulfav= false
			}
		if (pulkid = "")
			{
				pulkid= false
			}
		if (pulhid = "")
			{
				pulhid= false
			}
		FileAppend,<game>`n,tmp.xml
		FileAppend,<name>%romname%</name>`n,tmp.xml		
		FileAppend,<path>%pthrom%</path>`n,tmp.xml		
		FileAppend,<image>%ROMIMAGEMATCH%</image>`n,tmp.xml
		FileAppend,<thumbnail>%ROMTHUMBNAILMATCH%</thumbnail>`n,tmp.xml
		FileAppend,<marquee>%ROMBANMATCH%</marquee>`n,tmp.xml
		FileAppend,<video>%ROMVIDMATCH%</video>`n,tmp.xml
		FileAppend,<rating>%pulrate%</rating>`n,tmp.xml
		FileAppend,<kidgame>%pulkid%</kidgame>`n,tmp.xml
		FileAppend,<hidden>%pulhid%</hidden>`n,tmp.xml
		FileAppend,<favorite>%pulfav%</favorite>`n,tmp.xml
		FileAppend,<releasedate>%puldate%</releasedate>`n,tmp.xml
		FileAppend,<developer>%puldev%</developer>`n,tmp.xml
		FileAppend,<publisher>%pulpub%</publisher>`n,tmp.xml
		FileAppend,<desc>%pulmeta%</desc>`n,tmp.xml
		FileAppend,<genre>%pulgen%</genre>`n,tmp.xml
		FileAppend,<players>%pulpl%</players>`n,tmp.xml
		FileAppend,<playcount>%pulcnt%</playcount>`n,tmp.xml
		FileAppend,<lastplayed>%pullast%</lastplayed>`n,tmp.xml
		FileAppend,</game>`n,tmp.xml
		
		;;FileAppend,</folder>`n,tmp.xml		
	}
	FileAPpend,</gameList>,tmp.xml
if (ESBACKUP = 1)
	{
		FileCopy,%plstdir%\gamelist.xml,%plstdir%\%SYSNAME%_gamelist.xml.bak,1
	}
FileCopy,tmp.xml,%plstdir%\gamelist.xml,1	
MsgBox,1,GameList Created,Created %plstdir%`nGamelist created.
SB_SetText(" " plstdir " gamelist created")
guicontrol, enable, SVAPLST
guicontrol, enable, SVPLST
guicontrol,enable,ESPLCORE
guicontrol,enable,ROMPOP
guicontrol,enable,CURPLST
guicontrol,enable,CLRPP
guicontrol,enable,PLINIT
guicontrol,enable,CLRPL
guicontrol,enable,BRADD
guicontrol,enable,CPYPL
guicontrol,enable,REMPL
guicontrol,enable,ESSVPL
guicontrol,enable,ESOPENPL
guicontrol,enable,ESTHUMBSRCHBUT
guicontrol,enable,ESMARQSRCHBUT
guicontrol,enable,ESVIDSRCHBUT
return

EsPlaylistNames:
gui,submit,nohide
return


EsOpenPl:
gui,submit,nohide
ESGAMLOTMP=
guicontrolget,SYSNAME,,ESPLXMP
FileSelectFile,ESGAMLOTMP,3,%eshome%\gamelists\%SYSNAME%,Select a gamelist file, gamelist (*.xml)
if (ESGAMLOTMP = "")
	{
		return
	}
splitpath,ESGAMLOTMP,,ESGAMLOD,
splitpath,ESGAMLOD,,,,syspfl
ifnotexist,rj\es\%syspfl%
	{
		FileCreateDir,rj\es\%syspfl%
	}
FileDelete,rj\es\%syspfl%\*.ini
FileDelete,rj\es\n.xml

ESGAMLO= %ESGAMLOTMP%
ESGAMX= 
FileRead, ESGAMX,%ESGAMLO%

SB_SetText("POPULATING")

ESINIPOP= 
ngame= 
ren= 
Loop, Parse, ESGAMX, `n, `r
	{
		if (A_LoopField = "")
			{
				continue
			}
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "game")
			{
				ngame= 
				ngame.= "<game>" . "`n"
				continue
			}
		if (clut2 = "folder")
			{
				ngame= 
				ngame.= "<folder>" . "`n"
				continue
			}
		if (clut2 = "path")
			{
				esfpath= %clut3%
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "name")
			{
				ren= %clut3%
				stringreplace,ren,ren,\,,All
				stringreplace,ren,ren,/,,All
				stringreplace,ren,ren,?,-,All
				stringreplace,ren,ren,<,-,All
				stringreplace,ren,ren,>,-,All
				stringreplace,ren,ren,=,-,All
				stringreplace,ren,ren,`%,-,All
				stringreplace,ren,ren,*,-,All
				stringreplace,ren,ren,:,-,All
				stringreplace,ren,ren,&#39;,',All
				stringreplace,ren,ren,&amp;,&,All
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue		
			}
		if (clut2 = "image")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "marquee")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "video")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "desc")
			{
				desx= %clut3%
				ngame.= "<" . clut2 . ">" . desx . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "plot")
			{
				desx= %clut3%
				ngame.= "<" . clut2 . ">" . desx . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "overview")
			{
				desx= %clut3%
				ngame.= "<" . clut2 . ">" . desx . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "notes")
			{
				desx= %clut3%
				ngame.= "<" . clut2 . ">" . desx . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "rating")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "releasedate")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue					
			}
		if (clut2 = "kidgame")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue					
			}
		if (clut2 = "favorite")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue					
			}
		if (clut2 = "hidden")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue					
			}
		if (clut2 = "thumbnail")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue					
			}
		if (clut2 = "developer")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "publisher")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "genre")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "players")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "playcount")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "lastplayed")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "rating")
			{
				ngame.= "<" . clut2 . ">" . clut3 . "</" . clut2 . ">" . "`n"
				continue
			}
		if (clut2 = "/folder")
			{
				ngame.= "</folder>" . "`n"
				if (ren = "")
					{
						stringreplace,esfpath,esfpath,/,\,All
						splitpath,esfpath,,,,ren
					}
				incv= 	
				inc= 	
				INCMOVEF:						
				FileAppend,%ngame%`n,rj\es\n.xml
				fileMove,rj\es\n.xml,rj\es\%syspfl%\%ren%%incv%.ini
				if (ERRORLEVEL > 0)
					{
						inc+=1
						incv= _%inc%
						goto, INCMOVEF
					}
				ESINIPOP.= ren . incv . ":" . syspfl . "|"
				ren= 
				esfpath= 
				continue
			}	
		if (clut2 = "/game")
			{
				ngame.= "</game>" . "`n"
				if (ren = "")
					{
						stringreplace,esfpath,esfpath,/,\,All
						splitpath,esfpath,,,,ren
					}
				incv= 	
				inc= 	
				INCMOVEG:
				FileAppend,%ngame%`n,rj\es\n.xml
				fileMove,rj\es\n.xml,rj\es\%syspfl%\%ren%%incv%.ini
				if (ERRORLEVEL > 0)
					{
						inc+=1
						incv= _%inc%
						goto, INCMOVEG
					}
				ESINIPOP.= ren . incv . ":" . syspfl . "|"
				ren= 
				esfpath= 
				continue
			}
	}
guicontrol,,CURPLST,|%ESINIPOP%
SB_SetText("COMPLETE")
opltog= hide
gosub, REMSYSTOG
opntog= show
gosub, ESOPNPL
return

ESCPYSCR:
gui,submit,nohide
return

ESUSESCR:
gui,submit,nohide
guicontrol,disable,ESCPYSCR
if (ESUSESCR = 1)
{
guicontrol,enable,ESCPYSCR
return
}
guicontrol,,ESCPYSCR,0
return

ESMARQSRCHBUT:
gui,submit,nohide
ESMARQUEEPATHTMP= 
FileSelectFolder,ESMARQUEEPATHTMP,3,,Select the path to banners for this system
if (ESMARQUEEPATHTMP = "")
	{
		if (ESMARQUEEPATH <> "")
			{
				MsgBox,260,Reset Maquee Path,Would you like to clear the current banner path?
				ifmsgbox,OK
					{

						ESMARQUEEPATH= 
						SB_SetText("Marquee path cleared")
						guicontrol,,ESMRQCHK,0

					}
			}
		return
	}
ESMARQUEEPATH= %ESMARQUEEPATHTMP%
SB_SetText("Marquee path set to " ESMARQUEEPATH " ")
guicontrol,,ESMRQCHK,1
return


ESVIDSRCHBUT:
gui,submit,nohide
ESVIDEOPATHTMP= 
FileSelectFolder,ESVIDEOPATHTMP,3,,Select the path to videos for this system
if (ESVIDEOPATHTMP = "")
	{
		if (ESVIDEOPATH <> "")
			{
				MsgBox,260,Reset Video Path,Would you like to clear the current Video path?
				ifmsgbox,OK
					{

						ESVIDEOPATH= 
						SB_SetText("VIDEO path cleared")
						guicontrol,,ESVIDCHK,0
					}
			}
		return
	}
ESVIDEOPATH= %ESVIDEOPATHTMP%
SB_SetText("VIDEO path set to " ESVIDEOPATH " ")
guicontrol,,ESVIDCHK,1
return

ESTHUMBSRCHBUT:
gui,submit,nohide
ESTHUMBNAILPATHTMP= 
FileSelectFolder,ESTHUMBNAILPATHTMP,3,,Select the path to thumbnails for this system
if (ESTHUMBNAILPATHTMP = "")
	{
		if (ESTHUMBNAILPATH <> "")
			{
				MsgBox,260,Reset Thumnails Path,Would you like to clear the current thumbnail path?
				ifmsgbox,OK
					{

						ESTHUMBNAILPATH= 
						SB_SetText("thumbnail path cleared")
						guicontrol,,ESTHMBCHK,0
					}
			}
		return
	}
ESTHUMBNAILPATH= %ESTHUMBNAILPATHTMP%
SB_SetText("Thumbnails path set to " ESTHUMBNAILPATH " ")
guicontrol,,ESTHMBCHK,1
return

ESBOXSRCHBUT:
gui,submit,nohide
ESBOXPATHTMP= 
FileSelectFolder,ESBOXPATHTMP,3,,Select the path to boxarts for this system
if (ESBOXPATHTMP = "")
	{
		if (ESBOXPATH <> "")
			{
				MsgBox,260,Reset Box-Art Path,Would you like to clear the current Box-Art path?
				ifmsgbox,OK
					{

						ESBOXPATH= 
						SB_SetText("Box-Art path cleared")
						guicontrol,,ESBOXCHK,0
					}
			}
		return
	}
ESBOXPATH= %ESBOXPATHTMP%
SB_SetText("Box-Art path set to " ESBOXPATH " ")
guicontrol,,ESBOXCHK,1
return

ESPopDownloads:
gui,submit,nohide
LNKLSTP= 
guicontrolget,ESDWNLPOS,,ESDWNLPOS
guicontrol,,ROMPOP,|
if (ESRPOPPL = 1)
	{
		guicontrol,,ESPLXMP,|%ESDWNLPOS%||%ESPLPLST%%escommon%%systmfldrs%
		Loop, %CMIRLOC%\%ESDWNLPOS%\*.lnk,,1
			{
				LNKLSTP.= A_LoopFileFullPath . "|"
			}
		ESROOTFLD= %CMIRLOC%\%ESDWNLPOS%
		stringreplace,LNKLSTP,LNKLSTP,%ESROOTFLD%\,,All
		guicontrol,,ROMPOP,|%LNKLSTP%
		return
	}
if (ESRPOPDL = 1)
	{
		guicontrol,,ESPLXMP,|%ESDWNLPOS%||%ESPLPLST%%escommon%%systmfldrs%
		Loop, %RJSYSTEMS%\%ESDWNLPOS%\*.bat,,1
			{
				LNKLSTP.= A_LoopFileFullPath . "|"
			}
		ESROOTFLD= %RJSYSTEMS%\%ESDWNLPOS%
		stringreplace,LNKLSTP,LNKLSTP,%ESROOTFLD%\,,All
		guicontrol,,ROMPOP,|%LNKLSTP%
		return
	}
if (ESRPOPROM = 1)
	{
		ESFND= 
		Loop, Parse, ESPLPLST,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				mpth= %A_LoopField%
				Loop, Parse, ESPLPLSTA,|
					{
						if (A_LoopField = "")
							{
								continue
							}
						inn1= 
						inn2= 
						stringsplit,inn,A_LoopField,`,
						if (inn1 = ESDWNLPOS)
							{
								ESROOTFLD= %inn2%
								inx1= 
								inx2= 
								inx3= 
								inx4= 
								inx5= 
								inx6= 
								inx7= 
								inx8= 
								inx9= 
								inx10= 
								inx11= 
								inx12= 
								inx13= 
								inx14= 
								inx15= 
								inx16= 
								inx17= 
								inx18= 
								inx19= 
								innr= %inn3%
								stringreplace,innr,innr,.,,All
								stringsplit,inx,innr,%A_Space%
								guicontrol,,ESRRTXT,%ESROOTFLD%
								ESFND= 1
								break
							}
					}
				if (ESFND = 1)
					{
						break
					}
			}
		guicontrol,,ESPLXMP,|%ESRFLN%||%ESPLPLST%|%escommon%%systmfldrs%
		ESROMLST= 
		if (ESROOTFLD <> "")
			{
				ar := Object()
				Loop, %inx0%
					{
						new= % (inx%a_index%)
						if (inx%a_index% <> "")
							{
								ar.insert(new)
							}
					}
				Loop, %ESROOTFLD%\*.*,,1
					{
						ext= %A_LoopFileExt%
						for k, v in ar
							{
								extm:= v
								if (ext = extm)
									{
										ESROMLST.= A_LoopFileFullPath . "|"
									}
							}
					}
				stringreplace,ESROMLST,ESROMLST,%ESROOTFLD%\,,All
				guicontrol,,ROMPOP,|%ESROMLST%
			}
	}
return

ESRPopJ:
gui,submit,nohide
RPDND=
guicontrol,hide,ESMIRSEL
guicontrol,hide,ESRRTXT
guicontrol,hide,ESROMROOT
guicontrol,,ESPLXMP,|%ESPLPLST%|%escommon%%systmfldrs%
guicontrol,,ESDWNLPOS,|%systmfldrs%
guicontrol,,ROMPOP,|
return

ESRPopMir:
gui,submit,nohide
gosub, ESMIRSEL
RPDND=
guicontrol,show,ESMIRSEL
guicontrol,hide,ESRRTXT
guicontrol,hide,ESROMROOT
guicontrol,,ESPLXMP,|%ESPLPLST%|%escommon%|%systmfldrs%
guicontrol,,ROMPOP,|
return

ESRPopRom:
gui,submit,nohide
RPDND=
guicontrol,,ESDWNLPOS,|
guicontrol,show,ESRRTXT
guicontrol,show,ESROMROOT
guicontrol,hide,ESMIRSEL
guicontrol,,ESDWNLPOS,|%ESPLPLST%
guicontrol,,ESPLXMP,|%ESPLPLST%%escommon%
guicontrol,,ROMPOP,|

if (ESROOTFLD = "")
	{
		SB_SetText("ROM FOLDER IS NOT SET")
		return
	}

splitpath,ESROOTFLD,ESRFLN	
SB_SetText("Current ROM folder is set to " ESROOTFLD "")
ESROMLST= 
Loop, %ESROOTFLD%\*.*
	{
		if (A_LoopFileName = "")
			{
				continue
			}
		ESROMLST.= A_LoopFileFullPath . "|"
	}
guicontrol,,ROMPOP,|%ESROMLST%
return

ESMIRSEL:
gui,submit,nohide
guicontrolget,ESMIRSEL,,ESMIRSEL
iniread,CMIRLOC,Settings.ini,GLOBAL,%ESMIRSEL%
if (CMIRLOC = "ERROR")
	{
		SB_SetText("Mirrors must be created using the ''Mirrored_links'' dropdown of the Frontends tab.")
		return
	}
MIRLSTLOC= 
Loop, %CMIRLOC%\*,2
	{
		if (A_LoopFileName = "")
			{
				continue
			}
		if (A_Index = 1)
			{
				GMIR= %A_LoopFileName%
			}
		MIRLSTLOC.= A_LoopFileName . "|"
	}	
guicontrol,,ESDWNLPOS,|%GMIR%||%MIRLSTLOC%
return


ESKIDG:
;{;;;;;;;;;;;;;;  GAMELISTXML KIDGAME CHECKBOX  ;;;;;;;;;;;;;;;
gui,submit,nohide
espekidgame= false
if (ESKIDG = 1)
	{
		espekidgame= true
	}
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "kidgame")
			{
				ESREPL.= "<kidgame>" . espekidgame . "</kidgame>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;;

ESHIDDEN:
;{;;;;;;;;;;;;;;  GAMELISTXML HIDDEN CHECKBOX  ;;;;;;;;;;;;;;;
gui,submit,nohide
espehidden= false
if (ESHIDDEN = 1)
	{
		espehidden= true
	}
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "hidden")
			{
				ESREPL.= "<hidden>" . espehidden . "</hidden>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;

ESFAV:
;{;;;;;;;;;;;;;;  GAMELISTXML FAVORITE CHECKBOX  ;;;;;;;;;;;;;;;
gui,submit,nohide
espefavorite= false
if (ESFAV = 1)
	{
		espefavorite= true
	}
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "favorite")
			{
				ESREPL.= "<favorite>" . espefavorite . "</favorite>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ESTHUMBBUT:
;{;;;;;;;;;;;;;;  GAMELISTXML THUMBNAIL BUTTON  ;;;;;;;;;;;;;;;
gui,submit,nohide
ESTHTMP= 
FileSelectFile,ESTHTMP,3,,Select a Thumbnail
if (ESTHTMP = "")
	{
		return
	}
espethumbnail= %ESTHTMP%	
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "thumbnail")
			{
				ESREPL.= "<thumbnail>" . espethumbnail . "</thumbnail>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
imgprev= %espethumbnail%
guicontrol,,ESTHUMBP,%espethumbnail%
return
;};;;;;;;;;;;;;;;;;

ESMARQBUT:
;{;;;;;;;;;;;;;;  GAMELISTXML MARQUEE BUTTON  ;;;;;;;;;;;;;;;
gui,submit,nohide
ESTHTMP= 
FileSelectFile,ESTHTMP,3,,Select a marquee
if (ESTHTMP = "")
	{
		return
	}
espemarquee= %ESTHTMP%	
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "marquee")
			{
				ESREPL.= "<marquee>" . espemarquee . "</marquee>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
imgprev= %espemarquee%
guicontrol,,ESMARQPTHTXT,%espemarquee%
return
;};;;;;;;;;;;;;;;

ESVIDBUT:
;{;;;;;;;;;;;;;;  GAMELISTXML VIDEO BUTTON  ;;;;;;;;;;;;;;;
gui,submit,nohide
ESTHTMP= 
FileSelectFile,ESTHTMP,3,,Select a video
if (ESTHTMP = "")
	{
		return
	}
espevideo= %ESTHTMP%	
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "video")
			{
				ESREPL.= "<video>" . espevideo . "</video>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
guicontrol,,ESVIDPTHTXT,%espevideo%
return
;};;;;;;;;;;;;;

ESIMGBUT:
;{;;;;;;;;;;;;;;  GAMELISTXML IMAGE BUTTON  ;;;;;;;;;;;;;;;
gui,submit,nohide
ESTHTMP= 
FileSelectFile,ESTHTMP,3,Select a image
if (ESTHTMP = "")
	{
		return
	}
espeimage= %ESTHTMP%	
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "image")
			{
				ESREPL.= "<image>" . espeimage . "</image>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
imgprev= %espeimage%
guicontrol,,ESOPNIMGPTHTXT,%espeimage%
return
;};;;;;;;;;;;;;;;;;;;

ESDESCEDT:
;{;;;;;;;;;;;;;;  GAMELISTXML DESCRIPTION EDIT  ;;;;;;;;;;;;;;;
gui,submit,nohide
guicontrolget,espedesc,,ESDESCEDT
stringreplace,espedesc,espedesc,`n,[CR],All
stringreplace,espedesc,espedesc,[CR][CR][CR],[CR],All
stringreplace,espedesc,espedesc,[CR][CR],[CR],All
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "desc")
			{
				ESREPL.= "<desc>" . espedesc . "</desc>" . "`n"
				continue
			}
		if (clut2 = "plot")
			{
				ESREPL.= "<desc>" . espedesc . "</desc>" . "`n"
				continue
			}
		if (clut2 = "overview")
			{
				ESREPL.= "<desc>" . espedesc . "</desc>" . "`n"
				continue
			}
		if (clut2 = "notes")
			{
				ESREPL.= "<desc>" . espedesc . "</desc>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%

FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;

ESNAMEDT:
;{;;;;;;;;;;;;;;  GAMELISTXML NAME EDIT  ;;;;;;;;;;;;;;;
gui,submit,nohide
guicontrolget,espename,,ESNAMEDT
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "name")
				{
				ESREPL.= "<name>" . espename . "</name>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;;;

ESPTHEDT:
;{;;;;;;;;;;;;;;  GAMELISTXML PATH EDIT  ;;;;;;;;;;;;;;;
gui,submit,nohide
guicontrolget,espepath,,ESPTHEDT
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "path")
			{
				ESREPL.= "<path>" . espepath . "</path>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;

ESPUBEDT:
;{;;;;;;;;;;;;;;  GAMELISTXML PUBLISHER EDIT  ;;;;;;;;;;;;;;;
gui,submit,nohide
guicontrolget,espepublisher,,ESPUBEDT
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "publisher")
			{
				ESREPL.= "<publisher>" . espepublisher . "</publisher>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;

ESGENEDT:
;{;;;;;;;;;;;;;;  GAMELISTXML GENRE EDIT  ;;;;;;;;;;;;;;;
gui,submit,nohide
guicontrolget,espegenre,,ESGENEDT
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "genre")
			{
				ESREPL.= "<genre>" . espegenre . "</genre>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;;;;;;;

ESDEVEDT:
;{;;;;;;;;;;;;;;;  GAMELISTXML DEVELOPER EDIT  ;;;;;;;;;;;;;;
guicontrolget,espedeveloper,,ESDEVEDT
gui,submit,nohide
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "developer")
			{
				ESREPL.= "<developer>" . espedeveloper . "</developer>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return

ESRLSDG:
return

ESDDPLNUM:
gui,submit,nohide
guicontrolget,ESDDPLNUM,,ESDDPLNUM
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "players")
			{
				ESREPL.= "<players>" . ESDDPLNUM . "</players>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
guicontrol,,ESDDPLNUM,%ESDDPLNUM%
return
;};;;;;;;;;;;;

ESRATSLD:
gui,submit,nohide
guicontrolget,ESRATSLD,,ESRATSLD
ESRATSLD:= (ESRATSLD / 10)
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "rating")
			{
				ESREPL.= "<rating>" . ESRATSLD . "</rating>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return

ESEDTPOP:
;{;;;;;;;;;;;;;;;;;  GAMELIST LOAD GAME-INI  ;;;;;;;;;;;;;;;
vvi1= 
vvi2= 
stringsplit,vvi,CURPLST,:
syssub= %vvi2%
if (gamesel <> vvi1)
	{
		if (vvi1 <> "")
			{
				if (gamsel <> "")
					{
						FileDelete,rj\ES\%syssub%\%gamesel%.ini
						FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
					}
			}
		gamsel= 
	}
	
if (crpln <> 1)
{
	guicontrol,,ESFAV,0
	guicontrol,,ESKIDG,0
	guicontrol,,ESHIDDEN,0
	guicontrol,,ESPUBEDT,
	guicontrol,,ESDEVEDT,
	guicontrol,,ESGENEDT,
	guicontrol,,ESPTHEDT,
	guicontrol,,ESNAMEDT,
	guicontrol,,ESRATSLD,
	guicontrol,,ESTHUMBP,
	guicontrol,,ESOPNIMGPTHTXT,
	guicontrol,,ESVIDPTHTXT,
	guicontrol,,ESMARQPTHTXT,
	guicontrol,,ESDDPLNUM,|1||2|3|4|5|6|7|8
	guicontrol,,ESDESCEDT,
	return
}

gamesel= %vvi1%
FileRead,ESGAMP,rj\ES\%syssub%\%gamesel%.ini
Loop, Parse, ESGAMP, `n, `r 
	{
		if (A_LoopField = "")
			{
				continue
			}
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "folder")
			{
				cmpl= 1
				espepublisher=
				espedeveloper=
				espegenre=
				espepath=
				espename=
				esperating= 
				espethumbnail=
				espeimage=
				espevideo=
				espemarquee=
				espelayers=
				espedesc=
				espekidgame=
				espekidg= 0
				espehidden= 
				eshide= 0
				espefavorite= 
				espefav= 0
				continue
			}
		if (clut2 = "game")
			{
				espepublisher=
				espedeveloper=
				espegenre=
				espepath=
				espename=
				esperating=
				espethumbnail=
				espeimage=
				espevideo=
				espemarquee=
				espelayers=
				espedesc=
				espekidg= 0
				eshide= 0
				espefav= 0
				continue
			}		
		if (clut2 = "path")
			{		
				espepath= %clut3%
				continue
			}
		if (clut2 = "name")
			{
				ren= %clut3%
				stringreplace,ren,ren,&#39;,',All
				stringreplace,ren,ren,&amp;,&,All
				espename= %clut3%
				continue
			}
		if (clut2 = "image")
			{
				espeimage= %clut3%	
				continue					
			}
		if (clut2 = "thumbnail")
			{
				espethumbnail= %clut3%
				continue						
			}
		if (clut2 = "marquee")
			{
				espemarquee= %clut3%
				continue
			}
		if (clut2 = "kidgame")
			{	
				espekidgame= %clut3%
				if (clut3 = "true")
					{
						espekidg= 1
				continue
					}
			}
		if (clut2 = "favorite")
			{
				espefavorite= %clut3%
				if (clut3 = "true")
					{
						espefav= 1
				continue
					}
			}
		if (clut2 = "hidden")
			{
				espehidden= %clut3%
				if (clut3 = "true")
					{
					  eshide= 1
				continue
					}
			}
		if (clut2 = "video")
			{
				espevideo= %clut3%
				continue
			}
		if (clut2 = "desc")
			{
				espedesc= %clut3%
				stringreplace,espedeedt,espedesc,&#39;,',All
				stringreplace,espedeedt,espedeedt,&amp;,&,All
				continue
			}
	if (clut2 = "plot")
			{
				espedesc= %clut3%
				stringreplace,espedeedt,espedesc,&#39;,',All
				stringreplace,espedeedt,espedeedt,&amp;,&,All
				continue
			}
	if (clut2 = "overview")
			{
				espedesc= %clut3%
				stringreplace,espedeedt,espedesc,&#39;,',All
				stringreplace,espedeedt,espedeedt,&amp;,&,All
				continue
			}
	if (clut2 = "notes")
			{
				espedesc= %clut3%
				stringreplace,espedeedt,espedesc,&#39;,',All
				stringreplace,espedeedt,espedeedt,&amp;,&,All
				continue
			}
		if (clut2 = "rating")
			{
				esperating= %clut3%
				esperatsld:= (esperating * 10)
				continue
			}
		if (clut2 = "releasedate")
			{
				espereleasedate= %clut3%
				continue
			}
		if (clut2 = "developer")
			{
				espedeveloper= %clut3%
				continue
			}
		if (clut2 = "publisher")
			{
				espepublisher= %clut3%
				continue
			}
		if (clut2 = "genre")
			{
				espegenre= %clut3%
				continue
			}
		if (clut2 = "players")
			{
				espeplayers= %clut3%
				continue
			}
		if (clut2 = "playcount")
			{
				espeplaycount= %clut3%
				continue
			}
		if (clut2 = "lastplayed")
			{
				espelastplayed= %clut3%
				continue
			}
		if (clut2 = "rating")
			{
				esperating= %clut3%
				continue
			}
		if (clut2 = "/folder")
			{
				cpml= 
				guicontrol,,ESFAV,%espefav%
				guicontrol,,ESKIDG,%espekidg%
				guicontrol,,ESHIDDEN,%eshide%
				guicontrol,,ESPUBEDT,%espepublisher%
				guicontrol,,ESDEVEDT,%espedeveloper%
				guicontrol,,ESGENEDT,%espegenre%
				guicontrol,,ESPTHEDT,%espepath%
				guicontrol,,ESNAMEDT,%ren%
				guicontrol,,ESRATSLD,%esperatsld%
				guicontrol,,ESTHUMBP,%espethumbnail%
				guicontrol,,ESOPNIMGPTHTXT,%espeimage%
				guicontrol,,ESVIDPTHTXT,%espevideo%
				guicontrol,,ESMARQPTHTXT,%espemarquee%
				guicontrol,,ESDDPLNUM,%espelayers%||1|2|3|4|5|6|7|8
				guicontrol,,ESDESCEDT,%espedeedt%
				continue
			}
		if (clut2 = "/game")
			{
				cpml= 
				guicontrol,,ESFAV,%espefav%
				guicontrol,,ESKIDG,%espekidg%
				guicontrol,,ESHIDDEN,%eshide%
				guicontrol,,ESPUBEDT,%espepublisher%
				guicontrol,,ESDEVEDT,%espedeveloper%
				guicontrol,,ESGENEDT,%espegenre%
				guicontrol,,ESPTHEDT,%espepath%
				guicontrol,,ESNAMEDT,%espename%
				guicontrol,,ESRATSLD,%esperating%
				guicontrol,,ESTHUMBP,%espethumbnail%
				guicontrol,,ESOPNIMGPTHTXT,%espeimage%
				guicontrol,,ESVIDPTHTXT,%espevideo%
				guicontrol,,ESMARQPTHTXT,%espemarquee%
				guicontrol,,ESDDPLNUM,%espelayers%||1|2|3|4|5|6|7|8
				guicontrol,,ESDESCEDT,%espedesc%
				continue
			}				
	}
if (espename = "")
		{
			stringreplace,esptmp,espepath,/,\,All
			splitpath,esptmp,,,,espename
		}
ESGAMTMP= 
esgampp= game
if (cmpl = 1)
	{
		esgampp= folder
	}	
ESGAMTMP.= "<" . esgampp . ">" . "`n"	
ESGAMTMP.= "<name>" . espename . "</name>" . "`n"	
ESGAMTMP.= "<path>" . espepath . "</path>" . "`n"	
ESGAMTMP.= "<image>" . espeimage . "</image>" . "`n"
ESGAMTMP.= "<marquee>" . espemarquee . "</marquee>" . "`n"	
ESGAMTMP.= "<video>" . espevideo . "</video>" . "`n"	
ESGAMTMP.= "<desc>" . espedesc . "</desc>" . "`n"	
ESGAMTMP.= "<thumbnail>" . espethumbnail . "</thumbnail>" . "`n"	
ESGAMTMP.= "<hidden>" . espehidden . "</hidden>" . "`n"	
ESGAMTMP.= "<kidgame>" . espekidgame . "</kidgame>" . "`n"	
ESGAMTMP.= "<developer>" . espedeveloper . "</developer>" . "`n"	
ESGAMTMP.= "<publisher>" . espepublisher . "</publisher>" . "`n"	
ESGAMTMP.= "<genre>" . espegenre . "</genre>" . "`n"	
ESGAMTMP.= "<releasedate>" . espereleasedate . "</releasedate>" . "`n"	
ESGAMTMP.= "<rating>" . esperating . "</rating>" . "`n"	
ESGAMTMP.= "<lastplayed>" . espelastplayed . "</lastplayed>" . "`n"	
ESGAMTMP.= "<playcount>" . espeplaycount . "</playcount>" . "`n"	
ESGAMTMP.= "</" . esgampp . ">" . "`n"	
ESGAMP= %ESGAMTMP%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
return
;};;;;;;;;;;;;;

ESSAVEOPL:
;{;;;;;;;;;;;;;;;;  GAMELISTXML SAVE BUTTON  ;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
;;FileDelete,rj\ES\%syssub%\%gamesel%.ini
;;FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
guicontrol,,ESFAV,0
guicontrol,,ESKIDG,0
guicontrol,,ESHIDDEN,0
guicontrol,,ESPUBEDT,
guicontrol,,ESDEVEDT,
guicontrol,,ESGENEDT,
guicontrol,,ESPTHEDT,
guicontrol,,ESNAMEDT,
guicontrol,,ESRATSLD,
guicontrol,,ESTHUMBP,
guicontrol,,ESOPNIMGPTHTXT,
guicontrol,,ESVIDPTHTXT,
guicontrol,,ESMARQPTHTXT,
guicontrol,,ESDDPLNUM,|1||2|3|4|5|6|7|8
guicontrol,,ESDESCEDT,
FileMove,%ESHOME%\gamelists\%syssub%\gamelist.xml,%ESHOME%\gamelists\%syssub%\gamelist.xml.bak,1
FileDelete,rj\ES\%syssub%\gamelist.xml
FileAppend,<gameList>`n,rj\ES\%syssub%\gamelist.xml
Loop, rj\ES\%syssub%\*.ini
	{
		ftap= 
		FileRead, ftap,%A_LoopFileFullPath%
		FileAppend, %ftap%,rj\ES\%syssub%\gamelist.xml
	}
FileAppend,</gameList>`n,rj\ES\%syssub%\gamelist.xml
FileMove,rj\ES\%syssub%\gamelist.xml,%ESHOME%\gamelists\%syssub%\gamelist.xml,1
Msgbox,1,CREATED,%syssub% gamelist created.,5
guicontrol,,CURPLST,|
gamesel= 
FileDelete,rj\ES\%syssub%\*.ini
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ESROMPTHBUT:
;{;;;;;;;;;;;;;;;;;  GAMELISTXML ROMPATH BUTTON  ;;;;;;;;;;;;;;;;
jtf=
gui,submit,nohide
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "folder")
			{
				jtf= 1
			}
	}
ESTHTMP= 
if (jtf = 1)
	{
		goto, ESFSFLD
	}
FileSelectFile,ESTHTMP,3,,Select a ROM
if (ESTHTMP = "")
	{
		return
	}
espepath= %ESTHTMP%	
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "path")
			{
				ESREPL.= "<path>" . espepath . "</path>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
guicontrol,,ESPTHEDT,%espepath%
return

ESFSFLD:
FileSelectFolder,ESTHTMP,3,,Select a path
if (ESTHTMP = "")
	{
		return
	}
espepath= %ESTHTMP%	
ESREPL= 	
Loop, Parse, ESGAMP, `n, `r
	{
		clut1= 
		clut2= 
		clut3= 
		stringsplit,clut,A_LoopField,<>
		if (clut2 = "path")
			{
				ESREPL.= "<path>" . espepath . "</path>" . "`n"
				continue
			}
		ESREPL.= A_LoopField . "`n"
	}
ESGAMP= %ESREPL%
FileDelete,rj\ES\%syssub%\%gamesel%.ini
FileAppend,%ESGAMP%,rj\ES\%syssub%\%gamesel%.ini
previmg= %espepath%
guicontrol,,ESPTHEDT,%espepath%
return
;};;;;;;;;;;;;


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     ARCHIVE FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ArCnct:
norun= 1
guicontrolget,coreselv,,ARCCORES
guicontrol,,RETROM,0
RETROM= 0
gosub, ArcLaunch
if (romtch = "")
	{
		return
	}
guicontrol, disable, ARCHOST
guicontrol, disable, ARCLNCH

gosub, ConnectRA
guicontrolget,norun,,DOWNONLY
guicontrol, enable, ARCHOST
guicontrol, enable, ARCLNCH
return


DownOnly:
gui,submit,nohide
guicontrolget,DOWNONLY,,DOWNONLY
if (DOWNONLY = 1)
	{
		guicontrol,,ARCLNCH,Download
		guicontrol,Disable,ARCHOST
		guicontrol,,RUNXTRACT,0
		norun= 1
		return
	}
guicontrol,,ARCLNCH,Play
guicontrol,enable,ARCHOST
norun= 
return


EnableAltURL:
gui, submit, nohide
guicontrolget,ALTURL,,ALTURL
if (ALTURL = 1)
	{
		IniRead, ArcSite,Settings.ini,Global,ArchiveProxy
		guicontrol,show,ALTURLSET
	}
if (ALTURL = 0)
	{
		guicontrol,,ALTURL,0
		guicontrol,hide,ALTURLSET
	}
return

AltURLSet:
inputbox,ArcSite,Set Archive.org URL,,,400,100,,,,,http://archive.org/download
if (ArcSite = "")
	{
		ArcSite = http://archive.org/download
		iniwrite, "%ArcSite%",Settings.ini,Global,ArchiveProxy
		guicontrol,,UrlTxt,%ArcSite%
		gui, submit, nohide
		return
	}	
if (ArcSite <> "http://archive.org/download")
		{
			guicontrol,,ALTURL,1
			iniwrite, "%ArcSite%",Settings.ini,Global,ArchiveProxy
			guicontrol,,UrlTxt,%ArcSite%
		}
if (ArcSite = "http://archive.org/download")
		{
			guicontrol,,ALTURL,0
			iniwrite, "%ArcSite%",Settings.ini,Global,ArchiveProxy
			guicontrol,,UrlTxt,%ArcSite%
		}
		gui, submit, nohide
		return
	
SearchInp:
gui, submit, nohide
guicontrol,show,SRCHRSLT
return


SearchArc:
srchpop= 
fndgam1= 
fndgam2= 
guicontrolget,SRCHSYS,,SRCHDDL
sanm:= SRCHEDT
gosub, SanitizeN
SRCHEDT:= sanm
if (SRCHSYS = "All")
	{
		SRCHSYS= *
	}
Loop, files, gam\%SRCHSYS%.gam
{
	sys= 
	sysfile= 
	sysdir= 
	sysxt= 
	sysdrv= 
	fndgam1= 
	fndgam2= 
	SplitPath,A_LoopFileFullPath,sysfile,sysdir,sysxt,sys,sysdrv
	Loop, read,%A_LoopFileFullPath%
		{
			IfInString, A_LoopReadLine, %SRCHEDT%
				{	
					stringsplit,fndgam,A_loopReadLine,=
						srchpop .= sys . "=" . fndgam2 . "|"
				}
		}
}
guicontrol,,SRCHRSLT, |%srchpop%
return

ArcPopulateList:
PostMessage, 0x186, -1, 0,,ahk_id %srchpopu%
tmprm= 
guicontrolget,tmprm,,ARCPOP
gui, submit, nohide
ARCRCLK= 1
bltoh= 
guicontrolget, bltoh,,ARCPOP
ROMTRUN= %bltoh%
if (bltoh = "")
	{
		guicontrol, disable, ARCHOST
	}
TGCN= 
guicontrolget,TGCN,,ARCCORES
stringsplit,dlx,TGCN,.
if (dlx2 = "dll")
	{
		guicontrol,enable,ARCHOST
	}	
ARCSEL= 1

if (tmprm <> "")
	{
		if (IPADR <> "")
			{
				if (TGCN <> "")
					{
						ARCDET= 
						guicontrolget, ARCDET,,ARCDET
						if (ARCDET <> "")
							{
								guicontrol, enable, ARCHOST
								guicontrol,enable,ARCNCT
							}
						SB_SetText("")
					}
				if (TGCN = "")
					{
						SB_SetText(" Seletct a core to use and then select a ROM. ")
						if (FRC = "")
							{
								Control, ShowDropDown, , %NetCore%, skeletonKey
								ControlFocus, %NetCore%, skeletonKey	
								SB_SetText("you must select a core")
								return
							}
					}
			}
		guicontrol,enable,ARCLNCH
		return
	}	
if (TGCN = "")
	{
		guicontrol, disable, ARCHOST
	}
return

ArcSrchRes:
PostMessage, 0x186, -1, 0,,ahk_id %arcpopu%
gui, submit, nohide
ARCRCLK= 
guicontrol,enable,ARCLNCH
ARCSEL= 2
URLFILE= 
ARCSYS= 
sysurl= 
rompth= 
romtitle= 
guicontrolget,SRCHRSLT,,SRCHRSLT
ROMTRUN= %SRCHRSLT%
StringSplit,srchspl,SRCHRSLT,=
ARCSYS= %srchspl1%
guicontrol,,ARCSYS,|%ARCSYS%||Select a System|%syslist%
romfp= %srchspl2%

if (ARCSYS = "DOS")
	{
		cmdfun= 1
	}
if (ARCSYS = "ScummVM")
	{
		cmdfun= 1
	}

Loop, Read, gam\%ARCSYS%.gam
	{
		stringsplit,getpth,A_LoopReadLine,=
		if (getpth2 = romfp)
			{
				EXTRAR= 
				EXTCHD= 
				EXT7Z= 
				romshere= 
				rompth= %getpth1%
				stringreplace,romtmp,rompth,/,\,All
				splitpath,romtmp,dwnchk,tmpth,chkxt,romname,tmpdrv
				stringreplace,dwnchk,dwnchk,`%26,&,All
				stringreplace,romname,romname,`%26,&,All
				if (cmdfun = 1)
						{
							emucmd= %getpth3%
						}
			}
	}
loop, read,arcorg.set
	{
		gamurl1= 
		gamurl2= 
		gamurl3= 
		stringsplit,gamurl,A_LoopReadline,=
			{
				if (gamurl1 = ARCSYS)
					{
						sysurl= %gamurl2%
					}
			}
	}
if (ROMFLDR = "")
	{
		guicontrol,,OVDCHK,0
		;;guicontrol,hide,SETOVD
	}

rjinsfldr= 
rjdwnfldr= 
if (romsys = "")
	{
		romsys= %ARCSYS%
	}
if (JACKETMODE = 1)
	{
		rjinsfldr= %romname%\
		if (RJCHKJ = 1)
			{
				StringGetPos, fldrdlmt, rjinsfldr,%RJCNSLDD%
				stringtrimright,rjdwnfldr,rjinsfldr,%fldrdlmt%
				rjinsfldr= %rjdwnfldr%
			}
			
			IfNotExist,%coreassetsdirectory%\%romsys%\%rjinsfldr%
				{
					FileCreateDir,%coreassetsdirectory%\%romsys%\%rjinsfldr%
				}

	}

save= %coreassetsdirectory%\%ARCSYS%\%rjinsfldr%%dwnchk%

if (OVDCHK = 1)
	{
		save= %OVDFLDR%\%rjinsfldr%%dwnchk%
		IfNotExist,%OVDFLDR%\%rjinsfldr%
				{
					FileCreateDir,%OVDFLDR%\%rjinsfldr%
				}

	}

romf:= save
URLFILE= %ArcSite%/%sysurl%%rompth%
gosub, GetCoreFromSys

if (SRCHRSLT <> "")
	{
		if (IPADR <> "")
			{
				TGCN= 
				guicontrolget,TGCN,,ARCCORES
				if (TGCN <> "")
					{
						guicontrol, enable, ARCNCT
						guicontrol, enable, ARCHOST
						guicontrol,enable,ARCNCT
						SB_SetText("")
					}
				if (TGCN = "")
					{
						SB_SetText(" Seletct a core to use and then select a ROM. ")
					}
			}
		return	
	}
return

ArchiveSystems:
guicontrol,disable,ARCLNCH
guicontrol,disable,ARCNCT
guicontrol, disable, ARCHOST

romarray1= 
romarray2= 
pop_list= 
cmdfun= 
recore= 
symt1= 
symt2= 
topcore= 
gui, submit, nohide
guicontrol, ,OVDCHK,0
gosub, OvdChk
BRKO= 1
guicontrol,,SRCHRSLT,|
guicontrol,,ARCPOP,|
if (ARCSYS = "DOS")
	{
		cmdfun= 1
	}
if (ARCSYS = "ScummVM")
	{
		cmdfun= 1
	}	
loop, Read, gam\%ARCSYS%.gam,
	{
		stringsplit,romarray,A_LoopReadLine,=
		pop_list .= (A_Index == 1 ? "" : "|") . romarray2
	}
Sort,pop_list,D|
gui, submit, nohide

GetCoreFromSys:

if (NPLC = "")
	{
		gosub, MatchSyst
	}
	if (ARCSEL = 2)
		{
			return
		}
guicontrol,,ARCPOP,|%pop_list%
if (ARCSYS = "MAME")
	{
		guicontrol,,EXTRURL,0
	}
if (ARCSYS = "MAME - Arcade")
	{
		guicontrol,,EXTRURL,0
	}
	
if (ARCSYS = "MAME - BIOS")
	{
		OVDCHK=MAME
		guicontrol,,OVDLDS,|MAME|Matching|%SWAPPOP%
		guicontrol,,OVDTXT,%SWAPLOC%\MAME
		guicontrol,,OVDCHK,1
		guicontrol,,DOWNONLY,1
		gosub, DOWNONLY
		guicontrol,,EXTRURL,0
	}
	return

ArcCores:
APLA= 
dlx2= 
guicontrol,show,CUSTSWITCH
guicontrol, enable, ARCHOST
gui, submit, nohide
coreselv= %ARCCORES%
stringsplit,dlx,coreselv,.
if (dlx2 <> "dll")
	{
		guicontrol,disable,ARCHOST
		APLA= 1
	}	

if (dlx2 = "dll")
	{
		guicontrol,,CUSTMOPT,
		guicontrol,,CUSTMARG,
		guicontrol,,CUSTSWITCH,0
		guicontrol,hide,CUSTMOPT
		guicontrol,hide,CUSTMARG
		guicontrol,hide,CUSTSWITCH
	}
return


SetOvd:
gui,submit,nohide
OVDFLDR= 
FileSelectFolder,OVDFLDR,,3
if (OVDFLDR = "")
	{
		return
	}
guicontrol,,OVDCHK,1
guicontrol,,OVDLDS,|Matching||%SWAPPOP%
guicontrol,,OVDTXT,%OVDFLDR%
return

DWNINJACK:
gui,submit,nohide
guicontrolget,JACKETMODE,,JACKETMODE
if (JACKETMODE = 0)
	{
		guicontrol,,EXTEXPLD,0
		guicontrolget,tmparcc,,ARCCORES
		ifinstring, tmparcc,_libretro
			{
				SWAPNAM= Downloads
				SWAPLOC= %coreassetsdirectory%
				SWAPPOP= %dwnlfldrs%
				OVDFLDR= %OVDFLDR%\$ROMJACKET$
			}
	}
if (JACKETMODE = 1)
	{		
		guicontrol,,EXTEXPLD,1
		SWAPNAM= ROMJACKETS
		SWAPLOC= %RJSYSTEMS%
		SWAPPOP= %systmfldrs%
		OVDFLDR= %OVDFLDR%\$ROMJACKET$
	}
IniWrite, "%JACKETMODE%", Settings.ini,GLOBAL,jacket_mode
return

OvdChk:
gui,submit,nohide
guicontrolget,OVDHCK,,OVDCHK
if (OVDCHK = 1)
{
guicontrol,,OVDLDS,|Netplay||Matching|%SWAPPOP%
if (OVDFLDR = "")
{
guicontrolget,ovdnm,,OVDLDS
OVDFLDR= %SWAPLOC%\%ovdnm%
}
if (JACKETMODE = 1)
	{		
		SWAPNAM= ROMJACKETS
		SWAPLOC= %RJSYSTEMS%
		SWAPPOP= %systmfldrs%
		OVDFLDR= %OVDFLDR%\$ROMJACKET$
	}
guicontrol,,OVDTXT,%OVDFLDR%
}
if (OVDCHK = 0)
{
guicontrol,,OVDLDS,|Matching||%SWAPPOP%
guicontrol,,OVDTXT,
OVDFLDR= 
}
return

OvDlds:
gui, submit, nohide
guicontrol,,OVDCHK,1
guicontrolget,ovdnm,,OVDLDS
OVDFLDR= %SWAPLOC%\%ovdnm%
guicontrol,,OVDTXT,%OVDFLDR%
if (OVDLDS = "Matching")
	{
		guicontrol,,OVDCHK,0
		gosub,OvdChk
	}
return


ReDownload:
gui, submit, nohide
REDWN= 0
if REDWN= 1
REDOWN= 1
return


ArcHost:
clipboard= 
gosub, ArcGet
ROMCRC= %save%
gosub, URLCRC
if (COPYINFO = 1)
	{
		clipboard= NET|%ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%|%HPORTNUM%|%FRAMEDELAY%|%coreselv%|%URLFILE%|%ARCSYS%|%GAMCRC%|
	}
gosub, HOSTING
guicontrol,enable,ARCSYS
guicontrol,enable,ARCPOP
guicontrol,enable,ARCLNCH
guicontrol,enable,ARCCORES
iniwrite, "%lastcore%",Settings.ini,GLOBAL,last_core
iniwrite, "%romf%",Settings.ini,GLOBAL,last_rom
gui, submit, nohide
return

URLCRC:
GAMCRC= 

ApndCRC= 
CrCFLN= %ROMCRC%
gosub, CRC32GET
GAMCRC= %ApndCRC%
if (GAMCRC = "")
{
GAMCRC= 000000
}
return

ExtractURL:
XtrZip= 
gui,submit,nohide
guicontrolget,EXTRURL,,EXTRURL
guicontrol,hide,EXTEXPLD
guicontrol, hide, RUNXTRACT 
if (EXTRURL = 1)
	{
		XtrZip= 1
		guicontrol,show,EXTEXPLD
		guicontrol, show, RUNXTRACT
	}
return

EXTEXPLD:
gui,submit,nohide
return

RunXtract:
gui, submit,nohide
RXTRM= 
guicontrolget, RUNXTRACT,,RUNXTRACT
if (RUNXTRACT = 1)
	{
		RXTRM= 1
		guicontrol,,DOWNONLY,0
		gosub, DownOnly
	}
return

ClipURL:
GETURL=1
gosub, GetArcURL
Clipboard= %URLFILE%
GETURL= 
return

ArcGet:
HOSTING= 1

ArcLaunch:
gui,submit,nohide
guicontrolget,coreselv,,ARCCORES
APLN= 
if (ARCSEL = 2)
	{
		goto, RunArcRom
	}
romf= 
guicontrol,disable,ARCSYS
guicontrol,disable,ARCPOP
guicontrol,disable,ARCEDSRCH
guicontrol,disable,ARCNCT
guicontrol,disable,NETCONNECT
guicontrol,disable,ARCHOST
guicontrol,disable,ARCLNCH
guicontrol,disable,ARCCORES

GetArcURL:
gui, submit, nohide
guicontrolget, ARCSYS, ,ARCSYS

romtch= 
guicontrolget,romtch,, ARCPOP
if (romtch = "")
	{
		guicontrolget,romprs,,SRCHRSLT
		stringsplit,srchprs,romprs,=
		ARCSYS= %srchprs1%
		romtch= %srchprs2%
	}
if (romtch = "")
	{
		return
	}


if (ARCSYS = "DOS")
	{
		cmdfun= 1
	}
if (ARCSYS = "ScummVM")
	{
		cmdfun= 1
	}
loop,Read, gam\%ARCSYS%.gam
	{
		stringsplit,rommatch,A_LoopReadLine,=
			if (rommatch2 = romtch)
				{
					romdwn= %rommatch1%
					if (cmdfun = 1)
						{
							emucmd= %rommatch3%
						}
					break	
				} 
			
	}
lwall= 
sysurl= 
loop, read,arcorg.set
	{
		gamurl1= 
		gamurl2= 
		gamurl3= 
		stringsplit,gamurl,A_LoopReadline,=
			{
				if (gamurl1 = ARCSYS)
					{
						sysurl= %gamurl2%
					}
			}
	}
EXTRAR= 
EXTCHD= 
EXT7Z= 
romshere= 
stringreplace, revurl,romdwn,/,\,All
splitpath,revurl,dwnchk,tmpth,chkxt,romname,tmpdrv
stringreplace,dwnchk,dwnchk,`%26,&,All
stringreplace,romname,romname,`%26,&,All
URLFILE= %ArcSite%/%sysurl%%romdwn%

if (GETURL = 1)
	{
		SB_SetText(" " URLFILE " in clipboard ")
		return
	}


RunArcRom:
if (ROMFLDR = "")
	{
		guicontrol,,OVDCHK,0
		;;guicontrol,hide,SETOVD
	}
	
rjinsfldr= 
rjdwnfldr= 

if (romsys = "")
	{
		romsys= %ARCSYS%
	}
	
if (JACKETMODE = 1)
	{
		rjinsfldr= %rommatch2%\
		if (RJCHKJ = 1)
			{
				StringGetPos, fldrdlmt, rjinsfldr,%RJCNSLDD%
				stringtrimright,rjdwnfldr,rjinsfldr,%fldrdlmt%
				rjinsfldr= %rjdwnfldr%
			}
		IfNotExist,%RJSYSTEMS%\%romsys%\%rjinsfldr%
			{
				FileCreateDir,%RJSYSTEMS%\%romsys%\%rjinsfldr%
			}
	}	
	
save= %RJSYSTEMS%\%ARCSYS%\%rjinsfldr%%dwnchk%
ifnotexist,%RJSYSTEMS%\%ARCSYS%
	{
		FileCreateDir, %RJSYSTEMS%\%ARCSYS%
	}

if (OVDCHK = 1)
	{
		save= %OVDFLDR%\%rjinsfldr%%dwnchk%
		IfNotExist,%OVDFLDR%\%rjinsfldr%
			{
				FileCreateDir,%OVDFLDR%\%rjinsfldr%
			}
	}
splitpath,save,romtitle,rompth,romext,romname,romdrv
updtmsg= downloading %URLFILE%
guicontrolget,REDOWN,,REDWN

if (REDOWN = 1)
	{
		FileMove, %save%, %save%.bak, 1
	}
ifnotexist, %RJSYSTEMS%\%romsys%
	{ 
		FileCreateDir,%RJSYSTEMS%\%romsys%
		gosub, resetCoreAssets
	}
if (chkxt = "rar")
	{
		EXTRAR= 1
		gosub, RarChk
	}
if (chkxt = "chd")
	{	
		gosub, ChdChk
		EXTCHD= 1
	}
if (chkxt = "7z")
	{
		gosub, 7zChk
		EXT7Z= 1
	}
if (cmdfun = 1)
	{
		gosub, 7zChk
		EXT7Z= 1
	}
if (romshere = "X")
	{
	goto, RunArc
	}
guicontrolget,lastcore,,ARCCORES
dxt2= 
StringSplit,dxt,coreselv,.
if (dxt2 <> "dll")
	{
		APLN= 1
	}

RomDownload:
ifnotexist, %save%
	{
		if (gamurl3 = "$")
			{
				gosub, LoginWall
			}
		ifnotexist,%RJSYSTEMS%\%romsys%\%rjinsfldr%
			{
				FileCreateDir,%RJSYSTEMS%\%romsys%\%rjinsfldr%
			}
		DownloadFile(URLFILE,save, True, True)
		FileGetSize,dwnfszt,%save%
		if (dwnfszt < 15)
			{
				MsgBox,4421,Download Failed,"%romdwn% could not be retrieved`n%save%",5
				ifmsgbox,Retry
					{
						Filedelete, %save%
						goto, RomDownload
					}
				FileDelete, %save%
				guicontrol,enable,ARCSYS
				guicontrol,enable,ARCPOP
				guicontrol,enable,ARCLNCH
				guicontrol,enable,ARCHOST
				guicontrol, hide, ARCNCT
				guicontrol, show, ARCHOST				
				guicontrol,enable,ARCCORES
				return
			}
	}

if (chkxt = "chd")
	{
		gosub, ChdXtr
	}
if (chkxt = "rar")
	{
		gosub, RarXtr
	}
if (chkxt = "7z")
	{
		gosub, 7zXtr
	}
if (cmdfun = 1)
	{
		gosub, 7zXtr
	}
if (chkxt = "zip")
	{
		if (XtrZip = 1)
			{
				Gosub, ZipXtr
			}
	}
		
ifexist, %save%
	{	
		romshere= 1
		goto, RunArc
	}
RunArc:
if (romf = "")
	{
		romf= %save%
		lastrom= %save%
	}
lastcore= %coreselv%
;;guicontrol,,ROMLOC, |%save%||%poptadd%
guicontrol,,ROMLOC, |%romf%||%HISTORY%
guicontrol,,OPTDDL,|History||%plistfiles%
guicontrol,,LCORE, |%lastcore%||%runlist%
ifnotexist, %save%
	{
		msgbox,0,,"could not download"
	}
Guicontrol, ,ARCDPRGRS, 0
SB_SetText(" ")
if (cmdfun = 1)
	{
	if (coreselv = "dosbox_libretro.dll")
		{
			SplitPath,emucmd,exen,dospth
			FileCopy,dosbox.set,%rompth%\%romname%\dosbox.conf,1
			FileAppend,Mount C: "%rompth%\%romname%"`nC:`ncd %dospth%`n%exen%,%rompth%\%romname%\dosbox.conf
			romf= %rompth%\%romname%\dosbox.conf
		}
	if (coreselv = "scummvm_libretro.dll")
		{
			FileAppend,%emucmd%,%rompth%\%romname%\%romname%.scummvm
			romf= %rompth%\%romname%\%romname%.scummvm
		}
	}
	
if (HOSTING = 1)
	{
		return
	}
if (URLDWN = 1)
	{
		return
	}
if (APLA = 1)
	{
		if (norun = "")
			{
				gosub, SKLNCH
			}
	}
if (APLA <> 1)
	{
		if (norun = "")
			{
				gosub, LNCH
			}
	}
guicontrol,enable,ARCSYS
guicontrol,enable,ARCPOP
guicontrol,enable,ARCLNCH
guicontrol,enable,ARCHOST
guicontrol,enable,ARCCORES
iniwrite, "%lastcore%",Settings.ini,GLOBAL,last_core
iniwrite, "%romf%",Settings.ini,GLOBAL,last_rom
return

ChdXtr:
if (JACKETMODE = 1)
	{
		
	}
ifnotexist, %rompth%\%romname%
	{
		filecreatedir,%rompth%\%romname%
	}
SB_SetText(" extracting and converting chd ")
RunWait, %comspec% cmd /c "chdman.exe extractcd -i "%save%" -o "%rompth%\%romname%\%romname%.cue" -ob "%rompth%\%romname%\%romname%.bin" ",,hide
SB_SetText(" extraction and conversion complete ")
romf= %rompth%\%romname%\%romname%.cue
return

RarXtr:
SB_SetText(" extracting rar ")
xtrdir= %rompth%\%romname%
xtrvar= e
if (EXTEXPLD = 1)
	{
		xtrvar= x
		xtrdir= %rompth%
	}
runwait, %comspec% cmd /c "UnRAR.exe %xtrvar% -y "%romf%" "*" +o "%rompth%" ",,hide
sleep 2000
FileMove, %romf%, %rompth%\%romname%.bak
SB_SetText(" extraction complete ")
Loop, files, %rompth%\*.rar
	{
		Runwait, %comspec% cmd /c "UnRAR.exe %xtrvar% -y "%A_LoopFileFullPath%" "*" +o "%xtrdir%" ",,hide
		FileMove, %A_LoopFileFullPath%,%A_LoopFileFullPath%.bak
	}
Loop, Files, %rompth%\%romname%\*.*
	{
		gosub, GetXtr
	}
	FileMove,%rompth%\%romname%.bak, %rompth%\%romname%.rar, 1
return

7zXtr:
SB_SetText(" extracting 7zip ")
xtrdir= %rompth%\%romname%
xtrvar= e
if (EXTXPLD = 1)
	{
		xtrdir= %rompth%
		xtrvar= x
	}
runwait, %comspec% cmd /c "7za.exe %xtrvar% -y "%save%" -O"%xtrdir%" ", ,hide
SB_SetText(" extraction complete ")
Loop, Files, %rompth%\%romname%\*.*
	{
		if (A_LoopFileSize > 10)
			{
				romf= %A_LoopFileFullPath%
			}
	}
return

ZipXtr:
SB_SetText(" extracting Zip ")
xtrdir= %rompth%\%romname%
xtrvar= e
if (EXTEXPLD = 1)
	{
		xtrvar= x
		xtrdir= %rompth%
	}
runwait, %comspec% cmd /c "7za.exe %xtrvar% -y "%save%" -O"%xtrdir%" ", ,hide
SB_SetText(" extraction complete ")
guicontrolget, RXTRM,,RUNXTRACT
if (RXTRM = 1)
	{
		xtrdir= %rompth%\%romname%
		if (EXTEXPLD = 1)
			{
				xtrdir= %rompth%
			}
		Loop, %xtrdir%\*.*
			{
				if (A_LoopFileSize > 10)
					{
						romf= %A_LoopFileFullPath%
					}
			}
	}
return

GetXtr:
;{;;;;;;;;;;;;;  GET XTRATED ROM  ;;;;;;;;;;;;;;;

stringsplit,coreslc,coreslv,.
if (coreslc2 = "dll")
	{
		loop, read, %libretroInfoPath%\%coreslc1%.info
			{
				stringsplit, sext, A_loopreadline,_ | =, ""
				if (sext1 = "supported")
					{
						lookf= %sext3%|%sext4%|%sext5%|%sext6%|%sext7%|%sext8%|%sext9%|%sext10%|%sext11%|%sext12%|%sext13%|%sext14%|%sext15%|%sext16%|%sext17%|%sext18%
					}
			}
		stringsplit,lookfor,lookf,= | ""
		ar := Object()
		Loop, %lookfor0%
		{
			new= % (lookfor%a_index%)
			if (lookfor%a_index% <> "")
				{
					ar.insert(new)
				}
		}
		extrpth= %RJSYSTEMS%\%romsys%\%romname%
		if (OVDCHK = 1)
			{
				extrpth= %OVDFLDR%\%romname%
			}
		loop,files,%extrpth%\*.*,R
			{
				ext= %A_LoopFileExt%
				for k, v in ar
					{
						extm:= v
						if (ext = extm)
							{
								romshere= X
								romf= A_LoopFileFullPath
								EXT7Z=
								EXTRAR=
							}
					}

			}
			return
	}

	
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
7zChk:
ifnotexist, %save%
	{
		return
	}
ifexist, %RJSYSTEMS%\%romsys%\%romname%
	{
		gosub, GetXtr
	}
return

RarChk:
ifnotexist, %save%
	{
		return
	}
extrpth= %RJSYSTEMS%\%romsys%\%romname%
if (OVDCHK = 1)
	{
		extrpth= %OVDFLDR%\%romname%
	}
ifexist, %extrpth%
	{
		Loop, File, %extrpth%\*.*
		{
			if (A_LoopFileSize > 1)
			{
				romshere= X
				romf= A_LoopFileFullPath
				EXTRAR= 
			}
		}
	}
return

ChdChk:
extrpth= %RJSYSTEMS%\%romsys%\%romname%
if (OVDCHK = 1)
	{
		extrpth= %OVDFLDR%\%romname%
	}
ifnotexist, %save%
	{
		return
	}
ifexist, %extrpth%
	{
		Loop, File, %extrpth%\*.cue
		{
				romshere= X
				romf= A_LoopFileFullPath
				EXTCHD= 
		}
	}
return

CustmOpt:
gui, submit, nohide
CUSTMOPT= 
if (CUSTSWITCH = 1)
	{
		guicontrolget,CUSTMOPT,,CUSTMOPT
		guicontrol,,CUSTMOPTS,|%CUSTMOPT%||%INJOPT%
		return
	}
return

CustmArg:
gui, submit, nohide
CUSTMARG= 
if (CUSTSWITCH = 1)
	{
		guicontrolget,CUSTMARG,,CUSTMARG
		guicontrol,,CUSTMARGS,|%CUSTMARG%||%INJOPT%
		return
	}
return

CustSwitch:
iscor= 
iscorext= 
guicontrolget,iscor,,ARCCORES
splitpath,iscor,,,iscorext
if (iscorext = "dll")
	{
		guicontrol,,CUSTSWITCH,0
	}
gui, submit, nohide
guicontrolget,CUSTSWITCH,,CUSTSWITCH
if (CUSTSWITCH = 0)
	{
		guicontrol, hide, CUSTMOPT
		guicontrol, hide, CUSTMARG
		guicontrol, hide, CUSTMOPTS
		guicontrol, hide, CUSTMARGS
		guicontrol,,CUSTSWITCHS,0
		;;gosub, CustSwitchs
		CUSTMARG= 
		CUSTMOPT= 
		return
	}
guicontrol, show, CUSTMOPT
guicontrol, show, CUSTMARG
guicontrol, show, CUSTMOPTS
guicontrol, show, CUSTMARGS
guicontrol,,CUSTSWITCHS,1
;;gosub, CustSwitchs
return

ArcLogin:
gui, submit,nohide
guicontrolget,ARCLOGIN,,ARCLOGIN
IniWrite, "%ARCLOGIN%",Settings.ini,GLOBAL,archive_login
return

ArcPass:
gui, submit,nohide
if (SAVPASS = 0)
	{
		IniWrite,"",Settings.ini,GLOBAL,archive_password
		return
	}
guicontrolget,ARCPASS,,ARCPASS
IniWrite,"%ARCPASS%",Settings.ini,GLOBAL,archive_password
return

SavPass:
gui,submit,nohide
guicontrolget,SAVPASS,,SAVPASS
if (SAVPASS = 0)
	{
		IniWrite,"",Settings.ini,GLOBAL,archive_password
		return
	}
guicontrolget,ARCPASS,,ARCPASS
IniWrite,"%ARCPASS%",Settings.ini,GLOBAL,archive_password
return

LoginWall:
SB_SetText("Logging in...Close IE window when download completes")
if (ARCLOGIN = "")
	{
		SB_SetText(" You must enter a valid email login for archive.org to use this repository ")
		return
	}
if (ARCPASS = "")
	{
		SB_SetText(" You must enter a valid password for archive.org to use this repository ")
		return
	}

AURL:= "https://archive.org/account/login.php"
GETURL:= ""
;;ArcSite= https://ia601904.us.archive.org/29/items/
WB := ComObjCreate("InternetExplorer.Application")
WB.Visible := true
WB.Navigate(AURL)
While wb.readyState != 4 || wb.document.readyState != "complete" || wb.busy ; wait for the page to load
   Sleep, 10
wb.document.getElementById("username").value := ARCLOGIN
wb.document.getElementById("password").value := ARCPASS
wb.document.getElementById("referer").value:= URLFILE
wb.document.getElementByID("checkbox").checked := True
;;wb.document.all.loginForm.submit()
;;wb.document.getElementsByTagName("submit")[1].Click()
wb.document.getElementByID("submit").Click()
While wb.readyState != 4 || wb.document.readyState != "complete" || wb.busy ; wait for the page to load
   Sleep, 25
   ;;SB_SetText(" ... Downloading ... ")
   ;;URLDownloadToFile, %URLFILE%, %save%
	;;SB_SetText(" Complete ")
return
;{;;;;;;;;;;;;;;;; ARCHIVE ASSET DOWNLOAD ;;;;;;;;;;;;;;;;;;;

ARCGBOX:
gui,submit,nohide
getboxart= 1
getbackdrop= 
getsnapshot= 
getvideo= 
getmetadata= 
getlogo= 

ARCARTDWN:
if (ROMTRUN = "")
	{
		SB_SetText("You must select a ROM to download assets")
		return
	}
guicontrolget,FEDDLA,,ARCSYS
if (ARCRCLK = "")
	{
		stringsplit,romsplit,ROMTRUN,=
		FEDDLA= %romsplit1%
		ROMTRUN= %romsplit2%
	}
jaktit= %ROMTRUN%
SYSLKUP= %FEDDLA%
if (SYSLKUP = "Capcom Play System - CPS")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "MAME - Arcade")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "MAME")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "Capcom Play System - CPS II")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "SNK - Neo Geo MVS")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "Sega - NAOMI")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "Sega - Model 2")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "Sega - Model 3")
	{
		SYSLKUP= MAME - Arcade
	}
if (SYSLKUP = "Cave")
	{
		SYSLKUP= MAME - Arcade
	}

stringReplace,nsjak,jaktit,%A_Space%,,All
stringReplace,nsjak,nsjak,',,All
stringReplace,nsjak,nsjak,.,,All
stringReplace,nsjak,nsjak,`,,,All
stringReplace,nsjak,nsjak,-,,All
alanum:= 0
DWNFLD=
ifExist, rj\scrapeArt\%SYSLKUP%.set
	{
		FileRead, SYSPRS, rj\scrapeArt\%SYSLKUP%.set
		Loop, Parse, SYSPRS, `n, `r
			{	
				if (A_LoopField = "")
					{
						continue
					}
				stringreplace,akj,A_LoopField,:,,All
				stringLeft,akv,A_LoopField,1
				alanum+=1
				if (akv = ":")
					{
						if (akj = nsjak)
							{
								gosub, SCRAPEJAK
								if (sysfnd = "")
									{
										avb1= 
										avb2= 
										stringsplit,avb,nsjak,([
										nsjakx= %avb1%
										if (avb2 = "")
											{
												nsjakx= %nsjak% 
											}
										nsjak= %nsjakx%	
										gosub, SCRAPEJAK
									}
							}
					}
			}
		if (DWNFLD = 1)
			{
				SB_SetText("Some items could not be retrieved.")
			}
			getboxart= 
			getbackdrop= 
			getsnapshot= 
			getvideo= 
			getmetadata= 
			getlogo= 
	}
return

ARCGSNP:
gui,submit,nohide
getboxart= 
getbackdrop= 
getsnapshot= 1 
getvideo= 
getmetadata= 
getlogo= 
gosub, ARCARTDWN
return

ARCGFAN:
gui,submit,nohide
getboxart= 
getbackdrop= 1
getsnapshot= 
getvideo= 
getmetadata= 
getlogo= 
gosub, ARCARTDWN
return

ARCGLOG:
gui,submit,nohide
getboxart= 
getbackdrop= 
getsnapshot= 
getvideo= 
getmetadata= 
getlogo= 1
gosub, ARCARTDWN
return

ARCGVID:
gui,submit,nohide
getboxart= 
getbackdrop= 
getsnapshot= 
getvideo= 1
getmetadata= 
getlogo= 
gosub, ARCARTDWN
return


;};;;;;;;;;;;;;;;;;;;;;;;;
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     XMB FUNCTIONS      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     COLOR PICKER    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ChooseColor(pRGB := 0, hOwner := 0, DlgX := 0, DlgY := 0, Palette*)
{
    static CustColors    
    static SizeOfCustColors := VarSetCapacity(CustColors, 64, 0)
    static StructSize := VarSetCapacity(ChooseColor, 9 * A_PtrSize, 0)
    
    CustData := (DlgX << 16) | DlgY    


    for Index, Value in Palette
        NumPut(BGR2RGB(Value), CustColors, (Index - 1) * 4, "UInt")


    NumPut(StructSize, ChooseColor, 0, "UInt")
    NumPut(hOwner, ChooseColor, A_PtrSize, "UPtr")
    NumPut(BGR2RGB(pRGB), ChooseColor, 3 * A_PtrSize, "UInt")
    NumPut(&CustColors, ChooseColor, 4 * A_PtrSize, "UPtr")
    NumPut(0x113, ChooseColor, 5 * A_PtrSize, "UInt")
    NumPut(CustData, ChooseColor, 6 * A_PtrSize, "UInt")
    NumPut(RegisterCallback("ColorWindowProc"), ChooseColor, 7 * A_PtrSize, "UPtr")


    ErrorLevel := ! DllCall("comdlg32\ChooseColor", "UPtr", &ChooseColor, "UInt")


    if not ErrorLevel
        Loop 16
            Palette[A_Index] := BGR2RGB(NumGet(CustColors, (A_Index - 1) * 4, "UInt"))
        
    return BGR2RGB(NumGet(ChooseColor, 3 * A_PtrSize, "UINT"))
}
ColorWindowProc(hwnd, msg, wParam, lParam)
{
    static WM_INITDIALOG := 0x0110
    
    if (msg <> WM_INITDIALOG)
        return 0
    
    hOwner := NumGet(lParam+0, A_PtrSize, "UPtr")
    if (hOwner)
        return 0

    DetectSetting := A_DetectHiddenWindows
    DetectHiddenWindows On
    CustData := NumGet(lParam+0, 6 * A_PtrSize, "UInt")
    DlgX := CustData >> 16, DlgY := CustData & 0xFFFF
    WinMove ahk_id %hwnd%, , %DlgX%, %DlgY%
    
    DetectHiddenWindows %DetectSetting%
    return 0
}

BGR2RGB(Color)
{
    return  (Color & 0xFF000000) 
         | ((Color & 0xFF0000) >> 16) 
         |  (Color & 0x00FF00) 
         | ((Color & 0x0000FF) << 16)
}
return

ColorPicker:
guicontrolget,APLDCLR,,CLRDDL
StringReplace,clras,APLDCLR,%A_Space%,_,All
    SetFormat IntegerFast, H   
    Colors := [0x00FF00, 0xFF0000, 0xFF00FF]
    MyColor := ChooseColor(0x80FF, GuiHwnd, , , Colors*)
wrto= %clras%_color
StringSplit,nwclr,wrto,_
if (MyColor <> "")
{
%nwclr1%%nwclr2%%nwclr3%:= MyColor
iniwrite, "%MyColor%",%curcfg%,OPTIONS,%wrto%
}

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

TextColor:
return

XMBThemeNum:
gui,submit,nohide
guicontrolget, xmbTheme, ,XMBTHM
if (xmbTheme= 0)
{
xmbTxt= Monochrome
}
if (xmbTheme= 1)
{
xmbTxt= FlatUI
}
if (xmbTheme= 2)
{
xmbTxt= RetroActive
}
if (xmbTheme= 3)
{
xmbTxt= Pixel
}
if (xmbTheme= 4)
{
xmbTxt= NeoActive
}
if (xmbTheme= 5)
{
xmbTxt= Monochrome Jagged
}
if (xmbTheme= 6)
{
xmbTxt= Custom
}
guicontrol,,ICNTXT,%xmbTxt%
iniwrite, "%xmbTheme%",%curcfg%,OPTIONS,xmb_theme
return

ColorTheme:
gui, submit, nohide
guicontrolget,xmbMenuColorTheme,,CLRTHM
if (xmbMenuColorTheme = 0)
	{
		XMBCLRTHM= Legacy Red
	}
if (xmbMenuColorTheme = 1)
	{
		XMBCLRTHM= Dark Purple
	}
if (xmbMenuColorTheme = 2)
	{
		XMBCLRTHM= Midnight Blue
	}
if (xmbMenuColorTheme = 3)
	{
		XMBCLRTHM= Golden
	}
if (xmbMenuColorTheme = 4)
	{
		XMBCLRTHM= Electric Blue
	}
if (xmbMenuColorTheme = 5)
	{
		XMBCLRTHM= Apple Green
	}
if (xmbMenuColorTheme = 6)
	{
		XMBCLRTHM= Under Sea
	}
	if (xmbMenuColorTheme = 7)
	{
		XMBCLRTHM= Volcanic Red
	}
if (xmbMenuColorTheme = 8)
	{
		XMBCLRTHM= Dark
	}
if (xmbMenuColorTheme = 9)
	{
		XMBCLRTHM= Plain
	}	
guicontrol,,CLRTHM,|%xmbMenuColorTheme%||0|1|2|3|4|5|6|7|8|9
guicontrol,,XMBCLRTHM,%XMBCLRTHM%
xmbrw=
iniwrite, "%xmbMenuColorTheme%",%curcfg%,OPTIONS,xmb_menu_color_theme
gui,submit,nohide
return

Ribbon:
gui, submit, nohide
guiControlGet,menuShaderPipeLine,,RIBN
if (menuShaderPipeLine = 0)
{
RIBTXT= Off
}
if (menuShaderPipeLine = 1)
{
RIBTXT= Light Ribbon
}
if (menuShaderPipeLine = 2)
{
RIBTXT= Full Ribbon
}
if (menuShaderPipeLine = 3)
{
RIBTXT= Light Snow
}
if (menuShaderPipeLine = 4)
{
RIBTXT= Full Snow
}
if (menuShaderPipeLine = 5)
{
RIBTXT= Bokeh
}
guicontrol,,RIBTXT,%RIBTXT%
iniwrite, "%menuShaderPipeline%",%curcfg%,OPTIONS,menu_shader_pipeline
return

XMBScale:
gui, submit, nohide
guicontrolget,xmbScaleFactor,,XMBSCL
iniwrite, "%xmbScaleFactor%",%curcfg%,OPTIONS,xmb_scale_factor
return

EnableMouse:
gui, submit, nohide
menuMouseEnable= true
if (MOUSEON = 0)
{
menuMouseEnable= false
}
iniwrite, "%menuMouseEnable%",%curcfg%,OPTIONS,menu_mouse_enable
return

DynamicWall:
gui, submit, nohide
menuDynamicWallpaperEnable= false
if (DYNWALL= 1)
{
menuDynamicWallpaperEnable= true
}
iniwrite, "%menuDynamicWallpaperEnable%",%curcfg%,OPTIONS,menu_dynamic_wallpaper_enable
return

Shadows:
gui, submit, nohide
xmbShadowsEnable= true
if (SHADW = 0)
{
xmbShadowsEnable= false
}
iniwrite, "%xmbShadowsEnable%",%curcfg%,OPTIONS,xmb_shadows_enable
return

FontSel:
gui, submit, nohide
FileSelectFile,xmbFont,3,,Select a font,*.ttf
if (xmbFont = "")
{
return
}
iniwrite, "%xmbFont%",%curcfg%,OPTIONS,xmb_font
return

MenuPointer:
gui, submit, nohide
menuPointerEnable= false
if (MNUPNT = 1)
	{
		menuPointerEnable= true
	}
iniwrite, "%menuPointerEnable%",%curcfg%,OPTIONS,menu_pointer_enable
return

OvrLay:
guicontrolget,OVRLAY,,OVRLAY
OVRLNM= %OverlayDirectory%\%OVRLAY%
if (OVRLAY = "Overlays")
	{
		OVRLAY= 
	}
iniwrite, "%OVRLNM%",%curcfg%,OPTIONS,input_Overlay
return

InputOverlay:
gui,submit,nohide
InputOverlay= %inival2%

stringreplace,ovrlaytmp,InputOverlay,%OverlayDirectory%,,All
guicontrol,,OVRLAY,|%ovrlaytmp%||Overlays|%ovr_list%
return

OvrlTog:
gui,submit,nohide
guicontrolget,OVRLTOG,,OVRLTOG
inputOverlayEnable= true
guicontrol,enable,OVRLMENU
guicontrol,enable,OVRLBTN
guicontrol,enable,OVRLAY
if (OVRLTOG = 0)
	{
		inputOverlayEnable= false
		guicontrol,disable,OVRLMENU
		guicontrol,disable,OVRLBTN
		guicontrol,disable,OVRLAY
		iniwrite, "%nul%",%curcfg%,OPTIONS,input_Overlay
	}
iniwrite, "%inputOverlayEnable%",%curcfg%,OPTIONS,input_overlay_enable
return

OvrlBtn:
inputOverlaytmp= 
gui,submit,nohide
FileSelectFile,inputOverlaytmp,3,,Select Overlay Config,*.cfg
if (inputOverlaytmp = "")
	{
		return
	}
inputOverlay:= inputOverlaytmp
guicontrol,,OVRLAY,|%inputOverlay%||Overlays|%ovr_list%
iniwrite, "%inputOverlay%",%curcfg%,OPTIONS,input_overlay
return

OvrlMenu:
gui,submit,nohide
inputOverlayHideInMenu= true
guicontrolget,OVRLMENU,,OVRLMENU
if (OVRLMENU = 0)
	{
		inputOverlayHideInMenu= false
	}
iniwrite, "%inputOverlayHideInMenu%",%curcfg%,OPTIONS,input_overlay_hide_in_menu
return

OpacityDDL:
gui, submit, nohide
guiControlget,OPAC,,OPACDDL
StringSplit,opacvar,OPAC,-
opactyp= menu
if (opacvar1 = "Overlay")
{
	opactyp= input
}
iniread,OPASLD,%curcfg%,OPTIONS,%opactyp%_%opacvar1%_%opacvar2%
OPAUPD:= OPASLD*100
guicontrol, ,OPASLD,%OPAUPD%
guicontrol, ,OPAEDT,%OPASLD%
return

OpaEdt:
gui,submit,nohide
guicontrolget,OPAEDT,,OPAEDT
guiControlget,OPAC,,OPACDDL
opacw:= OPAEDT*100
StringSplit,opacvar,OPAC,-
opactyp= menu
if (opacvar1 = "Overlay")
{
	opactyp= input
}
%opactyp%%opacvar1%%opacvar2%= %opacw%
OPASLD:= % %opactyp%%opacvar1%%opacvar2%
iniwrite, "%OPAEDT%",%curcfg%,OPTIONS,%opactyp%_%opacvar1%_%opacvar2%
guicontrol, ,OPASLD,%opacw%
return

OpacitySlider:
gui, submit, nohide
guicontrolget,OPACSLD,,OPACSLD
opacw:= OPASLD/100
guiControlget,OPAC,,OPACDDL
StringSplit,opacvar,OPAC,-
opactyp= menu
if (opacvar1 = "Overlay")
{
	opactyp= input
}
%opactyp%%opacvar1%%opacvar2%= %opacw%
OPASLD:= % %opactyp%%opacvar1%%opacvar2%
guicontrol,,OPAEDT,%opacw%
iniwrite, "%opacw%",%curcfg%,OPTIONS,%opactyp%_%opacvar1%_%opacvar2%
gui, submit,nohide
return
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
MenuButDDL:
gui, submit, nohide
guicontrolget,MNUACT,,MNUACT
MNUVAL= % menu%MNUACT%btn
guicontrol,, MNUJOY,|%MNUVAL%||%JOYSET%
return
MenuJoy:
gui, submit, nohide
guicontrolget,MNUACT,,MNUACT
guicontrolget, MNUJOY,,MNUJOY
iniwrite, "%MNUJOY%",%curcfg%,OPTIONS,menu_%MNUACT%_btn
return
ThrottleMenu:
gui, submit, nohide
menuThrottleFramerate= true
if (THRTL = 0)
{
menuThrottleFrameRate= false
}
iniwrite, "%menuThrottleFramerate%",%curcfg%,OPTIONS,menu_throttle_framerate
return
PauseMenu:
gui, submit, nohide
menuPauseLibretro= true
if (PAUSMNU = 0)
{
menuPauseLibretro= false
}
iniwrite, "%menuPauseLibretro%",%curcfg%,OPTIONS,menu_pause_libretro
return
ShowDate:
gui, submit, nohide
menuTimedateEnable= true
if (DATEMNU= 0)
{
menuTimedateEnable= false
}
iniwrite, "%menuTimedateEnable%",%curcfg%,OPTIONS,menu_timedate_enable
return
NavigaionWrap:
gui, submit, nohide
menuNavigationWraparoundEnable= true
if (NAVWRAP = 0)
{
menuNavigationWraparoundEnable= false
}
iniwrite, "%menuNavigationWraparoundEnable%",%curcfg%,OPTIONS,menu_navigation_wraparound_enable
return
ShowImages:
gui, submit, nohide
xmbShowImages= true
if (SHWIMG = 0)
{
xmbShowImages= false
}
iniwrite, "%xmbShowImages%",%curcfg%,OPTIONS,xmb_show_images
return
ShowMusic:
gui, submit, nohide
xmbShowMusic= true
if (SHWMSC= 0)
{
xmbShowMusic= false
}
iniwrite, "%xmbShowMusic%",%curcfg%,OPTIONS,xmb_show_music
return
ShowVideo:
gui, submit, nohide
xmbShowVideo= true
if (SHWVID = 0)
{
xmbShowVideo= false
}
iniwrite, "%xmbShowVideo%",%curcfg%,OPTIONS,xmb_show_video
return
ShowImpCon:
gui, submit, nohide
xmbShowAdd= true
if (SHWCOMPIN = 0)
{
xmbShowAdd= false
}
iniwrite, "%xmbShowAdd%",%curcfg%,OPTIONS,xmb_show_add
return
ShowHistory:
gui, submit, nohide
xmbShowHistory= true
if (SHWHIS = 0)
{
xmbShowHistory= false
}
iniwrite, "%xmbShowHistory%",%curcfg%,OPTIONS,xmb_show_history
return
ShowBatteryLvl:
gui,submit,nohide
menuBatteryLevelEnable= false
if (SHWBATLVL = 1)
	{
		menuBatteryLevelEnable= true
	}
iniwrite, "%menuBatteryLevelEnable%",%curcfg%,OPTIONS,menu_battery_level_enable
return
ShowAdvancedSettings:
gui, submit, nohide
menuShowAdvancedSettings= true
if (SHWADV = 0)
{
menuShowAdvancedSettings= false
}
iniwrite, "%menuShowAdvancedSettings%",%curcfg%,OPTIONS,menu_show_advanced_settings
return

ShowConfigurations:
gui, submit, nohide
menuShowConfigurations= true
if (MENSHOWCFG = 0)
{
menuShowConfigurations= false
}
iniwrite, "%menuShowConfigurations%",%curcfg%,OPTIONS,menu_show_configurations
return

ShowQuitRetroarch:
gui, submit, nohide
menuShowQuitRetroarch= true
if (MENSHOWQUIT = 0)
{
menuShowQuitRetroarch= false
}
iniwrite, "%menuShowQuitRetroarch%",%curcfg%,OPTIONS,menu_show_quit_retroarch
return


ShowOnlineUpdater:
gui, submit, nohide
menuShowOnlineUpdater= true
if (MENSHOWONLUP = 0)
{
menuShowOnlineUpdater= false
}
iniwrite, "%menuShowOnlineUpdater%",%curcfg%,OPTIONS,menu_show_online_updater
return


ShowLoadCore:
gui, submit, nohide
menuShowLoadCore= true
if (MENSHOWLDCR = 0)
{
menuShowLoadCore= false
}
iniwrite, "%menuShowLoadCore%",%curcfg%,OPTIONS,menu_show_Load_Core
return


ShowLoadContent:
gui, submit, nohide
menuShowLoadContent= true
if (MENSHOWLDCONT = 0)
{
menuShowLoadContent= false
}
iniwrite, "%menuShowLoadContent%",%curcfg%,OPTIONS,menu_show_Load_Content
return


ShowReboot:
gui, submit, nohide
menuShowReboot= true
if (MENSHOWREB = 0)
{
menuShowReboot= false
}
iniwrite, "%menuShowReboot%",%curcfg%,OPTIONS,menu_show_Reboot
return


ShowInformation:
gui, submit, nohide
menuShowInformation= true
if (MENSHOWINFO = 0)
{
menuShowInformation= false
}
iniwrite, "%menuShowInformation%",%curcfg%,OPTIONS,menu_show_Information
return


Showhelp:
gui, submit, nohide
menuShowhelp= true
if (MENSHOWHLP = 0)
{
menuShowhelp= false
}
iniwrite, "%menuShowhelp%",%curcfg%,OPTIONS,menu_show_help
return


ShowCoreUpdater:
gui, submit, nohide
menuShowCoreUpdater= true
if (MENSHOWCUP = 0)
{
menuShowCoreUpdater= false
}
iniwrite, "%menuShowCoreUpdater%",%curcfg%,OPTIONS,menu_show_core_updater
return

ShowSettings:
gui, submit, nohide
xmbShowSettings= true
if (SHWSET = 0)
{
xmbShowSettings= false
}
iniwrite, "%xmbShowSettings%",%curcfg%,OPTIONS,xmb_show_settings
return

ShowHidden:
gui, submit, nohide
ShowHiddenFiles= true
xmbShowHidden= true
if (SHWHID = 0)
{
ShowHiddenFiles= false
xmbShowHidden= false
}
iniwrite, "%showHiddenFiles%",%curcfg%,OPTIONS,show_hidden_files
iniwrite, "%xmbShowHidden%",%curcfg%,OPTIONS,xmb_show_hidden
return
ShowFPS:
gui, submit, nohide
fpsShow= true
if (SHWFPS= 0)
{
fpsShow= false
}
iniwrite, "%fpsShow%",%curcfg%,OPTIONS,fps_show
return
Companion:
gui, submit, nohide
uiCompanionEnable= true
if (CMPAN = 0)
{
uiCompanionEnable= false
}
iniwrite, "%uiCompanionEnable%",%curcfg%,OPTIONS,ui_companion_enable
return
FilterExt:
gui, submit, nohide
menuNavigationBrowserFilterSupportedExtensionsEnable= true
if (FILTEXT = 0)
{
menuNavigationBrowserFilterSupportedExtensionsEnable= false
}
iniwrite, "%menuNavigationBrowserFilterSupportedExtensionsEnable%",%curcfg%,OPTIONS,menu_navigation_browser_filter_supported_extensions_enable
return
MenuFilter:
gui, submit, nohide
guicontrolget,menuLinearFilter,,MNUFLT
iniwrite, "%menuLinearFilter%",%curcfg%,OPTIONS,menu_linear_filter
return
VideoMesPosX:
gui, submit, nohide
guicontrolget,videoMessagePosX,,VMSGX
iniwrite, "%videoMessagePosX%",%curcfg%,OPTIONS,video_message_pos_x
return
VideoMesPosY:
gui, submit, nohide
guicontrolget,videoMessagePosY,,VMSGY
iniwrite, "%videoMessagePosY%",%curcfg%,OPTIONS,video_message_pos_y
return
FontSize:
gui, submit, nohide
videoFontSize= 32
guicontrolget, videoFontSize,,FNTSZ
iniwrite, "%videoFontSize%",%curcfg%,OPTIONS,video_font_size
return
EnableFont:
gui, submit, nohide
videoFontEnable= true
if (VFNTEN = 0)
{
videoFontEnable= false
guicontrol,disable, FNTSZ
guicontrol,disable, VMSGY
guicontrol,disable, VMSGX
guicontrol,disable, DPIOVR
guicontrol,disable, DPIPT
}
if (VFNTEN = 1)
{
videoFontEnable= true
guicontrol,enable, FNTSZ
guicontrol,enable, VMSGY
guicontrol,enable, VMSGX
guicontrol,enable, DPIOVR
guicontrol,enable, DPIPT
}
iniwrite, "%videoFontEnable%",%curcfg%,OPTIONS,video_font_enable
return

AlphaSlider:
gui, submit, nohide
guicontrolget,XMBALF,,XMBALF
guicontrol,,VIDAEDT,%XMBALF%
stringsplit,alfsld,XMBALF,.
iniwrite, "%alfsld1%",%curcfg%,OPTIONS,xmb_alpha_factor
return

VidAEdt:
gui,submit,nohide
guicontrolget,VIDAEDT,,VIDAEDT
guicontrol,,XMBALF,%VIDAEDT%
return

XMBPL:
gui, submit, nohide
guicontrol,,MNUSYS,|Playlists||%plistNamz%
guicontrol, ,ROMFLS,|
if (XMBPL = 1)
	{
		guicontrol,disable,PLRCR
		guicontrol,,PLRCR,0
	}
return

XMBFL:
gui, submit, nohide
guicontrol,,MNUSYS,|Downloads||%dwnlfldrs%
guicontrol, ,ROMFLS,|
if (XMBFL = 1)
	{
		guicontrol,enable,PLRCR
	}

return

PLRCR:
gui,submit,nohide
gosub, MenuSystem
return

DPIOverride:
gui, submit, nohide
guicontrol,enable,DPIPT
dpiOverrideEnable= true
if (DPIOVR = 0)
{
guicontrol,disable,DPIPT
dpiOverrideEnable= false
}
iniwrite, "%dpiOverrideEnable%",%curcfg%,OPTIONS,dpi_override_enable
return
DPISize:
gui, submit, nohide
guicontrolget,dpiOverrideValue,,DPIPT
iniwrite, "%dpiOverrideValue%",%curcfg%,OPTIONS,dpi_override_value
return

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
MenuSystem:
gui, submit, nohide
guicontrol,disable,IMGFLS
guicontrol,disable,ROMFLS
guicontrolget,MNUSYS,,MNUSYS
guicontrolget,PLRCR,,PLRCR
guicontrolget,XMBFL,,XMBFL
guicontrolget,XMBPL,,XMBPL
if (MNUSYS = "Downloads")
	{
		return
	}
if (MNUSYS = "Playlists")
	{
		return
	}

if (XMBPL =1)
	{
		rlin= 2
		GUIplstl= 
		Loop, Read, %playlistDirectory%\%MNUSYS%.lpl
			{	
				if (A_Index = rlin)
				{
					if (A_LoopReadLine = "")
						{
							break
						}
						SplitPath,A_LoopReadLine,PlstROMFile,PlsROMPth,PlsROMExt,PlsROMName,PlsROMDrv
					GUIplstl .= PlsROMName . "|"
				rlin+=6
				}	
			}
		Sort,GUIplstl,D|
		guicontrol, ,ROMFLS, |%GUIplstl%
		gosub,RefreshImg
		return
	}

Loop, Read, libmatch.set
	{
		libmlk1= 
		libmlk2= 
		StringSplit,libmlk, A_LoopReadLine,|
		if (libmlk2 = MNUSYS)
			{
				SplitPath,libmlk1,,,,matchinfo
				matchinfo= %matchinfo%.info
				Loop, Read, %raexeloc%\info\%matchinfo%
					{
						extoutp1= 
						extoutp2= 
						stringsplit,extoutp, A_LoopReadLine,=,%A_Space% ""
						if (extoutp1 = "supported_extensions")
							{
								listswp= 1
								StringReplace, omitxtr, extoutp2,|,`,,All
								omitxtv:= omitxtr . "|" . "|" . omitxtv
								break
							}
					}
			}
	}
if (extoutp2 = "")
	{
		if (EXCLBOOL = 1)
			{			
				{
					listswp= 1
					extoutp2:= omitxi
					stringreplace, omitxtv, extoutp2,|,`,, All
				}
			}
	}
stringsplit,omitxtf,omitxtv,|
stringreplace, pipxtr, omitxtf1,`,,|, All
stringsplit,omitxtn,pipxtr,|

ar := Object()
Loop, %omitxtn0%
	{
		new= % (omitxtn%a_index%)
		if (omitxtn%a_index% <> "")
			{
				ar.insert(new)
			}
	}
GUIdwnfl= 
Loop,%coreassetsdirectory%\%MNUSYS%\*.*,,%PLRCR%
	{
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		if (noapl = 1)
			{
				GUIdwnfl .= A_LoopFileFullPath . "|"
			}
	}
Sort,GUIdwnfl,D|
guicontrol, ,ROMFLS,|%GUIdwnfl%
gosub,RefreshImg
return

RefreshImg:
gui, submit, nohide
thmbPOP= 
Loop, files, %thumbnailsDirectory%\%MNUSYS%\%thumbType%\*.*
{
	thmbPOP .= A_LoopFileName . "|"
}
Sort,thmbPOP,D|
guicontrol,,IMGFLS,|%thmbPOP%
guicontrol,enable,IMGFLS
guicontrol,enable,ROMFLS
gui, submit, nohide
return

TitleThumb:
gui, submit, nohide
menuThumnails= 1
thumbType= Named_Titles
iniwrite, "%menuThumbnails%",%curcfg%,OPTIONS,menu_thumnails
guicontrolget,remmenu,,IMGFLS
gosub, MenuSystem
guicontrol,ChooseString,IMGFLS,%remmenu%
gosub, GetImageName
return
ScreenShotThumb:
gui, submit, nohide
menuThumnails= 2
thumbType= Named_Snaps
iniwrite, "%menuThumbnails%",%curcfg%,OPTIONS,menu_thumnails
guicontrolget,remmenu,,IMGFLS
gosub, MenuSystem
guicontrol,ChooseString,IMGFLS,%remmenu%
gosub, GetImageName
return
BoxThumb:
gui, submit, nohide
menuThumnails= 3
thumbType= Named_Boxarts
iniwrite, "%menuThumbnails%",%curcfg%,OPTIONS,menu_thumnails
guicontrolget,remmenu,,IMGFLS
gosub, MenuSystem
guicontrol,ChooseString,IMGFLS,%remmenu%
gosub, GetImageName
return
ThumbEnable:
gui, submit, nohide
if (THUMBON = 0)
{
menuThumnails= 0
guicontrol,disable,BOXCVR
guicontrol,disable,TITLCVR
guicontrol,disable,SSHTCVR
}	
if (THUMBON = 1)
{
menuThumnails= 0
guicontrol,enable,BOXCVR
guicontrol,enable,TITLCVR
guicontrol,enable,SSHTCVR
}
return
SThumbEnable:
gui, submit, nohide
if (STHUMBON = 0)
	{
		savestateThumbnailEnable= false
	}	
if (STHUMBON = 1)
	{
		savestateThumbnailEnable= true
	}
iniwrite, "%savestateThumbnailEnable%",%curcfg%,OPTIONS,savestate_Thumbnail_Enable
return
GetThumb:

FileSelectFile,toImgRen,3,%thumbnailsDirectory%,,*.png,*.jpg
splitpath,toImgRen,IMGFLS,imsgsrcloc,renamedExt,renamedName,renamedDrv
if (toImgRen = "")
{
return
}
guicontrol,,THMBNEDT,%renamedImage%
SB_SetText(" " renamedimage " selected")
return
SaveThumbName:
renamedImage= 
gui, submit, nohide
guicontrolget, renamedImage,,THMBNEDT
if (imgsrcloc = "")
	{
		imgsrcloc = %thumbnailsDirectory%\%MNUSYS%\%thumbType%
	}
if (renamedImage <> "")
{
FileCopy, %imgsrcloc%\%IMGFLS%,%thumbnailsDirectory%\%MNUSYS%\%thumbType%\%renamedImage%,1
SB_SetText(" " IMGFLS " has been renamed to " renamedimage " ")
guicontrol,,%imgsrcloc%\%renamedImage%
gosub, RefreshImg
}
return

MatchThumbToROM:
gui, submit, nohide
guicontrolget,renamedImage,,THMBEDT
return
SwapThumbImage:
GetImageName:
gui, submit, nohide
imgsrcloc= 
guicontrolget,ROMFLS,,ROMFLS
guicontrolget,IMGFLS,,IMGFLS
if (IMGFLS = "")
	{
		Return
	}
splitpath,IMGFLS,,,renamedExt
guicontrol,,THMBNEDT,%ROMFLS%.%renamedExt%
guicontrol,,IMGLOC,%thumbnailsDirectory%\%MNUSYS%\%thumbType%\%IMGFLS%
gui, submit,nohide
GuiControl, Move, IMGLOC, x570 y18 w183 h184
return

IMGLOC:
gui,submit,nohide
gosub, XMBTOOLTIP
return

GetROMName:
gui, submit, nohide
splitpath,IMGFLS,,,renamedExt,,
StringLeft,IMGFND,ROMFLS,8
Guicontrol, focus, IMGFLS
LBEX_SELECTSTRING(IMGWIND,IMGFND)
LBEX_SELECTSTRING(IMGWIND,ROMFLS)
gosub, GetImageName
guicontrol,,THMBNEDT,%ROMFLS%.%renamedExt%
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;     EMU-OPTION FUNCTIONS     ;;;;;;;;;;;;;;;;;;;;;

EMUOPTPOP:
gui,submit,nohide

Guicontrol,,TABMENU,|Install-Apps|Options||JoyPad-CFG|Playlists|Frontends|Archive.org|Netplay-Lobby|Jackets
guicontrol,hide,SWHOST		
guicontrol,disable,OPNCORE
guicontrol,disable,CNCTBUT
guicontrol,disable,HostButton
guicontrol,,SWHOST,0
guicontrol,show,LNCHBUT
guicontrol,hide,HLNCHBUT

APLN= 1
runningcore= emulator
raoptgl= hide
emutog= show
guicontrolget,LCORE,,LCORE
IniRead,ovrnm, Assignments.ini,OVERRIDES
FLCOR= 

Loop,Parse, ovrnm,`n
	{
		inran1= 
		inran2= 
		StringSplit,inran,A_LoopField,=,"
		;;"
		if (inran2 = LCORE)
			{
				FLCOR= %inran1%
				break
			}
	}

nicktst=
subemuname=
EMUFN= 
EMUL= 
EMUXTYP= 
EMUSN= 
EMUDRV= 

cfginif= apps.ini
cfginik= EMULATORS
cfgemc= %RJEMUPRECFG%

if (ASVRM = 1)
	{
		cfginif= Assignments.ini
		cfginik= ASSIGNMENTS
		cfgemc= %FLCOR%
	}
IniRead,nicktst,%cfginif%,%cfginik%,%cfgemc%

if (ASVRM = 1)
	{
		SplitPath,nicktst,,tmpmund
		SplitPath,tmpmund,cfgemc
	}


if (nicktst <> "")
	{
		subemuname= %nicktst%
	}
if (subemuname <> "")
	{
		gosub, TOGRAOPTS
		SplitPath,nicktst,EMUFN,EMUL,EMUXTYP,EMUSN,EMUDRV
		
		Loop, Read, Emuparts.set
			{
				jemun1= 
				StringSplit,jemun,A_LoopReadLine,=,"
				;"
				
			;;}
		;;Loop, Parse, SUPEMUOPT, |
			;;{
				if (jemun1 = EMUSN)
					{
						gosub, TOGRAOPTS
						StringReplace,EMUFNS,EMUSN,-,,All
						StringReplace,EMUFNS,EMUFNS,%A_Space%,,All
						;;gosub, %EMUFNS%GUI
						try gosub, %EMUSN%GUI
						catch, {
								}
						return
					}
				
			}
		gosub, EMUUNPOP
	}
return

;{;;;; ~~~OPTION-gui functions~~~  ;;;;;

emuBUTA:
gui,submit,nohide
if (emutog = "show")
	{
		emutog= hide
	}
	else if (emutog = "hide")
	{
		emutog= show
	}
gosub, EMUUNPOP
gosub, %EMUSN%BUTA:
return

emuBUTB:
gui,submit,nohide
gosub, %EMUSN%BUTB
return

emuBUTC:
gui,submit,nohide
gosub, %EMUSN%BUTC
return

emuBUTG:
gui,submit,nohide
gosub, %EMUSN%BUTG
return

emuBUTD:
gui,submit,nohide
gosub, %EMUSN%BUTD
return

emuBUTE:
gui,submit,nohide
gosub, %EMUSN%BUTE
return

emuBUTF:
gui,submit,nohide
gosub, %EMUSN%BUTF
return

emuBUTH:
gui,submit,nohide
gosub, %EMUSN%BUTH
return

emuBUTI:
gui,submit,nohide
gosub, %EMUSN%BUTI
return

emuBUTJ:
gui,submit,nohide
gosub, %EMUSN%BUTJ
return

emuCHKD:
gui,submit,nohide
gosub, %EMUSN%CHKD
return

emuCHKE:
gui,submit,nohide
gosub, %EMUSN%CHKE
return

emuCHKF:
gui,submit,nohide
gosub, %EMUSN%CHKF
return

emuCHKG:
gui,submit,nohide
gosub, %EMUSN%CHKG
return

emuCHKH:
gui,submit,nohide
gosub, %EMUSN%CHKH
return

emuCHKI:
gui,submit,nohide
gosub, %EMUSN%CHKI
return

emuCHKJ:
gui,submit,nohide
gosub, %EMUSN%CHKJ
return

emuCHKK:
gui,submit,nohide
gosub, %EMUSN%CHKK
return

emuCHKL:
gui,submit,nohide
gosub, %EMUSN%CHKL
return

emuCHKM:
gui,submit,nohide
gosub, %EMUSN%CHKM
return

emuCHKN:
gui,submit,nohide
gosub, %EMUSN%CHKN
return

emuCHKO:
gui,submit,nohide
gosub, %EMUSN%CHKO
return

emuCHKP:
gui,submit,nohide
gosub, %EMUSN%CHKP
return

emuCHKQ:
gui,submit,nohide
gosub, %EMUSN%CHKQ
return

emuCHKA:
gui,submit,nohide
gosub, %EMUSN%CHKA
return

emuCHKB:
gui,submit,nohide
gosub, %EMUSN%CHKB
return

emuCHKC:
gui,submit,nohide
gosub, %EMUSN%CHKC
return

emuCBXE:
gui,submit,nohide
gosub, %EMUSN%CBXE
return

emuCBXF:
gui,submit,nohide
gosub, %EMUSN%CBXF
return

emuCBXG:
gui,submit,nohide
gosub, %EMUSN%CBXG
return

emuCBXH:
gui,submit,nohide
gosub, %EMUSN%CBXH
return

emuCBXI:
gui,submit,nohide
gosub, %EMUSN%CBXI
return

emuCBXJ:
gui,submit,nohide
gosub, %EMUSN%CBXJ
return

emuCBXA:
gui,submit,nohide
gosub, %EMUSN%CBXA
return

emuCBXB:
gui,submit,nohide
gosub, %EMUSN%CBXB
return

emuCBXC:
gui,submit,nohide
gosub, %EMUSN%CBXC
return

emuCBXD:
gui,submit,nohide
gosub, %EMUSN%CBXD
return

emuDDLE:
gui,submit,nohide
gosub, %EMUSN%DDLE
return

emuDDLF:
gui,submit,nohide
gosub, %EMUSN%DDLF
return

emuDDLG:
gui,submit,nohide
gosub, %EMUSN%DDLG
return

emuDDLH:
gui,submit,nohide
gosub, %EMUSN%DDLH
return

emuDDLI:
gui,submit,nohide
gosub, %EMUSN%DDLI
return

emuDDLJ:
gui,submit,nohide
gosub, %EMUSN%DDLJ
return

emuDDLC:
gui,submit,nohide
gosub, %EMUSN%DDLC
return

emuDDLD:
gui,submit,nohide
gosub, %EMUSN%DDLD
return

emuDDLA:
gui,submit,nohide
gosub, %EMUSN%DDLA
return

emuDDLB:
gui,submit,nohide
gosub, %EMUSN%DDLB
return

emuEDTA:
gui,submit,nohide
gosub, %EMUSN%EDTA
return

emuEDTB:
gui,submit,nohide
gosub, %EMUSN%EDTB
return

emuEDTC:
gui,submit,nohide
gosub, %EMUSN%EDTC
return

emuEDTD:
gui,submit,nohide
gosub, %EMUSN%EDTD
return

emuEDTE:
gui,submit,nohide
gosub, %EMUSN%EDTE
return

emuEDTF:
gui,submit,nohide
gosub, %EMUSN%EDTF
return

emuEDTG:
gui,submit,nohide
gosub, %EMUSN%EDTG
return

emuUPDA:
gui,submit,nohide
gosub, %EMUSN%UPDA
return

emuEDTH:
gui,submit,nohide
gosub, %EMUSN%EDTH
return

emuEDTI:
gui,submit,nohide
gosub, %EMUSN%EDTI
return

emuUPDB:
gui,submit,nohide
gosub, %EMUSN%UPDB
return

emuUPDC:
gui,submit,nohide
gosub, %EMUSN%UPDC
return

emuLBXA:
gui,submit,nohide
gosub, %EMUSN%LBXA
return

emuLBXB:
gui,submit,nohide
gosub, %EMUSN%LBXB
return

emuLVA:
gui,submit,nohide
gosub, %EMUSN%LVA
return

emuLVB:
gui,submit,nohide
gosub, %EMUSN%LVB
return

emuLVC:
gui,submit,nohide
gosub, %EMUSN%LVC
return

emuRad5B:
gui,submit,nohide
gosub, %EMUSN%Rad5B
return

emuRad5C:
gui,submit,nohide
gosub, %EMUSN%Rad5C
return

emuRad4A:
gui,submit,nohide
gosub, %EMUSN%Rad4A
return

emuRad4B:
gui,submit,nohide
gosub, %EMUSN%Rad4B
return

emuRad5A:
gui,submit,nohide
gosub, %EMUSN%Rad5A
return

emuRad6A:
gui,submit,nohide
gosub, %EMUSN%Rad6A
return

emuRad6B:
gui,submit,nohide
gosub, %EMUSN%Rad6B
return

emuRad6C:
gui,submit,nohide
gosub, %EMUSN%Rad6C
return

emuRad6D:
gui,submit,nohide
gosub, %EMUSN%Rad6D
return

emuRad7A:
gui,submit,nohide
gosub, %EMUSN%Rad7A
return

emuRad7B:
gui,submit,nohide
gosub, %EMUSN%Rad7B
return

emuRad8A:
gui,submit,nohide
gosub, %EMUSN%Rad8A
return

emuRad8B:
gui,submit,nohide
gosub, %EMUSN%Rad8B
return

emuRad9A:
gui,submit,nohide
gosub, %EMUSN%Rad9A
return

emuRad9B:
gui,submit,nohide
gosub, %EMUSN%Rad9B
return

emuRad9C:
gui,submit,nohide
gosub, %EMUSN%Rad9C
return

emuRad10A:
gui,submit,nohide
gosub, %EMUSN%Rad10A
return

emuRad10B:
gui,submit,nohide
gosub, %EMUSN%Rad10B
return

emuRad11A:
gui,submit,nohide
gosub, %EMUSN%Rad11A
return

emuRad11B:
gui,submit,nohide
gosub, %EMUSN%Rad11B
return

emuRad2A:
gui,submit,nohide
gosub, %EMUSN%Rad2A
return

emuRad2B:
gui,submit,nohide
gosub, %EMUSN%Rad2B
return

emuRad2C:
gui,submit,nohide
gosub, %EMUSN%Rad2C
return

emuRad1A:
gui,submit,nohide
gosub, %EMUSN%Rad1A
return

emuRad3A:
gui,submit,nohide
gosub, %EMUSN%Rad3A
return

emuRad3B:
gui,submit,nohide
gosub, %EMUSN%Rad3B
return

emuRad3C:
gui,submit,nohide
gosub, %EMUSN%Rad3C
return

emuRad3D:
gui,submit,nohide
gosub, %EMUSN%Rad3D
return

emuRad1B:
gui,submit,nohide
gosub, %EMUSN%Rad1B
return

emuSLDA:
gui,submit,nohide
gosub, %EMUSN%SLDA
return

emuSLDB:
gui,submit,nohide
gosub, %EMUSN%SLDB
return

emuSLDC:
gui,submit,nohide
gosub, %EMUSN%SLDC
return

emuSLDD:
gui,submit,nohide
gosub, %EMUSN%SLDD
return

emuSLDE:
gui,submit,nohide
gosub, %EMUSN%SLDE
return

;};;;;;;;;;;;;;;;;;;;;;;;;;

TOGSKELGUI:
guicontrol,%moptog%,AUTOLNCH
guicontrol,%moptog%,LCORE
guicontrol,%moptog%,CUSTSWITCHS
guicontrol,%moptog%,OPTDDL
guicontrol,%moptog%,HOPT
guicontrol,%moptog%,DOPT
guicontrol,%moptog%,ROMLOC
guicontrol,%moptog%,GROM
guicontrol,%moptog%,OPNCORE
guicontrol,%moptog%,LNCHBUT
guicontrol,%moptog%,CLRCUROM

TOGSKELOPTS:
guicontrol,%moptog%,DRAGIMAGE
guicontrol,%moptog%,SRCHGRP
guicontrol,%moptog%,LOCFLDRS
guicontrol,%moptog%,LOCPLSTS
guicontrol,%moptog%,LOCSRCHREC
guicontrol,%moptog%,LOCROMSRCH
guicontrol,%moptog%,LOCROMSRCHBUT
guicontrol,%moptog%,LOCASSETDDL
guicontrol,%moptog%,ROMRPGRP

guicontrol,%moptog%,LOCROMPOP
return
;;guicontrol,%moptog%,JCORE

TOGSKELONLY:
guicontrol,%moptog%,SKSUMGB
guicontrol,%moptog%,SETEMUD
guicontrol,%moptog%,EMUDETECT
guicontrol,%moptog%,SETJKD
guicontrol,%moptog%,SKSYSTXT
guicontrol,%moptog%,SKPRFJTXT
guicontrol,%moptog%,SKDTTXT
guicontrol,%moptog%,SKDETSTXT
guicontrol,%moptog%,SKDSETXT
guicontrol,%moptog%,SKEMUDTXT
guicontrol,%moptog%,SKCCTXT
guicontrol,%moptog%,SKRJQTXT
guicontrol,%moptog%,SKDISPLCHTXT
guicontrol,%moptog%,SKEMUDISP
guicontrol,%moptog%,SKSYSDISP
guicontrol,%moptog%,SKRESET
guicontrol,%moptog%,SKRESDDL
guicontrol,%moptog%,SKRAEXE
guicontrol,%moptog%,SKRAXETXT
guicontrol,%moptog%,RAVERTXT
guicontrol,%moptog%,GRAVER
guicontrol,%moptog%,SKRADISP
guicontrol,%moptog%,SKIMPRATXT
guicontrol,%moptog%,SKRAIMP
guicontrol,%moptog%,HOVPREV
guicontrol,%moptog%,SKSAVE
guicontrol,%moptog%,SKSVAS
guicontrol,%moptog%,SKSAVTXT
guicontrol,%moptog%,SKRBLD
guicontrol,%moptog%,SKRBLDTXT
guicontrol,%moptog%,SKBSRLGRP
guicontrol,%moptog%,DISCFG
guicontrol,%moptog%,SKCLRQ
guicontrol,%moptog%,SKCLRTXT
guicontrol,%moptog%,SKBEFCMD
guicontrol,%moptog%,SKAFTCMD
guicontrol,%moptog%,SKRBFTXT
guicontrol,%moptog%,SKRAFTXT
guicontrol,%moptog%,SKENBF
guicontrol,%moptog%,SKENAF
guicontrol,%moptog%,SKOVRJM
guicontrol,%moptog%,SKXPADOV
guicontrol,%moptog%,SKAMOV
guicontrol,%moptog%,SKPROFOV
guicontrol,%moptog%,SKFROVDD
guicontrol,%moptog%,SKFROV
return

;{;;;;;;;;;;;;;;;;;;;;;;;;;   RELOAD EMULATOR CONFIG    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RELOADCFG:
gui,submit,nohide
guicontrolget,LCORE,,LCORE
ifinstring, LCORE, _libretro
	{
		gosub,GetIniVars
		return
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;



;{;;;;;;;;;;;;;;;;;;;;;;;;;     SHOW SKELETONKEY OPTIONS     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RAOPTSHOW:
emutog= hide
raoptgl= hide
moptog= show
gosub, TOGRAOPTS
gosub, EMUUNPOP
gosub, TOGSKELGUI
gosub, TOGSKELONLY
GuiControl, Choose, TABMENU, 2
return

;};;;;;;;;;;;;;;;;;

;{;;; ~~~~ OPTION-template items ~~~ ;;;

EMUUNPOP:
guicontrol,%emutog%,emuBUTA
guicontrol,%emutog%,emuBUTB
guicontrol,%emutog%,emuBUTC
guicontrol,%emutog%,emuBUTG
guicontrol,%emutog%,emuBUTD
guicontrol,%emutog%,emuBUTE
guicontrol,%emutog%,emuBUTF
guicontrol,%emutog%,emuBUTH
guicontrol,%emutog%,emuBUTI
guicontrol,%emutog%,emuBUTJ
guicontrol,%emutog%,emuCHKD
guicontrol,%emutog%,emuCHKE
guicontrol,%emutog%,emuCHKF
guicontrol,%emutog%,emuCHKG
guicontrol,%emutog%,emuCHKH
guicontrol,%emutog%,emuCHKI
guicontrol,%emutog%,emuCHKJ
guicontrol,%emutog%,emuCHKK
guicontrol,%emutog%,emuCHKL
guicontrol,%emutog%,emuCHKM
guicontrol,%emutog%,emuCHKN
guicontrol,%emutog%,emuCHKO
guicontrol,%emutog%,emuCHKP
guicontrol,%emutog%,emuCHKQ
guicontrol,%emutog%,emuCHKA
guicontrol,%emutog%,emuCHKB
guicontrol,%emutog%,emuCHKC
guicontrol,%emutog%,emuCBXE
guicontrol,%emutog%,emuCBXF
guicontrol,%emutog%,emuCBXG
guicontrol,%emutog%,emuCBXH
guicontrol,%emutog%,emuCBXI
guicontrol,%emutog%,emuCBXJ
guicontrol,%emutog%,emuCBXA
guicontrol,%emutog%,emuCBXB
guicontrol,%emutog%,emuCBXC
guicontrol,%emutog%,emuCBXD
guicontrol,%emutog%,emuDDLE
guicontrol,%emutog%,emuDDLF
guicontrol,%emutog%,emuDDLG
guicontrol,%emutog%,emuDDLH
guicontrol,%emutog%,emuDDLI
guicontrol,%emutog%,emuDDLJ
guicontrol,%emutog%,emuDDLC
guicontrol,%emutog%,emuDDLD
guicontrol,%emutog%,emuDDLA
guicontrol,%emutog%,emuDDLB
guicontrol,%emutog%,emuEDTA
guicontrol,%emutog%,emuEDTB
guicontrol,%emutog%,emuEDTC
guicontrol,%emutog%,emuEDTD
guicontrol,%emutog%,emuEDTE
guicontrol,%emutog%,emuEDTF
guicontrol,%emutog%,emuEDTG
guicontrol,%emutog%,emuEDTI
guicontrol,%emutog%,emuUPDA
guicontrol,%emutog%,emuEDTH
guicontrol,%emutog%,emuUPDB
guicontrol,%emutog%,emuLVA
guicontrol,%emutog%,emuUPDC
guicontrol,%emutog%,emuGRPA
guicontrol,%emutog%,emuGRPB
guicontrol,%emutog%,emuGRPC
guicontrol,%emutog%,emuGRPD
guicontrol,%emutog%,emuGRPE
guicontrol,%emutog%,emuGRPF
guicontrol,%emutog%,emuGRPG
guicontrol,%emutog%,emuLBXA
guicontrol,%emutog%,emuLBXB
guicontrol,%emutog%,emuLVA
guicontrol,%emutog%,emuLVB
guicontrol,%emutog%,emuLVC
guicontrol,%emutog%,emuPRGB
guicontrol,%emutog%,emuPRGA
guicontrol,%emutog%,emuRad5B
guicontrol,%emutog%,emuRad5C
guicontrol,%emutog%,emuRad4A
guicontrol,%emutog%,emuRad4B
guicontrol,%emutog%,emuRad5A
guicontrol,%emutog%,emuRad6A
guicontrol,%emutog%,emuRad6B
guicontrol,%emutog%,emuRad6C
guicontrol,%emutog%,emuRad6D
guicontrol,%emutog%,emuRad7A
guicontrol,%emutog%,emuRad7B
guicontrol,%emutog%,emuRad8A
guicontrol,%emutog%,emuRad8B
guicontrol,%emutog%,emuRad9A
guicontrol,%emutog%,emuRad9B
guicontrol,%emutog%,emuRad9C
guicontrol,%emutog%,emuRad10A
guicontrol,%emutog%,emuRad10B
guicontrol,%emutog%,emuRad11A
guicontrol,%emutog%,emuRad11B
guicontrol,%emutog%,emuRad2A
guicontrol,%emutog%,emuRad2B
guicontrol,%emutog%,emuRad2C
guicontrol,%emutog%,emuRad1A
guicontrol,%emutog%,emuRad3A
guicontrol,%emutog%,emuRad3B
guicontrol,%emutog%,emuRad3C
guicontrol,%emutog%,emuRad3D
guicontrol,%emutog%,emuRad1B
guicontrol,%emutog%,emuSLDA
guicontrol,%emutog%,emuSLDB
guicontrol,%emutog%,emuSLDD
guicontrol,%emutog%,emuSLDE
guicontrol,%emutog%,emuSLDC
guicontrol,%emutog%,emuTXTA
guicontrol,%emutog%,emuTXTB
guicontrol,%emutog%,emuTXTC
guicontrol,%emutog%,emuTXTD
guicontrol,%emutog%,emuTXTE
guicontrol,%emutog%,emuTXTF
guicontrol,%emutog%,emuTXTG
guicontrol,%emutog%,emuTXTS
guicontrol,%emutog%,emuTXTT
guicontrol,%emutog%,emuTXTR
guicontrol,%emutog%,emuTXTM
guicontrol,%emutog%,emuTXTH
guicontrol,%emutog%,emuTXTI
guicontrol,%emutog%,emuTXTN
guicontrol,%emutog%,emuTXTO
guicontrol,%emutog%,emuTXTP
guicontrol,%emutog%,emuTXTQ
guicontrol,%emutog%,emuTXTJ
guicontrol,%emutog%,emuTXTK
guicontrol,%emutog%,emuTXTL
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;    EMUCFG COPY  ;;;;
EMUCFGCOPY:
EMUDFL= 
RVLKUP= %RJSYSDD%
gosub, SHRTNMLkUp
%SHRTNM%CFGF= 
%SHRTNM%CFGR= 
IfNotExist, rj\sysCfgs\%RJSYSDD%\
	{
		FileCreateDir,rj\sysCfgs\%RJSYSDD%
	}

Loop, rj\emuCfgs\%EMUSN%\*.*
	{
		SplitPath,A_LoopFileFullPath,cfgtc,cfgpth,cfgext,thecfg
		if (cfgext = "dfl")
			{
				EMUDFL= 1
				continue
			}
		if (cfgext = "ret")
			{
				snmr= 
				SplitPath,A_LoopFileFullPath,,,,snmr
				%SHRTNM%CFGR.= snmr . "|"
				FileCopy,%A_LoopFileFullPath%,rj\sysCfgs\%RJSYSDD%\%thecfg%,1
				continue
			}
		if (cfgext = "set")
			{				
				snmf= 
				SplitPath,A_LoopFileFullPath,,,,snmf
				%SHRTNM%CFGF.= snmf . "|"
				FileCopy,%A_LoopFileFullPath%,rj\sysCfgs\%RJSYSDD%\%thecfg%,1
				continue
			}
		FileCopy,%A_LoopFileFullPath%,rj\sysCfgs\%RJSYSDD%,1
		%SHRTNM%CFGF.= A_LoopFileFullPath	. "|"
	}
return

;};;;;

;{;;;;;  EMU GUI CREATION  ;;;;;

retroArchGUI:
gosub, EMUCFGCOPY
gosub, RAOPTPOP
return

;{;;;;   RETROARCH  ;;;;;;
retroArchBUTJ:
gui,submit,nohide
return

RJCORE:
rjcoretmp= %JCORE%
gui,submit,nohide
guicontrolget, JCORE,,JCORE
if (rjcoretmp = JCORE)
	{
		return
	}
guicontrol,,LCORE,|%JCORE%||%runlist%
gosub, CoreAuto
return

;};;;;

;{;;;;   MEDNAFEN  ;;;;

;{;;  create mednafen gui ;;
MEDNAFENGUI:


moptog= hide
raoptgl= hide
gosub, TOGRAOPTS
gosub, TOGSKELGUI
gosub, TOGSKELONLY

gosub, EMUCFGCOPY
guicontrol, %emutog%, emuTXTA
guicontrol,move,emuTXTA,x240 y121 w48 h13
guicontrol,,emuTXTA, Shader

guicontrol, %emutog%, emuTXTB
guicontrol,move,emuTXTB,x241 y149 w48 h13
guicontrol,,emuTXTB, Scaler

guicontrol, %emutog%,emuTXTC
guicontrol,move,emuTXTC,x270 y203 w79 h13
guicontrol,,emuTXTC,Scanline Level

guicontrol, %emutog%, emuTXTD
guicontrol,move,emuTXTD,x118 y423 w49 h13
guicontrol,,emuTXTD,Blur Level

guicontrol, %emutog%, emuTXTE
guicontrol,move,emuTXTE,x188 y90 w9 h13
guicontrol,,emuTXTE, X

guicontrol, %emutog%, emuTXTF
guicontrol,move,emuTXTF,x286 y92 w58 h13
guicontrol,,emuTXTF,Resolution

guicontrol, %emutog%, emuTXTG
guicontrol,move,emuTXTG,x253 y69 w81 h13
guicontrol,,emuTXTG,Scale Multiplier

guicontrol, %emutog%, emuTXTH
guicontrol,move,emuTXTH,x604 y227 w70 h16
guicontrol,,emuTXTH,Nickname

guicontrol, %emutog%, emuTXTI
guicontrol,move,emuTXTI,x604 y276 w90 h16
guicontrol,,emuTXTI, Server-Port

guicontrol, %emutog%, emuTXTJ
guicontrol,move,emuTXTJ,x605 y250 w70 h16
guicontrol,,emuTXTJ, ServerURL

guicontrol, %emutog%, emuTXTK
guicontrol,move,emuTXTK,x487 y371 w66 h17
guicontrol,,emuTXTK, Deinterlacer

guicontrol, %emutog%, emuTXTL
guicontrol,move,emuTXTL, x551 y119 w65 h18
guicontrol,,emuTXTL, Video Driver

guicontrol, %emutog%, emuTXTM
guicontrol,move,emuTXTM,x553 y148 w67 h19
guicontrol,,emuTXTM, Audio Driver

guicontrol, %emutog%, emuTXTN
guicontrol,move,emuTXTN,x215 y248 w61 h13
guicontrol,,emuTXTN,Divergence

guicontrol, %emutog%, emuTXTO
guicontrol,move,emuTXTO,x217 y300 w100 h13
guicontrol,,emuTXTO, Mask-Transparency

guicontrol, %emutog%, emuTXTP
guicontrol,move,emuTXTP,x324 y326 w122 h13
guicontrol,,emuTXTP,Bilinear Interpolation

guicontrol, %emutog%, emuCHKD
guicontrol,,emuCHKD,Horizontal Blur
guicontrol,move,emuCHKD,x146 y195 w92 h13

guicontrol, %emutog%, emuCHKB
guicontrol,move,emuCHKB,x122 y177 w104 h13
guicontrol,,emuCHKB,Enable Scanlines

guicontrol, %emutog%, emuCHKC
guicontrol,move,emuchKC,x573 y421 w98 h13
guicontrol,,emuchkC,CD Sanity Check

guicontrol, %emutog%, emuCHKD
guicontrol,move,emuchKD,x574 y438 w92 h13
guicontrol,,emuchkD,CD MemCache

guicontrol, %emutog%, emuCHKE
guicontrol,move,emuchKE,x326 y367 w66 h13
guicontrol,,emuchkE,GL Vsync

guicontrol, %emutog%, emuCHKF
guicontrol,move,emuchKF,x326 y344 w76 h13
guicontrol,,emuchkF,FrameSkip

guicontrol, %emutog%, emuCHKG
guicontrol,move,emuchKG,x424 y345 w82 h13
guicontrol,,emuchkG,Blitting Sync

guicontrol, %emutog%, emuCHKH
guicontrol,move,emuchKH,x360 y60 w48 h23
guicontrol,,emuchkH,None

guicontrol, %emutog%, emuDDLA
guicontrol,move,emuDDLA,x103 y117 w122
guicontrol,,emuDDLA,|none||autoip|autoipsharper|scale2x|sabr|ipsharper|ipxnoty|ipynotx|ipxnotysharper|ipynotxsharper|goat

guicontrol, %emutog%, emuDDLB
guicontrol,move,emuDDLB,x103 y144 w122
guicontrol,,emuDDLB,|none||hq2x|hq3x|hq4x|scale2x|scale3x|scale4x|2xsai|super2xsai|supereagle|nn2x|nn3x|nn4x|nny2x|nny3x|nny4x

guicontrol, %emutog%, emuDDLC
guicontrol,,emuDDLC,|none||bilinear|x-axis|y-axis
guicontrol, move,emuDDLC,x217 y323 w100

guicontrol, %emutog%, emuDDLD
guicontrol,,emuDDLD,|weave||bob|bob_offset
guicontrol, move,emuDDLD,x404 y369 w77

guicontrol, %emutog%, emuDDLE
guicontrol,,emuDDLE,|opengl||sdl|overlay
guicontrol, move,emuDDLE,x468 y118 w76

guicontrol, %emutog%, emuDDLF
guicontrol,,emuDDLF,|default||alsa|openbsd|oss|wasapish|dsound|wasapi|sdl|jack
guicontrol, move,emuDDLF,x468 y147 w78

guicontrol, %emutog%, emuEDTA
guicontrol, move, emuEDTA, x103 y64 w50 h21
guicontrol,+number, emuEDTA
guicontrol,,emuEDTA,1

guicontrol, %emutog%, emuEDTB
guicontrol,move,emuEDTB,x201 y65 w43 h21
guicontrol, +number, emuEDTB
guicontrol,,emuEDTB,1

guicontrol, %emutog%, emuEDTC
guicontrol,move,emuEDTC,x342 y222 w48 h21
guicontrol, +number, emuEDTC
guicontrol,,emuEDTC, 0.5

guicontrol, %emutog%, emuEDTD
guicontrol,move,emuEDTD, x390 y182 w48 h21
guicontrol,+number, emuEDTD
guicontrol,, emuEDTD,0

guicontrol, %emutog%, emuEDTE
guicontrol,move,emuEDTE,x342 y271 w48 h21
guicontrol,,emuEDTE, 0.5
guicontrol, +number, emuEDTE

guicontrol, %emutog%, emuEDTF
guicontrol,move,emuEDTF, x237 y395 w48 h21
guicontrol,, emuEDTF,0

guicontrol, %emutog%, emuEDTG
guicontrol,move,emuEDTG,x103 y87 w81 h21
guicontrol,+number,emuEDTG
guicontrol,,emuEDTG,640

guicontrol, %emutog%, emuEDTH
guicontrol,move,emuEDTH,x201 y88 w74 h21
guicontrol,+number,emuEDTH
guicontrol,,emuEDTH,480

guicontrol, %emutog%, emuEDTI
guicontrol,,emuEDTI,4046
guicontrol,move,emuEDTI,x540 y273 w60 h21
guicontrol,+number,emuEDTI

guicontrol, %emutog%, emuCBXA
guicontrol,move,emuCBXA,x442 y226 w158
guicontrol,,emuCBXA,|%A_UserName%||Mednafen|skeletonKey

guicontrol, %emutog%, emuCBXB
guicontrol,move,emuCBXB,x406 y249 w194
guicontrol,+0x2 +E0x5000 +Right,emuCBXB
guicontrol,,emuCBXB,|netplay.fobby.net||node.asnitech.co.uk|mednafen-nl.emuparadise.org|mednafen-us.emuparadise.org|Speedvicio.dtdns.net|s1.mednafen-it.org|gs.emu-land.net|emu-russia.net


;;guicontrol, %emutog%, emuUPDB
;;guicontrol,move,emuUPDB,x476 y182 w17 h21 -16

;;guicontrol, %emutog%, emuUPDA
;;guicontrol,move,emuUPDA,x323 y395 w17 h21 -16
;;guicontrol,+Range-100-100,emuUPDA

guicontrol, %emutog%, emuRAD11A
guicontrol,,emuRAD11A,Horz
guicontrol,,emuRAD11A, 1
guicontrol, move,emuRAD11A,x167 y224 w40 h14

guicontrol, %emutog%, emuRAD11B
guicontrol,,emuRAD11B,Vert
guicontrol, move,emuRAD11B,x167 y241 w38 h14

guicontrol, %emutog%, emuRAD8A
guicontrol,,emuRAD8A,FullScreen
guicontrol,,emuRAD8A, 1
guicontrol, move,emuRAD8A,x461 y88 w71 h13

guicontrol, %emutog%, emuRAD8B
guicontrol,,emuRAD8B,Windowed
guicontrol, move,emuRAD8B,x461 y68 w70 h13

guicontrol, %emutog%, emuRad5B
guicontrol,move,emuRAD5B,x117 y348 w75 h13
guicontrol,,emuRAD5B,Blur

guicontrol, %emutog%, emuRad5C
guicontrol,move,emuRAD5C,x117 y368 w75 h13
guicontrol,,emuRAD5C,Blur Color

guicontrol, %emutog%, emuRad5A
guicontrol,move,emuRAD5A,x117 y324 w75 h13
guicontrol,,emuRAD5A,Blur OFF
guicontrol,,emuRAD5A,1

guicontrol, %emutog%, emuRad9A
guicontrol,move,emuRAD9A,x84 y226 w75 h13
guicontrol,,emuRAD9A, borg

guicontrol, %emutog%, emuRad9B
guicontrol,move,emuRAD9B,x84 y246 w75 h13
guicontrol,,emuRAD9B, goatron
guicontrol,,emuRAD9B, 1

guicontrol, %emutog%, emuRad9C
guicontrol,move,emuRAD9C,x84 y266 w77 h13
guicontrol,,emuRAD9c, slenderman

guicontrol, %emutog%, emuRad3A
guicontrol,move,emuRAD3A,x360 y87 w75 h13
guicontrol,,emuRAD3A,Full

guicontrol, %emutog%, emuRad3B
guicontrol,move,emuRAD3B,x360 y111 w75 h13
guicontrol,,emuRAD3B,aspect

guicontrol, %emutog%, emuRad3C
guicontrol,move,emuRAD3C,x360 y135 w92 h13
guicontrol,,emuRAD3C,aspect_integer

guicontrol, %emutog%, emuRad3D
guicontrol,,emuRAD3D,1
guicontrol,move,emuRAD3D,x360 y159 w92 h13
guicontrol,,emuRAD3D,aspect_multi2

guicontrol, %emutog%, emuSLDA
guicontrol,+Range-100-100,emuSLDA
guicontrol,move,emuSLDA,x269 y178 w120 h24

guicontrol, %emutog%, emuSLDB,
guicontrol,+Range0-100,emuSLDB
guicontrol,move,emuSLDB,x114 y393 w120 h24

guicontrol, %emutog%, emuSLDE

guicontrol,+Range-2-2,emuSLDE
guicontrol,move,emuSLDE,,x215 y221 w120 h24

guicontrol, %emutog%, emuSLDC
guicontrol,+Range0-1,emuSLDC
guicontrol,move,emuSLDC,x215 y270 w120 h24
if (ASVRM = "")
	{
		guicontrol, %emutog%, emuBUTJ
		guicontrol, move, emuBUTJ,x694 y486 w66 h23
		guicontrol,,emuBUTJ,SAVE
	}
;};;

medcfg= mednafen-09x.cfg
ifexist, rj\sysCfgs\%RJSYSDD%\mednafen-09x.cfg.pre
	{
		medcfg= mednafen-09x.cfg.pre
	}
		gosub, %EMUSN%POP
return


mednafenPOP:
FileRead,mednafenopts,rj\sysCfgs\%RJSYSDD%\%medcfg%
Loop, Read,rj\sysCfgs\%RJSYSDD%\%medcfg%
	{
		if (A_LoopReadLine = "")
			{
				
			}
	}
return

mednafenBUTJ:
gui,submit,nohide
gosub, mednafenSaveOpts
Guicontrol, Choose, TABMENU, 6
return

mednafenCHKD:
gui,submit,nohide

return

mednafenCHKE:
gui,submit,nohide

return

mednafenCHKF:
gui,submit,nohide

return

mednafenCHKG:
gui,submit,nohide

return

mednafenCHKH:
gui,submit,nohide

return

mednafenCHKA:
gui,submit,nohide

return

mednafenCHKB:
gui,submit,nohide

return

mednafenCHKC:
gui,submit,nohide

return

mednafenDDLA:
gui,submit,nohide

return

mednafenDDLB:
gui,submit,nohide

return

mednafenDDLC:
gui,submit,nohide

return

mednafenDDLD:
gui,submit,nohide

return

mednafenDDLE:
gui,submit,nohide

return

mednafenDDLF:
gui,submit,nohide

return

mednafenEDTA:
gui,submit,nohide

return

mednafenEDTB:
gui,submit,nohide

return

mednafenEDTD:
gui,submit,nohide
guicontrolget,emuEDTD,,emuEDTD
guicontrol,,emuSLDA,%emuEDTD%
return


mednafenEDTC:
gui,submit,nohide

return

mednafenEDTE:
gui,submit,nohide

return

mednafenEDTF:
gui,submit,nohide

return

mednafenEDTG:
gui,submit,nohide

return

mednafenEDTH:
gui,submit,nohide

return

mednafenEDTI:
gui,submit,nohide

return

mednafenUPDA:
gui,submit,nohide
guicontrolget,emuEDTD,,emuEDTD
guicontrol,,emuSLDA,%emuEDTD%
return

mednafenCBXA:
gui,submit,nohide

return

mednafenCBXB:
gui,submit,nohide

return

mednafenUPDB:
gui,submit,nohide

return

mednafenRad5B:
gui,submit,nohide

return

mednafenRad5C:
gui,submit,nohide

return

mednafenRad5A:
gui,submit,nohide

return

mednafenRad9A:
gui,submit,nohide

return

mednafenRad9B:
gui,submit,nohide

return

mednafenRad9C:
gui,submit,nohide

return

mednafenRad8A:
gui,submit,nohide

return

mednafenRad8B:
gui,submit,nohide

return

mednafenRad11A:
gui,submit,nohide

return

mednafenRad11B:
gui,submit,nohide

return



mednafenRad3A:
gui,submit,nohide

return

mednafenRad3B:
gui,submit,nohide

return

mednafenRad3C:
gui,submit,nohide

return

mednafenRad3D:
gui,submit,nohide

return

mednafenSLDA:
gui,submit,nohide
guicontrolget,repledtd,,emuEDTD
guicontrolget,emuSLDA,,emuSLDA
guicontrol,,emuEDTD,%emuSLDA%
stringreplace, mednafenopts,mednafenopts,%RJMEDNM%.scanlines%A_Space%[SCAN],%RJMEDNM%.scanlines%A_Space%%emuSLDA%,All
FileDelete,rj\sysCfgs\%RJSYSDD%\%medcfg%
FileAppend,%mednafenopts%,rj\sysCfgs\%RJSYSDD%\%medcfg%
FileRead,mednafenopts,rj\sysCfgs\%RJSYSDD%\%medcfg%
return

mednafenSLDB:
gui,submit,nohide

return

mednafenSLDE:
gui,submit,nohide

return

mednafenSLDC:
gui,submit,nohide

return

mednafenSaveOpts:
msgbox,0,,saving
return

;};;;;;;;;;;;;;;;;;;;;;


MAMEGUI:
gosub, EMUCFGCOPY
guicontrol, %emutog%, emuBUTA
guicontrol, %emutog%, emuCHKD
guicontrol, %emutog%, emuCHKE
guicontrol, %emutog%, emuCHKF
guicontrol, %emutog%, emuEDTB
guicontrol, %emutog%, emuEDTC
guicontrol, %emutog%, emuDDLA
guicontrol, %emutog%, emuDDLB
return

4DOGUI:
gosub, EMUCFGCOPY

return

ADAMEmGUI:
gosub, EMUCFGCOPY

return

AltirraGUI:
gosub, EMUCFGCOPY

return

anex86GUI:
gosub, EMUCFGCOPY

return

AppleWinGUI:
gosub, EMUCFGCOPY

return

ArculatorGUI:
gosub, EMUCFGCOPY

return

ArtifexGUI:
gosub, EMUCFGCOPY

return

atari800GUI:
gosub, EMUCFGCOPY

return

BSLGUI:
gosub, EMUCFGCOPY
moptog= show
raoptgl= hide
emutog= hide
gosub, EMUUNPOP
gosub, TOGRAOPTS
gosub, TOGSKELGUI
gosub, TOGSKELONLY
return

BeebEmGUI:
gosub, EMUCFGCOPY

return

bgbGUI:
gosub, EMUCFGCOPY

return

BizHawkGUI:
gosub, EMUCFGCOPY

return

blastEmGUI:
gosub, EMUCFGCOPY

return

BlueMSXGUI:
gosub, EMUCFGCOPY

return

cemuGUI:
gosub, EMUCFGCOPY

return

cen64GUI:
gosub, EMUCFGCOPY

return

citraGUI:
gosub, EMUCFGCOPY

return

DemulGUI:
gosub, EMUCFGCOPY

return

DesMuMeGUI:
gosub, EMUCFGCOPY

return

DolphinGUI:
gosub, EMUCFGCOPY

return

DosPlusGUI:
gosub, EMUCFGCOPY

return

ElectremGUI:
gosub, EMUCFGCOPY

return

elkulatorGUI:
gosub, EMUCFGCOPY

return

epsxeGUI:
gosub, EMUCFGCOPY

return

finalBurnAlphaGUI:
gosub, EMUCFGCOPY

return

FlashPlayerGUI:
gosub, EMUCFGCOPY
guicontrol, %emutog%, emuBUTA
guicontrol, %emutog%, emuBUTB
guicontrol, %emutog%, emuBUTC
guicontrol, %emutog%, emuBUTG
guicontrol, %emutog%, emuBUTD
guicontrol, %emutog%, emuBUTE
guicontrol, %emutog%, emuBUTF
guicontrol, %emutog%, emuBUTH
guicontrol, %emutog%, emuBUTI
guicontrol, %emutog%, emuBUTJ
guicontrol, %emutog%, emuCHKD
guicontrol, %emutog%, emuCHKE
guicontrol, %emutog%, emuCHKF
guicontrol, %emutog%, emuCHKG
guicontrol, %emutog%, emuCHKH
guicontrol, %emutog%, emuCHKI
guicontrol, %emutog%, emuCHKJ
guicontrol, %emutog%, emuCHKK
guicontrol, %emutog%, emuCHKL
guicontrol, %emutog%, emuCHKM
guicontrol, %emutog%, emuCHKN
guicontrol, %emutog%, emuCHKO
guicontrol, %emutog%, emuCHKP
guicontrol, %emutog%, emuCHKQ
guicontrol, %emutog%, emuCHKA
guicontrol, %emutog%, emuCHKB
guicontrol, %emutog%, emuCHKC
guicontrol, %emutog%, emuCBXE
guicontrol, %emutog%, emuCBXF
guicontrol, %emutog%, emuCBXG
guicontrol, %emutog%, emuCBXH
guicontrol, %emutog%, emuCBXI
guicontrol, %emutog%, emuCBXJ
guicontrol, %emutog%, emuCBXA
guicontrol, %emutog%, emuCBXB
guicontrol, %emutog%, emuCBXC
guicontrol, %emutog%, emuCBXD
guicontrol, %emutog%, emuDDLE
guicontrol, %emutog%, emuDDLF
guicontrol, %emutog%, emuDDLG
guicontrol, %emutog%, emuDDLH
guicontrol, %emutog%, emuDDLI
guicontrol, %emutog%, emuDDLJ
guicontrol, %emutog%, emuDDLC
guicontrol, %emutog%, emuDDLD
guicontrol, %emutog%, emuDDLA
guicontrol, %emutog%, emuDDLB
guicontrol, %emutog%, emuEDTA
guicontrol, %emutog%, emuEDTB
guicontrol, %emutog%, emuEDTC
guicontrol, %emutog%, emuEDTD
guicontrol, %emutog%, emuEDTE
guicontrol, %emutog%, emuEDTF
guicontrol, %emutog%, emuEDTG
guicontrol, %emutog%, emuEDTI
guicontrol, %emutog%, emuUPDA
guicontrol, %emutog%, emuEDTH
guicontrol, %emutog%, emuUPDB
guicontrol, %emutog%, emuLVA
guicontrol, %emutog%, emuUPDC
guicontrol, %emutog%, emuGRPA
guicontrol, %emutog%, emuGRPB
guicontrol, %emutog%, emuGRPC
guicontrol, %emutog%, emuGRPD
guicontrol, %emutog%, emuGRPE
guicontrol, %emutog%, emuGRPF
guicontrol, %emutog%, emuGRPG
guicontrol, %emutog%, emuLBXA
guicontrol, %emutog%, emuLBXB
guicontrol, %emutog%, emuLVA
guicontrol, %emutog%, emuLVB
guicontrol, %emutog%, emuLVC
guicontrol, %emutog%, emuPRGB
guicontrol, %emutog%, emuPRGA
guicontrol, %emutog%, emuRad5B
guicontrol, %emutog%, emuRad5C
guicontrol, %emutog%, emuRad4A
guicontrol, %emutog%, emuRad4B
guicontrol, %emutog%, emuRad5A
guicontrol, %emutog%, emuRad6A
guicontrol, %emutog%, emuRad6B
guicontrol, %emutog%, emuRad6C
guicontrol, %emutog%, emuRad6D
guicontrol, %emutog%, emuRad7A
guicontrol, %emutog%, emuRad7B
guicontrol, %emutog%, emuRad8A
guicontrol, %emutog%, emuRad8B
guicontrol, %emutog%, emuRad9A
guicontrol, %emutog%, emuRad9B
guicontrol, %emutog%, emuRad9C
guicontrol, %emutog%, emuRad10A
guicontrol, %emutog%, emuRad10B
guicontrol, %emutog%, emuRad11A
guicontrol, %emutog%, emuRad11B
guicontrol, %emutog%, emuRad2A
guicontrol, %emutog%, emuRad2B
guicontrol, %emutog%, emuRad2C
guicontrol, %emutog%, emuRad1A
guicontrol, %emutog%, emuRad3A
guicontrol, %emutog%, emuRad3B
guicontrol, %emutog%, emuRad3C
guicontrol, %emutog%, emuRad3D
guicontrol, %emutog%, emuRad1B
guicontrol, %emutog%, emuSLDA
guicontrol, %emutog%, emuSLDB
guicontrol, %emutog%, emuSLDD
guicontrol, %emutog%, emuSLDE
guicontrol, %emutog%, emuSLDC
guicontrol, %emutog%, emuTXTA
guicontrol, %emutog%, emuTXTB
guicontrol, %emutog%, emuTXTC
guicontrol, %emutog%, emuTXTD
guicontrol, %emutog%, emuTXTE
guicontrol, %emutog%, emuTXTF
guicontrol, %emutog%, emuTXTG
guicontrol, %emutog%, emuTXTS
guicontrol, %emutog%, emuTXTT
guicontrol, %emutog%, emuTXTR
guicontrol, %emutog%, emuTXTM
guicontrol, %emutog%, emuTXTH
guicontrol, %emutog%, emuTXTI
guicontrol, %emutog%, emuTXTN
guicontrol, %emutog%, emuTXTO
guicontrol, %emutog%, emuTXTP
guicontrol, %emutog%, emuTXTQ
guicontrol, %emutog%, emuTXTJ
guicontrol, %emutog%, emuTXTK
guicontrol, %emutog%, emuTXTL
return

FSUAEGUI:
gosub, EMUCFGCOPY

return

FusionGUI:
gosub, EMUCFGCOPY

return

hatariGUI:
gosub, EMUCFGCOPY

return

jpcspGUI:
gosub, EMUCFGCOPY

return

Kegs32GUI:
gosub, EMUCFGCOPY

return

m2emulatorGUI:
gosub, EMUCFGCOPY

return

m88GUI:
gosub, EMUCFGCOPY

return

MBS1GUI:
gosub, EMUCFGCOPY

return

messGUI:
gosub, EMUCFGCOPY

return

mgbaGUI:
gosub, EMUCFGCOPY

return

mupen64plusGUI:
gosub, EMUCFGCOPY

return

NekoGUI:
gosub, EMUCFGCOPY

return

neoRaineGUI:
gosub, EMUCFGCOPY

return

MesenGUI:
gosub, EMUCFGCOPY

return

NestopiaGUI:
gosub, EMUCFGCOPY

return

no$GBAGUI:
gosub, EMUCFGCOPY

return

no$SNSGUI:
gosub, EMUCFGCOPY

return

NostalgiaGUI:
gosub, EMUCFGCOPY

return

nullDCGUI:
gosub, EMUCFGCOPY

return

odyEmuGUI:
gosub, EMUCFGCOPY

return

openMSXGUI:
gosub, EMUCFGCOPY

return

ParaJVEGUI:
gosub, EMUCFGCOPY

return

pcsx2GUI:
gosub, EMUCFGCOPY

return

ppssppGUI:
gosub, EMUCFGCOPY

return

Project64GUI:
gosub, EMUCFGCOPY

return

proSystemGUI:
gosub, EMUCFGCOPY

return

psxfinGUI:
gosub, EMUCFGCOPY

return

raineGUI:
gosub, EMUCFGCOPY

return

reicastGUI:
gosub, EMUCFGCOPY

return

rpcs3GUI:
gosub, EMUCFGCOPY

return

ScummVmGUI:
gosub, EMUCFGCOPY

return

SimCoupeGUI:
gosub, EMUCFGCOPY

return

snes9xGUI:
gosub, EMUCFGCOPY

return

snesGTGUI:
gosub, EMUCFGCOPY

return

SSFGUI:
gosub, EMUCFGCOPY

return

STeemGUI:
gosub, EMUCFGCOPY

return

StellaGUI:
gosub, EMUCFGCOPY

return

supermodelGUI:
gosub, EMUCFGCOPY

return

UNZGUI:
gosub, EMUCFGCOPY

return

vaegGUI:
gosub, EMUCFGCOPY

return

virtualJaguarGUI:
gosub, EMUCFGCOPY

return

VirtualNESGUI:
gosub, EMUCFGCOPY

return

visualboyAdvanceGUI:
gosub, EMUCFGCOPY

return

WinApeGUI:
gosub, EMUCFGCOPY

return

WinArcadiaGUI:
gosub, EMUCFGCOPY

return


;};;;;;;;;;;;;;;;;;;;;;

;{;;;  ~~~~ RJCMD COMPILE ~~~~~;;;;
/*
CMDBAT:
FileDelete,rj\*_*.tmp
FileCopy,rj\emuCfgs\rjcmd_header.set, rj\%emuname%_%cursys%.tmp
if (preconf <> "")
	{
		for k in Ar
			FileAppend,%k%,rj\%emuname%_%cursys%.tmp
	}
	
if (monitorswitch = 1)
	{
		FileAppend,`%DSP`%displayswitch /`%MONUM`%
	}
	
if (precust <> "")
	{
		for k in Jr
			FileAppend,%k%,rj\%emuname%_%cursys%.tmp
	}

if (JOYTOG = 1)
	{
		tF_Append("rj\emuCfgs\rjcmd_prejoy.set","rj\%emuname%_%cursys%.tmp")
	}

if (rjcmdopt <> "")
	{
		for k in Br
				FileAppend, %k%,rj\%emuname%_%cursys%.tmp
	}
tF_Append("rj\emuCfgs\rjcmd_runloop.set","rj\%emuname%_%cursys%.tmp")

if (prepostcfg <> "")
	{
		for k in Pr
				FileAppend,%k%,rj\%emuname%_%cursys%.tmp
	}
	
tF_Append("rj\emuCfgs\rjcmd_runproc.set","rj\%emuname%_%cursys%.tmp")

if (postcfg <> "")
	{
		for k in Vr
				FileAppend,%k%,rj\%emuname%_%cursys%.tmp
	}
	
if (monitorswitch = 1)
	{
		FileAppend,`%DSP`%displayswitch /`%MONRET`%
	}

if (postarg <> "")
	{
		for k in Hr
				FileAppend,%k%,rj\%emuname%_%cursys%.tmp
	}
	
tF_Append("rj\emuCfgs\rjcmd_postjoy.set","rj\%emuname%_%cursys%.tmp")

FileRead,toLnch,rj\%emuname%_%cursys%.tmp
StringReplace,toLnch,toLnch,[EMUL],%curemud%,All
StringReplace,toLnch,toLnch,[EMUZ],%curemue%,All

StringReplace,toLnch,toLnch,[XPD],%xpaddrpth%,All
StringReplace,toLnch,toLnch,[AMC],%amicropth%,All

StringSplit,RJMAPRET,RJPMAPTR,RJMAPTD,,RJMAPTN

StringReplace,toLnch,toLnch,[MediaCenter],%RJMAPTN%,All

StringReplace,toLnch,toLnch,[AMLOC],%RJMAPTD%,All
StringReplace,toLnch,toLnch,[XPDLOC],%RJMAPTD%,All

StringSplit,RJMAP1PL,RJMAP1PLF,RJMAP1PLD
if (RJMAP1PLD = "")
	{
		RJMAP1PLD= `%GAMDIR`%
	}
if (RJKEYMAPPER = "Antimicro")
	{
		StringReplace, toapa,toapa,[XPALT],1,All			
	}		

StringReplace,toLnch,toLnch,[XPL1LOC],%RJMAP1PLD%,All
StringReplace,toLnch,toLnch,[PLAYER1],%RJMAP1PLF%,All

StringSplit,RJMAP2PL,RJMAP2PLF,RJMAP2PLD
if (RJMAP2PLD = "")
	{
		RJMAP2PLD= `%GAMDIR`%
	}
StringReplace,toLnch,toLnch,[XPL2LOC],%RJMAP2PLD%,All
StringReplace,toLnch,toLnch,[PLAYER2],%RJMAP2PLF%,All


StringReplace,toLnch,toLnch,[DAMVAR],%damtpth%,All

StringReplace,toLnch,toLnch,[RUNOPTS],%emurunopts%,All
StringReplace,toLnch,toLnch,[ROMIN],%emuromstring%,All
StringReplace,toLnch,toLnch,[RUNARGS],%emurunargs%,All

StringReplace,toLnch,toLnch,[RLOC],%emurunlocal%,All

StringReplace,toLnch,toLnch,[CMDLINELOC],%extnsparse%,All
StringReplace,toLnch,toLnch,[EXTLST],%ROMXTL%,All
return
*/
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;{;;;;;;;;;;;;;;;;;;;;;;;  TOGGLE RA OPTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RAOPTPOP:
guicontrolget,LCORE,,LCORE
raoptgl= show
emutog= hide
gosub, EMUUNPOP

TOGRAOPTS:
guicontrol,%raoptgl%,ART
guicontrol,%raoptgl%,ARTXT
guicontrol,%raoptgl%,ASYNC
guicontrol,%raoptgl%,AUO
guicontrol,%raoptgl%,AUTOASPECT
guicontrol,%raoptgl%,AUTOLNCH
guicontrol,%raoptgl%,AUTSHD
guicontrol,%raoptgl%,BFI
guicontrol,%raoptgl%,CGSHDVAR
guicontrol,%raoptgl%,CGSLCT
guicontrol,%raoptgl%,CROP
guicontrol,%raoptgl%,CSTCMD
guicontrol,%raoptgl%,CSTCRE
guicontrol,%raoptgl%,CSTMCORE
guicontrol,%raoptgl%,CSTMROM
guicontrol,%raoptgl%,D3DDRV
guicontrol,%raoptgl%,DDRVGRP
guicontrol,%raoptgl%,DIRSTXT
guicontrol,%raoptgl%,DLFRMTXT
guicontrol,%raoptgl%,DRAGIMAGE
guicontrol,%raoptgl%,DRCGRP
guicontrol,%raoptgl%,DSND
guicontrol,%raoptgl%,DTCOMP
guicontrol,%raoptgl%,DirBut
guicontrol,%raoptgl%,FILTSEL
guicontrol,%raoptgl%,FILTXT
guicontrol,%raoptgl%,FLICKF
guicontrol,%raoptgl%,FLK
guicontrol,%raoptgl%,FLTFILE
guicontrol,%raoptgl%,FORCEAR
guicontrol,%raoptgl%,FRMDL
guicontrol,%raoptgl%,FRMDLTXT
guicontrol,%raoptgl%,FSREZ
guicontrol,%raoptgl%,GDIDRV
guicontrol,%raoptgl%,GLBLAUDIO
guicontrol,%raoptgl%,GLSHDVAR
guicontrol,%raoptgl%,GLSLCT
guicontrol,%raoptgl%,GMENU
guicontrol,%raoptgl%,GPUFRMTXT
guicontrol,%raoptgl%,GPUSS
guicontrol,%raoptgl%,GPUV
guicontrol,%raoptgl%,GPUVREC
guicontrol,%raoptgl%,GUIDRVGRP

guicontrol,%raoptgl%,HSYNC
guicontrol,%raoptgl%,INTG
guicontrol,%raoptgl%,IntXres
guicontrol,%raoptgl%,IntYres
guicontrol,%raoptgl%,LATENCY
guicontrol,%raoptgl%,LOCASSETDDL
guicontrol,%raoptgl%,LOCDIR
guicontrol,%raoptgl%,LOCFLDRS
guicontrol,%raoptgl%,LOCPLSTS
guicontrol,%raoptgl%,LOCPTH
guicontrol,%raoptgl%,LOCROMPOP
guicontrol,%raoptgl%,LOCROMSRCH
guicontrol,%raoptgl%,LOCROMSRCHBUT
guicontrol,%raoptgl%,LOCSRCHREC
guicontrol,%raoptgl%,MAXSWPTXT
guicontrol,%raoptgl%,MONGTXT
guicontrol,%raoptgl%,MONRESTXT
guicontrol,%raoptgl%,MONUM
guicontrol,%raoptgl%,MONXREZ
guicontrol,%raoptgl%,MONXTXT
guicontrol,%raoptgl%,MONYREZ
guicontrol,%raoptgl%,MSWCHI
guicontrol,%raoptgl%,MUTE
guicontrol,%raoptgl%,OGLDRV
guicontrol,%raoptgl%,OPENAL
guicontrol,%raoptgl%,OPERGRP
guicontrol,%raoptgl%,OUTFS
guicontrol,%raoptgl%,OUTFW
guicontrol,%raoptgl%,OUTMGRP
guicontrol,%raoptgl%,OUTW
guicontrol,%raoptgl%,OVRIDGRP
guicontrol,%raoptgl%,PAUSEBG
guicontrol,%raoptgl%,PGM
guicontrol,%raoptgl%,POSYTXT
guicontrol,%raoptgl%,PTHSTXT
guicontrol,%raoptgl%,PthBut
guicontrol,%raoptgl%,REFRESH
guicontrol,%raoptgl%,REFSLD
guicontrol,%raoptgl%,REFTXT
guicontrol,%raoptgl%,REFUD
guicontrol,%raoptgl%,REWEN
guicontrol,%raoptgl%,REWGRAN
guicontrol,%raoptgl%,REZV
guicontrol,%raoptgl%,RMENU
guicontrol,%raoptgl%,ROMRPGRP
guicontrol,%raoptgl%,ROTATE
guicontrol,%raoptgl%,SAVDIVTXT
guicontrol,%raoptgl%,SAVEXIT
guicontrol,%raoptgl%,SAVGRP
guicontrol,%raoptgl%,SAVSECTXT
guicontrol,%raoptgl%,SAVSRT
guicontrol,%raoptgl%,SAVSTPTXT
guicontrol,%raoptgl%,SCLGRP
guicontrol,%raoptgl%,SCLTXT
guicontrol,%raoptgl%,SDL2
guicontrol,%raoptgl%,SDL2DRV
guicontrol,%raoptgl%,SHAREDV
guicontrol,%raoptgl%,SHDEN
guicontrol,%raoptgl%,SHDPTHTXT
guicontrol,%raoptgl%,SHDSEL
guicontrol,%raoptgl%,SLCT
guicontrol,%raoptgl%,SLSHDVAR
guicontrol,%raoptgl%,SMTHV
guicontrol,%raoptgl%,SNDGRP
guicontrol,%raoptgl%,SNDLATXT
guicontrol,%raoptgl%,SRCHGRP
guicontrol,%raoptgl%,STAI
guicontrol,%raoptgl%,STAL
guicontrol,%raoptgl%,STAS
guicontrol,%raoptgl%,STORT
guicontrol,%raoptgl%,STRCH
guicontrol,%raoptgl%,SVINT
guicontrol,%raoptgl%,SWHOST
guicontrol,%raoptgl%,SWPFRMTXT
guicontrol,%raoptgl%,SWPV
guicontrol,%raoptgl%,THRDV
guicontrol,%raoptgl%,VIDASPECT
guicontrol,%raoptgl%,VIDGTXT
guicontrol,%raoptgl%,VIDRESTXT
guicontrol,%raoptgl%,VIDRESTXT
guicontrol,%raoptgl%,VIDSCL
guicontrol,%raoptgl%,VIDSYNC
guicontrol,%raoptgl%,VIDXTXT
guicontrol,%raoptgl%,VLKDRV
guicontrol,%raoptgl%,VPOSTXT
guicontrol,%raoptgl%,VPOSXTXT
guicontrol,%raoptgl%,VROTXT
guicontrol,%raoptgl%,VidXLoc
guicontrol,%raoptgl%,VidYLoc
guicontrol,%raoptgl%,WASAPI
guicontrol,%raoptgl%,XAUD
guicontrol,%raoptgl%,XMENU
guicontrol,%raoptgl%,ZMENU
return

if (raoptgl = "show")
	{
		if (ASVRM = "1")
			{
				guicontrol,%raoptgl%,OPTDDL
				guicontrol,%raoptgl%,HOPT
				guicontrol,%raoptgl%,DOPT
				guicontrol,%raoptgl%,ROMLOC
				guicontrol,%raoptgl%,EDTROM
				guicontrol,%raoptgl%,CUSTSWITCHS
				guicontrol,%raoptgl%,GROM
				guicontrol,%raoptgl%,OPNCORE
				guicontrol,%raoptgl%,LNCHBUT
				guicontrol,%raoptgl%,CLRCUROM
			}
	}
if (raoptgl = "hide")
	{
		if (ASVRM = "")
			{
				guicontrol,%raoptgl%,OPTDDL
				guicontrol,%raoptgl%,HOPT
				guicontrol,%raoptgl%,DOPT
				guicontrol,%raoptgl%,ROMLOC
				guicontrol,%raoptgl%,EDTROM
				guicontrol,%raoptgl%,CUSTSWITCHS
				guicontrol,%raoptgl%,GROM
				guicontrol,%raoptgl%,OPNCORE
				guicontrol,%raoptgl%,LNCHBUT
				guicontrol,%raoptgl%,CLRCUROM
			}
	}
if (LCORE = "retroArch")
	{
		guicontrol,show,JCORE
		guicontrol,hide, SWHOST
		guicontrol,hide, CSTMROM
		guicontrol,hide, CSTMCORE
		guicontrol,hide, CSTCRE
		guicontrol,hide, CSTCMD
		if (ASVRM = "")
			{
				guicontrol,hide,SRCHGRP
				guicontrol,hide,LOCROMPOP
				guicontrol,hide,LOCFLDRS
				guicontrol,hide,LOCPLSTS
				guicontrol,hide,LOCSRCHREC
				guicontrol,hide,LOCROMSRCH
				guicontrol,hide,LOCROMSRCHBUT
				guicontrol,hide,LOCASSETDDL
				guicontrol,hide,ROMRPGRP
				guicontrol,hide,AUTOLNCH
				guicontrol,show,emuBUTJ
				guicontrol,show,emuTXTA				
				guicontrol,move,emuTXTA,x683 y26 w32 h17
				guicontrol,,emuTXTA,core
				guicontrol,move, emuBUTJ,x694 y486 w66 h23
				guicontrol,,emuBUTJ,SAVE
			}
		return
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;     FE-OPTION FUNCTIONS    ;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;; ~~~FE-gui functions~~~  ;;;;;
feBUTA:
gui,submit,nohide
;;if (fetog = "show")
;;	{
;;		fetog= hide
;;	}
;;	else if (fetog = "hide")
;;	{
;;		fetog= show
;;	}
;;if (xmbtog = "show")
	;;{
;;		xmbtog= hide
	;;}
	;;else if (xmbtog = "hide")
	;;{
	;;	xmbtog= show
	;;}
;;gosub, XMBTOGGLE
;;gosub, FEUNPOP

gosub,%FENAM%feBUTA

return

feBUTB:
gui,submit,nohide
gosub,%FENAM%feBUTB
return

feBUTC:
gui,submit,nohide
gosub,%FENAM%feBUTC
return

feBUTG:
gui,submit,nohide
gosub,%FENAM%feBUTG
return

feBUTD:
gui,submit,nohide
gosub,%FENAM%feBUTD
return

feBUTE:
gui,submit,nohide
gosub,%FENAM%feBUTE
return

feBUTF:
gui,submit,nohide
gosub,%FENAM%feBUTF
return

feBUTH:
gui,submit,nohide
gosub,%FENAM%feBUTH
return

feBUTI:
gui,submit,nohide
gosub,%FENAM%feBUTI
return

feBUTJ:
gui,submit,nohide
gosub,%FENAM%feBUTJ
return

feBUTK:
gui,submit,nohide
gosub,%FENAM%feBUTK
return

feBUTL:
gui,submit,nohide
gosub,%FENAM%feBUTL
return

feBUTM:
gui,submit,nohide
gosub,%FENAM%feBUTM
return

fePICA:
gui,submit,nohide
gosub,%FENAM%fePICA
return

fePICB:
gui,submit,nohide
gosub,%FENAM%fePICB
return

fePICC:
gui,submit,nohide
gosub,%FENAM%fePICC
return

fePICD:
gui,submit,nohide
gosub,%FENAM%fePICD
return

fePICE:
gui,submit,nohide
gosub,%FENAM%fePICE
return

fePICF:
gui,submit,nohide
gosub,%FENAM%fePICF
return

fePICG:
gui,submit,nohide
gosub,%FENAM%fePICG
return

feLNKA:
gui,submit,nohide
gosub,%FENAM%feLNKA
return

feCHKD:
gui,submit,nohide
gosub,%FENAM%feCHKD
return

feCHKE:
gui,submit,nohide
gosub,%FENAM%feCHKE
return

feCHKF:
gui,submit,nohide
gosub,%FENAM%feCHKF
return

feCHKG:
gui,submit,nohide
gosub,%FENAM%feCHKG
return

feCHKH:
gui,submit,nohide
gosub,%FENAM%feCHKH
return

feCHKI:
gui,submit,nohide
gosub,%FENAM%feCHKI
return

feCHKJ:
gui,submit,nohide
gosub,%FENAM%feCHKJ
return

feCHKK:
gui,submit,nohide
gosub,%FENAM%feCHKK
return

feCHKL:
gui,submit,nohide
gosub,%FENAM%feCHKL
return

feCHKM:
gui,submit,nohide
gosub,%FENAM%feCHKM
return

feCHKN:
gui,submit,nohide
gosub,%FENAM%feCHKN
return

feCHKO:
gui,submit,nohide
gosub,%FENAM%feCHKO
return

feCHKP:
gui,submit,nohide
gosub,%FENAM%feCHKP
return

feCHKQ:
gui,submit,nohide
gosub,%FENAM%feCHKQ
return

feCHKA:
gui,submit,nohide
gosub,%FENAM%feCHKA
return

feCHKB:
gui,submit,nohide
gosub,%FENAM%feCHKB
return

feCHKC:
gui,submit,nohide
gosub,%FENAM%feCHKC
return

feCBXE:
gui,submit,nohide
gosub,%FENAM%feCBXE
return

feCBXF:
gui,submit,nohide
gosub,%FENAM%feCBXF
return

feCBXG:
gui,submit,nohide
gosub,%FENAM%feCBXG
return

feCBXH:
gui,submit,nohide
gosub,%FENAM%feCBXH
return

feCBXI:
gui,submit,nohide
gosub,%FENAM%feCBXI
return

feCBXJ:
gui,submit,nohide
gosub,%FENAM%feCBXJ
return

feCBXA:
gui,submit,nohide
gosub,%FENAM%feCBXA
return

feCBXB:
gui,submit,nohide
gosub,%FENAM%feCBXB
return

feCBXC:
gui,submit,nohide
gosub,%FENAM%feCBXC
return

feCBXD:
gui,submit,nohide
gosub,%FENAM%feCBXD
return

feDDLE:
gui,submit,nohide
gosub,%FENAM%feDDLE
return

feDDLF:
gui,submit,nohide
gosub,%FENAM%feDDLF
return

feDDLG:
gui,submit,nohide
gosub,%FENAM%feDDLG
return

feDDLH:
gui,submit,nohide
gosub,%FENAM%feDDLH
return

feDDLI:
gui,submit,nohide
gosub,%FENAM%feDDLI
return

feDDLJ:
gui,submit,nohide
fetog= Hide
guicontrolget,FENAM,,feDDLJ
xmbtog= Hide
Loop, Parse, FELIST, |
	{
		if (FENAM = "XMB")
			{
				xmbtog= Show
				gosub, %FENAM%TOGGLE
				gosub, FEUNPOP
				return
			}
	}
gosub, XMBTOGGLE
gosub, FEUNPOP
gosub, %FENAM%TOGGLE
return

feDDLC:
gui,submit,nohide
gosub,%FENAM%feDDLC
return

feDDLD:
gui,submit,nohide
gosub,%FENAM%feDDLD
return

feDDLA:
gui,submit,nohide
gosub,%FENAM%feDDLA
return

feDDLB:
gui,submit,nohide
gosub,%FENAM%feDDLB
return

feEDTA:
gui,submit,nohide
gosub,%FENAM%feEDTA
return

feEDTB:
gui,submit,nohide
gosub,%FENAM%feEDTB
return

feEDTC:
gui,submit,nohide
gosub,%FENAM%feEDTC
return

feEDTD:
gui,submit,nohide
gosub,%FENAM%feEDTD
return

feEDTE:
gui,submit,nohide
gosub,%FENAM%feEDTE
return

feEDTF:
gui,submit,nohide
gosub,%FENAM%feEDTF
return

feEDTG:
gui,submit,nohide
gosub,%FENAM%feEDTG
return

feUPDA:
gui,submit,nohide
gosub,%FENAM%feUPDA
return

feEDTH:
gui,submit,nohide
gosub,%FENAM%feEDTH
return

feEDTI:
gui,submit,nohide
gosub,%FENAM%feEDTI
return

feUPDB:
gui,submit,nohide
gosub,%FENAM%feUPDB
return

feUPDC:
gui,submit,nohide
gosub,%FENAM%feUPDC
return

feLBXA:
gui,submit,nohide
gosub,%FENAM%feLBXA
return

feLBXB:
gui,submit,nohide
gosub,%FENAM%feLBXB
return

feLVA:
gui,submit,nohide
gosub,%FENAM%feLVA
return

feLVB:
gui,submit,nohide
gosub,%FENAM%feLVB
return

feLVC:
gui,submit,nohide
gosub,%FENAM%feLVC
return

feRad5B:
gui,submit,nohide
gosub,%FENAM%feRad5B
return

feRad5C:
gui,submit,nohide
gosub,%FENAM%feRad5C
return

feRad4A:
gui,submit,nohide
gosub,%FENAM%feRad4A
return

feRad4B:
gui,submit,nohide
gosub,%FENAM%feRad4B
return

feRad5A:
gui,submit,nohide
gosub,%FENAM%feRad5A
return

feRad6A:
gui,submit,nohide
gosub,%FENAM%feRad6A
return

feRad6B:
gui,submit,nohide
gosub,%FENAM%feRad6B
return

feRad6C:
gui,submit,nohide
gosub,%FENAM%feRad6C
return

feRad6D:
gui,submit,nohide
gosub,%FENAM%feRad6D
return

feRad7A:
gui,submit,nohide
gosub,%FENAM%feRad7A
return

feRad7B:
gui,submit,nohide
gosub,%FENAM%feRad7B
return

feRad8A:
gui,submit,nohide
gosub,%FENAM%feRad8A
return

feRad8B:
gui,submit,nohide
gosub,%FENAM%feRad8B
return

feRad9A:
gui,submit,nohide
gosub,%FENAM%feRad9A
return

feRad9B:
gui,submit,nohide
gosub,%FENAM%feRad9B
return

feRad9C:
gui,submit,nohide
gosub,%FENAM%feRad9C
return

feRad10A:
gui,submit,nohide
gosub,%FENAM%feRad10A
return

feRad10B:
gui,submit,nohide
gosub,%FENAM%feRad10B
return

feRad11A:
gui,submit,nohide
gosub,%FENAM%feRad11A
return

feRad11B:
gui,submit,nohide
gosub,%FENAM%feRad11B
return

feRad2A:
gui,submit,nohide
gosub,%FENAM%feRad2A
return

feRad2B:
gui,submit,nohide
gosub,%FENAM%feRad2B
return

feRad2C:
gui,submit,nohide
gosub,%FENAM%feRad2C
return

feRad1A:
gui,submit,nohide
gosub,%FENAM%feRad1A
return

feRad3A:
gui,submit,nohide
gosub,%FENAM%feRad3A
return

feRad3B:
gui,submit,nohide
gosub,%FENAM%feRad3B
return

feRad3C:
gui,submit,nohide
gosub,%FENAM%feRad3C
return

feRad3D:
gui,submit,nohide
gosub,%FENAM%feRad3D
return

feRad1B:
gui,submit,nohide
gosub,%FENAM%feRad1B
return

feSLDA:
gui,submit,nohide
gosub,%FENAM%feSLDA
return

feSLDB:
gui,submit,nohide
gosub,%FENAM%feSLDB
return

feSLDC:
gui,submit,nohide
gosub,%FENAM%feSLDC
return

feSLDD:
gui,submit,nohide
gosub,%FENAM%feSLDD
return

feSLDE:
gui,submit,nohide
gosub,%FENAM%feSLDE
return
;};;;;;;;;;;;;;;;;;;;;;;;;;

;{;;; ~~~~ FE-template items ~~~ ;;;

FEUNPOP:
guicontrol, %fetog%, feBUTA

;;guicontrol, show, feBUTA

guicontrol, %fetog%, feBUTB
guicontrol, %fetog%, feBUTC
guicontrol, %fetog%, feBUTG
guicontrol, %fetog%, feBUTD
guicontrol, %fetog%, feBUTE
guicontrol, %fetog%, feBUTF
guicontrol, %fetog%, feBUTH
guicontrol, %fetog%, feBUTI
guicontrol, %fetog%, feBUTJ
guicontrol, %fetog%, feBUTK
guicontrol, %fetog%, feBUTL
guicontrol, %fetog%, feBUTM
guicontrol, %fetog%, fePICA
guicontrol, %fetog%, fePICB
guicontrol, %fetog%, fePICC
guicontrol, %fetog%, fePICD
guicontrol, %fetog%, fePICE
guicontrol, %fetog%, fePICF
guicontrol, %fetog%, fePICG
guicontrol, %fetog%, feCHKD
guicontrol, %fetog%, feCHKE
guicontrol, %fetog%, feCHKF
guicontrol, %fetog%, feCHKG
guicontrol, %fetog%, feCHKH
guicontrol, %fetog%, feCHKI
guicontrol, %fetog%, feCHKJ
guicontrol, %fetog%, feCHKK
guicontrol, %fetog%, feCHKL
guicontrol, %fetog%, feCHKM
guicontrol, %fetog%, feCHKN
guicontrol, %fetog%, feCHKO
guicontrol, %fetog%, feCHKP
guicontrol, %fetog%, feCHKQ
guicontrol, %fetog%, feCHKA
guicontrol, %fetog%, feCHKB
guicontrol, %fetog%, feCHKC
guicontrol, %fetog%, feCBXE
guicontrol, %fetog%, feCBXF
guicontrol, %fetog%, feCBXG
guicontrol, %fetog%, feCBXH
guicontrol, %fetog%, feCBXI
guicontrol, %fetog%, feCBXJ
guicontrol, %fetog%, feCBXA
guicontrol, %fetog%, feCBXB
guicontrol, %fetog%, feCBXC
guicontrol, %fetog%, feCBXD
guicontrol, %fetog%, feDDLE
guicontrol, %fetog%, feDDLF
guicontrol, %fetog%, feDDLG
guicontrol, %fetog%, feDDLH
guicontrol, %fetog%, feDDLI
guicontrol, %fetog%, feLNKA
;;guicontrol, %fetog%, feDDLJ
guicontrol, %fetog%, feDDLC
guicontrol, %fetog%, feDDLD
guicontrol, %fetog%, feDDLA
guicontrol, %fetog%, feDDLB
guicontrol, %fetog%, feEDTA
guicontrol, %fetog%, feEDTB
guicontrol, %fetog%, feEDTC
guicontrol,-number, feEDTC
guicontrol, %fetog%, feEDTD
guicontrol, %fetog%, feEDTE
guicontrol, %fetog%, feEDTF
guicontrol, %fetog%, feEDTG
guicontrol, %fetog%, feEDTI
guicontrol, %fetog%, feUPDA
guicontrol, %fetog%, feEDTH
guicontrol, %fetog%, feUPDB
guicontrol, %fetog%, feLVA
guicontrol, %fetog%, feUPDC
guicontrol, %fetog%, feGRPA
guicontrol, %fetog%, feGRPB
guicontrol, %fetog%, feGRPC
guicontrol, %fetog%, feGRPD
guicontrol, %fetog%, feGRPE
guicontrol, %fetog%, feGRPF
guicontrol, %fetog%, feGRPG
guicontrol, %fetog%, feLBXA
guicontrol, %fetog%, feLBXB
guicontrol, %fetog%, feLVA
guicontrol, %fetog%, feLVB
guicontrol, %fetog%, feLVC
guicontrol, %fetog%, fePRGB
guicontrol, %fetog%, fePRGA
guicontrol, %fetog%, feRad5B
guicontrol, %fetog%, feRad5C
guicontrol, %fetog%, feRad4A
guicontrol, %fetog%, feRad4B
guicontrol, %fetog%, feRad5A
guicontrol, %fetog%, feRad6A
guicontrol, %fetog%, feRad6B
guicontrol, %fetog%, feRad6C
guicontrol, %fetog%, feRad6D
guicontrol, %fetog%, feRad7A
guicontrol, %fetog%, feRad7B
guicontrol, %fetog%, feRad8A
guicontrol, %fetog%, feRad8B
guicontrol, %fetog%, feRad9A
guicontrol, %fetog%, feRad9B
guicontrol, %fetog%, feRad9C
guicontrol, %fetog%, feRad10A
guicontrol, %fetog%, feRad10B
guicontrol, %fetog%, feRad11A
guicontrol, %fetog%, feRad11B
guicontrol, %fetog%, feRad2A
guicontrol, %fetog%, feRad2B
guicontrol, %fetog%, feRad2C
guicontrol, %fetog%, feRad1A
guicontrol, %fetog%, feRad3A
guicontrol, %fetog%, feRad3B
guicontrol, %fetog%, feRad3C
guicontrol, %fetog%, feRad3D
guicontrol, %fetog%, feRad1B
guicontrol, %fetog%, feSLDA
guicontrol, %fetog%, feSLDB
guicontrol, %fetog%, feSLDD
guicontrol, %fetog%, feSLDE
guicontrol, %fetog%, feSLDC
guicontrol, %fetog%, feTXTA
guicontrol, %fetog%, feTXTB
guicontrol, %fetog%, feTXTC
guicontrol, %fetog%, feTXTD
guicontrol, %fetog%, feTXTE
guicontrol, %fetog%, feTXTF
guicontrol, %fetog%, feTXTG
guicontrol, %fetog%, feTXTS
guicontrol, %fetog%, feTXTT
guicontrol, %fetog%, feTXTR
guicontrol, %fetog%, feTXTM
guicontrol, %fetog%, feTXTH
guicontrol, %fetog%, feTXTI
guicontrol, %fetog%, feTXTN
guicontrol, %fetog%, feTXTO
guicontrol, %fetog%, feTXTP
guicontrol, %fetog%, feTXTQ
guicontrol, %fetog%, feTXTJ
guicontrol, %fetog%, feTXTK
guicontrol, %fetog%, feTXTL
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;   XMB DISPLAY   ;;;;;;;;;;;;;;
FEOPTPOP:
xmbtog= show
fetog= hide
gosub, FEUNPOP

XMBTOGGLE:
guicontrol,%xmbtog%,XMBGRP
guicontrol,%xmbtog%,MNUCLRTXT
guicontrol,%xmbtog%,CLRPICKR
guicontrol,%xmbtog%,CLRDDL
guicontrol,%xmbtog%,OVRLBTN
guicontrol,%xmbtog%,OVRLYTXT
guicontrol,%xmbtog%,OVRLAY
guicontrol,%xmbtog%,OVRLTOG
guicontrol,%xmbtog%,OVRLMENU
guicontrol,%xmbtog%,THMTXT
guicontrol,%xmbtog%,RIBN
guicontrol,%xmbtog%,RIBTXT
guicontrol,%xmbtog%,XICNTXT
guicontrol,%xmbtog%,ICNTXT
guicontrol,%xmbtog%,XMBTHM
guicontrol,%xmbtog%,XMBCLRTHM
guicontrol,%xmbtog%,CLRTHM
guicontrol,%xmbtog%,MOUSEON
guicontrol,%xmbtog%,DYNWALL
guicontrol,%xmbtog%,SHADW
guicontrol,%xmbtog%,XMBSCLF
guicontrol,%xmbtog%,XMBSCL
guicontrol,%xmbtog%,XMBFTXT
guicontrol,%xmbtog%,FONTSB
guicontrol,%xmbtog%,OPACDDL
guicontrol,%xmbtog%,OPASLD
guicontrol,%xmbtog%,OPAEDT
guicontrol,%xmbtog%,GLBMENSETGRP
guicontrol,%xmbtog%,MNUACT
guicontrol,%xmbtog%,MNUJOY
guicontrol,%xmbtog%,MNUPNT
guicontrol,%xmbtog%,MNUFLT
guicontrol,%xmbtog%,THRTL
guicontrol,%xmbtog%,PAUSMNU
guicontrol,%xmbtog%,DATEMNU
guicontrol,%xmbtog%,NAVWRAP
guicontrol,%xmbtog%,SHWIMG
guicontrol,%xmbtog%,SHWMSC
guicontrol,%xmbtog%,SHWVID
guicontrol,%xmbtog%,SHWSET
guicontrol,%xmbtog%,SHWADV
guicontrol,%xmbtog%,SHWHIS


guicontrol,%xmbtog%,MENSHOWCFG
guicontrol,%xmbtog%,MENSHOWCUP
guicontrol,%xmbtog%,MENSHOWHLP
guicontrol,%xmbtog%,MENSHOWINFO
guicontrol,%xmbtog%,MENSHOWLDCONT
guicontrol,%xmbtog%,MENSHOWLDCR
guicontrol,%xmbtog%,MENSHOWONLUP
guicontrol,%xmbtog%,MENSHOWQUIT
guicontrol,%xmbtog%,MENSHOWREB

guicontrol,%xmbtog%,SHWHID
guicontrol,%xmbtog%,CMPAN
guicontrol,%xmbtog%,SHWFPS
guicontrol,%xmbtog%,FILTEXT
guicontrol,%xmbtog%,SHWBATLVL
guicontrol,%xmbtog%,SHWCOMPIN
guicontrol,%xmbtog%,VMPSTXT
guicontrol,%xmbtog%,VMSGX
guicontrol,%xmbtog%,VMSGY
guicontrol,%xmbtog%,XMBGXTXT
guicontrol,%xmbtog%,XMBGYTXT
guicontrol,%xmbtog%,VFNTEN
guicontrol,%xmbtog%,XMBGSZTXT
guicontrol,%xmbtog%,FNTSZ
guicontrol,%xmbtog%,XMBGATXT
guicontrol,%xmbtog%,XMBALF
guicontrol,%xmbtog%,VIDAEDT
guicontrol,%xmbtog%,DPIOVR
guicontrol,%xmbtog%,DPIPT
guicontrol,%xmbtog%,XMBTHMBGRP
guicontrol,%xmbtog%,MNUSYS
guicontrol,%xmbtog%,BOXCVR
guicontrol,%xmbtog%,TITLCVR
guicontrol,%xmbtog%,SSHTCVR
guicontrol,%xmbtog%,THUMBON
guicontrol,%xmbtog%,STHUMBON
guicontrol,%xmbtog%,XMBPL
guicontrol,%xmbtog%,XMBFL
guicontrol,%xmbtog%,PLRCR
guicontrol,%xmbtog%,THMBREC
guicontrol,%xmbtog%,XMBNCTXT
guicontrol,%xmbtog%,XMBSITXT
guicontrol,%xmbtog%,GTHMB
guicontrol,%xmbtog%,SVTHMB
guicontrol,%xmbtog%,THMBNEDT
guicontrol,%xmbtog%,IMGLOC
guicontrol,%xmbtog%,ROMFLS
guicontrol,%xmbtog%,IMGFLS
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RetroFEToggle:
HyperspinToggle:
MediaBrowserToggle:
SteamToggle:
CairoFEToggle:
Kodi_ALToggle:
Kodi_RCBToggle:
Kodi_IARLToggle:
return

MediaToggle:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   MEDIA FRONTEND  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;  INITIALIZE  ;;;;;;;;;;;;;;;;;
gosub, FEUNPOP
fetog= show
ifnotexist, mediafe.ini
	{
		FileAppend,[GLOBAL]`n,mediafe.ini
		FileAppend,[CONFIG]`n,mediafe.ini
		FileAppend,[ORDER]`n,mediafe.ini
		iniwrite,theGamesDB|OpenVGDB|ScreenScraper|arcadeitalia|mamedb|IARL,mediafe.ini,ORDER,system_order
		iniwrite,400,mediafe.ini,CONFIG,Global_image_height
		iniwrite,400,mediafe.ini,CONFIG,Global_image_width
		iniwrite,png,mediafe.ini,CONFIG,Global_image_format
	}
iniread,imagefrmt,mediafe.ini,CONFIG,Global_image_format
iniread,imageheight,mediafe.ini,CONFIG,Global_image_height
iniread,imagewidth,mediafe.ini,CONFIG,Global_image_width
iniread,mediaorder,mediafe.ini,ORDER,system_order
iniread,ESHOME,escfg.ini,CONFIG,home_directory
if (ESHOME = "ERROR")
	{
		ESHOME= %CURSRPTH%\.emulationstation
		iniwrite,%ESHOME%,escfg.ini,CONFIG,home_directory
	}
ssuser= 
sspassw= 
iniread,ssuser,mediafe.ini,CONFIG,ss_user
if (ssuser = "ERROR")
	{
		ssuser= 
	}
iniread,sspassw,mediafe.ini,CONFIG,ss_password
if (sspassw = "ERROR")
	{
		sspassw= 
	}
cslst=
esmlist=
esxlist=
cursysthemelist= 
FilereadLine,scrsup,rj\ScrapeArt\supported.set,1

Loop, Read, rj\ES\eslkup.set
	{
		svxi1= 
		svxi3= 
		stringsplit,svxi,A_LoopReadLine,=
		ifnotinstring,scrsup,%svxi1%
			{
				continue
			}
		ifExist, %RJSYSTEMS%\%svxi3%
			{
				cslst.= svxi3 . "|"
				esmlist.= svxi3 . "=" . RJSYSTEMS . "\" . svxi3 . "|"
			}
	}

if (ESHOME <> "")
	{
		avblnk= 
		esynlst=
		ifexist, %ESHOME%\es_systems.cfg
			{
				Loop,Read,%ESHOME%\es_systems.cfg
					{
						if (A_LoopReadLine = "")
							{
									continue
							}
						stringsplit,avix,A_LoopReadLine,<>
						if (avix2 = "name")
							{
								runame= %avix3%
							}										
						if (avix2 = "path")
							{
								rupath= %avix3%
							}										
						if (avix2 = "platform")
							{
								suplkup= %avix3%
								ifnotinstring,scrsup,%avix3%
									{
										continue
									}						
								esxlist.= runame . "=" . rupath . "|"
							}										
					}
			}
	}

Loop, Parse, esmlist,|
	{
		mls1= 
		mls2= 
		stringsplit,mls,a_loopfield,=
		akv= 
		loop, parse, esxlist,|
			{
				dup= 
				xls1= 
				xls2= 
				stringsplit,xls,a_loopfield,=
				if (mls1 = xls1)
					{
						if (mls2 = xls2)
							{
								dup= 1
								break
							}
						AKV:
						akv+=1
						newnm= %xls1%%akv%
						ifinstring, exmlist,%xls1%%akv%
							{
								goto, AKV
							}
						cslst.= newnm . "|"	
						cursysthl.= newnm . "=" . xls2 . "|"	
						continue
					}
			}
		if (dup = "")
			{
				cslst.= mls1 . "|"	
				cursysthl.= mls1 . "=" . mls2 . "|"	
				continue
			}
	}
	
guicontrol,enable,FEPICA
guicontrol,move,FEPICA,x590 y70 w169 h138
guicontrol,,FEPICA,Inv.png
;;guicontrol,hide,FEPICA

guicontrol,%fetog%,FEBUTA
guicontrol,enable,FEBUTA
guicontrol,move,FEBUTA,x668 y473 w93 h23
guicontrol,,FEBUTA,Download

guicontrol,hide,FEBUTB
guicontrol,enable,FEBUTB
guicontrol,move,FEBUTB,x259 y285 w17 h18
guicontrol,,FEBUTB,^

guicontrol,hide,FEBUTC
guicontrol,enable,FEBUTC
guicontrol,move,FEBUTC,x259 y305 w17 h18
guicontrol,,FEBUTC,v

guicontrol,hide,FEBUTD
guicontrol,enable,FEBUTD
guicontrol,move,FEBUTD,x279 y367 w45 h19
guicontrol,,FEBUTD, reset

guicontrol,hide,FEBUTE
guicontrol,enable,FEBUTE
guicontrol,move,FEBUTE,x330 y367 w48 h19
guicontrol,,FEBUTE, remove

guicontrol,hide,FEBUTF
guicontrol,enable,FEBUTF
guicontrol,move,FEBUTF,x339 y110 w45 h19
guicontrol,,FEBUTF,. . .

guicontrol,hide,FEBUTG
guicontrol,enable,FEBUTG
guicontrol,move,FEBUTG,x640 y450 w41 h18
guicontrol,,FEBUTG,<<-<---

guicontrol,hide,FEBUTH
guicontrol,enable,FEBUTH
guicontrol,move,FEBUTH,x685 y450 w41 h18
guicontrol,,FEBUTH,--->->>



guicontrol,hide,FELNKA
guicontrol, ,FELNKA,<a href="http://screenscraper.fr">screenscraper.fr</a>
guicontrol,move,FELNKA,x379 y208 w128 h13

guicontrol,enable,FEEDTA
guicontrol,hide,FEEDTA
guicontrol,move,FEEDTA,x341 y158 w186 h21
guicontrol,,FEEDTA,%ssuser%

guicontrol,enable,FEEDTB
guicontrol,hide,FEEDTB
guicontrol,move,FEEDTB,x341 y180 w186 h21
guicontrol,+password,FEEDTB
guicontrol,,FEEDTB,%sspassw%

guicontrol,%fetog%,FEDDLC
guicontrol,enable,FEDDLC
guicontrol,move,FEDDLC,x281 y237 w100
guicontrol,,FEDDLC,|Global||%metaimages%
guicontrol,hide,FEDDLC

guicontrol,enable,FEEDTC
guicontrol,hide, FEEDTC
guicontrol,move,FEEDTC, x397 y368 w72 h21
guicontrol,+number,FEEDTC
guicontrol,,FEEDTC, %imagewidth%

guicontrol,enable,FEEDTD
guicontrol,hide, FEEDTD
guicontrol,move, FEEDTD,x397 y393 w72 h21
guicontrol,+number,FEEDTD
guicontrol,,FEEDTD, %imageheight%

guicontrol,hide,FELBXB
guicontrol,-Multi,FELBXB
guicontrol,enable,FELBXB
guicontrol,move,FELBXB,x564 y235 w199 h212
;;guicontrol,+0x100050,FELBXB 
;;guicontrol,+0x200000,FELBXB 
;;guicontrol,+E0x2000,FELBXB
guicontrol,,FELBXB,

guicontrol,hide,FELBXA
guicontrol,enable,FELBXA
guicontrol,move,FELBXA,x279 y259 w101 h108
guicontrol,,FELBXA,|%mediaorder%
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;{;;;; CHECKBOXES ;;;;;;;
guicontrol,%fetog%,FECHKA
guicontrol,enable,FECHKA
guicontrol,move,FECHKA,x466 y259 w80 h13
guicontrol,,FECHKA,Backdrop

guicontrol,%fetog%,FECHKB
guicontrol,enable,FECHKB
guicontrol,move,FECHKB,x466 y277 w80 h13
guicontrol,,FECHKB,Box-Art

guicontrol,%fetog%,FECHKC
guicontrol,enable,FECHKC
guicontrol,move,FECHKC,x466 y293 w80 h13
guicontrol,,FECHKC,Logo

guicontrol,%fetog%,FECHKD
guicontrol,enable,FECHKD
guicontrol,move,FECHKD,x466 y310 w81 h13
guicontrol,,FECHKD,Video

guicontrol,%fetog%,FECHKE
guicontrol,enable,FECHKE
guicontrol,move,FECHKE,x466 y327 w80 h13
guicontrol,,FECHKE,Metadata

guicontrol,hide,FECHKF
guicontrol,enable,FECHKF
guicontrol,move,FECHKF,x572 y475 w80 h13
guicontrol,,FECHKF,Overwrite

guicontrol,%fetog%,FECHKG
guicontrol,enable,FECHKG
guicontrol,move,FECHKG,x466 y346 w80 h13
guicontrol,,FECHKG,Snapshot
guicontrol,hide,FECHKG

guicontrol,%fetog%,FECHKH
guicontrol,enable,FECHKH
guicontrol,move,FECHKH, x389 y259 w70 h17
guicontrol,,FECHKH,3D Boxart
guicontrol,hide,FECHKH

guicontrol,%fetog%,FECHKI
guicontrol,enable,FECHKI
guicontrol,move,FECHKI,x389 y327 w59 h17
guicontrol,,FECHKI,Cart
guicontrol,hide,FECHKI

guicontrol,%fetog%,FECHKJ
guicontrol,enable,FECHKJ
guicontrol,move,FECHKJ,x389 y346 w59 h17
guicontrol,,FECHKJ,3 Mix
guicontrol,hide,FECHKJ

guicontrol,%fetog%,FECHKK
guicontrol,enable,FECHKK
guicontrol,move,FECHKK,x389 y293 w59 h17
guicontrol,,FECHKK,4 Mix
guicontrol,hide,FECHKK

guicontrol,%fetog%,FECHKL
guicontrol,enable,FECHKL
guicontrol,move,FECHKL,x389 y310 w59 h17
guicontrol,,FECHKL,Label
guicontrol,hide,FECHKL

guicontrol,%fetog%,FECHKM
guicontrol,enable,FECHKM
guicontrol,move,FECHKM,x389 y277 w59 h17
guicontrol,,FECHKM,Marquee
guicontrol,hide,FECHKM

guicontrol,%fetog%,FECHKN
guicontrol,enable,FECHKN
guicontrol,move,FECHKN,x385 y423 w82 h13
guicontrol,,FECHKN,Redundancy
guicontrol,hide,FECHKN
;};;;;;

;{;;;; DROPDOWNS ;;;;;;
guicontrol,%fetog%,FEDDLD
guicontrol,enable,FEDDLD
guicontrol,move,FEDDLD,x599 y22 w162
guicontrol,,FEDDLD,|rj||
guicontrolget,FEDDLD,,FEDDLD

guicontrol,%fetog%,FEDDLE
guicontrol,enable,FEDDLE
guicontrol,move,FEDDLE,x662 y212 w100
guicontrol,,FEDDLE,
guicontrol,hide,FEDDLE

guicontrol,%fetog%,FEDDLA
guicontrol,enable,FEDDLA
guicontrol,move,FEDDLA,x9 y41 w249
guicontrol,,FEDDLA,|Systems|
;};;;;



guicontrol,%fetog%,FELVA
guicontrol,enable,FELVA
guicontrol,,FELVA,Mirrors
guicontrol,move,FELVA,x10 y64 w247 h433
guicontrol,+altsubmit,FELVA
guicontrol,+checked,FELVA
guicontrol,+Multi,FELVA
gui,ListView,FELVA
LV_Delete()

;{;;; RADIOS ;;;;;
guicontrol,%fetog%,FERAD5B
guicontrol,enable,FERAD5B
guicontrol,move,FERAD5B,x675 y48 w80 h13
guicontrol,,FERAD5B,Set
guicontrol,,FERAD5B, 0

guicontrol,%fetog%,FERAD5A
guicontrol,enable,FERAD5A
guicontrol,move,FERAD5A,x599 y48 w67 h13
guicontrol,,FERAD5A, Individual
guicontrol,,FERAD5A, 1


guicontrol,%fetog%,FERAD2A
guicontrol,enable,FERAD2A
guicontrol,move,FERAD2A,x272 y65 w80 h13
guicontrol,,FERAD2A,Systems
guicontrol,,FERAD2A, 1

guicontrol,%fetog%,FERAD2B
guicontrol,enable,FERAD2B
guicontrol,move,FERAD2B,x272 y89 w80 h13
guicontrol,,FERAD2B,Jackets
guicontrol,,FERAD2B, 0

guicontrol,%fetog%,FERAD2C
guicontrol,enable,FERAD2C
guicontrol,move,FERAD2C,x272 y110 w60 h13
guicontrol,,FERAD2C,ROMs
guicontrol,,FERAD2C, 0

guicontrol,hide,FERAD7A
guicontrol,enable,FERAD7A
guicontrol,move,FERAD7A,x557 y212 w77 h13
guicontrol,,FERAD7A,Strict
guicontrol,,FERAD7A, 1

guicontrol,hide,FERAD7B
guicontrol,enable,FERAD7B
guicontrol,move,FERAD7B,x557 y455 w77 h15
guicontrol,,FERAD7B,Fuzzy
guicontrol,,FERAD7B, 0
;};;;;;

guicontrol,hide,FERAD4A
guicontrol,enable,FERAD4A
guicontrol,move,FERAD4A,x454 y240 w44 h13
guicontrol,,FERAD4A,PNG
guicontrol,,FERAD4A, 1

guicontrol,hide,FERAD4B
guicontrol,enable,FERAD4B
guicontrol,move,FERAD4B,x405 y239 w38 h15
guicontrol,,FERAD4B,JPG
guicontrol,,FERAD4B, 0
;};;;;;

;{;;; TEXT ;;;;
guicontrol,%fetog%,FETXTA
guicontrol,enable,FETXTA
guicontrol,move,FETXTA,x599 y5 w110 h13
guicontrol,,FETXTA,Artwork Theme

bdset= Not Found
ifexist,rj\netArt\%FEDDLD%\Backdrops.7z
	{
		bdset= Downloaded
	}
guicontrol,%fetog%,FETXTB
guicontrol,enable,FETXTB
guicontrol,move,FETXTB,x435 y13 w137 h13
guicontrol,,FETXTB,Backdrop Set %bdset%

icoset= Not Found
ifexist,rj\netArt\%FEDDLD%\Icons.7z
	{
		icoset= Downloaded
	}
guicontrol,%fetog%,FETXTC
guicontrol,enable,FETXTC
guicontrol,move,FETXTC,x435 y27 w137 h13
guicontrol,,FETXTC,Icon Set %icoset%

logset= Not Found
ifexist,rj\netArt\%FEDDLD%\Logos.7z
	{
		logset= Downloaded
	}
guicontrol,%fetog%,FETXTD
guicontrol,enable,FETXTD
guicontrol,move,FETXTD,x435 y41 w138 h13
guicontrol,,FETXTD,Logo Set %logset%

metset= Not Found
ifexist,rj\netArt\%FEDDLD%\MetaData.7z
	{
		metset= Downloaded
	}
guicontrol,%fetog%,FETXTE
guicontrol,enable,FETXTE
guicontrol,move,FETXTE,x435 y56 w147 h13
guicontrol,,FETXTE,Metadata Set %metset%

guicontrol,%fetog%,FETXTG
guicontrol,enable,FETXTG
guicontrol,hide,FETXTG
guicontrol,move,FETXTG,x291 y392 w78 h13
guicontrol,,FETXTG,Scraper Priority


guicontrol,%fetog%,FETXTI
guicontrol,enable,FETXTI
guicontrol,hide,FETXTI
guicontrol,move,FETXTI,x288 y157 w53 h23
guicontrol,,FETXTI,Username

guicontrol,%fetog%,FETXTJ
guicontrol,enable,FETXTJ
guicontrol,hide,FETXTJ
guicontrol,move,FETXTJ,x290 y180 w50 h23
guicontrol,,FETXTJ,Password

guicontrol,%fetog%,FETXTK
guicontrol,enable,FETXTK
guicontrol,hide,FETXTK
guicontrol,move,FETXTK,x390 y110 w350 h13
guicontrol,,FETXTK,ROMPATHS

guicontrol,%fetog%,FETXTL
guicontrol,enable,FETXTL
guicontrol,hide,FETXTL
guicontrol,move,FETXTL,x472 y373 w88 h23
guicontrol,,FETXTL,Image Max-Width

guicontrol,%fetog%,FETXTM
guicontrol,enable,FETXTM
guicontrol,hide,FETXTM
guicontrol,move,FETXTM,x472 y397 w88 h23
guicontrol,,FETXTM,Image Max-height
;};;;;;

guicontrol,%fetog%,FEGRPA
guicontrol,move,FEGRPA,x282 y133 w264 h98
guicontrol,hide,FEGRPA
guicontrol,,FEGRPA,ScreenScraper

guicontrol,%fetog%,FEPRGA
guicontrol,move,FEPRGA,x15 y500 w736 h7
guicontrol,,FEPRGA,0
Gui,ListView,FELVA
Loop, Parse, systmfldrs,|
	{
		LV_Add("",A_LoopField)
	}
LV_ModifyCol()
return

MediaFEBUTA:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     DOWNLOADING ARTWORK   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
getboxart= 
getbackdrop= 
getsnapshot= 
getvideo= 
getmetadata= 
getlogo= 
arpause= disable
gosub, ARTPAUSE
arpause= enable
guicontrolget,FERAD5A,,FERAD5A
guicontrolget,FERAD2A,,FERAD2A
guicontrolget,REALSYS,,FEDDLA
guicontrolget,FEDDLD,,FEDDLD
guicontrolget,FECHKA,,FECHKA
if (FECHKA = 1)
	{
		getbackdrop= 1
	}
guicontrolget,FECHKB,,FECHKB
if (FECHKB = 1)
	{
		getboxart= 1
	}

guicontrolget,FECHKC,,FECHKC
if (FECHKC = 1)
	{
		getlogo= 1
	}

guicontrolget,FECHKD,,FECHKD
if (FECHKD = 1)
	{
		getvideo= 1
	}

guicontrolget,FECHKE,,FECHKE
if (FECHKE = 1)
	{
		getmetadata= 1
	}

guicontrolget,FECHKG,,FECHKG
if (FECHKG = 1)
	{
		getsnapshot= 1
	}

guicontrolget,FECHKH,,FECHKH
if (FECHKH = 1)
	{
		get3dboxart= 1
	}
guicontrolget,FECHKI,,FECHKI
if (FECHKI = 1)
	{
		getcart= 1
	}
guicontrolget,FECHKJ,,FECHKJ
if (FECHKJ = 1)
	{
		get3mix= 1
	}
guicontrolget,FECHKK,,FECHKK
if (FECHKK = 1)
	{
		get4mix= 1
	}
guicontrolget,FECHKL,,FECHKL
if (FECHKL = 1)
	{
		getlabel= 1
	}
guicontrolget,FECHKM,,FECHKM
if (FECHKM = 1)
	{
		getbanner= 1
		getmarquee= 1
	}

guicontrolget,FECHKF,,FECHKF

iniRead, mediaorder,mediafe.ini,ORDER,system_order
IniRead, bckdrp,Themes.set,%FEDDLD%,Backdrop
IniRead, bckdrpd,Themes.set,%FEDDLD%,Backdrop_Directory
IniRead, icnl,Themes.set,%FEDDLD%,Icon
IniRead, icnld,Themes.set,%FEDDLD%,Icon_Directory
IniRead, logol,Themes.set,%FEDDLD%,Logo
IniRead, logold,Themes.set,%FEDDLD%,Logo_Directory
IniRead, videol,Themes.set,%FEDDLD%,Video
IniRead, videold,Themes.set,%FEDDLD%,Video_Directory
IniRead, metl,Themes.set,%FEDDLD%,Meta
IniRead, metld,Themes.set,%FEDDLD%,Meta_Directory
DWNOVR= False
if (FECHKF = 1)
	{
		DWNOVR= True
	}
dwnlenb:= 0
dwnlenb:= (FECHKA + FECHKB + FECHKC + FECHKD + FECHKE + FECHKG + FECHKH + FECHKI + FECHKJ + FECHKK + FECHKL + FECHKM)
if (dwnlenb = 0)
	{
		SB_SetText("You must select components to download.")
		guicontrol,enable,FEBUTA
		guicontrol,enable,FELVA
		guicontrol,enable,FEDDLA
		guicontrol,enable,FERAD2A
		guicontrol,enable,FERAD2B
		guicontrol,enable,FERAD5A
		guicontrol,enable,FERAD5B
		return
	}
FEItems= 
FEItems:= LVGetCheckedItems("", "ahk_id" . FELSTVA)
DWNFLD= 
if (FERAD2A = 1)
;{;;;;;;;;;;;;;;;;;;;   INDIVIDUAL SYSTEMS   ;;;;;;;;;;;;;;;;;;;;;
	{
		if (FERAD5A = 1)
			{
				Loop, Parse, FEItems, `n, `r
					{
						if (A_LoopField = "")
							{
								continue
							}
						if (FECHKA = 1)
							{
								URLFILE= %bckdrpd%/%A_LoopField%.png
								save= rj\netArt\%FEDDLD%\%A_LoopField%\Backdrops\%A_LoopField%.png
								ifnotexist, rj\netArt\%FEDDLD%\%A_LoopField%\Backdrops
								FileCreateDir, rj\netArt\%FEDDLD%\%A_LoopField%\Backdrops
								DownloadFile(URLFILE,save, DWNOVR, True)
								FileGetSize,imgsz,%save%,K
								SB_SetText(" " A_LoopField " backdrop downloaded")
								if (imgsz < 1)
									{
										DWNFLD= 1
										FileDelete,%save%
										SB_SetText(" " A_LoopField " backdrop could not be downloaded")
									}
								ifNotExist, %save%
									{
										DWNFLD= 1
										SB_SetText(" " A_LoopField " backdrop could not be downloaded")
									}
							}								
						if (FECHKB = 1)
							{
								URLFILE= %icnld%/%A_LoopField%.png
								save= rj\netArt\%FEDDLD%\%A_LoopField%\Icons\%A_LoopField%.png
								ifnotexist, rj\netArt\%FEDDLD%\%A_LoopField%\Icons
								FileCreateDir, rj\netArt\%FEDDLD%\%A_LoopField%\Icons
								DownloadFile(URLFILE,save, DWNOVR, True)
								FileGetSize,imgsz,%save%,K
								SB_SetText(" " A_LoopField " icon downloaded")
								if (imgsz < 1)
									{
										DWNFLD= 1
										FileDelete,%save%
										SB_SetText(" " A_LoopField " icon could not be downloaded")
									}
								ifNotExist, %save%
									{
										DWNFLD= 1
										SB_SetText(" " A_LoopField " icon could not be downloaded")
									}
							}								
						if (FECHKC = 1)
							{
								URLFILE= %logold%/%A_LoopField%.png
								save= rj\netArt\%FEDDLD%\%A_LoopField%\Logos\%A_LoopField%.png
								ifnotexist, rj\netArt\%FEDDLD%\%A_LoopField%\Logos
								FileCreateDir, rj\netArt\%FEDDLD%\%A_LoopField%\Logos
								DownloadFile(URLFILE,save, DWNOVR, True)
								FileGetSize,imgsz,%save%,K
								SB_SetText(" " A_LoopField " logo downloaded")
								if (imgsz < 1)
									{
										DWNFLD= 1
										FileDelete,%save%
										SB_SetText(" " A_LoopField " logo could not be downloaded")
									}
								ifNotExist, %save%
									{
										DWNFLD= 1
										SB_SetText(" " A_LoopField " logo could not be downloaded")
									}
							}								
						if (FECHKD = 1)
							{
								URLFILE= %videold%/%A_LoopField%/%A_LoopField%.mp4
								save= rj\netArt\%FEDDLD%\%A_LoopField%\Videos\%A_LoopField%.mp4
								ifnotexist, rj\netArt\%FEDDLD%\%A_LoopField%\Videos
								FileCreateDir, rj\netArt\%FEDDLD%\%A_LoopField%\Videos
								DownloadFile(URLFILE,save, DWNOVR, True)
								FileGetSize,imgsz,%save%,K
								SB_SetText(" " A_LoopField " video downloaded")
								if (imgsz < 1)
									{
										DWNFLD= 1
										FileDelete,%save%
										SB_SetText(" " A_LoopField " video could not be downloaded")
									}
								ifNotExist, %save%
									{
										DWNFLD= 1
										SB_SetText(" " A_LoopField " video could not be downloaded")
									}
							}								
						if (FECHKE = 1)
							{
								URLFILE= %metld%/%A_LoopField%.xml
								save= rj\netArt\%FEDDLD%\%A_LoopField%\MetaData\%A_LoopField%.xml
								ifnotexist, rj\netArt\%FEDDLD%\%A_LoopField%\MetaData
								FileCreateDir, rj\netArt\%FEDDLD%\%A_LoopField%\MetaData
								DownloadFile(URLFILE,save, DWNOVR, True)
								FileGetSize,imgsz,%save%,K
								SB_SetText(" " A_LoopField " downloaded")
								if (imgsz < 1)
									{
										DWNFLD= 1
										FileDelete,%save%
										SB_SetText(" " A_LoopField " metadata could not be downloaded")
									}
								ifNotExist, %save%
									{
										DWNFLD= 1
										SB_SetText(" " A_LoopField " metadata could not be downloaded")
									}
							}								
					}
			}	
	}
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
if (FERAD2B = 1)
	{
		goto, JACKETSCRAPE
	}

if (FERAD2C = 1)
	{
		
		Loop, Parse, FEItems, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				SYSROMD= %A_LoopField%
				Loop, Parse,cursysthl,|
					{
						stringsplit,curspl,A_LoopField,=
						if (curspl1 = SYSROMD)
							{
								SYSLKLOC= %curspl2%
								break
							}
					}
				REALSYS= %SYSROMD%
				SCRPDIR= %SYSLKLOC%
				SYSLKUP= %SYSROMD%
				gosub, BROMSCRAPE
			}
	}
return
	
	
;{;;;;;;;;;;;;;;;;   ROM SCRAPING   ;;;;;;;;;;;;;;;;;;

JACKETSCRAPE:
SYSLKUP= %FEDDLA%
BROMSCRAPE:
mameget= 
if (SYSLKUP = "Capcom Play System - CPS")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "MAME - Arcade")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "MAME")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "Capcom Play System - CPS II")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "SNK - Neo Geo MVS")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "Sega - NAOMI")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "Sega - Model 2")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "Sega - Model 3")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}
if (SYSLKUP = "Cave")
	{
		SYSLKUP= MAME - Arcade
		mameget= 1
	}	
if (mameget = 1)
	{
		if (mamedbx = "")
			{
				FileRead, mamedbx, gam\MAME_C.gam
			}
	}


if (mediaorder = "")
	{
		return
	}

sscrape= 1
ssopt= 
if (ssuser = "")
	{
		sscrape= 
	}
if (sspassw = "")
	{
		sscrape= 
	}
if (sscrape <> "")
	{
		ssopt:= A_Space . "-ss_user=" . ssuser . A_Space . "-ss_password=" . sspassw
	}
	
3DBoxartscrapeorder=
Marqueescrapeorder=
4Mixscrapeorder=
3Mixscrapeorder=
Labelscrapeorder=
Cartscrapeorder=
Backdropscrapeorder=
BoxArtscrapeorder=
Logoscrapeorder=
Videoscrapeorder=
Metadatascrapeorder=
Snapshotscrapeorder=
sscrpri= 
iniread,imagefrmt,mediafe.ini,CONFIG,Global_image_format
iniread,imageheight,mediafe.ini,CONFIG,Global_image_height
iniread,imagewdith,mediafe.ini,CONFIG,Global_image_width
iniread,iscrp,mediaFE.ini,ORDER
Loop, Parse, mediaorder,|
	{
		if (A_LoopField = "ScreenScraper")
			{
				sscrpri.= "ss" . ","
			}
		if (A_LoopField = "theGamesDB")
			{
				sscrpri.= "gdb" . ","
			}
		if (A_LoopField = "OpenVGDB")
			{
				if (mameget = "")
					{
						sscrpri.= "ovgdb" . ","
					}
			}	
	}
if (mameget = 1)
	{
		sscrpri.= "adb" . "," . "mamedb" . "," 
	}

stringtrimright,sscrpri,sscrpri,1
scrapeorder= "%sscrpri%"

oppri= Global
Loop, Parse, metaimages,|
	{
		arpi= %A_LoopField%
		Loop, Parse, iscrp, `n, `r
			{
				stringsplit,vix,A_loopField,=
				if (vix1 = arpi)
					{
						stringreplace,vixs,vix1,%A_Space%,,All
						stringreplace,vixs,vixs,-,,All
						Loop, Parse, vix2,|
							{
								
								if (A_LoopField = "IARL")
									{
										%vixs%order.= "IARL" . "|"
									}
								if (A_LoopField = "ScreenScraper")
									{
										%vixs%order.= "ScreenScraper" . "|"
										%vixs%sscrpri.= "ss" . ","
									}
								if (A_LoopField = "theGamesDB")
									{
										%vixs%order.= "theGamesDB" . "|"
										%vixs%sscrpri.= "gdb" . ","
									}
								if (A_LoopField = "OpenVGDB")
									{
										if (mameget = "")
											{
												%vixs%order.= "OpenVGDB" . "|"
												%vixs%sscrpri.= "ovgdb" . ","
											}
									}	
							}
						if (mameget = 1)
							{
								if (A_LoopField = "arcadeitalia")
									{
										%vixs%order.= "ardadeitalia" . "|"
										%vixs%sscrpri.= "adb" . "," 
									}
								if (A_LoopField = "mamedb")
									{
										%vixs%order.= "mamedb" . "|"
										%vixs%sscrpri.= "mamedb" . "," 
									}
							}
					}
			}
		iniread,imgwdth,Mediafe.ini,CONFIG,%vixs%_image_width
		%vixs%imgsize= %imgwdth%
		if (imgwdth = "ERROR")
			{
				%vixs%imgsize= %imagewidth%
			}
		iniread,imght,Mediafe.ini,CONFIG,%vixs%_image_height
		%vixs%imgtall= %imght%
		if (imght = "ERROR")
			{
				%vixs%imgtall= %imageheight%
			}
		iniread,imgfrm,Mediafe.ini,CONFIG,%vixs%_image_format
		%vixs%imagefrmt= %imgfrm%
		if (imgfrm = "ERROR")
			{
				%vixs%imagefrmt= %imagefrmt%
			}
		nmorder= % %vixs%order
		if (nmorder = "")
			{
				nmorder= %mediaorder%
			}
		if (nmorder <> "")
			{
				mediaorder= %nmorder%
			}
		kiv= % %vixs%sscrpri
		if (kiv = "")
			{
				kiv= %sscrpri%
			}
		stringtrimright,kiv,kiv,1
		%vixs%scrapeorder= "%kiv%"
	}
	
	
if (FERAD2B = 1)
	{
		supsysr=
		supsysi=
		supsys=
		FileReadLine,sslprse,rj\ScrapeArt\supported.set,1
		Loop, Parse, sslprse,/
			{
				if (A_LoopField = SYSLKUP)
					{
						supsysr= 1
						supsys= 1
						break
					}
			}
		Loop,Parse,scrble,|
			{
				if (SYSLKUP = A_LoopField)
					{
						supsysi= 1
						supsys= 1
						break
					}
			}
		if (supsys = "")
			{
				SB_SetText(" " SYSLKUP " is not supported")			
				return
			}
		Loop, Parse, FEItems, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				jaktit= %A_LoopField%
				realname= %jaktit%
				if (getboxart = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Boxart
					}
				if (get3dboxart = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\3DBoxart
					}
				if (getbackdrop = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Backdrops
					}
				if (getsnapshot = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Snapshots
					}
				if (getlogo = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Logos
					}
				if (getvideo = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Videos
					}
				if (getmetadata = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\MetaData
					}
				if (getlabel = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Labels
					}
				if (getcart = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Carts
					}
				if (getmarquee = 1)
					{
						FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees
					}

				stringReplace,nsjak,jaktit,%A_Space%,,All
				stringReplace,nsjak,nsjak,',,All
				stringReplace,nsjak,nsjak,.,,All
				stringReplace,nsjak,nsjak,`,,,All
				stringReplace,nsjak,nsjak,-,,All
				ccnt1=
				ccnt2=
				stringsplit,ccnt,nsjak,([	
				ifnotexist, rj\scrapeArt\%SYSLKUP%
					{
						ifnotexist,rj\scrapeArt\%SYSLKUP%.7z
							{
								filereadline,dlprfx,arcorg.set,2
								URLFILE= %dlprfx%/DATFILES/%SYSLKUP%.7z
								save= rj\scrapeArt\%SYSLKUP%.7z
								SB_SetText("Downloading " SYSLKUP " Metadata")
								DownloadFile(URLFILE,save, True, True)
								SB_SetText("Download Complete")
								
							}
						ifnotexist,rj\scrapeArt\%SYSLKUP%.7z
							{
								filereadline,dlprfx,arcorg.set,5
								URLFILE= %dlprfx%/rj/scrapeart/%SYSLKUP%.7z
								save= rj\scrapeArt\%SYSLKUP%.7z
								SB_SetText("Downloading " SYSLKUP " Metadata")
								DownloadFile(URLFILE,save, True, True)
								SB_SetText("Download Complete")
								
							}
						
						ifnotexist,rj\scrapeArt\%SYSLKUP%.7z
							{
									SB_SetText(" Metadata Could not be downloaded ")
							}
						
						ifexist,rj\scrapeArt\%SYSLKUP%.7z
							{
								SB_SetText("Extracting " SYSLKUP " metadata")
								RunWait,"7za.exe" x -y "rj\scrapeArt\%SYSLKUP%.7z" -O"rj\scrapeArt",,hide
								SB_SetText(" " SYSLKUP " metadata extracted")
							}
					}
				gosub, SCRSCRAPE
				Loop, rj\scrapeArt\%SYSLKUP%\*.xml
					{
						splitpath,A_LoopFileFullPath,xmlf,,,xmln
						stringreplace,akj,xmln,%A_Space%,,All
						stringreplace,akj,akj,',,All
						stringreplace,akj,akj,.,,All
						stringreplace,akj,akj,`,,,All
						stringreplace,akj,akj,-,,All
						ccnv1= 
						ccnv2= 
						stringsplit,ccnv,akj,([
;;						msgbox,,,xmlname=%xmln%`nromname=%jaktit%`nshortname=%ccnt1%`nshortxml=%ccnv1%
						if (xmln = jaktit)
							{
;;								msgbox,,,%xmln% = = %jaktit%
								gosub, DBSCRAPE
								continue
							}
						if (ccnt1 = ccnv1)
							{
;;								msgbox,,, %ccnt1% = = %ccnv1%
								gosub, DBSCRAPE
								continue
							}
					}

			}
	}
	
if (FERAD2C = 1)
	{
		gosub, SCRSCRAPE
		Loop, %SYSLKLOC%\*.*
			{
				splitpath,A_LoopFileFullPath,,,,justrom
				jaktit= %justrom%	
				realname= %justrom%	
				stringReplace,nsjak,jaktit,%A_Space%,,All
				stringReplace,nsjak,nsjak,',,All
				stringReplace,nsjak,nsjak,.,,All
				stringReplace,nsjak,nsjak,`,,,All
				stringReplace,nsjak,nsjak,-,,All
				ccnt1=
				ccnt2=
				stringsplit,ccnt,nsjak,([
				ifnotexist, rj\scrapeArt\%SYSLKUP%
					{
						SB_SetText("Extracting " SYSLKUP " metadata")
						RunWait, %comspec% cmd /c " "7za.exe" e -y "rj\scrapeArt\%SYSLKUP%.7z" -O"rj\scrapeArt\%SYSLKUP%" ",,hide
						SB_SetText(" " SYSLKUP " metadata extracted")
					}
				Loop, rj\scrapeArt\%SYSLKUP%\*.xml
					{
						
						splitpath,A_LoopFileFullPath,xmlf,,,xmln
						stringreplace,akj,xmln,%A_Space%,,All
						stringreplace,akj,akj,',,All
						stringreplace,akj,akj,.,,All
						stringreplace,akj,akj,`,,,All
						stringreplace,akj,akj,-,,All
						ccnv1= 
						ccnv2= 
						stringsplit,ccnv,akj,([
						if (xmln = jaktit)
							{
;;								msgbox,,,%xmln% = = %jaktit%
								gosub, DBSCRAPE
								continue
							}
						if (ccnt1 = ccnv1)
							{
;;								%ccnt1% = = %ccnv1%
								gosub, DBSCRAPE
								continue
							}
					}
			}
	}
gosub, ARTPAUSE
return	
;};;;;;;;;;;;;;;;;;;;;;;;;;;





SCRAPEJAK:
;{;;;;;;;;;;;;;;;;;;;;;;   SCRAPE ART  ;;;;;;;;;;;;;;;;;;;;;
SCRSCRAPE:
;{;;;;;;;;;;;;;;;   SSELPH SCRAPER   ;;;;;;;;;;;;;;;;;;	
alvnum= 
strk= 
sysfnd= 
brkal= 
mamemode= 
realname= %jaktit%
imgtyp= console
if (mameget = 1)
	{
		mamemode:= A_Space . "-mame"
		imgtyp= mame
		if (FERAD2B = 1)
			{
				Loop, Parse, mamedbx, `n, `r
					{
						realn1= 
						realn2= 
						realj1= 
						realj2= 
						stringsplit,realn,A_LoopField,=
						stringsplit,realj,realn1,.
						if (realj1 = jaktit)
							{
								realname= %realn2%
							}
					}
			}
	}
if (supsysr = "")
	{
	;	return
	}
IMGDEST= ROM_SCRAPE\%SYSROMD%
if (FERAD2B = 1)
	{
		IMGDEST= %REALSYS%\%realname%
	}
if (get3mix = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\3Mix
	}
if (get4mix = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\4Mix
	}
if (getboxart = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Boxart
	}
if (get3dboxart = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\3DBoxart
	}
if (getbackdrop = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Backdrops
	}
if (getsnapshot = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Snapshots
	}
if (getlogo = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Logos
	}
if (getvideo = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Videos
	}
if (getmetadata = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\MetaData
	}
if (getlabel = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Labels
	}
if (getcart = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Carts
	}
if (getmarquee = 1)
	{
		FileCreateDir, rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees
	}

if (FERAD2C = 1)
	{
		scrsufx= 
		if (FECHKN = 1)
			{
				Loop, Parse, metaimages,|
					{
						arpi= %A_LoopField%
						getatst= % get%arpi%
						if (getatst = "")
							{
								continue
							}
						iniread,scrord,mediafe.ini,ORDER,%arpi%
						Loop, Parse, scrord, |
							{
								if (A_LoopField = "IARL")
									{
										continue
									}
								if (A_LoopField = "ScreenScraper")
									{
										tmpscro= ss
									}
								if (A_LoopField = "theGamesDB")
									{
										tmpscro= gdb
									}
								if (A_LoopField = "OpenVGDB")
									{
										tmpscro= ovgdb
									}	
								if (mameget = 1)
									{
										if (A_LoopField = "arcadeitalia")
											{
												tmpscro= adb
											}
										if (A_LoopField = "mamedb")
											{
												tmpscro= mamedb
											}
									}	
								%arpi%scrapeorder= %tmpscro%
								scrsufx= -%A_LoopField%
								gosub, RRD%arpi%
							}	
					}
				return	
			}
RRDboxart:
		if (getboxart = 1)
				{
					SB_SetText("Downloading " SYSROMD " Boxart ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Boxartimgtall% -max_width=%Boxartimgsize% -%Boxartimgtyp%_src=%BoxArtscrapeorder%  -append=false -retries=5 -download_images=true -console_img=b -img_format=%Boxartimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Boxart" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
RRDsnapshot:
		if (getsnapshot = 1)
				{
					SB_SetText("Downloading " SYSROMD " Snapshots ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Snapshotsimgtall% -max_width=%Snapshotsimgsize% -%Snapshotimgtyp%_src=%Snapshotscrapeorder%  -append=false -retries=5 -download_images=true -console_img=s -img_format=%Snapshotimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Snapshots" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
RRDbackdrop:
		if (getbackdrop = 1)
				{
					artx= f
					if (mameget = 1)
						{
							artx=fly
						}		
					SB_SetText("Downloading " SYSROMD " Backdrops ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%imgtall% -max_width=%Backdropimgsize% -%Backdropimgtyp%_src=%Backdropscrapeorder%  -append=false -retries=5 -download_images=true -console_img=%artx% -img_format=%Backdropimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Backdrops" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
RRDlogo:
		if (getlogo = 1)
				{
					artx= l
					if (mameget = 1)
						{
							artx=t
						}
					SB_SetText("Downloading " SYSROMD " Logos ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Logoimgtall% -max_width=%Logoimgsize% -%imgtyp%_src=%Logoscrapeorder%  -append=false -retries=5 -download_images=true -console_img=%artx% -img_format=%Logoimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Logos" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
RRD3dboxart:
		if (get3dboxart = 1)
				{
					SB_SetText("Downloading " SYSROMD " 3D-Boxart ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%3dboximgtall% -max_width=%3dboximgsize% -%imgtyp%_src=%3DBoxscrapeorder%  -append=false -retries=5 -download_images=true -console_img=3b -img_format=%3dboxartimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\3D-Boxart" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}					
RRDcart:
		if (getcart = 1)
				{
					artx= cart
					if (mameget = 1)
						{
							artx=c
						}
					SB_SetText("Downloading " SYSROMD " Carts ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Cartimgtall% -max_width=%Cartimgsize% -%imgtyp%_src=%Cartscrapeorder%  -append=false -retries=5 -download_images=true -console_img=%artx% -img_format=%Cartimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Carts" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
RRDlabel:
		if (getlabel = 1)
				{
					if (mameget = "")
						{
							SB_SetText("Downloading " SYSROMD " Labels ")
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Labelimgtall% -max_width=%Labelimgsize% -%imgtyp%_src=%Labelscrapeorder%  -append=false -retries=5 -download_images=true -console_img=clabel -img_format=%Labelimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Labels" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
						}
					if (FECHKN = 1)
						{
							return
						}
				}		
RRDbanner:
		if (getbanner = 1)
				{
					if (mameget = "")
						{
							SB_SetText("Downloading " SYSROMD " Marquees ")
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Marqueescrapeorder% -max_height=%Marqueeimgtall% -max_width=%Marqueeimgsize% -append=false -retries=5 -download_images=true -console_img=a -img_format=%Marqueeimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Marquees" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
						}
					if (FECHKN = 1)
						{
							return
						}
				}
RRD3mix:
		if (get3mix = 1)
				{
					if (mameget = "")
						{
							SB_SetText("Downloading " SYSROMD " 3Mix ")
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%3Miximgtall% -max_width=%3Miximgsize% -%imgtyp%_src=%3Mixscrapeorder%  -append=false -retries=5 -download_images=true -console_img=mix3 -img_format=%3miximagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\3Mix" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
					}
					if (FECHKN = 1)
						{
							return
						}
				}
RRD4mix:
		if (get4mix = 1)
				{
					if (mameget = "")
						{
							SB_SetText("Downloading " SYSROMD " 4Mix ")
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%4Mixscrapeorder% -max_height=%4Miximgtall% -max_width=%4Miximgsize% -append=false -retries=5 -download_images=true -console_img=mix4 -img_format=%4miximagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\4Mix" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
						}
					if (FECHKN = 1)
						{
							return
						}
				}
RRDmarquee:
		if (getmarquee = 1)
				{
					if (mameget = "")
						{
							SB_SetText("Downloading " SYSROMD " Marquees ")
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Marqueescrapeorder% -max_height=%Marqueeimgtall% -max_width=%Marqueeimgsize% -append=false -retries=5 -download_images=false -marquee_suffix="" -marquee_format=%Marqueeimagefrmt% -use_filename=true -marquee_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Marquees" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
						}
					if (mameget = 1)
						{
							SB_SetText("Downloading " SYSROMD " Marquees ")
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Marqueeimgtall% -max_width=%Marqueeimgsize% -%imgtyp%_src=%Marqueescrapeorder% -append=false -retries=5 -download_images=true -console_img=m -img_format=%Marqueeimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Marquees" -image_suffix="%scrsufx%" -output_file="" ",%SYSLKLOC%,hide
						}
					if (FECHKN = 1)
						{
							return
						}
				}
RRDvid:
		if (getvideo = 1)
				{
					SB_SetText("Downloading " SYSROMD " Video ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Videoscrapeorder%  -append=false -retries=5 -download_images=false -video_suffix="%scrsufx%" -use_filename=true -video_dir="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\Video" -output_file="" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
RRDmetadata:
		if (getmetadata = 1)
				{
					SB_SetText("Downloading " SYSROMD " MetaData ")
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Metadatascrapeorder%  -append=true -retries=5 -download_images=false -use_filename=true -output_file="%A_WorkingDir%\rj\netArt\scrapeArt\ROM_SCRAPE\%SYSROMD%\MetaData\%SYSROMD%%scrsufx%.xml" ",%SYSLKLOC%,hide
					if (FECHKN = 1)
						{
							return
						}
				}
		SB_SetText("")
		return
	}

if (FERAD2B = 1)
	{
		scrsufx= 
		if (FECHKN = 1)
			{
				Loop, Parse, metaimages,|
					{
						arpi= %A_LoopField%
						getatst= % get%arpi%
						if (getatst = "")
							{
								continue
							}
						iniread,scrord,mediafe.ini,ORDER,%arpi%
						Loop, Parse, scrord, |
							{
								if (A_LoopField = "IARL")
									{
										continue
									}
								if (A_LoopField = "ScreenScraper")
									{
										tmpscro= ss
									}
								if (A_LoopField = "theGamesDB")
									{
										tmpscro= gdb
									}
								if (A_LoopField = "OpenVGDB")
									{
										tmpscro= ovgdb
									}	
								if (mameget = 1)
									{
										if (A_LoopField = "arcadeitalia")
											{
												tmpscro= adb
											}
										if (A_LoopField = "mamedb")
											{
												tmpscro= mamedb
											}
									}	
								%arpi%scrapeorder= %tmpscro%
								scrsufx= -%A_LoopField%
								gosub, JRD%arpi%
							}
					}
				return	
			}
JRDboxart:
		if (getboxart = 1)
				{
;;					msgbox, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%imgtall% -max_width=%imgsize% -%imgtyp%_src=%BoxArtscrapeorder%  -append=false -retries=5 -download_images=true -console_img=b -img_format=%imagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Boxart" -image_suffix="%scrsufx%" -output_file="" "=%RJSYSTEMS%\%REALSYS%\%realname%=hide
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Boxartimgtall% -max_width=%Boxartimgsize% -%imgtyp%_src=%BoxArtscrapeorder%  -append=false -retries=5 -download_images=true -console_img=b -img_format=%Boxartimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Boxart" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Boxart\%realname%%scrsufx%.%Boxartimagefrmt%
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Boxart\%realname%%scrsufx%.%Boxartimagefrmt%,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " Boxart " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRDsnapshot:
		if (getsnapshot = 1)
				{
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Snapshotimgtall% -max_width=%Snapshotimgsize% -%imgtyp%_src=%Snapshotscrapeorder%  -append=false -retries=5 -download_images=true -console_img=s -img_format=%Snapshotimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Snapshots" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Snapshots\%realname%%scrsufx%.%Snapshotimagefrmt%
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Snapshots\%realname%%scrsufx%.%Snapshotimagefrmt%,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " Snapshots " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRDbackdrop:
		if (getbackdrop = 1)
				{
					artx= f
					if (mameget = 1)
						{
							artx=fly
						}		
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Backdropimgtall% -max_width=%Backdropimgsize% -%imgtyp%_src=%Backdropscrapeorder%  -append=false -retries=5 -download_images=true -console_img=%artx% -img_format=%imagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Backdrops" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Backdrops\%realname%%scrsufx%.%backdropimagefrmt%
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Backdrops\%realname%%scrsufx%.%backdropimagefrmt%,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " Backdrops " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRDlogo:
		if (getlogo = 1)
				{
					artx= l
					if (mameget = 1)
						{
							artx=t
						}
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Logoimgtall% -max_width=%Logoimgsize% -%imgtyp%_src=%Logoscrapeorder%  -append=false -retries=5 -download_images=true -console_img=%artx% -img_format=%imagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Logos" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Logos\%realname%%scrsufx%.%logoimagefrmt%
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Logos\%realname%%scrsufx%.%logoimagefrmt%,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " Logos " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRD3dboxart:
		if (get3dboxart = 1)
				{
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%3dboximgtall% -max_width=%3dboximgsize% -%imgtyp%_src=%3DBoxartscrapeorder%  -append=false -retries=5 -download_images=true -console_img=3b -img_format=%3dboximagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\3D-Boxart" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\3D-Boxart\%realname%%scrsufx%.%3dboximagefrmt%
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\3D-Boxart\%realname%%scrsufx%.%3dboximagefrmt%,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " 3D-Boxart " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRDcart:
		if (getcart = 1)
				{
					artx= cart
					if (mameget = 1)
						{
							artx=c
						}
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%cartimgtall% -max_width=%cartimgsize% -%imgtyp%_src=%Cartscrapeorder%  -append=false -retries=5 -download_images=true -console_img=%artx% -img_format=%Cartimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Carts" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Carts\%realname%%scrsufx%.%Cartimagefrmt%
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Carts\%realname%%scrsufx%.%Cartimagefrmt%,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " Carts " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRDlabel:
		if (getlabel = 1)
				{
					if (mameget = "")
						{
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%labelimgtall% -max_width=%labelimgsize% -%imgtyp%_src=%Labelscrapeorder%  -append=false -retries=5 -download_images=true -console_img=clabel -img_format=%Labelimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Labels" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
							SBNOT= Failed
							ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Labels\%realname%%scrsufx%.%Labelimagefrmt%
								{
									SBNOT= Completed
									FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Labels\%realname%%scrsufx%.%Labelimagefrmt%,K
									if (imgsz < 1)
										{
											SBNOT= Failed
										}
								}
							SB_SetText("Downloaded " realname " Labels " SBNOT " ")
						}
					if (FECHKN = 1)
						{
							return
						}
				}		
JRDbanner:
		if (getbanner = 1)
				{
					if (mameget = "")
						{
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Marqueescrapeorder% -max_height=%marqueeimgtall% -max_width=%marqueemgsize%-append=false -retries=5 -download_images=true -console_img=a -img_format=%Marqueeimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
							SBNOT= Failed
							ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees\%realname%%scrsufx%.%Marqueeimagefrmt%
								{
									SBNOT= Completed
									FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees\%realname%%scrsufx%.%Marqueeimagefrmt%,K
									if (imgsz < 1)
										{
											SBNOT= Failed
										}
								}
							SB_SetText("Downloaded " realname " Marquees " SBNOT " ")
						}
					if (FECHKN = 1)
						{
							return
						}
				}
JRD3mix:
		if (get3mix = 1)
				{
					if (mameget = "")
						{
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%3miximgtall% -max_width=%3miximgsize% -%imgtyp%_src=%3Mixscrapeorder%  -append=false -retries=5 -download_images=true -console_img=mix3 -img_format=%3miximagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\3Mix" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
							SBNOT= Failed
							ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\3Mix\%realname%%scrsufx%.%3miximagefrmt%
								{
									SBNOT= Completed
									FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\3Mix\%realname%%scrsufx%.%3miximagefrmt%,K
									if (imgsz < 1)
										{
											SBNOT= Failed
										}
								}
							SB_SetText("Downloaded " realname " 3Mix " SBNOT " ")
						}
					
					if (FECHKN = 1)
						{
							return
						}
				}
JRD4mix:
		if (get4mix = 1)
				{
					if (mameget = "")
						{
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%4Mixscrapeorder% -max_height=%4miximgtall% -max_width=%4miximgsize% -append=false -retries=5 -download_images=true -console_img=mix4 -img_format=%4miximagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\4Mix" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
							SBNOT= Failed
							ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\4Mix\%realname%%scrsufx%.%4miximagefrmt%
								{
									SBNOT= Completed
									FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\4Mix\%realname%%scrsufx%.%4miximagefrmt%,K
									if (imgsz < 1)
										{
											SBNOT= Failed
										}
								}
							SB_SetText("Downloaded " realname " 4Mix " SBNOT " ")
						}
					if (FECHKN = 1)
						{
							return
						}
				}
JRDmarquee:
		if (getmarquee = 1)
				{
					if (mameget = "")
						{
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Marqueescrapeorder% -max_height=%Marqueeimgtall% -max_width=%Marqueeimgsize% -append=false -retries=5 -download_images=false -marquee_suffix="%scrsufx%" -marquee_format=%Marqueeimagefrmt% -use_filename=true -marquee_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
							SBNOT= Failed
							ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees\%realname%%scrsufx%.%Marqueeimagefrmt%
								{
									SBNOT= Completed
									FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees\%realname%%scrsufx%.%Marqueeimagefrmt%,K
									if (imgsz < 1)
										{
											SBNOT= Failed
										}
								}
							SB_SetText("Downloaded " realname " Marquees " SBNOT " ")
						}
					if (mameget = 1)
						{
							RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt%%mamemode% -max_height=%Marqueeimgtall% -max_width=%Marqueeimgsize% -%imgtyp%_src=%Marqueescrapeorder%  -append=false -retries=5 -download_images=true -console_img=m -img_format=%Marqueeimagefrmt% -use_filename=true -image_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees" -image_suffix="%scrsufx%" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
							SBNOT= Failed
							ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees\%realname%%scrsufx%.%Marqueeimagefrmt%
								{
									SBNOT= Completed
									FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Marquees\%realname%%scrsufx%.%Marqueeimagefrmt%,K
									if (imgsz < 1)
										{
											SBNOT= Failed
										}
								}
							SB_SetText("Downloaded " realname " Marquees " SBNOT " ")
						}
					if (FECHKN = 1)
						{
							return
						}
				}
JRDvideo:
		if (getvideo = 1)
				{
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Videoscrapeorder% -append=false -retries=5 -download_images=false -video_suffix="%scrsufx%" -use_filename=true -video_dir="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Video" -output_file="" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Videos\%realname%%scrsufx%.mp4
						{
							SBNOT= Completed
							FileGetSize,imgsz,%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\Videos\%realname%%scrsufx%.mp4,K
							if (imgsz < 1)
								{
									SBNOT= Failed
								}
						}
					SB_SetText("Downloaded " realname " Video " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
JRDmetadata:
		if (getmetadata = 1)
				{
					RunWait, %comspec% cmd /c " "%A_ScriptDir%\Scraper.exe"%ssopt% -%imgtyp%_src=%Metadatascrapeorder% -append=true -retries=5 -download_images=false -use_filename=true -output_file="%A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\MetaData\%realname%%scrsufx%.xml" ",%RJSYSTEMS%\%REALSYS%\%realname%,hide
					SBNOT= Failed
					ifexist, %A_WorkingDir%\rj\netArt\scrapeArt\%REALSYS%\%realname%\MetaData\%realname%%scrsufx%.xml
						{
							SBNOT= Completed
						}
					SB_SetText("Downloaded " realname " MetaData " SBNOT " ")
					if (FECHKN = 1)
						{
							return
						}
				}
		SB_SetText("")
		return
	}	
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


DBSCRAPE:
IfNotInString,mediaorder,IARL
	{
		return
	}

Loop, Read, rj\scrapeArt\%SYSLKUP%\%xmlf%
	{
		if (A_LoopReadLine = "")
			{
				continue
			}
		xlmb1= 
		xlmb2= 
		xlmb3= 
		stringsplit,xlmb,A_LoopreadLine,<>
		ifinstring,xlmb2,thegamesdb_id
			{	
				continue
			}
		ifinstring,xlmb2,_url
			{	
				continue
			}
		ifinstring,xlmb2,3dbox
			{
				jaksbd= 3dboxart
				if (get3dboxart = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,boxart
			{
				jaksbd= boxart
				if (getboxart = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,media
			{
				jaksbd= cart
				if (getcart = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,clearlogo
			{
				jaksbd= logos
				if (getlogo = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,banner
			{
				jaksbd= marquees
				if (getbanner = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,boxback
			{
				jaksbd= boxart
				if (getboxart = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,fanart
			{
				jaksbd= backdrops
				if (getbackdrop = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,snapshot
			{
				jaksbd= snapshots
				if (getsnapshot = "")
					{
						continue
					}
			}
		ifinstring,xlmb2,videourl
			{
				jaksbd= videos
				if (getvideo = "")
					{
						continue
					}
				ifnotinstring,xlmb3,:
					{
						if (PYEXIST = 1)
							{
								ifnotexist,rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%gefls2%.mp4
									{
										SB_SetText("Downloading " realname " Video")
										RunWait, %comspec% /c " "%A_ScriptDir%\youtube-dl.exe" -R 3 -i --id "%xlmb3%" --prefer-insecure --no-part ",rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%,hide
										FileGetSize,imgsz,rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%xlmb3%.mp4,K
										if (imgsz < 1)
											{
												DWNFLD= 1
												FileDelete,rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%gefls2%.mp4
												SB_SetText(" " realname " " jaksbd " could not be downloaded")
												continue
											}
										ifNotExist, rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%xlmb3%.mp4
											{
												DWNFLD= 1
												SB_SetText(" " realname " " jaksbd " could not be downloaded")
												continue
											}
										ifNotExist, rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%realname%.mp4
											{
												FileMove, rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%xlmb3%.mp4, rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%realname%.mp4,1
											}
									}
								continue	
							}
					}
			}
		
		URLFILE= %xlmb3%
		splitpath,URLFILE,urlf
		save= rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%urlf%
		splitpath,save,,sfd,svx
		SB_SetText("Downloading " realname " " jaksbd "")
		ifnotexist,rj\netArt\scrapeArt\%REALSYS%\%realname%\%jaksbd%\%urlf%
			{
				DownloadFile(URLFILE, save, DWNOVR, True)
				ifNotExist, %save%
					{
						DWNFLD= 1
						SB_SetText(" " realname " " jaksbd " could not be downloaded")
						continue
					}
				FileGetSize,imgsz,%save%,K
				if (imgsz < 1)
					{
						DWNFLD= 1
						FileDelete,%save%
						SB_SetText(" " realname " " jaksbd " could not be downloaded")
						continue
					}
				jaksbn=	
				Loop, %sfd%\%realname%.*
					{
						jaksbn+=1
					}
				FileMove,%save%,%sfd%\%realname%%jaksbn%.%svx%
				SB_SetText(" " realname " " jaksbd " downloaded")
			}
	}
if (getmetadata = 1)
	{
		filecopy, rj\scrapeArt\%SYSLKUP%\%xmlf%, rj\netArt\scrapeArt\%REALSYS%\%realname%\metadata,1
	}
return

;};;;;;;;;;

	
;};;;;;;;;;;;;;;;;;;;

ARTPAUSE:
guicontrol,%arpause%,FEBUTA
guicontrol,%arpause%,FELVA
guicontrol,%arpause%,FEDDLA
guicontrol,%arpause%,FERAD2A
guicontrol,%arpause%,FERAD2B
guicontrol,%arpause%,FERAD5A
guicontrol,%arpause%,FERAD5B
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	

;{;;;;;;;;;;;;;;;;;;;  ARTWORK SETS  ;;;;;;;;;;;;;	
if (FERAD5B = 1)
	{
		DWNFLD= 
		if (FECHKA = 1)
			{
				URLFILE= %bckdrp%
				save= rj\netArt\%FEDDLD%\Backdrops.zip
				ifnotexist, rj\netArt\%FEDDLD%
				FileCreateDir, rj\netArt\%FEDDLD%
				DownloadFile(URLFILE,save, DWNOVR, True)
				FileGetSize,imgsz,%save%,K
				SB_SetText(" " A_LoopField " backdrops downloaded")
				if (imgsz < 1)
					{
						DWNFLD= 1
						FileDelete,%save%
						SB_SetText(" " A_LoopField " backdrops could not be downloaded")
					}
				ifNotExist, %save%
					{
						DWNFLD= 1
						SB_SetText(" " A_LoopField " backdrops could not be downloaded")
					}
			}								
		if (FECHKB = 1)
			{
				URLFILE= %icnl%
				save= rj\netArt\%FEDDLD%\Icons.zip
				ifnotexist, rj\netArt\%FEDDLD%
				FileCreateDir, rj\netArt\%FEDDLD%
				DownloadFile(URLFILE,save, DWNOVR, True)
				FileGetSize,imgsz,%save%,K
				SB_SetText(" " A_LoopField " icons downloaded")
				if (imgsz < 1)
					{
						DWNFLD= 1
						FileDelete,%save%
						SB_SetText(" " A_LoopField " icons could not be downloaded")
					}
				ifNotExist, %save%
					{
						DWNFLD= 1
						SB_SetText(" " A_LoopField " icons could not be downloaded")
					}
			}								
		if (FECHKC = 1)
			{
				URLFILE= %logol%
				save= rj\netArt\%FEDDLD%\Logos.zip
				ifnotexist, rj\netArt\%FEDDLD%
				FileCreateDir, rj\netArt\%FEDDLD%
				DownloadFile(URLFILE,save, DWNOVR, True)
				FileGetSize,imgsz,%save%,K
				SB_SetText(" " A_LoopField " logos downloaded")
				if (imgsz < 1)
					{
						DWNFLD= 1
						SB_SetText(" " A_LoopField " logos could not be downloaded")
					}
				ifNotExist, %save%
					{
						DWNFLD= 1
						SB_SetText(" " A_LoopField " logos could not be downloaded")
					}
			}								
		if (FECHKD = 1)
			{
				URLFILE= %videol%
				save= rj\netArt\%FEDDLD%\Videos.zip
				ifnotexist, rj\netArt\%FEDDLD%\Videos
				FileCreateDir, rj\netArt\%FEDDLD%\Videos
				DownloadFile(URLFILE,save, DWNOVR, True)
				FileGetSize,imgsz,%save%,K
				SB_SetText(" " A_LoopField " videos downloaded")
				if (imgsz < 1)
					{
						DWNFLD= 1
						FileDelete,%save%
						SB_SetText(" " A_LoopField " videos could not be downloaded")
					}
				ifNotExist, %save%
					{
						DWNFLD= 1
						SB_SetText(" " A_LoopField " videos could not be downloaded")
					}
			}								
		if (FECHKE = 1)
			{
				URLFILE= %metl%
				save= rj\netArt\%FEDDLD%\MetaData.zip
				ifnotexist, rj\netArt\%FEDDLD%
				FileCreateDir, rj\netArt\%FEDDLD%
				DownloadFile(URLFILE,save, DWNOVR, True)
				FileGetSize,imgsz,%save%,K
				SB_SetText(" " A_LoopField " metadata downloaded")
				if (imgsz < 1)
					{
						DWNFLD= 1
						FileDelete,%save%
						SB_SetText(" " A_LoopField " metadata could not be downloaded")
					}
				ifNotExist, %save%
					{
						DWNFLD= 1
						SB_SetText(" " A_LoopField " metadata could not be downloaded")
					}
			}											
	
	}
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
GuiControl,,FEPRGA,0
if (DWNFLD = 1)
	{
		SB_SetText("Some items could not be retrieved.")
	}
return

;{;;;;;;;;;  MOVE SCRAPE PRIORITY UP  ;;;;;;;;;
MediaFEBUTB:
SB_SetText("")
guicontrolget,FEDDLC,,FEDDLC
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,%A_Space%,-,All
if (FEDDLC = "Global")
	{
		FEDDLC= system_order
	}
iniDelete,mediafe.ini,ORDER,%FEDDLC%
newnum= 
olnum= 
Loop, Parse, mediaorder,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		olnum+=1
		systmv= A_LoopField
		if (A_LoopField = curtxt)
			{
				newnum:= olnum-1
			}
	}
if (newnum = 0)
	{
		sb_settext("Cannot move up")
		return
	}
TMORD=
olnum=  
Loop, Parse, mediaorder,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		olnum+=1
		if (A_LoopField = curtxt)
			{
				continue
			}
		if (olnum = newnum)
			{
				TMORD.= curtxt . "|"
			}
		TMORD.= A_LoopField . "|"
	}
mediaorder= %TMORD%	
iniwrite,%TMORD%,mediafe.ini,ORDER,%FEDDLC%
guicontrol,,FELBXA,|%mediaorder%
return
;};;;;;;

MediaFEBUTC:
;{;;;;;;;;;;;  MOVE SCRAPE PRIORITY DOWN  ;;;;;;;;;;;;;;;;
gui,submit,nohide
SB_SetText("")
guicontrolget,FEDDLC,,FEDDLC
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,%A_Space%,-,All
if (FEDDLC = "Global")
	{
		FEDDLC= system_order
	}
iniDelete,mediafe.ini,ORDER,%FEDDLC%
mvnum= 
mvtm= 
Loop, Parse, mediaorder,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		mvnum+=1
		if (A_loopField = curtxt)
			{
				mvtm:= mvnum+1
			}
	}
totord:= mvnum	
if (mvtm > totord)
	{
		SB_SetText("Cannot Move further down.")
		return
	}
TMORD=
mvnum=  	
Loop, Parse, mediaorder,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		mvnum+=1
		if (A_LoopField = curtxt)
			{
				continue
			}
		TMORD.= A_LoopField . "|"
		if (mvtm = mvnum)
			{
				TMORD.= curtxt . "|"
			}
	}
mediaorder= %TMORD%
guicontrol,,FELBXA,|%mediaorder%
iniwrite,%TMORD%,mediafe.ini,ORDER,%FEDDLC%
return
;};;;;;;;;;;;;;;;

MediaFEBUTD:
guicontrolget,FEDDLC,,FEDDLC
mediaordert= theGamesDB|OpenVGDB|ScreenScraper|arcadeitalia|mamedb|IARL
stringreplace,FEDDLC,FEDDLC,%A_Space%,,ALL
stringreplace,FEDDLC,FEDDLC,-,,All
if (FEDDLC = "Global")
	{
		MsgBox,3,Reset All,Would you like to reset ALL image-type priorities?
		ifmsgbox,Yes
			{
				iniwrite,%mediaordert%,mediafe.ini,ORDER,system_order
				Loop, Parse, metaimages,|
					{
						metimg= %A_LoopField%
						iniwrite,%mediaordert%,mediafe.ini,ORDER,%metimg%
						iniwrite,400,mediafe.ini,CONFIG,%metimg%_image_height
						iniwrite,400,mediafe.ini,CONFIG,%metimg%_image_width
						iniwrite,png,mediafe.ini,CONFIG,%metimg%_image_format
					}
			}
		ifmsgbox,Cancel
			{
				return
			}
	}
mediaorder= %mediaordert%
iniwrite,png,mediafe.ini,CONFIG,%FEDDLC%_image_format
iniwrite,400,mediafe.ini,CONFIG,%FEDDLC%_image_width
iniwrite,400,mediafe.ini,CONFIG,%FEDDLC%_image_height
guicontrol,,FEEDTD, 400
guicontrol,,FEEDTC, 400
guicontrol,,FELBXA,|theGamesDB|OpenVGDB|ScreenScraper|arcadeitalia|mamedb|IARL
iniwrite,%mediaorder%,mediafe.ini,ORDER,%FEDDLC%
return

MediaFEBUTE:
guicontrolget,FEDDLC,,FEDDLC
curmedord= %mediaorder%
GRANDORDER= %FEDDLC%
TMEDO= 	
if (FEDDLC = "Global")
	{
		Loop, Parse, metaimages,|
			{
				GRANDORDER= %A_LoopField%
				Gosub, MEDFEGLRMV
			}
		mediaorder= %TMEDO%
		iniwrite,%TMEDO%,mediafe.ini,ORDER,system_order
		guicontrol,,FELBXA,|%mediaorder%
		return
	}
	
MEDFEGLRMV:	
TMEDO= 	
Loop, Parse, curmedord,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		if (A_loopField = curtxt)
			{
				continue
			}
		TMEDO.= A_LoopField . "|"
	}	
guicontrol,,FELBXA,|%TMEDO%
iniwrite,%TMEDO%,mediafe.ini,ORDER,%GRANDORDER%
guicontrol,,FELBXA,|%TMEDO%
return

MediaFEBUTF:
guicontrolget,FEDDLA,,FEDDLA
if (FEDDLA = "")
	{
		SB_SetText("Select A System to assign a ROM-path")
		return
	}
ESROMMEDPTHTMP= 
FileSelectFolder,ESROMMEDPTHTMP,3,,Select the matching ROM Media path
if (ESROMMEDPTHTMP = "")
	{
		return
	}	
ESROMMEDPTH= %ESROMMEDPTHTMP%
Loop, Parse, cslst,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		ssiv1= 	
		ssiv2= 
		stringsplit,ssiv,A_LoopField,=
		if (ssiv1 = FEDDLA)
			{
				cslst.= ssiv1 . "=" . ESROMMEDPTH
				continue
			}	
		cslst.= ssiv1 . "=" . ssiv2
	}
Gui,ListView,FELVA
LV_Delete()
Loop, %ESROMMEDPTH%\*.*
	{
		LV_Add("",A_LoopFileName)
	}
guicontrol,,FETXTF,%ESROMMEDPTH%	
return

MediaFELNKA:
return


MediaFELBXB:
gui,submit,nohide
guicontrolget,imgdat,,FELBXB
guicontrol,,FEPICA,rj\netArt\scrapeArt\%FEDDLA%\%curtxt%\%FEDDLE%\%imgdat%
guicontrol,move,FEPICA,x590 y70 w169 h138
return

MediaFELBXA:
gui,submit,nohide
guicontrolget,curtxt,,FELBXA
return

;{;;;;;;;;;;;;;;;;;;;;;;  CHECKBOXES  ;;;;;;;;;;;;;;;;;;;;;;;;;;
MediaFECHKA:
return

MediaFECHKB:
return

MediaFECHKC:
return

MediaFECHKD:
return

MediaFECHKE:
return

MediaFECHKF:
return

MediaFECHKG:
return

MediaFECHKH:
return

MediaFECHKI:
return

MediaFECHKJ:
return

MediaFECHKK:
return

MediaFECHKL:
return

MediaFECHKM:
return

MediaFECHKN:
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;  EDIT FIELDS  ;;;;;;;;;;;;;;;;;;;;;;;;;
MediaFEEDTA:
gui,submit,nohide
guicontrolget,FEEDTA,,FEEDTA
iniwrite,%FEEDTA%,mediafe.ini,CONFIG,ss_user
return

MediaFEEDTB:
gui,submit,nohide
guicontrolget,FEEDTB,,FEEDTB
iniwrite,%FEEDTB%,mediafe.ini,CONFIG,ss_password
return

MediaFEEDTC:
gui,submit,nohide
guicontrolget,FEDDLC,,FEDDLC
guicontrolget,FEEDTC,,FEEDTC
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,-,,All
GRANDORDER= %FEDDLC%
if (FEDDLC = "Global")
{
		Loop, Parse, metaimages,|
			{
				GRANDORDER= %A_LoopField%
				Gosub, SCRIMGWIDTH
			}
		iniwrite,%FEEDTC%,mediafe.ini,CONFIG,Global_image_width
		return
	}
SCRIMGWIDTH:
iniwrite,%FEEDTC%,mediafe.ini,CONFIG,%GRANDORDER%_image_width
return

MediaFEEDTD:
gui,submit,nohide
guicontrolget,FEDDLC,,FEDDLC
guicontrolget,FEEDTD,,FEEDTD
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,-,,All
GRANDORDER= %FEDDLC%
if (FEDDLC = "Global")
{
		Loop, Parse, metaimages,|
			{
				GRANDORDER= %A_LoopField%
				Gosub, SCRIMGHEIGHT
			}
		iniwrite,%FEEDTD%,mediafe.ini,CONFIG,Global_image_height
		return
	}
SCRIMGHEIGHT:
iniwrite,%FEEDTD%,mediafe.ini,CONFIG,%GRANDORDER%_image_height
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;

MediaFEDDLA:
guicontrolget,FEDDLA,,FEDDLA
Gui,ListView,FELVA
if (FERAD2B = 1)
	{
		Gui,ListView,FELVA
		LV_Delete()
		Loop, %RJSYSTEMS%\%FEDDLA%\*,2
			{
				LV_Add("",A_LoopFileName)				
			}
		LV_ModifyCol()
		return
	}
if (FERAD2A = 1)
	{
		LV_Delete()
		Loop,%RJSYSTEMS%\*,2
			{
				LV_Add("",A_LoopFileName)				
			}
		LV_ModifyCol()		
	}
if (FERAD2C = 1)
	{

	}
return

MediaFEDDLE:
Gui,ListView,FELVA
guicontrolget,FEDDLE,,FEDDLE
curtxt= 
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		gosub, MEDIMGPOP
	}
return

MEDIMGPOP:
ARINNG= 
guicontrolget,FEDDLA,,FEDDLA
SUBFFILES= 			
Loop, rj\netArt\ScrapeArt\%FEDDLA%\%curtxt%\%FEDDLE%\*.*
	{
		SUBFFILES.= A_LoopFileName . "|"
	}
GuiControl,,FELBXB,|%SUBFFILES%	
return

MediaFEDDLC:
guicontrolget,FEDDLC,,FEDDLC
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,-,,All

iniread,imageheight,mediafe.ini,CONFIG,%FEDDLC%_image_height
if (imageheight = "ERROR")
	{
		iniread,imageheight,mediafe.ini,CONFIG,Global_image_height
		iniwrite,%imageheight%,mediafe.ini,CONFIG,%FEDDLC%_image_height
	}
guicontrol,,FEEDTD,%imageheight%

iniread,imagewidth,mediafe.ini,CONFIG,%FEDDLC%_image_width
if (imagewidth = "ERROR")
	{
		iniread,imagewidth,mediafe.ini,CONFIG,Global_image_width
		iniwrite,%imagewidth%,mediafe.ini,CONFIG,%FEDDLC%_image_width
	}
guicontrol,,FEEDTC,%imagewidth%

iniread,imagefrmt,mediafe.ini,CONFIG,%FEDDLC%_image_format
Guicontrol,,FERAD4A,1

if (imagefrmt = "ERROR")
	{
		iniread,imagefrmt,mediafe.ini,CONFIG,Global_image_format
		iniwrite,%imagefrmt%,mediafe.ini,CONFIG,%FEDDLC%_image_format
	}
if (imagefrmt = "JPG")
		{
			Guicontrol,,FERAD4B,1
		}

iniread,mediaorder,mediafe.ini,ORDER,%FEDDLC%
if (mediaorder = "ERROR")
	{
		iniread,mediaorder,mediafe.ini,ORDER,system_order
		iniwrite,%mediaorder%,mediafe.ini,ORDER,%FEDDLC%
	}
guicontrol,,FELBXA,|%mediaorder%	
return

MediaFEDDLD:
return

MediaFERAD2A:
guicontrol,hide,FETXTK
guicontrol,hide,FEBUTG
guicontrol,hide,FEBUTH
guicontrol,hide,FEBUTB
guicontrol,hide,FEBUTC
guicontrol,hide,FEBUTD
guicontrol,hide,FEBUTE
guicontrol,hide,FEEDTA
guicontrol,hide,FEEDTB
guicontrol,hide,FELBXA
guicontrol,hide,FELBXB
guicontrol,hide,FEDDLE
guicontrol,hide,FELNKA
guicontrol,hide,FECHKG
guicontrol,hide,FECHKH
guicontrol,hide,FECHKI
guicontrol,hide,FECHKJ
guicontrol,hide,FECHKK
guicontrol,hide,FEDDLC
guicontrol,hide,FECHKL
guicontrol,hide,FECHKM
guicontrol,hide,FECHKN
guicontrol,hide,FETXTG
guicontrol,hide,FERAD7B
guicontrol,hide,FERAD7A
guicontrol,hide,FETXTI
guicontrol,hide,FETXTJ
guicontrol,hide,FETXTM
guicontrol,hide,FEEDTD
guicontrol,hide,FETXTL
guicontrol,hide,FEEDTC
guicontrol,hide,FEGRPA
guicontrol,hide,FEPICA
guicontrol,hide,FERAD4A
guicontrol,hide,FERAD4B
guicontrol,,FECHKG,0
guicontrol,enable,FECHKD
guicontrol,,FERAD5A,1
guicontrol,enable,FEDDLD
guicontrol,enable,FERAD5B
guicontrol,,FEDDLA,|Systems||
Gui,ListView,FELVA
LV_Delete()
Loop, %RJSYSTEMS%\*,2
	{
		ifinstring,scrsup,%A_LoopFileName%
			{
				LV_Add("",A_LoopFileName)				
			}
	}
LV_ModifyCol()
return

MediaFERAD2B:
guicontrol,hide,FETXTK
guicontrol,hide,FEBUTG
guicontrol,hide,FEBUTH
guicontrol,hide,FEBUTF
guicontrol,show,FEBUTB
guicontrol,show,FEBUTC
guicontrol,show,FEBUTD
guicontrol,show,FEBUTE
guicontrol,show,FEEDTA
guicontrol,show,FEEDTB
guicontrol,show,FELBXA
guicontrol,show,FELBXB
guicontrol,show,FEDDLE
guicontrol,show,FELNKA
guicontrol,show,FECHKG
guicontrol,show,FECHKH
guicontrol,show,FECHKI
guicontrol,show,FECHKJ
guicontrol,show,FECHKK
guicontrol,show,FEDDLC
guicontrol,show,FECHKL
guicontrol,show,FECHKM
guicontrol,show,FECHKN
guicontrol,show,FETXTG
guicontrol,show,FERAD7B
guicontrol,show,FERAD7A
guicontrol,show,FETXTI
guicontrol,show,FETXTJ
guicontrol,show,FETXTM
guicontrol,show,FEEDTD
guicontrol,show,FETXTL
guicontrol,show,FEEDTC
guicontrol,show,FEGRPA
guicontrol,show,FEPICA
guicontrol,show,FERAD4A
guicontrol,show,FERAD4B
guicontrol,enable,FECHKD
guicontrol,,FERAD5A,1
guicontrol,disable,FERAD5B
guicontrol,disable,FEDDLD
scrble= 
Loop, %RJSYSTEMS%\*,2
	{
		ifinstring,scrsup,%A_LoopFileName%
			{
				if (A_Index = 1)
					{
						scrpp= %A_LoopFileName%
					}
				scrble.= A_LoopFileName . "|"				
			}
		}
guicontrol,,FEDDLA,|%scrpp%||%scrble%
Gui,ListView,FELVA
LV_Delete()
if (PYEXIST = "")
	{
		guicontrol,disable,FECHKD
	}
return

MediaFERAD2C:
guicontrol,,FEDDLA,|Systems||
gui,ListView,FELVA
LV_Delete()
Loop, Parse, cslst,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		LV_Add("",A_LoopField)	
	}
LV_ModifyCol()	
guicontrol,show,FEBUTF
guicontrol,show,FETXTK
guicontrol,show,FEBUTG
guicontrol,show,FEBUTH
guicontrol,show,FEBUTB
guicontrol,show,FEBUTC
guicontrol,show,FEBUTD
guicontrol,show,FEBUTE
guicontrol,show,FEEDTA
guicontrol,show,FEEDTB
guicontrol,show,FELBXA
guicontrol,show,FELBXB	
guicontrol,show,FEDDLE	
guicontrol,show,FELNKA
guicontrol,show,FECHKG
guicontrol,show,FECHKH
guicontrol,show,FECHKI
guicontrol,show,FECHKJ
guicontrol,show,FECHKK
guicontrol,show,FEDDLC
guicontrol,show,FECHKL
guicontrol,show,FECHKM
guicontrol,show,FECHKN
guicontrol,show,FETXTG
guicontrol,show,FERAD7B
guicontrol,show,FERAD7A
guicontrol,show,FETXTI
guicontrol,show,FETXTJ
guicontrol,show,FETXTM
guicontrol,show,FEEDTD
guicontrol,show,FETXTL
guicontrol,show,FEEDTC
guicontrol,show,FEGRPA
guicontrol,show,FEPICA
guicontrol,show,FERAD4A
guicontrol,show,FERAD4B
guicontrol,enable,FECHKD
guicontrol,,FERAD5A,1
guicontrol,disable,FERAD5B
guicontrol,disable,FEDDLD
return


MedaiFELBXB:
;;showimage;;
return

MediaFERAD4A:
guicontrolget,FEDDLC,,FEDDLC
guicontrolget,FEEDTC,,FEEDTC
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,-,,All
GRANDORDER= %FEDDLC%
if (FEDDLC = "Global")
{
		Loop, Parse, metaimages,|
			{
				GRANDORDER= %A_LoopField%
				Gosub, SCRWRPNG
			}
		iniwrite,png,mediafe.ini,CONFIG,Global_image_format
		return
	}
SCRWRPNG:
iniwrite,png,mediafe.ini,CONFIG,%GRANDORDER%_image_format
return

MediaFERAD4B:
guicontrolget,FEDDLC,,FEDDLC
guicontrolget,FEEDTC,,FEEDTC
stringreplace,FEDDLC,FEDDLC,%A_Space%,,All
stringreplace,FEDDLC,FEDDLC,-,,All
GRANDORDER= %FEDDLC%
if (FEDDLC = "Global")
{
		Loop, Parse, metaimages,|
			{
				GRANDORDER= %A_LoopField%
				Gosub, SCRWRJPG
			}
		iniwrite,jpg,mediafe.ini,CONFIG,Global_image_format
		return
	}

SCRWRJPG:
iniwrite,jpg,mediafe.ini,CONFIG,%FEDDLC%_image_format
return

MediaFERAD5A:
guicontrol,enable,FELVA
return

MediaFERAD7B:
scrlrset= 
guicontrol,enable,FELVA
stringleft,srchsh,curtxt,3
stringsplit,avxin,curtxt0,([
stringreplace,ntrnsf,avxin1,%A_Space%,,All
stringreplace,ntrnsf,ntrnsf,-,,All
stringreplace,ntrnsf,ntrnsf,`,,,All
stringreplace,ntrnsf,ntrnsf,.,,All
stringreplace,ntrnsf,ntrnsf,',,All
subfar= 
arin=
beginpop= 
garner= 
garnern= 
lsfnd=
splitpath,curtxt,curtxf,,,curtxn
;;Loop, rj\netArt\scrapeArt\%FEDDLA%\%curtxn%*,2
Loop, rj\netArt\scrapeArt\%FEDDLA%\%srchsh%*,2
{
	if (arin <> "")
		{
			beginpop= %subfar%
			guicontrol,show,FEBUTH
			guicontrol,show,FEBUTG
		}
	stringsplit,spliip,A_LoopFileName,([
	if (avxin1 = spliip1)
		{
			garnern+=1
			garner.= A_LoopFileName . "`n"
			continue
			}
	if (garnern > 1)
		{
			
			splitpath,A_LoopFileFullPath,filen,matd,mmex,menan
			stringreplace,fiemn,menan,%A_Space%,,All
			stringreplace,fiemn,menan,-,,All
			stringreplace,fiemn,menan,`,,,All
			stringreplace,fiemn,menan,.,,All
			stringreplace,fiemn,menan,',,All
			if (ntrnsf = fiemn)
			{
			garner.= A_LoopFileName . "`n"
			continue
				}
			garnern= 	
			subfar.= A_LoopFileName . "`n"
			lsfnd= A_LoopFileName . "`n"
			arin+=1
		}
	if (scrln = arin)
		{
			goto, medpoppic
		}
}

if (arin = 1)
	{
		goto, MEDFLDDDWN
	}
subemds=

Loop, rj\netArt\scrapeArt\%FEDDLA%\%curtxt%\%FEDDLE%\*.*
	{
		subemds.= A_LoopFileName . "|"
	}
guicontrol,,FELBXB,|%submeds%
return

MediaFEPICA:
gosub, MEDIATOOLTIP
return

MediaFEBUTH:
if (FEUPDCn < 1)
{
	return
	}
FEUPDCn-=1
gosub, FLDRCARRIER
return

MediaFEBUTG:
if (FEUPDCn > 9)
{
	return
	}
FEUPDCn+=1
gosub, FLDRCARRIER
return


FLDRCARRIER:
curtxt=	
goto, medpoppic	
if ("" = "")
	{
		SB_SetText("foldername")
	}
return

medpoppic:
tmpic= 
fuzn=
afuzn=
;;msgbox,,,rj\netArt\ScrapeArt\%FEDDLA%\%srchsh%.*
tmpfldr= Global|
Loop,rj\netArt\ScrapeArt\%FEDDLA%\%srchsh%*,2
	{
		fuzn+= 1
		fldrnm= %A_LoopFileName%
		if (FEUPDCn = fuzn)
		{
			SB_SetText(" current folder: " FEUPDCn " " A_LoopFileName " ")
			curtxt= %A_LoopFileName%
			SUBFLDRPOP= 
			Loop, %A_LoopFileFullPath%\*,2
				{
					if (A_LoopFileName = "BoxArt")
						{
							tmpfldr= %A_LoopFileName%|
							cfils= 
							Loop, rj\netArt\scrapeArt\%FEDDLA%\%curtxt%\%FEDDLE%\*.*
								{
									cfils.= A_LoopFileName . "|"
								}
							guicontrol,,FELBXB,|%cfils%
						}
					SUBFLDRPOP.= A_LoopFileName . "|"
					}
			guicontrol,,FEDDLE,|%tmpfldr%|%SUBFLDRPOP%
			guicontrol,show,FEBUTH
			guicontrol,show,FEBUTG
			continue
		}
		afuzn+= 1
	}
if (afuzn > fuzn)
		{
			FEUPDCn= 
			Loop, rj\netArt\scrapeArt\%FEDDLA%\%curtxt%\%FEDDLE%\*,2
				{
					if (A_LoopFileName = "BoxArt")
						{
							cfils= 
							Loop, rj\netArt\scrapeArt\%FEDDLA%\%fldrnm%\%tmpfldr%\*.*
								{
									cfils.= A_LoopFileName . "|"
								}
							guicontrol,,FELBXB,|%cfils%
							tmpfldr= %A_LoopFileName%|
						}
					SUBFLDRPOP.= A_LoopFileName . "|"
				}
			SB_SetText(" current folder: " A_LoopFileName " ")
			guicontrol,,FEDDLE,|%tmpfldr%|%SUBFLDRPOP%	
			guicontrol,show,FEBUTH
			guicontrol,show,FEBUTG
		}
guicontrol,show,FEBUTG
guicontrol,show,FEBUTH
return

MediaFERAD7A:
MEDFLDDDWN:
medlpn= 
Loop, rj\netArt\scrapeArt\%FEDDLA%\%curtxn%,2
	{
		medlpn.= A_LoopField . "|"
	}
guicontrol,,FELBXB,|%medlpn%		
guicontrol,enable,FELVA
return

MediaFERAD5B:
guicontrol,disable,FELVA
return

MediaFELVA:

curtxt= 
if	(ErrorLevel == "C")
		{
			LV_Modify(A_EventInfo, "+Select")				
			LV_GetNext(A_EventInfo, Focused)
			LV_GetText(curtxt, A_EventInfo)
			stringreplace,FE_TDB,FE_TDB,%curtxt%|0,%curtxt%|1,All
		}
    Else if	(ErrorLevel == "c")
       {			
			LV_Modify(A_EventInfo, "+Select")
			;;RowNumber := LV_GetNext(RowNumber)  
			LV_GetNext(A_EventInfo, Focused)
			LV_GetText(curtxt, A_EventInfo)
			stringreplace,FE_TDB,FE_TDB,%curtxt%|1,%curtxt%|0,All
	   }
Loop, Parse, cursysthl,|
		{
			siin1=
			siin2=
			stringsplit,siin,A_LoopField,=
			if (siin1 = curtxt)
				{
					guicontrol,,FETXTK,%siin2%
				}
				
		}
	   curtxt= 
RowNumber = 0  
		Loop
			{
				RowNumber := LV_GetNext(RowNumber)  
				if not RowNumber  
					{
						break
					}
				LV_GetNext(RowNumber, Focused)
				LV_GetText(curtxt, RowNumber)
				gosub, MEDIMGPOP
			}
ARINNG= 			
Loop, rj\netArt\ScrapeArt\%FEDDLA%\%curtxt%\*,2
	{
		ARINNG.= A_LoopFileName . "|"
	}
guicontrol,,FEDDLE,|Boxart||%ARINNG%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationToggle:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  EMULATIONSTATION  FRONTEND  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
gosub, FEUNPOP
ESINIT:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;   ES INITIALIZE   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
esthemes=
espth=  
IniRead,esinitheme,Themes.set
Loop, Parse, esinitheme, `n, `r
	{
		espth.= A_LoopField . "|"
	}	
Loop, Parse, espth,|
		{
			iniread,gtesp,Themes.set,%A_LoopField%,ESTHEME
			if (gtesp = "ERROR")
				{
					continue
				}
			esthemes.= A_LoopField . "|"
		}
iniread,EmulationStation,apps.ini,HTPC_FRONTENDS,EmulationStation
if (EmulationStation = "ERROR")
	{
		SB_SetText("Use the Install tab to install EmulationStation.")
		return
	}
ifnotexist,EScfg.ini
	{
		FileAppend,[GLOBAL]`n,EScfg.ini
		FileAppend,[CONFIG]`n,EScfg.ini
		FileAppend,[ORDER]`n,EScfg.ini

		IniWrite,0,EScfg.ini,CONFIG,Parse_Only
		esgameparse= 0
		esparseonly= false
		IniWrite,1,EScfg.ini,CONFIG,quick_select
		esquickselect= 1
		esquicksystemselect= true
		IniWrite,1,EScfg.ini,CONFIG,Navigation_Sounds
		esnavsnds= 1
		esnavigationsounds= true
		IniWrite,1,EScfg.ini,CONFIG,Video_Sound
		esvideosnd= 1
		IniWrite,100,EScfg.ini,CONFIG,VRAM
		esvideoram= 100
		IniWrite,simple,EScfg.ini,CONFIG,theme
		estheme= simple
		IniWrite,video,EScfg.ini,CONFIG,GameList
		esgamelist= video
		IniWrite,slide,EScfg.ini,CONFIG,transition
		estransition= slide
	}
iniread,ESHOME,escfg.ini,CONFIG,home_directory
if (ESHOME = "ERROR")
	{
		ESHOME= %CURSRPTH%\.emulationstation
		iniwrite,%ESHOME%,escfg.ini,CONFIG,home_directory
	}
splitpath,EmulationStation,ESFEXE,ESPROG
ifnotexist,%ESHOME%
	{
		FileCreateDir,%ESHOME%\collections
		FileCreateDir,%ESHOME%\gamelists
		FileCreateDir,%ESHOME%\themes
		FileCreateDir,%ESHOME%\tmp
	}

fetog= show
ESCURPL= 
guicontrol,,FELBXA,|
		Loop,Read,EScfg.ini
			{
				ccpl1= 
				ccpl2=
				gotsy1= 
				stringsplit,ccpl,A_LoopReadLine,=
				stringsplit,gotsy,ccpl2,|
				if (ccpl1 = "[GLOBAL]")
					{
						continue
					}
				if (ccpl1 = "[CONFIG]")
					{
						break
					}
				ESCURPL.= gotsy1 . "|"
			}
iniread,sysordr,EScfg.ini,ORDER,system_order
if (sysordr <> "ERROR")
	{
		ESCURPL= %sysordr%
	}
insttheme= 	
Loop,%ESHOME%\themes\*,2
{
	insttheme= %A_LoopFileName%
	ifexist,%ESHOME%\themes\rj
		{
			insttheme= rj
		}
	break
}	
cursysthemelist= 
avblnk= 
Loop, %ESHOME%\themes\%insttheme%\*,2
		{
			if (A_Index = 1)
				{
					avblnk= %A_LoopFileName%
				}
			cursysthemelist.= A_LoopFileName . "|"
		}
guicontrol,,FELBXA,%ESCURPL%	

IniRead, esmirloc,EScfg.ini,CONFIG,Mirrors
if (esmirloc = "ERROR")
	{
		esmirloc= %MIRFEDDLA%
	}
IniRead, estransition,EScfg.ini,CONFIG,Transition
if (estransition = "ERROR")
	{
		estransition= slide
	}
IniRead, estheme,EScfg.ini,CONFIG,theme
if (estheme = "ERROR")
	{
		estheme= rj
	}
IniRead, esvideoram,EScfg.ini,CONFIG,VRAM
if (esvideoram = "ERROR")
	{
		esvideoram= 100
	}
IniRead, esvideosnd,EScfg.ini,CONFIG,Video_Sound
if (esvideosnd = "ERROR")
	{
		esvideosnd= 1
	}
IniRead, esgamelist,EScfg.ini,CONFIG,Gamelist
if (esgamelist = "ERROR")
	{
		esgamelist= video
	}	
IniRead,esgameparse,EScfg.ini,CONFIG,Parse_Only
if (esgameparse = "ERROR")
	{
		esgameparse= 0
	}
esparseonly= false	
if (esgameparse = 1)
	{
		esparseonly= true
	}
IniRead,esquickselect,EScfg.ini,CONFIG,Quick_selelct
if (esquickselect = "ERROR")
	{
		esquickselect= 1
	}
esquicksystemselect= true	
if (esquickselect= 0)
	{
		esquicksystemselect= false
	}
IniRead,esnavsnds,EScfg.ini,CONFIG,Navigation_Sound
if (esnavsnds = "ERROR")
	{
		esnavsnds= 1
	}
esnavigationsounds= true	
if (esnavsnds= 0)
	{
		esnavigationsounds= false
	}
	
estrans= 0
estrans2= 1
if (estransition = "slide")
	{
		estrans:= 1
		estrans2:= 0
	}
;};;;;;;;;;;;;;;;;;;;;;;
	
;{;;;;;;;;;;;;;;;;;;;;;;;;;    ES CREATE GUI   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
guicontrol,%fetog%,FEBUTA
guicontrol,enable,FEBUTA
guicontrol,move,FEBUTA, x537 y33 w60 h19
guicontrol,,FEBUTA,Download

guicontrol,%fetog%,FEBUTB
guicontrol,enable,FEBUTB
guicontrol,move,FEBUTB,x659 y473 w93 h23
guicontrol,,FEBUTB,CREATE

guicontrol,%fetog%,FEBUTC
guicontrol,enable,FEBUTC
guicontrol,move,FEBUTC,x505 y456 w46 h17
guicontrol,,FEBUTC,delete

guicontrol,%fetog%,FEBUTD
guicontrol,enable,FEBUTD
guicontrol,move,FEBUTD,x355 y105 w37 h19
guicontrol,,FEBUTD,. . .

guicontrol,%fetog%,FEBUTE
guicontrol,enable,FEBUTE
guicontrol,move,FEBUTE,x262 y475 w52 h22
guicontrol,,FEBUTE,Add

guicontrol,%fetog%,FEBUTF
guicontrol,enable,FEBUTF
guicontrol,move,FEBUTF,x704 y451 w46 h17
guicontrol,,FEBUTF,Load

guicontrol,%fetog%,FEBUTH
guicontrol,enable,FEBUTH
guicontrol,move,FEBUTH,x261 y130 w62 h20
guicontrol,,FEBUTH,Emulator

guicontrol,%fetog%,FEBUTG
guicontrol,enable,FEBUTG
guicontrol,move,FEBUTG,x506 y477 w46 h17
guicontrol,,FEBUTG,clear

guicontrol,%fetog%,FEBUTI
guicontrol,enable,FEBUTI
guicontrol,move,FEBUTI,x508 y352 w18 h18
guicontrol,,FEBUTI,v

guicontrol,%fetog%,FEBUTJ
guicontrol,enable,FEBUTJ
guicontrol,move,FEBUTJ,x508 y334 w18 h18
guicontrol,,FEBUTJ,^

guicontrol,%fetog%,FEBUTK
guicontrol,enable,FEBUTK
guicontrol,move,FEBUTK,x419 y4 w18 h18
gui, font, s11 bold
guicontrol, font, FEBUTK
guicontrol,,FEBUTK,>
;;guicontrol,%fetog%,FECHKA
;;guicontrol,enable,FECHKA
;;guicontrol,move,FECHKA,x414 y480 w93 h13
;;guicontrol,,FECHKA,Backup Config

guicontrol,%fetog%,FECHKB
guicontrol,enable,FECHKB
guicontrol,move,FECHKB,x643 y424 w101 h13
guicontrol,,FECHKB,Video-Sound
guicontrol,,FECHKB,%esvideosnd%

guicontrol,%fetog%,FECHKC
guicontrol,enable,FECHKC
guicontrol,move,FECHKC,x529 y55 w66 h13
guicontrol,,FECHKC,Overwrite

guicontrol,%fetog%,FECHKD
guicontrol,enable,FECHKD
guicontrol,move,FECHKD,x642 y357 w120 h23
guicontrol,,FECHKD,Parse Gamelists Only
guicontrol,,FECHKD,%esgameparse%

guicontrol,%fetog%,FECHKE
guicontrol,enable,FECHKE
guicontrol,move,FECHKE,x642 y378 w120 h23
guicontrol,,FECHKE,Quick System Select
guicontrol,,FECHKE,%esquickselect%

guicontrol,%fetog%,FECHKF
guicontrol,enable,FECHKF
guicontrol,move,FECHKF,x642 y400 w120 h23
guicontrol,,FECHKF,Navigation Sounds
guicontrol,,FECHKF,%esnavsnds%

guicontrol,%fetog%,FEEDTA
guicontrol,enable,FEEDTA
guicontrol,move,FEEDTA,x428 y130 w145 h21
guicontrol,,FEEDTA,%A_SPACE%"`%ROM_RAW`%"

guicontrol,%fetog%,FEEDTB
guicontrol,enable,FEEDTB
guicontrol,-password,FEEDTB
guicontrol,move,FEEDTB,x578 y130 w120 h21
guicontrol,,FEEDTB,

guicontrol,%fetog%,FEDDLD
guicontrol,enable,FEDDLD
guicontrol,move,FEDDLD,x599 y32 w162
guicontrol,,FEDDLD,|rj||%esthemes%

guicontrol,%fetog%,FEDDLA
guicontrol,enable,FEDDLA
guicontrol,move,FEDDLA,x9 y41 w249
guicontrol,,FEDDLA,|Systems||

guicontrol,%fetog%,FEDDLC
guicontrol,enable,FEDDLC
guicontrol,move,FEDDLC,x661 y259 w82
guicontrol,,FEDDLC,|video||automatic|detailed|basic|

guicontrol,%fetog%,FEDDLF
guicontrol,enable,FEDDLF
guicontrol,hide,FEDDLF
guicontrol,move,FEDDLF,x324 y79 w100
guicontrol,,FEDDLF,|%esmirloc%||

guicontrol,%fetog%,FEDDLG
guicontrol,enable,FEDDLG
guicontrol,move,FEDDLG,x325 y130 w100
guicontrol,,FEDDLG,|other||%emuinstpop%

;;fullname;;
guicontrol,%fetog%,FECBXB
guicontrol,enable,FECBXB
guicontrol,move,FECBXB,x263 y153 w217
guicontrol,,FECBXB,|%systmfldrs%

;;platform;;
guicontrol,%fetog%,FECBXC
guicontrol,enable,FECBXC
guicontrol,move,FECBXC,x263 y176 w217
guicontrol,,FECBXC,|%avblnk%||%cursysthemelist%%systmfldrs%

;;name;;
guicontrol,%fetog%,FECBXD
guicontrol,enable,FECBXD
guicontrol,move,FECBXD,x264 y199 w217
guicontrol,,FECBXD,|%avblnk%||%cursysthemelist%%systmfldrs%

;;theme;;
guicontrol,%fetog%,FECBXA
guicontrol,enable,FECBXA
guicontrol,move,FECBXA,x598 y166 w104
guicontrol,,FECBXA,|%avblnk%||%cursysthemelist%	


guicontrol,%fetog%,FELVA
guicontrol,enable,FELVA
guicontrol,,FELVA,Mirrors
guicontrol,move,FELVA,x10 y64 w247 h433
guicontrol,+altsubmit,FELVA
guicontrol,+checked,FELVA
guicontrol,+Multi,FELVA
gui,ListView,FELVA
LV_Delete()
Loop, Parse, systmfldrs,|
	{
		LV_Add("",A_LoopField)
	}
LV_ModifyCol()

guicontrol,%fetog%,FERAD5A
guicontrol,enable,FERAD5A
guicontrol,move,FERAD5A,x265 y64 w120 h15
guicontrol,,FERAD5A, Jackets
guicontrol,,FERAD5A, 1

guicontrol,%fetog%,FERAD5B
guicontrol,enable,FERAD5B
guicontrol,move,FERAD5B,x265 y84 w53 h15
guicontrol,,FERAD5B, Mirrors
guicontrol,,FERAD5B, 0

guicontrol,%fetog%,FERAD5C
guicontrol,enable,FERAD5C
guicontrol,move,FERAD5C,x265 y101 w53 h15
guicontrol,,FERAD5C,ROMs
guicontrol,,FERAD5C, 0

guicontrol,%fetog%,FERAD2A
guicontrol,enable,FERAD2A
guicontrol,move,FERAD2A,x661 y241 w44 h13
guicontrol,,FERAD2A,slide
guicontrol,,FERAD2A, %estrans%

guicontrol,%fetog%,FERAD2B
guicontrol,enable,FERAD2B
guicontrol,move,FERAD2B,x710 y242 w50 h13
guicontrol,,FERAD2B, Fade
guicontrol,,FERAD2B,%estrans2%

guicontrol,%fetog%,FESLDA
guicontrol,+Range100-1000,FESLDA
guicontrol,enable,FESLDA
guicontrol,move,FESLDA,x636 y316 w120 h32
guicontrol,,FESLDA,%esvideoram%

guicontrol,%fetog%,FETXTA
guicontrol,enable,FETXTA
guicontrol,move,FETXTA,x643 y55 w110 h13
guicontrol,,FETXTA,Global Theme

guicontrol,%fetog%,FETXTB
guicontrol,enable,FETXTB
guicontrol,move,FETXTB,x508 y437 w120 h15
guicontrol,,FETXTB,Remove

guicontrol,%fetog%,FETXTK
guicontrol,enable,FETXTK
guicontrol,move,FETXTK,x597 y452 w106 h15
guicontrol,,FETXTK,Load es_systems.cfg

guicontrol,%fetog%,FETXTC
guicontrol,enable,FETXTC
guicontrol,move,FETXTC,x14 y23 w512 h16
guicontrol,,FETXTC,Mirror Location

guicontrol,%fetog%,FETXTD
guicontrol,enable,FETXTD
guicontrol,move,FETXTD,x577 y242 w82 h13
guicontrol,,FETXTD,Transition Style

guicontrol,%fetog%,FELBXA
guicontrol,enable,FELBXA
guicontrol,move,FELBXA,x263 y223 w240 h251

guicontrol,%fetog%,FETXTE
guicontrol,enable,FETXTE
guicontrol,move,FETXTE,x652 y297 w93 h23
guicontrol,,FETXTE,Vram limit : %esvideoram%

guicontrol,%fetog%,FETXTF
guicontrol,enable,FETXTF
guicontrol,move,FETXTF,x583 y263 w71 h13
guicontrol,,FETXTF, Gamelist Style

guicontrol,%fetog%,FETXTG
guicontrol,enable,FETXTG
guicontrol,move,FETXTG,x424 y478 w80 h20
guicontrol,,FETXTG, Added Systems

guicontrol,%fetog%,FETXTH
guicontrol,enable,FETXTH
guicontrol,move,FETXTH, x316 y480 w85 h19
guicontrol,,FETXTH, Add system

guicontrol,%fetog%,FETXTN
guicontrol,enable,FETXTN
guicontrol,move,FETXTN,x619 y190 w70 h16
guicontrol,,FETXTN, system theme

guicontrol,%fetog%,FETXTI
guicontrol,enable,FETXTI
guicontrol,move,FETXTI,x588 y115 w146 h13
guicontrol,,FETXTI, Extensions (comma sperated)

guicontrol,%fetog%,FETXTJ
guicontrol,enable,FETXTJ
guicontrol,move,FETXTJ,x424 y82 w326 h31
guicontrol,,FETXTJ,

guicontrol,%fetog%,FETXTL
guicontrol,enable,FETXTL
guicontrol,move,FETXTL,x488 y155 w55 h13
guicontrol,,FETXTL,Full-Name

guicontrol,%fetog%,FETXTM
guicontrol,enable,FETXTM
guicontrol,move,FETXTM, x490 y178 w49 h13
guicontrol,,FETXTM,Platform

guicontrol,%fetog%,FETXTO
guicontrol,enable,FETXTO
guicontrol,move,FETXTO, x491 y201 w49 h13
guicontrol,,FETXTO,Name

guicontrol,%fetog%,FETXTP
guicontrol,enable,FETXTP
guicontrol,move,FETXTP, x441 y6 w47 h15
guicontrol,,FETXTP,Launch

guicontrol,%fetog%,FEPRGA
guicontrol,enable, FEPRGA
guicontrol,move,FEPRGA,x15 y500 w736 h7
guicontrol,,FEPRGA,0
return
;};;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTA:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;   DOWNLOAD THEMES  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,FEDDLD,,FEDDLD
if (FEDDLD = "")
	{
		SB_SetText("You need select a theme!")
		return
	}
esteo= 	
dwnovr= false
if (FECHKC = 1)
	{
		dwnovr= true
	}
ifexist, %ESHOME%\themes\%FEDDLD%
	{
		esteo= 1
		if (FECHKC = 1)
			{
				esteo= 
			}
	}
iniRead,URLFILE,Themes.set,%FEDDLD%,ESTHEME
save= rj\ES\%FEDDLD%.7z
extractpath= %ESHOME%\themes
DownloadFile(URLFILE, save, dwnovr, true)
filegetsize,estsz,%save%,K
if (estsz < 1)
	{
		SB_SetText("Download Failed")
		return
	}
ifnotexist,%save%
	{
		SB_SetText("Download Failed")
		return
	}
if (esteo = "")
	{
		RunWait, %comspec% cmd /c "7za.exe x -y "%save%" -O"%extractpath%" ",,hide
	}
ifexist, %ESHOME%\themes\%FEDDLD%
	{
		cursysthemelist= 
		Loop, %ESHOME%\themes\%FEDDLD%\*,2
				{
					cursysthemelist.= A_LoopFileName . "|"
				}
		guicontrol,,FECBXA,|%cursysthemelist%	
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTB:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  CREATE CONFIG  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,FEDDLF,,FEDDLF
guicontrolget,FEDDLC,,FEDDLC
guicontrolget,FEDDLD,,FEDDLD
FileCopy,%ESHOME%\es_input.cfg,%ESHOME%\es_input.cfg.bak,1
FileCopy,%ESHOME%\es_settings.cfg,%ESHOME%\es_settings.cfg.bak,1
FileCopy,%ESHOME%\es_systems.cfg,%ESHOME%\es_systems.cfg.bak,1

TCURPL= 
IniRead,prsy,EScfg.ini,ORDER,system_order
FileDelete,rj\ES\cursys.cfg
FileAppend,<systemList>`n,rj\ES\cursys.cfg

Loop, Parse, prsy,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		
		sysfin= 
		sysesc= %A_loopField%

		iniread,tmpes,EScfg.ini,GLOBAL
		Loop, Parse, tmpes, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				rjsp1= 	
				rjsp2= 	
				stringsplit,rjsp,A_LoopField,=	
				apnd= 
				ppnd= 
				stringleft,rj,rjsp1,1
				if (rj = "_")
					{
						ppnd= _
						apnd= 
					}
				stringright,rj,rjsp1,1
				if (rj = "_")
					{
						ppnd= 
						apnd= _
					}
				ffj1= 
				ffj2=  
				ans1=  
				ans2=  
				stringsplit,ans,A_LoopField,=
				stringsplit,ffj,ans2,|				
				typm= %ans1%
				if (apnd = ppnd)
					{
						typm= %ffj1%
					}
				if (typm = sysesc)
					{
						iniread,sysvlz,EScfg.ini,GLOBAL,%ans1%
						injvar1= 
						injvar2= 
						injvar3= 
						injvar4= 
						injvar5= 
						injvar6= 
						injvar7= 
						stringsplit,injvar,sysvlz,|
						iniread,emucmd,apps.ini,EMULATORS,%injvar4%
						ifinstring,injvar4,:
							{
								emucmd= %injvar4%
							}
						FileAppend,<system>`n,rj\ES\cursys.cfg
;;						FileAppend,<name>%ppnd%%ans1%%apnd%</name>`n,rj\ES\cursys.cfg
						FileAppend,<name>%ans1%</name>`n,rj\ES\cursys.cfg
						FileAppend,<fullname>%injvar2%</fullname>`n,rj\ES\cursys.cfg
						FileAppend,<path>%injvar6%</path>`n,rj\ES\cursys.cfg
						stringreplace,extn,injvar3,`,,%A_Space%,All
						FileAppend,<extension>%extn%</extension>`n,rj\ES\cursys.cfg
						splitpath,emucmd,fxe,fp,xe,fn,fd
						stringtrimleft,fp,fp,3
						FileAppend,<command>%fd%\"%fp%\%fxe%" %injvar5%</command>`n,rj\ES\cursys.cfg
						FileAppend,<platform>%injvar1%</platform>`n,rj\ES\cursys.cfg
						FileAppend,<theme>%injvar7%</theme>`n,rj\ES\cursys.cfg
						FileAppend,</system>`n,rj\ES\cursys.cfg
						break
					}
			}
	}
FileRead,escfg,rj\ES\es_settings.cfg.set
stringreplace,escfg,escfg,[THEME],%FEDDLD%,All
	
stringreplace,escfg,escfg,[NAVSNDS],%esnavigationsounds%,All
stringreplace,escfg,escfg,[GAMEPARSE],%esparseonly%,All
stringreplace,escfg,escfg,[QUICKSEL],%esquicksystemselect%,All
stringreplace,escfg,escfg,[TRANS],%estransition%,All
stringreplace,escfg,escfg,[GAMELIST],%FEDDLC%,All
stringreplace,ESHOMER,ESHOME,\,/,All
stringreplace,escfg,escfg,[ESHOME],%ESHOMER%,All
stringreplace,escfg,escfg,[VRAM],%esvideoram%,All
stringreplace,escfg,escfg,[VIDSND],%videosnd%,All
if (FECHKB = 1)
	{
		FileMove,%ESHOME%\es_settings.cfg,%ESHOME%\es_settings.cfg.bak,1
	}
FileDelete,	%ESHOME%\es_settings.cfg
FileAppend,%escfg%,%ESHOME%\es_settings.cfg

if (FECHKB = 1)
	{
		FileCopy,rj\ES\es_input.cfg.set,%ESHOME%\es_input.cfg,1

		}

FileAppend,</systemList>`n,rj\ES\cursys.cfg
filecopy, rj\ES\cursys.cfg, %ESHOME%\es_systems.cfg,1
msgbox,1,Complete,ES configuration created,5
return

EmulationStationFEBUTC:
if (sysfnd = "")
	{
		return
	}
TCURPL= 	
Loop, Parse, ESCURPL,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		if (A_loopField = curtxt)
			{
				iniread,tmpes,EScfg.ini,GLOBAL
				Loop, Parse, tmpes,|
					{
						stringsplit,ffj,A_loopfield,|
						stringsplit,ans,ffj1,=
						if (ans2 = curtxt)
							{
								systdl= ans1
							}
					}
				inidelete,EScfg.ini,GLOBAL,%systdl%
				continue
			}
		TCURPL.= A_LoopField . "|"
	}
ESCURPL= %TCURPL%	
iniwrite,%ESCURPL%,EScfg.ini,ORDER,system_order	
ESCURPL= %TCURPL%	
guicontrol,,FELBXA,|%ESCURPL%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTD:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  SET ROM DIRECTORY  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
if (sysfnd = "")
	{
		return
	}
selctsystmp= 
FileSelectFolder,selctsystmp,3,,Select a ROM Directory for %curtxt%
if (selctsystmp = "")
	{
		return
	}
selctsys= %selctsystmp%
guicontrol,,FETXTJ,%selctsys%
extpop= 
Loop, Read, EScfg.ini
	{
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		extpov1= 	
		extpov2=
		extpon1= 
		extpon2= 
		stringsplit,extpov,A_LoopReadLine,=
		stringsplit,extpon,extpov2,|
		if (extpon1 = curtxt)
			{
				extpop= %extpov1%
				break
			}
	}
ifinstring,curtxt,_
	{
		extpop= %curtxt%	
	}
iniread,estv,EScfg.ini,GLOBAL,%extpop%
avi= 
kkv= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 6)
			{
				kkv= %A_LoopField%
				stringreplace,estv,estv,%kkv%,%selctsys%,All
				iniwrite,%estv%,EScfg.ini,GLOBAL,%extpop%
			}			
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

return

EmulationStationFEBUTE:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   ADD SYSTEMS  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SNFEITMS= 
NFEITMS= 
FEItems= 
FEItems:= LVGetCheckedItems("", "ahk_id" . FELSTVA)
guicontrolget,SYSTHM,,FECBXA
IniRead,syso,EScfg.ini,ORDER,system_order
if (syso = "ERROR")
	{
		syso= 
	}
if (FERAD5A = 1)
	{
	vmint= 
	Loop, Parse, FEItems, `n, `r
			{
				symnt= 
				Loop, Read, EScfg.ini
					{
						ivn1= 
						ivn2= 
						ivn3= 
						ivn4= 
						ivn5= 
						ivn6= 
						ivn7= 
						stringsplit,ivn,A_LoopReadLine,=
						if (ivn1 = "[CONFIG]")
							{
								break
							}
						if (ivn1 = "_%A_LoopField%")
							{							
								symnt= 1
								break
							}
					}
				if (symnt = "")
					{
						vmint.= A_LoopField . "|"
					}
			}
		Loop, Parse, vmint,|
			{
				IMTSXT= 
				sysfar= 
				if (A_LoopField = "")
					{
						continue
					}
				CHKITM= %A_LoopField%
				Loop, read, rj\ES\eslkup.set
					{
						sfi1= 
						sfi2= 
						sfi3= 
						sfi4= 
						sfi5= 
						sfi6=  
						stringsplit,sfi,A_LoopReadLine,=
						if (sfi3 = CHKITM)
							{								
								sysfar= 1
								emks= %sfi1%
								SLCTDEXT=.bat,.BAT
								SLCTDEMU= BSL
								SLCTDRW= "`%ROM_RAW`%"
								selctsys= %RJSYSTEMS%\%CHKITM%
								SLCTDSN= _%sfi3%
								SNFEITMS.= "_" . sfi3 . "|"
								break
							}
					}
				if (sysfar = "")
					{
						stringreplace,ffr,CHKITM,=,,All
						emks= %ffr%
						SLCTDEXT=.bat .BAT
						SLCTDEMU= BSL
						SLCTDRW= "`%ROM_RAW`%"
						selctsys= %RJSYSTEMS%\%CHKITM%
						SLCTDSN= _%ffr%
						SNFEITMS.= "_" . ffr . "|"
					}
				NFEITMS.= A_LoopField . "|"
				IniWrite,%emks%|%CHKITM%|%SLCTDEXT%|%SLCTDEMU%|%SLCTDRW%|%selctsys%|%emks%,EScfg.ini,GLOBAL,%SLCTDSN%
			}
		iniread,sysordr,EScfg.ini,ORDER,system_order
		if (sysordr = "ERROR")
			{	
				sysordr= 
			}
		ESCURPL= %sysordr%%SNFEITMS%
		iniwrite,%ESCURPL%,EScfg.ini,ORDER,system_order			
		guicontrol,,FELBXA,|%ESCURPL%
		Guicontrol,,FELBXA,|%ESCURPL%
		LV_Modify(0, "-Check")
		return
	}	
	if (FERAD5B = 1)
	{
		guicontrolget,FEDDLF,,FEDDLF
		iniread,esmirror,Settings.ini,GLOBAL,%FEDDLF%
		if (esmirror = "ERROR")
			{
				SB_SetText("You Must define a mirror directory in the Mirrord_Links Frontend Dropdown.")
				return
			}
		vmint= 
		Loop, Parse, FEItems, `n, `r
			{
				symnt= 
				Loop, Read, EScfg.ini
					{
						ivn1= 
						ivn2= 
						ivn3= 
						ivn4= 
						ivn5= 
						ivn6= 
						ivn7= 
						stringsplit,ivn,A_LoopReadLine,=
						if (ivn1 = "[CONFIG]")
							{
								break
							}
						if (ivn1 = "_%A_LoopField%")
							{							
								symnt= 1
								break
							}
					}
				if (symnt = "")
					{
						vmint.= A_LoopField . "|"
					}
			}
		Loop, Parse, vmint,|
			{
				IMTSXT= 
				sysfar= 
				if (A_LoopField = "")
					{
						continue
					}
				CHKITM= %A_LoopField%
				Loop, read, rj\ES\eslkup.set
					{
						sfi1= 
						sfi2= 
						sfi3= 
						sfi4= 
						sfi5= 
						sfi6= 
						sfi7= 
						stringsplit,sfi,A_LoopReadLine,=
						if (sfi3 = CHKITM)
							{								
								sysfar= 1
								emks= %sfi1%
								SLCTDEXT=.lnk,.LNK
								SLCTDEMU= BSL
								SLCTDRW= "`%ROM_RAW`%"
								selctsys= %esmirror%\%CHKITM%
								SLCTDSN= %sfi3%_
								SNFEITMS.= sfi3 . "_" . "|"
								break
							}
					}
				if (sysfar = "")
					{
						stringreplace,ffr,CHKITM,%A_Space%,,All
						stringreplace,ffr,ffr,-,,All
						stringLower,ffr,ffr				
						emks= %ffr%
						SLCTDEXT=.lnk .LNK
						SLCTDEMU= BSL
						SLCTDRW= "`%ROM_RAW`%"
						selctsys= %esmirror%\%CHKITM%
						SLCTDSN= %ffr%_
						SNFEITMS.= ffr . "_" . "|"
					}
				NFEITMS.= A_LoopField . "|"
				IniWrite,%emks%|%CHKITM%|%SLCTDEXT%|%SLCTDEMU%|%SLCTDRW%|%selctsys%|%emks%,EScfg.ini,GLOBAL,%SLCTDSN%
			}
		iniread,sysordr,EScfg.ini,ORDER,system_order
		if (sysordr = "ERROR")
			{	
				sysordr= 
			}
		ESCURPL= %sysordr%%SNFEITMS%
		guicontrol,,FELBXA,|%ESCURPL%
		iniwrite,%ESCURPL%,EScfg.ini,ORDER,system_order			
		Guicontrol,,FELBXA,|%ESCURPL%
		LV_Modify(0, "-Check")
		return
	}

nvar= 
if (FERAD5C = 1)
	{
		if (sysfnd = 1)
			{
				SB_SetText("Current system is already added")
				return
			}
		RowNumber = 0  
		Loop
			{
				RowNumber := LV_GetNext(RowNumber)  ; Resume the search at the row after that found by the previous iteration.
				if not RowNumber  
					{
						break
					}
				LV_GetNext(RowNumber, Focused)
				LV_GetText(curtxt, RowNumber)
			}
		Loop, Parse, ESCURPL,|
			{
				if (A_LoopField = curtxt)
					{
						SB_SetText("Current system is already in the playlist.")
						return
					}
			}
		ESCURPL.= curtxt . "|"	
		guicontrolget,FECBXB,,FECBXB
		if (FECBXB = "")
			{
				FECBXB= %curtxt%
			}
		guicontrolget,FECBXD,,FECBXD
		if (FECBXD = "")
			{
				FECBXD= %curtxt%
			}
		guicontrolget,FECBXA,,FECBXA
		if (FECBXA = "")
			{
				FECBXA= %curtxt%
			}
		if (SLCTDSN = "")
			{
				SLCTDSN= other
			}
		guicontrolget,SLCTDEMU,,FEDDLG
		if (SLCTDEMU = "other")
			{
				if (esemu = "")
					{
						SB_SetText("You must assign an Emulator")
						return
					}
				SLCTDEMU= %esemu%	
			}
		guicontrolget,SLCTDEXT,,FEEDTB
		if (SLCTDEXT = "")
			{
				SLCTDEXT= .*
			}
		guicontrolget,SLCTDRW,,FEEDTA
		if (SLCTDRW = "")
			{
				SB_SetText("You must desgnate an execution paramater, eg: ''`%ROM_RAW`%''")
				return
			}
		SLCTDRW=%A_SPACE%%SLCTDRW%
	}
IniWrite,%FECBXD%|%FECBXB%|%SLCTDEXT%|%SLCTDEMU%|%SLCTDRW%|%selctsys%|%FECBXA%,EScfg.ini,GLOBAL,%emks%
iniread,sysordr,EScfg.ini,ORDER,system_order
if (sysordr <> "ERROR")
	{
		ESCURPL= %sysordr%%curtxt%|		
	}
guicontrol,,FELBXA,|%ESCURPL%
iniwrite,%ESCURPL%,EScfg.ini,ORDER,system_order
Gui,ListView,FELVA
LV_Modify(0, "-Check")
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
EmulationStationFECBXA:
;{;;;;;;;;;;;;;;;  STSTEM THEME DROPDOWN  ;;;;;;;;;;;;;;;;;;;;;;;
if (sysfnd = "")
	{
		return
	}
guicontrolget,SYSTHM,,FECBXA
guicontrolget,SYSNAM,,FECBXD
extpop= 
Loop, Read, EScfg.ini
	{
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		extpov1= 	
		extpov2=
		extpon1= 
		extpon2= 
		stringsplit,extpov,A_LoopReadLine,=
		stringsplit,extpon,extpov2,|
		if (extpon1 = curtxt)
			{
				extpop= %extpov1%
				break
			}
	}
ifinstring,curtxt,_
	{
		extpop= %curtxt%	
	}
iniread,estv,EScfg.ini,GLOBAL,%extpop%
avi= 
kkv= 
pt1=
pt2=
pt3=
pt4=
pt5=
pt6=
pt7=
pt8=
Loop, Parse, estv,|
	{
		pt%A_index%= %A_LoopField%
	}
estv= %pt1%|%pt2%|%pt3%|%pt4%|%pt5%|%pt6%|%SYSTHM%
iniwrite,%estv%,EScfg.ini,GLOBAL,%extpop%
cursysthemelist= 
Loop, %ESHOME%\themes\%FEDDLD%\*,2
	{
		cursysthemelist.= A_LoopFileName . "|"
	}
return
;};;;;;;;;;;;;;;;;;;;;

EmulationStationFECBXC:
if (sysfnd = "")
	{
		return
	}
guicontrolget,FECBXC,,FECBXC
guicontrolget,FECBXD,,FECBXD
iniread,estv,EScfg.ini,GLOBAL,%FECBXD%
avi= 
kkv= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 1)
			{
				kkv.= FECBXC . "|"
				continue
			}
		kkv.= A_LoopField . "|"
	}
iniwrite,%kkv%,EScfg.ini,GLOBAL,%FECBXD%
return


EmulationStationFECBXD:
guicontrolget,SYSREORDER,,FELBXA
guicontrolget,SYSNAMEREP,,FECBXD
if (sysfnd = "")
	{
		return
	}
blockinput,on
iniread,sysreplace,EScfg.ini,GLOBAL,%SYSREORDER%
inidelete,EScfg.ini,GLOBAL,%FECBXD%
blockinput,off
FECBXD= %SYSNAMEREP%
ESRELST= 
IniRead, ESQLIST,EScfg.ini,ORDER,system_order
IniDelete,EScfg.ini,GLOBAL,%SYSREORDER%
IniWrite,%sysreplace%,EScfg.ini,GLOBAL,%SYSNAMEREP%
Loop, Parse, ESQLIST,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		if (A_LoopField = SYSREORDER)
			{
				ESRELST.= SYSNAMEREP . "|"
			}
		ESRELST.= A_LoopField . "|"
	}
guicontrolget,FECBXD,,FECBXD
guicontrol,,FELBXA,|%ESRELST%
return


EmulationStationFEDDLD:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;  THEME SELECTION DROPDOWN  ;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,estheme,,FEDDLD
iniwrite,%estheme%,EScfg.ini,CONFIG,theme
cursysthemelist= 
ifexist,%ESHOME%\themes\%estheme%
	{
		Loop, %ESHOME%\themes\%estheme%\*,2
			{
				cursysthemelist.= A_LoopFileName . "|"
			}
		guicontrol,,FECBXA,|%cursysthemelist%
	}
return


EmulationStationFECBXB:
if (curtxt = "")
	{
		SB_SetText("You must select an added system to configure the ROM path")
		return
	}

if (sysfnd = "")
	{
		return
	}
guicontrolget,FECBXB,,FECBXB
extpop= 
Loop, Read, EScfg.ini
	{
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		extpov1= 	
		extpov2=
		extpon1= 
		extpon2= 
		stringsplit,extpov,A_LoopReadLine,=
		stringsplit,extpon,extpov2,|
		if (extpon1 = curtxt)
			{
				extpop= %extpov1%
				break
			}
	}
ifinstring,curtxt,_
	{
		extpop= %curtxt%	
	}

iniread,estv,EScfg.ini,GLOBAL,%extpop%
avi= 
kkv= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 2)
			{
				kkv= %A_LoopField%
				continue
			}			
			kkv.= A_LoopField . "|"
	}
iniwrite,%kkv%,EScfg.ini,GLOBAL,%extpop%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEDDLG:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   EMULATOR SELECTION DROPDOWN   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
if (sysfnd = "")
	{
		return
	}
pto= 
guicontrolget,FEDDLG,,FEDDLG
if (FEDDLG = "other")
	{
		pto= 1
		esemu= other
		gosub,FEBUTH		
		guicontrol,,FEDDLG,|other||%emuinstpop%
		return
	}
iniread,esemt,apps.ini,EMULATORS,%FEDDLG%
if (esemt = "ERROR")
	{
		esemu= 
		gosub, FEBUTH
		if (esemu = "")
			{
				return
			}
		iniwrite, "%esemu%",apps.ini,EMULATORS,%FEDDLG%
	}
iniread,estv,EScfg.ini,GLOBAL,%knti1%
emuwr= %FEDDLG%
if (pto = 1)
	{
		emuwr= %esemu%
	}
avi= 
kkv= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 4)
			{
				kkv.= emuwr . "|"
				continue
			}
		kkv.= A_LoopField . "|"	
	}
iniwrite,%kkv%,EScfg.ini,GLOBAL,%knti1%
pto= 	
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEDDLF:
;{;;;;;;;;;;;;;;;;;;;;;;;   MIRROR SELECTION DROPDOWN   ;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,FEDDLF,,FEDDLF
iniread,mirtmp,Settings.ini,GLOBAL,%FEDDLF%
ESMIRROR= %mirtmp%
Gui,ListView,FELVA
LV_Delete()
Loop, %ESMIRROR%\*,2
		{
			LV_Add("",A_LoopFileName)
		}
LV_ModifyCol()
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTH:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;    EMULATOR SELECTION   ;;;;;;;;;;;;;;;;;;;;;;;;;;
if (sysfnd = "")
	{
		return
	}
FileSelectFile,esemutmp,3,,Select an emulator for %addsystm%
if (esemutmp = "")
	{
		return
	}
esemu= %esemutmp%
extpop= 
Loop, Read, EScfg.ini
	{
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		extpov1= 	
		extpov2=
		extpon1= 
		extpon2= 
		stringsplit,extpov,A_LoopReadLine,=
		stringsplit,extpon,extpov2,|
		if (extpon1 = curtxt)
			{
				extpop= %extpov1%
				break
			}
	}
ifinstring,curtxt,_
	{
		extpop= %curtxt%	
	}
iniread,estv,EScfg.ini,GLOBAL,%extpop%
avi= 
kka= 
kkb= 
kkc= 
kkd= 
kke= 
kkf= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 1)
			{
				kka= %A_LoopField%
			}
		if (avi = 2)
			{
				kkb= %A_LoopField%
			}
		if (avi = 3)
			{
				kkc= %A_LoopField%
			}
		if (avi = 4)
			{
				kkd= %esemu%
			}
		if (avi = 5)
			{
				kke= %A_LoopField%
			}
		if (avi = 6)
			{
				kkf= %A_LoopField%
			}			
		if (avi = 7)
			{
				kkg= %A_LoopField%
			}			
				iniwrite,%kka%|%kkb%|%kkc%|%kkd%|%kke%|%kkf%|%kkg%,EScfg.ini,GLOBAL,%extpop%
	}
return

EmulationStationFEDDLC:
guicontrolget,FEDDLC,,FEDDLC
iniwrite,%FEDDLC%,EScfg.ini,CONFIG,GameList
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTK:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   LAUNCH ES  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RunWait, "%EmulationStation%",,hide
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTJ:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   MOVE ORDER UP  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText("")
iniDelete,EScfg.ini,ORDER,system_order
newnum= 
olnum= 
Loop, Parse, ESCURPL,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		olnum+=1
		systmv= A_LoopField
		if (A_LoopField = curtxt)
			{
				newnum:= olnum-1
			}
	}
if (newnum = 0)
	{
		sb_settext("Cannot move up")
		return
	}
TESCURPL=
olnum=  
Loop, Parse, ESCURPL,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		olnum+=1
		if (A_LoopField = curtxt)
			{
				continue
			}
		if (olnum = newnum)
			{
				TESCURPL.= curtxt . "|"
			}
		TESCURPL.= A_LoopField . "|"
	}
ESCURPL= %TESCURPL%	
iniwrite,%TESCURPL%,EScfg.ini,ORDER,system_order
guicontrol,,FELBXA,|%ESCURPL%
return

EmulationStationFESLDA:
guicontrolget,FESLDA,,FESLDA
iniwrite,%FESLDA%,EScfg.ini,CONFIG,VRAM
esvideoram= %FESLDA%
guicontrol,,FETXTE,VRAM Limit : %FESLDA%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTI:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    MOVE ORDER DOWN   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText("")
iniDelete,EScfg.ini,ORDER,system_order
mvnum= 
mvtm= 
Loop, Parse, ESCURPL,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		mvnum+=1
		if (A_loopField = curtxt)
			{
				mvtm:= mvnum+1
			}
	}
totord:= mvnum	
if (mvtm > totord)
	{
		SB_SetText("Cannot Move further down.")
		return
	}
TESCURPL=
mvnum=  	
Loop, Parse, ESCURPL,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		mvnum+=1
		if (A_LoopField = curtxt)
			{
				continue
			}
		TESCURPL.= A_LoopField . "|"
		if (mvtm = mvnum)
			{
				TESCURPL.= curtxt . "|"
			}
	}
ESCURPL= %TESCURPL%
guicontrol,,FELBXA,|%ESCURPL%
iniwrite,%TESCURPL%,EScfg.ini,ORDER,system_order
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTF:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   LOAD ES CONFIG   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
escfgtmp= 
FileSelectFile,escfgtmp,3,,Select the es_systems.cfg,
if (escfgtmp = "")	
	{
		return
	}
gosub,loadescfg	
return

loadescfg:
ESLDPL= 
LOADEDCFG= 
ESTOPOP= 
Loop, read, %escfgtmp%
	{
		if (A_LoopReadline = "")
			{
				continue
			}
		stringsplit,fjf,A_loopreadline,<>
		if (fjf2 = "system")
			{
				ESLDPL.= <system> . "`n"
			}
		if (fjf2 = "name")
			{
				vesname= %fjf3%
				ESLDPL.= "<name>" . fjf3 . "</name>" . "`n"
			}	
		if (fjf2 = "fullname")
			{
				vesfullname= %fjf3%
				ESLDPL.= "<fullname>" . fjf3 . "</fullname>" . "`n"
			}	
		if (fjf2 = "extension")
			{
				vesextension= %fjf3%
				stringreplace,vesextension,vesextension,%A_Space%,`,,All
				ESLDPL.= "<extension>" . vesextension . "</extension>" . "`n"
			}	
		if (fjf2 = "command")
			{
				vesemupath= %fjf3%
				stringreplace,vesetmp,vesemupath,",,All
				;"
				ifinstring,vesemupath,ROM
					{
						vesign= "
						;"
					}
				vespt1=	
				vespt2=	
				stringsplit,vespt,vesetmp,`%
				vesemutmp= %vespt1%
				vesopt=
				vesopt.= "`%" . vespt2 . "`%"
				ifinstring,vesemupath,BASENAME
					{
						vesign= 
					}
				splitpath,vesemutmp,vesfxe,vesfp,vesxtn,,vesxd
				stringtrimleft,vesfp,vesfp,3
				ESLDPL.= "<command>" . vesxd . "\" . """" . vesfp . "\" . vesfxe . """" . A_Space .  vesign . vesopt . vesign . "</command>" . "`n"
			}	
		if (fjf2 = "path")
			{
				vespath= %fjf3%
				ESLDPL.= "<path>" . fjf3 . "</path>" . "`n"
			}	
		if (fjf2 = "platform")
			{
				vesplatform= %fjf3%
				ESLDPL.= "<platform>" . fjf3 . "</platform>" . "`n"
			}	
		if (fjf2 = "theme")
			{
				vestheme= %fjf3%
				ESLDPL.= "<theme>" . fjf3 . "</theme>" . "`n"
			}
		if (fjf2 = "/system")
			{
				ESLDPL.= </system> . "`n"
				ESNM= %vesname%
				rdfnd= 
				ESTOPOP.= ESNM . "|"
				LOADEDCFG.= ESNM . "=" . vesplatform . "|" . vesfullname . "|" . vesextension . "|" . vesxd . "\" . """" . vesfp . "\" . vesfxe . """" . "|" . vesign . vesopt . vesign . "|" . vespath . "|" . vestheme . "`n"
			}
		iniwrite, %LOADEDCFG%,rj\es\loadsys.ini,GLOBAL	
	}
iniwrite,%esvideosnd%,rj\es\loadsys.ini,CONFIG,Video_Sound
iniwrite,%esvideoram%,rj\es\loadsys.ini,CONFIG,VRAM
iniwrite,%estheme%,rj\es\loadsys.ini,CONFIG,theme
iniwrite,%esgamelist%,rj\es\loadsys.ini,CONFIG,GameList
iniwrite,%estransition%,rj\es\loadsys.ini,CONFIG,Transition
guicontrol,,FELBXA,|%ESTOPOP%
iniwrite,%ESTOPOP%,rj\es\loadsys.ini,ORDER,system_order
ESCURPL= %ESTOPOP%
fileCopy,EScfg.ini,EScfg.ini.bak,1
fileMove,rj\es\loadsys.ini,EScfg.ini,1
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEEDTA:
;{;;;;;;;;;;;;;;;;;;;;;;;;  ES EDIT FIELDS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
if (sysfnd = "")
	{
		return
	}
guicontrolget,FEEDTA,,FEEDTA
extpop= 
Loop, Read, EScfg.ini
	{
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		extpov1= 	
		extpov2=
		extpon1= 
		extpon2= 
		stringsplit,extpov,A_LoopReadLine,=
		stringsplit,extpon,extpov2,|
		if (extpon1 = curtxt)
			{
				extpop= %extpov1%
				break
			}
	}
ifinstring,curtxt,_
	{
		extpop= %curtxt%	
	}
iniread,estv,EScfg.ini,GLOBAL,%extpop%
avi= 
kkv= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 5)
			{
				kkv.= FEEDTA . "|"
				continue
			}			
		kkv.= A_LoopField . "|"	
	}
iniwrite,%kkv%,EScfg.ini,GLOBAL,%extpop%
return

EmulationStationFEEDTB:
if (sysfnd = "")
	{
		return
	}
guicontrolget,FEEDTB,,FEEDTB
extpop= 
Loop, Read, EScfg.ini
	{
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		extpov1= 	
		extpov2=
		extpon1= 
		extpon2= 
		stringsplit,extpov,A_LoopReadLine,=
		stringsplit,extpon,extpov2,|
		if (extpon1 = curtxt)
			{
				extpop= %extpov1%
				break
			}
	}
ifinstring,curtxt,_
	{
		extpop= %curtxt%	
	}
iniread,estv,EScfg.ini,GLOBAL,%extpop%
avi= 
kkv= 
Loop, Parse, estv,|
	{
		avi+=1
		if (avi = 3)
			{
				kkv= %A_LoopField%
				stringreplace,estv,estv,%kkv%,%FEEDTB%,All
				iniwrite,%estv%,EScfg.ini,GLOBAL,%extpop%
			}			
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFERAD5A:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  ES JACKET RADIO  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrol,hide,FEDDLF
Gui,ListView,FELVA
LV_Delete()
Guicontrol,+checked,FELVA
Guicontrol,+Multi,FELVA
Loop, %RJSYSTEMS%\*,2
	{
		LV_Add("",A_LoopFileName)
	}
LV_ModifyCol()
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFERAD5B:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  ES MIRROR RADIO ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrol,show,FEDDLF
guicontrolget,FEDDLF,,FEDDLF
IniRead,mirsl,Settings.ini,%FEDDLF%
Gui,ListView,FELVA
Guicontrol,+checked,FELVA
Guicontrol,+Multi,FELVA
LV_Delete()
Loop, %mirsl%\*,2
	{
		LV_Add("",A_LoopFileName)
	}
LV_ModifyCol()
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFERAD5C:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  ES ROM RADIO   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,ListView,FELVA
Guicontrol,-checked,FELVA
Guicontrol,-Multi,FELVA
LV_Delete()
Loop, Read, rj\ES\eslkup.set, `n, `r
	{
		syslk1= 
		syslk2= 
		syslk3= 
		syslk4= 
		syslk5= 
		stringsplit,syslk,A_LoopReadLine,=
		LV_Add("",syslk1)
	}
LV_ModifyCol()
guicontrol,hide,FEDDLF
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFELVA:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   ES LISTVIEW  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;gui,submit,nohide
gui,listview,FELVA
if (FERAD5C = 1)
	{
		curtxt= 
		sysfnd= 
		guicontrol,,FETXTJ,
		RowNumber = 0  
		Loop
			{
				RowNumber := LV_GetNext(RowNumber)  
				if not RowNumber  
					{
						break
					}
				LV_GetNext(RowNumber, Focused)
				LV_GetText(curtxt, RowNumber)
			}
		Loop, Parse, ESCURPL,|
			{
				if (A_LoopField = curtxt)
					{
						curtxt= 
						SB_SetText("Current system is already in the playlist.")
						LV_Modify(RowNumber, "-Select")
						curtxt= 
						return
					}
			}
		if (curtxt = "other")
			{
				SB_SetText("Define OTHER")
				curtxt= 
				return
			}
		if (curtxt <> "")
			{
				gosub, popesv
			}
		return	
	}
curtxt= 
sysfnd= 
guicontrol,,FETXTJ,
RowNumber = 0  
Loop
{
	RowNumber := LV_GetNext(RowNumber)  
	if not RowNumber  
		{
			break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
	
	}
Loop, Read, rj\ES\eslkup.set
	{
		matv1= 
		matv2= 
		matv3= 
		matv4= 
		matv5= 
		xfnd= 
		stringsplit,matv,A_LoopReadLine,=
		if (matv3 = curtxt)
			{
				guicontrol,,FECBXA,|%matv1%||%cursysthemelist%
				guicontrol,,FECBXB,|%matv3%||%systmfldrs%%cursysthemelist%
				guicontrol,,FECBXD,|%matv1%||%cursysthemelist%%systmfldrs%
				guicontrol,,FECBXC,|%matv1%||%cursysthemelist%%systmfldrs%
				xfnd= 1
				break
			}
	}	
if (xfnd = "")
	{
		curtIV= 
		stringreplace,curtIV,curtxt,%A_Space%,,All
		stringreplace,curtIV,curtIV,-,,All
		stringreplace,curtIV,curtIV,=,,All
		stringlower,curtIV,curtIV
		guicontrol,,FECBXA,|%curtIV%||%cursysthemelist%
		guicontrol,,FECBXB,|%curtxt%||%systmfldrs%%cursysthemelist%
		guicontrol,,FECBXD,|%curtIV%||%cursysthemelist%%systmfldrs%
		guicontrol,,FECBXC,|%curtIV%||%cursysthemelist%%systmfldrs%	
		guicontrol,,FEEDTA,"`%ROM_RAW`%"	
		guicontrol,,FEEDTB,.zip	
		guicontrol,,FEDDLG,|MAME - System|%emuinstpop%	
	}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;



EmulationStationFELBXA:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   ES LISTBOX  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,curtxt,,FELBXA
sysfnd= 1
gosub, popesv
return

popesv:
if (FERAD5A = 1)
	{
		eslocor= %RJSYSTEMS%
	}
if (FERAD5B = 1)
	{
		eslocor= %esmirror%
	}
if (FERAD5C = 1)
	{
		eslocor= %RJSYSTEMS%
	}
Loop, read, EScfg.ini
	{
		ksivi1= 
		ksivi2= 
		ksivi3= 
		ksivi4= 
		ksivi5= 
		ksivi6= 
		ksivi7= 
		knti1= 
		knti2= 
		if (A_LoopReadLine = "[CONFIG]")
			{
				break
			}
		stringsplit,knti,A_LoopReadLine,=
		stringsplit,ksivi,knti2,|
		if (knti2 = "")
			{
				continue
			}
		ifinstring,knti1,_
			{
				if (knti1 = curtxt)
					{
						espopext= %knti1%
						defthm= %ksivi1%
						guicontrol,,FEEDTA,%ksivi5%
						guicontrol,,FEEDTB,%ksivi3%
						ifinstring,ksivi5,:
							{
								ksivi5= other
							}
						guicontrol,,FECBXD,|%knti1%||%systmfldrs%%cursysthemelist%
						guicontrol,,FECBXC,|%ksivi1%||%cursysthemelist%%systmfldrs%
						guicontrol,,FECBXA,|%ksivi7%||%cursysthemelist%
						guicontrol,,FETXTJ,%ksivi6%
						guicontrol,,FEDDLG,|other|%ksivi4%||%emuinstpop%
						guicontrol,,FECBXB,|other|%ksivi2%||%systmfldrs%
						return
					}
			}
		if (ksivi1 = curtxt)
					{
						espopext= %knti1%
						defthm= %ksivi1%
						guicontrol,,FEEDTA,%ksivi5%
						guicontrol,,FEEDTB,%ksivi3%
						ifinstring,ksivi5,:
							{
								ksivi5= other
							}
						guicontrol,,FECBXD,|%knti1%||%systmfldrs%%cursysthemelist%
						guicontrol,,FECBXC,|%ksivi1%||%cursysthemelist%%systmfldrs%
						guicontrol,,FECBXA,|%ksivi7%||%cursysthemelist%
						guicontrol,,FETXTJ,%ksivi6%
						guicontrol,,FEDDLG,|other|%ksivi4%||%emuinstpop%
						guicontrol,,FECBXB,|other|%ksivi2%||%systmfldrs%
						return
					}
	}
if (sysfnd = "")
	{
		emks= 
		emkr= 
		emkx= 
		Loop, Read, rj\ES\eslkup.set
			{
				kvi1= 
				kvi2= 
				kvi3= 
				kvi4=
				kvi5= 
				stringsplit,kvi,A_LoopReadLine,=
				ifinstring,curtxt,_
					{
						stringreplace,snlk,cutxt,_,,All
						if (kvi2 = snlk)
							{
								gosub, nweslk
								return
							}
					}
				if (kvi1 = curtxt)
					{
						gosub, nweslk
						return
					}
			}		
		
	}
return

nweslk:
emke= %kvi5%
SLCTDSN= %kvi2%
iniread,emkce,apps.ini,EMULATORS,%kvi5%
if (emkce = "ERROR")
	{
		SB_SetText(" " emkce " is not found")
	}
ifnotexist,%emkce%
	{
		SB_SetText(" " emkce " is not found")
	}
emks= %kvi3%
emkx= %kvi4%
emkr= %kvi6%
emkt= %kvi1%
if (emkx = ":")
	{
		emkx= .*
	}
guicontrol,,FECBXC,|%emks%||%systmfldrs%%cursysthemelist%
guicontrol,,FECBXD,|%emkt%||%cursysthemelist%
guicontrol,,FECBXA,|%emkt%||%cursysthemelist%
guicontrol,,FEDDLG,|other|%emke%||%emuinstpop%
guicontrol,,FECBXB,|other|%emks%||%systmfldrs%
guicontrol,,FEEDTB,%emkx%
guicontrol,,FEEDTA,%emkr%
guicontrol,,FETXTJ,%eslocor%\%emks%
selctsys= %eslocor%\%emks%
ifnotexist, %eslocor%\%emks%
	{
		selctsys= %RJSYSTEMS%\%emks%
		guicontrol,,FETXTJ,NOT SET (defaulting to %RJSYSTEMS%\%emks%)
	}
guicontrol,,FEEDTA,%emkr%
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EmulationStationFEBUTG:
MsgBox, 260, Clear List, Are you sure you want to clear all systems from the configuration list?
ifmsgbox, Yes
	{
		ESCURPL= 
		ESTOPOP= 
		guicontrol,,FELBXA,|
		filedelete,EScfg.ini
		gosub,ESINIT
	}
return

EmulationStationFERAD2A:
iniwrite,slide,EScfg.ini,CONFIG,Transition
estransition= slide
return

EmulationStationFECHKB:
esvideosnd= %FECHKB%
iniwrite,%esvideosnd%,EScfg.ini,CONFIG,Video_Sound
videosnd= false
if (esvideosnd = 1)
	{
		videosnd= true
	}

return


EmulationStationFECHKE:
esquickselect= %FECHKE%
iniwrite,%esquickselect%,EScfg.ini,CONFIG,quick_select
esquicksystemselect= false
if (FECHKD = 1)
{
esquicksystemselect= true
}
return

EmulationStationFECHKD:
esgameparse= %FECHKD%
iniwrite,%esgameparse%,EScfg.ini,CONFIG,Parse_Only
esparseonly= false
if (FECHKE = 1)
{
esparseonly= true
}
return

EmulationStationFECHKF:
esnavsnds= %FECHKF%
iniwrite,%esnavsnds%,EScfg.ini,CONFIG,Navigation_Sounds
esnavigationsounds= false
if (FECHKF = 1)
{
esnavigationsounds= true
}
return

EmulationStationFERAD2B:
iniwrite,Fade,EScfg.ini,CONFIG,Transition
estransition= Fade
return

EmulationStationFEDDLA:
return

EmulationStationFECHKA:
return

EmulationStationFECHKC:
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksToggle:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  MIRRORED LINKS FRONTEND  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

gosub, FEUNPOP
fetog= show
guicontrol,%fetog%,FEBUTA
guicontrol,enable,FEBUTA
guicontrol,move,FEBUTA,x544 y40 w18 h23
guicontrol,,FEBUTA,+

guicontrol,%fetog%,FEBUTB
guicontrol,enable,FEBUTB
guicontrol,move,FEBUTB,x684 y476 w75 h23
guicontrol,,FEBUTB,CREATE

guicontrol,hide,FEBUTC
guicontrol,enable,FEBUTC
guicontrol,move,FEBUTC,x424 y456 w75 h23
guicontrol,,FEBUTC,SELECT

guicontrol,%fetog%,FEBUTD
guicontrol,enable,FEBUTD
guicontrol,move,FEBUTD,x708 y64 w51 h19
guicontrol,,FEBUTD,SELECT

guicontrol,%fetog%,FEBUTE
guicontrol,enable,FEBUTE
guicontrol,move,FEBUTE,x705 y391 w53 h19
guicontrol,,FEBUTE,Delete

guicontrol,%fetog%,FECHKA
guicontrol,enable,FECHKA
guicontrol,move,FECHKA,x270 y402 w132 h13
guicontrol,,FECHKA,Enable Boxart Icons
guicontrol,,FECHKA,0

guicontrol,%fetog%,FECHKB
guicontrol,enable,FECHKB
guicontrol,move,FECHKB,x505 y463 w100 h13
guicontrol,,FECHKB,Overwrite Mirrors

guicontrol,%fetog%,FECHKF
guicontrol,move,FECHKF,x289 y421 w100 h13
guicontrol,,FECHKF,Fuzzy Matching
guicontrol,disable,FECHKF

guicontrol,%fetog%,FECHKC
guicontrol,move,FECHKC,x289 y436 w100 h13
guicontrol,,FECHKC,Overwrite Icons
guicontrol,disable,FECHKC

guicontrol,%fetog%,FECHKD
guicontrol,enable,FECHKD
guicontrol,move,FECHKD,x270 y367 w170 h13
guicontrol,,FECHKD,Create Shortcut in ROM-Jacket
guicontrol,hide,FECHKD

;;guicontrol,%fetog%,FECHKE
guicontrol,enable,FECHKE
guicontrol,move,FECHKE,x270 y384 w170 h13
guicontrol,,FECHKE,Create Icon in ROM-Jacket
guicontrol,hide,FECHKE

guicontrol,%fetog%,FEDDLA
guicontrol,enable,FEDDLA
guicontrol,move,FEDDLA,x9 y41 w249
guicontrol,,FEDDLA,|Systems||%systmfldrs%

guicontrol,%fetog%,FEDDLB
guicontrol,enable,FEDDLB
guicontrol,move,FEDDLB,x563 y41 w195
guicontrol,,FEDDLB,|%MIRFEDDLA%

guicontrol,%fetog%,FEDDLC
guicontrol,move,FEDDLC,x260 y457 w162
guicontrol,,FEDDLC,|Jacket_Boxart||Scraped_Boxart|RetroArch_Boxart|Hyperspin_Boxart|Other
guicontrol,disable,FEDDLC
;;guicontrol,%fetog%,FEEDTA
;;guicontrol,move,FEEDTA,x490 y88 w267 h68
;;guicontrol,+ReadOnly,FEEDTA
;;guicontrol,+multi,FEEDTA
;;guicontrol,,FEEDTA,%MIRDISP%

guicontrol,%fetog%,FERAD5A
guicontrol,enable,FERAD5A
guicontrol,move,FERAD5A,x275 y43 w108 h13
guicontrol,,FERAD5A,Jacket-Systems
guicontrol,,FERAD5A,1

guicontrol,%fetog%,FERAD5B
guicontrol,enable,FERAD5B
guicontrol,move,FERAD5B,x275 y63 w105 h13
guicontrol,,FERAD5B, Mirror-Systems

guicontrol,hide,FERAD5C
guicontrol,enable,FERAD5C
guicontrol,move,FERAD5C,x275 y97 w119 h13
guicontrol,,FERAD5C, Mirror-Shortcuts

guicontrol,%fetog%,FELVA
guicontrol,enable,FELVA
guicontrol,,FELVA,Mirrors
guicontrol,move,FELVA,x10 y64 w247 h433
guicontrol,+altsubmit,FELVA
guicontrol,+checked,FELVA
guicontrol,+Multi,FELVA
gui,ListView,FELVA
LV_Delete()

guicontrol,%fetog%,FETXTA
guicontrol,enable,FETXTA
guicontrol,move,FETXTA,x625 y26 w92 h13
guicontrol,,FETXTA,Mirror-Locations

guicontrol,%fetog%,FETXTB
guicontrol,enable,FETXTB
guicontrol,move,FETXTB,x472 y44 w70 h13
guicontrol,,FETXTB,Create Mirrors

guicontrol,%fetog%,FETXTC
guicontrol,enable,FETXTC
guicontrol,move,FETXTC,x267 y480 w158 h13
guicontrol,,FETXTC,Boxart Subdirectories Location

guicontrol,%fetog%,FETXTD
guicontrol,enable,FETXTD
guicontrol,move,FETXTD,x633 y67 w73 h13
guicontrol,,FETXTD,Icon Location

guicontrol,%fetog%,FETXTE
guicontrol,enable,FETXTE
guicontrol,move,FETXTE,x276 y161 w476
guicontrol,,FETXTE,Mirror= %CMIRLOC%

guicontrol,%fetog%,FETXTF
guicontrol,enable,FETXTF
guicontrol,move,FETXTF,x276 y176 w476 h13
guicontrol,,FETXTF,Icons= %CICOLOC%

guicontrol,%fetog%,FETXTG
guicontrol,enable,FETXTG
guicontrol,move,FETXTG,x276 y192 w475 h13
guicontrol,,FETXTG,Boxart= %CBOXLOC%

guicontrol,%fetog%,FETXTH
guicontrol,enable,FETXTH
guicontrol,move,FETXTH,x586 y393 w118 h13
guicontrol,,FETXTH,Delete Selected Mirrors
Gui,ListView,FELVA
Guicontrol,+Multi,FELVA
Loop, Parse, systmfldrs,|
	{
		LV_Add("",A_LoopField)
	}
LV_ModifyCol()
return

Mirrored_LinksfeBUTA:
;{;;;;;;;;;;;;;;;;;;;;;   ADD MIRROR   ;;;;;;;;;;;;;;;;;;;;;;;
NWMIRLOCT= 
FileSelectFolder, NWMIRLOCT,,3,Select a folder for your new mirrored systems
if (NWMIRLOCT = "")
	{
		return
	}
mirnum= 
MIRDDLOC= 
Loop, Read, Settings.ini
		{
			stringsplit,mirlocv,A_LoopReadLine,=
			stringsplit, mirspl,mirlocv1,_
			if (mirspl1 = "Mirror")
				{
					mirnum+=1
					MIRDDLOC.= mirlocv1 . "|"
					if (mirlocv2 = NWMIRLOCT)
						{
									SB_SetText("Mirror Location Already Exists")
									return
						}
				}
		}
guicontrol,,FEDDLC,|Jacket_Boxart||Scraped_Boxart|Retroarch_Boxart|Hyperspin_Boxart|Other
mirnum+=1
if (NWMIRLOCT = RJSYSTEMS)
	{
		guicontrol,show,FECHKD
		guicontrol,show,FECHKE
	}
IniWrite, %NWMIRLOCT%,Settings.ini,GLOBAL,Mirror_%mirnum%
IniWrite, %NWMIRLOCT%,Settings.ini,GLOBAL,Micon_%mirnum%
IniWrite, Jacket_Boxart,Settings.ini,GLOBAL,Licon_%mirnum%
MIRDISP:= "Mirror=" .  NWMIRLOCT . "`n`r" . "Icons=" NWMIRLOCT "`n" . "Boxart=" . Jacket_Boxart

;;Guicontrol,,FEEDTA,%MIRDISP%
GuiControl,,FETXTE,Mirror= %NWMIRLOCT%
GuiControl,,FETXTF,Icons= %NWMIRLOCT%
GuiControl,,FETXTG,Boxart= Jacket_Boxart
guicontrol,,FEDDLB,|Mirror_%mirnum%||%MIRDDLOC%
if (FERAD5B = 1)
	{
		guicontrol,,FEDDLA,|%FEDDLA%||%MIRDDLOC%
	}

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeBUTB:
;{;;;;;;;;;;;;;;;;;;;;;   MIRROR CREATION   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SB_SetText("Creating Mirrors")
guicontrolget,FECHKA,,FECHKA
guicontrolget,FECHKB,,FECHKB
guicontrolget,FECHKC,,FECHKC
guicontrolget,FERAD5B,,FERAD5B
guicontrolget,FEDDLB,,FEDDLB
guicontrolget,FEDDLA,,FEDDLA
guicontrolget,FECHKD,,FECHKD
guicontrolget,FECHKE,,FECHKE
guicontrolget,FECHKF,,FECHKF
guicontrol,disable,FEBUTE
guicontrol,disable,FEBUTB
Gui,ListView,FELVA
guicontrol,disable,FELVA
INJAK= 
ICJAK= 
FEItems= 
FEItems:= LVGetCheckedItems("", "ahk_id" . FELSTVA)
if (FERAD5A = 1)
	{
		IniRead, sysma,Settings.ini,GLOBAL,%FEDDLB%
		stringsplit,ddlcn,FEDDLB,_
		IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
		IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
		if (sysma = RJSYSTEMS)
			{
				if (FECHKD = 1)
					{
						INJAK= 1
					}
				if (FECHKE = 1)
					{
						ICJAK= 1
					}
			}
		if (FEDDLA = "Systems")
			{
				gosub, PROCMIRROR
				return
			}
		curms= %FEDDLA%
		gosub, PROCSYSMIRROR
		SB_SetText("Mirrors Created")
		guicontrol,enable,FELVA
		guicontrol,enable,FEBUTE
		guicontrol,enable,FEBUTB
		return
	}
if (FERAD5B = 1)
	{
		IniRead, sysma,Settings.ini,GLOBAL,%FEDDLA%
		stringsplit,ddlcn,FEDDLA,_
		IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
		IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
		if (sysma = RJSYSTEMS)
			{
				if (FECHKD = 1)
					{
						INJAK= 1
					}
				if (FECHKE = 1)
					{
						ICJAK= 1
					}
			}
		gosub, PROCMIRROR
		SB_SetText("Mirrors Created")
		guicontrol,enable,FELVA
		guicontrol,enable,FEBUTB
		guicontrol,enable,FEBUTE
		return
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

PROCSYSMIRROR:
;{;;;;;;;;;;;;;;;;;;;;   PROCESS SYSTEMS  ;;;;;;;;;;;;;;;;;;;;;;;;

if (CBOXLOC = "Scraped_Boxart")
	{
		febart= rj\netArt\scrapeArt\%curms%
	}
if (CBOXLOC = "Retroarch_Boxart")
	{
		febart= %thumbnailsDirectory%
		if (menuThumbnails = 1)
			{
				febapnd= Named_Titles
			}
		if (menuThumbnails = 2)
			{
				febapnd= Named_Snaps
			}
		if (menuThumbnails = 3)
			{
				febapnd= Named_Boxarts
			}
		BOXLOC:= febart . "\" . curms . "\" . febapnd
	}
ifNotExist, %sysma%\%curms%
	{
		FileCreateDir, %sysma%\%curms%
	}
ifnotexist,%CICOLOC%\%curms%.ico
		{
			FileCopy, lnch.ico, %CICOLOC%\%curms%\%curms%.ico
		}
Loop, Parse, FEItems, `n, `r
	{
		if (A_LoopField = "")
			{
				continue
			}
		curfldp= %RJSYSTEMS%\%curms%\%A_LoopField%
		curfldn= %A_LoopField%
		Loop, %RJSYSTEMS%\%curms%\%curfldn%\*.bat
			{
				batfile= %A_LoopFileFullPath%
				splitpath,batfile,batf,batd,batx,batn
				if (FECHKF = 1)
					{
						batsrch= %batn%
						batnc2= 
						stringsplit,batnc,batn,([
						if (batnc2 <> "")
							{
								batsrch= %batnc2%
							}
					}
				BOXPNG= :
				if (CBOXLOC = "Scraped_Boxart")
					{
						ifExist,%febart%\%batn%\Boxart
							{
								Loop,%febart%\%batn%\Boxart\*.*
									{
										BOXPNG= %A_LoopFileFullPath%
									}
							}
					}
				if (CBOXLOC = "RetroArch_Boxart")
					{
						ifexist,%BOXLOC%\%batn%.png
							{
								BOXPNG= %BOXLOC%\%batn%.png
							}
						if (FECHKF = 1)
							{
								if (BOXPNG = ":")
									{
										Loop, %BOXLOC%\%batsrch%*.png
											{
												BOXPNG= %A_LoopFileFullPath%
												break
											}
									}
							}
					}
				if (CBOXLOC = "Jacket_Boxart")
					{
						BOXPNG= :
						Loop, %curfldp%\Folder.*
							{
								BOXPNG= %A_LoopFileFullPath%
								break
							}
						if (BOXPNG = ":")
							{
								BOXPNG= [INS]
							}
					}
				if (CBOXLOC = "Scraped_Boxart")
					{
						BOXPNG= :
						Loop, rj\netArt\scrapeArt\%curms%\BoxArt\%batsrch%\*.*
							{
								BOXPNG= %A_LoopFileFullPath%
								break
							}
						if (BOXPNG = ":")
							{
								BOXPNG= [INS]
							}
					}
				ifInString,CBOXLOC,:
					{
						ifexist,%CBOXLOC%\%batn%.png
							{
								BOXPNG= %CBOXLOC%\%batn%.png
							}
						if (FECHKF = 1)
							{
								if (BOXPNG = ":")
									{
										Loop, %CBOXLOC%\%batsrch%*.png
											{
												BOXPNG= %A_LoopFileFullPath%
												break
											}
									}
							}
					}
				if (FECHKA = 1)
					{
						cvtico= %CICOLOC%\%curms%\%batn%.ico
						if (ICJAK = 1)
							{
								cvtico= %batd%\%batn%.ico
							}
						ifExist, %cvtico%
							{
								ALHERE= 1
							}
						if (FECHKC = 1)
							{
								ALHERE= 
							}
						ifExist, %BOXPNG%
							{	
								if (ALHERE = "")
									{
										RunWait, %comspec% /c " any2ico.exe "-img=%BOXPNG%" "-icon=%cvtico%" -formats=32`,48`,96`,128`,256 -pngc -stretch ",,hide
										FileSetAttrib,+H,%cvtico%,2
									}
							}
						ifNotExist, %BOXPNG%
							{
								cvtico= %CICOLOC%\%curms%\%curms%.ico
							}
					}
				lnkloc= %sysma%\%curms%\%batn%.lnk
				if (INJAK = 1)
					{
						lnkloc= %batd%\%batn%.lnk
					}
				ifExist, %lnkloc%
					{
						if (FECHKB = 1)
							{
								FileDelete, %lnkloc%
							}
					}		
				FileCreateShortcut,%batfile%,%lnkloc%,%batd%,,%batn%,%cvtico%					
			}	
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

PROCMIRROR:
;{;;;;;;;;;;;;;;;;;;;;   PROCESS MIRRORS  ;;;;;;;;;;;;;;;;;;;;;;;;
if (CBOXLOC = "Scraped_Boxart")
	{
		febart= rj\netArt\scrapeArt
	}

if (CBOXLOC = "Retroarch_Boxart")
	{
		febart= %thumbnailsDirectory%
		if (menuThumbnails = 1)
			{
				febapnd= Named_Titles
			}
		if (menuThumbnails = 2)
			{
				febapnd= Named_Snaps
			}
		if (menuThumbnails = 3)
			{
				febapnd= Named_Boxarts
			}
	}
Loop, Parse, FEItems, `n, `r
	{
		if (A_LoopField = "")
			{
				continue
			}
		curms= %A_LoopField%
		if (CBOXLOC = "Retroarch_Boxart")
			{
				BOXLOC:= febart . "\" . curms . "\" . febapnd
			}
		ifNotExist, %sysma%\%curms%
			{
				FileCreateDir, %sysma%\%A_LoopField%
			}
		ifnotexist,%CICOLOC%\%curms%.ico
				{
					FileCopy, lnch.ico, %CICOLOC%\%curms%\%curms%.ico
				}
		Loop, %RJSYSTEMS%\%curms%\*,2
			{
				curfldp= %A_LoopFileFullPath%
				curfldn= %A_LoopFileName%
				Loop, %A_LoopFileFullPath%\*.bat
					{
						batfile= %A_LoopFileFullPath%
						splitpath,batfile,batf,batd,batx,batn
						if (FECHKF = 1)
							{
								batsrch= %batn%
								batnc2= 
								stringsplit,batnc,batn,([
								if (batnc2 <> "")
									{
										batsrch= %batnc2%
									}
							}
						BOXPNG= :
						if (CBOXLOC = "Scraped_Boxart")
							{
								ifExist,%febart%\%curms%\%batn%\Boxart
									{
										Loop,%febart%\%curms%\%batn%\Boxart\*.*
											{
												BOXPNG= %A_LoopFileFullPath%
											}
									}
							}
						if (CBOXLOC = "RetroArch_Boxart")
							{
								ifexist,%BOXLOC%\%batn%.png
									{
										BOXPNG= %BOXLOC%\%batn%.png
									}
								if (FECHKF = 1)
									{
										if (BOXPNG = ":")
											{
												Loop, %BOXLOC%\%batsrch%*.png
													{
														BOXPNG= %A_LoopFileFullPath%
														break
													}
											}
									}
							}
						if (CBOXLOC = "Jacket_Boxart")
							{
								Loop, %curfldp%\Folder.*
									{
										BOXPNG= %A_LoopFileFullPath%
										break
									}
								if (BOXPNG = ":")
									{
										BOXPNG= [INS]
									}
							}
						ifInString,CBOXLOC,:
							{
								ifexist,%CBOXLOC%\%curms%\%batn%.png
									{
										BOXPNG= %CBOXLOC%\%curms%\%batn%.png
									}
								if (FECHKF = 1)
									{
										if (BOXPNG = ":")
											{
												Loop, %CBOXLOC%\%curms%\%batsrch%*.png
													{
														BOXPNG= %A_LoopFileFullPath%
														break
													}
											}
									}
							}	
						if (FECHKA = 1)
							{
								cvtico= %CICOLOC%\%curms%\%batn%.ico
								if (ICJAK = 1)
									{
										cvtico= %batd%\%batn%.ico
									}
								ifExist, %cvtico%
									{
										ALHERE= 1
									}
								if (FECHKC = 1)
									{
										ALHERE= 
									}
								ifExist, %BOXPNG%
									{	
										if (ALHERE = "")
											{
												RunWait, %comspec% /c " any2ico.exe "-img=%BOXPNG%" "-icon=%cvtico%" -formats=32`,48`,96`,128`,256 -pngc -stretch ",,hide
												FileSetAttrib,+H,%cvtico%,2
											}
									}
								ifNotExist, %BOXPNG%
									{
										cvtico= %CICOLOC%\%curms%\%curms%.ico
									}
							}
						lnkloc= %sysma%\%curms%\%batn%.lnk
						if (INJAK = 1)
							{
								lnkloc= %batd%\%batn%.lnk
							}
						ifExist, %lnkloc%
							{
								if (FECHKB = 1)
									{
										FileDelete, %lnkloc%
									}
							}		
						FileCreateShortcut,%batfile%,%lnkloc%,%batd%,,%batn%,%cvtico%
					}
			}					
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeBUTC:
;{;;;;;;;;;;;;;;;;;;;;   ICON LOCATION   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,MIRSLV,,FEDDLB
if (MIRSLV = "Mirrors")
	{
		return
	}
ICNTMP= 
FileSelectFolder,ICNTMP,,3,Select the location for icons to be stored for %MIRSLV%
if (ICNTMP = "")
	{
		return
	}
stringsplit,mirnvl,MIRSLV,_	
IniWrite, %ICNTMP%,Settings.ini,Micon_%mirnvl2%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeBUTD:
return

Mirrored_LinksfeBUTE:
;{;;;;;;;;;;;;;;;;;;;;;;   DELETE MIRRORS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,FECHKA,,FECHKA
guicontrolget,FECHKB,,FECHKB
guicontrolget,FECHKC,,FECHKC
guicontrolget,FERAD5B,,FERAD5B
guicontrolget,FEDDLA,,FEDDLA
guicontrolget,FECHKD,,FECHKD
guicontrolget,FECHKE,,FECHKE
Gui,ListView,FELVA
INJAK= 
ICJAK= 
FEItems= 
FEItems:= LVGetCheckedItems("", "ahk_id" . FELSTVA)
if (FEItems = "")
	{
		return
	}
Msgbox,3,Delete Selected,Are you sure you want to delete mirrors for the selected items?
ifMsgBox, No
		{
			return
		}
ifMsgBox, Cancel
		{
			return
		}
if (FERAD5B = 1)
	{
		gosub, DELMIRPROC
		return
	}
if (FERAD5A = 1)
	{
		if (FEDDLA = "Systems")
			{
				gosub, DELMIRPROC
				return
			}
		gosub, DELSYSMIRPROC
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
DELMIRPROC:
;{;;;;;;;;;;;;;;;;;;;;;   DELETE MIRRORS PROC   ;;;;;;;;;;;;;;;;;;;;;
IniRead, sysma,Settings.ini,GLOBAL,%FEDDLA%
stringsplit,ddlcn,FEDDLA,_
IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
if (sysma = RJSYSTEMS)
	{
		if (FECHKD = 1)
			{
				INJAK= 1
			}
	}
Loop, Parse, FEItems, `n, `r
	{
		if (A_LoopField = "")
			{
				continue
			}
		curms= %A_LoopField%
		ifNotExist, %sysma%\%curms%
			{
				continue
			}
		fltfnd= *.lnk
		if (INJAK = 1)
			{
				fltfnd= *,2
			}
		Loop, %sysma%\%curms%\%fltfnd%
			{
				lnkloc= %A_LoopFileFullPath%
				if (INJAK = 1)
					{
						lnkloc= 
						Loop, %A_LoopFileFullPath%\*.lnk
							{
								lnkloc= %A_LoopFileFullPath%
								break
							}
					}
				FileDelete, %lnkloc%
			}
	}
MsgBox,3,Files Deleted,Files were sucessfully deleted.,10	
return	
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

DELSYSMIRPROC:
;{;;;;;;;;;;;;;;;;;;;;;   DELETE SYSTEM MIRRORS PROC   ;;;;;;;;;;;;;;
IniRead, sysma,Settings.ini,GLOBAL,%FEDDLB%
stringsplit,ddlcn,FEDDLB,_
IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
curms= %FEDDLA%
if (sysma = RJSYSTEMS)
	{
		if (FECHKD = 1)
			{
				INJAK= 1
			}
	}
Loop, Parse, FEItems, `n, `r
	{
		if (A_LoopField = "")
			{
				continue
			}
		crjfld= %A_LoopField%	
		fltfnd= %crjfld%.lnk
		if (INJAK = 1)
			{
				fltfnd= %crjfld%\%crjfld%*.lnk
			}
		FileDelete, %sysma%\%curms%\%fltfnd%
	}	
MsgBox,3,Files Deleted,Files were sucessfully deleted.,10
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeCHKA:
;{;;;;;;;;;;;;;;;;;;;;;;   ENABLE ICONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrolget,FECHKA,,FECHKA
guicontrol,disable,FECHKC
guicontrol,disable,FEDDLC
guicontrol,disable,FECHKF
stringsplit,ddlcn,FEDDLB,_
IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
if (CBOXLOC = "ERROR")
		{
			CBOXLOC= Scraped_Boxart
		}
if (FECHKA = 1)
	{
		guicontrol,enable,FECHKF
		guicontrol,enable,FECHKC
		guicontrol,enable,FEDDLC
	}
ifinstring,CBOXLOC,:
	{
		guicontrol,,FEDDLC,|Other|Jacket_Boxart||Scraped_Boxart|RetroArch_Boxart|Hyperspin_Boxart
		return
	}
guicontrol,,FEDDLC,|%CBOXLOC%||Retroarch_Boxart|Scraped_Boxart|Jacket_Boxart|Hyperspin_Boxart|Other
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeCHKB:
return
Mirrored_LinksfeCHKC:
return
Mirrored_LinksfeCHKD:
return
Mirrored_LinksfeCHKE:
return
Mirrored_LinksfeCHKF:
return

Mirrored_LinksfeDDLA:
;{;;;;;;;;;;;;;;;;;;;;;   SYSTEM DROPDOWN   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,ListView,FELVA
guicontrol,hide,FECHKD
guicontrol,hide,FECHKE
guicontrolget,FERAD5A,,FERAD5A
guicontrolget,FERAD5B,,FERAD5B
guicontrolget,FERAD5C,,FERAD5C
guicontrolget,FEDDLA,,FEDDLA
guicontrolget,FEDDLB,,FEDDLB
IniRead, CMTEST,Settings.ini,GLOBAL,%FEDDLB%
IniRead, CMIRLOC,Settings.ini,GLOBAL,%FEDDLA%
if (CMTEST = "ERROR")
	{
		SB_SetText("You must select or create a location for mirrors.")
		return
	}
LV_Delete()
FE_TDB= 
if (FERAD5A = 1)
	{
		if (FEDDLA = "Systems")
			{		
				stringsplit,ddlcn,FEDDLB,_
				IniRead, CMIRLOC,Settings.ini,GLOBAL,%FEDDLB%
				IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
				IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
				if (FEDDLA = "Mirrored")
					{			
						return
					}
				Guicontrol,,FETXTE,Mirror= %CMIRLOC%
				Guicontrol,,FETXTF,Icons= %CICOLOC%
				Guicontrol,,FETXTG,Boxart= %CBOXLOC%		
				guicontrol,,FELVA,Systems
				Loop, %RJSYSTEMS%\*,2
					{
						lvachk= ""
						tdbtog= 0
						ifExist, %CMIRLOC%\%A_LoopFileName%
							{
								tdbtog= 1
								lvachk= +Check
							}
						LV_Add(lvachk,A_LoopFileName)
						FE_TDB.= A_LoopFileName . "|" . tdbtog
					}
				return
			}
		guicontrol,,FELVA,Mirrors	
		Loop, %RJSYSTEMS%\%FEDDLA%\*,2
			{
				lvachk= ""
				ifexist, %CMIRLOC%\%FEDDLA%\%A_LoopFileName%.lnk
					{
						lvachk= +Check
					}
				LV_Add(lvachk,A_LoopFileName)
				FE_TDB.= A_LoopFileName . "|" . tdbtog
			}
		LV_ModifyCol()		
	}
if (FERAD5B = 1)
	{
		stringsplit,ddlcn,FEDDLA,_
		IniRead, CMIRLOC,Settings.ini,GLOBAL,%FEDDLA%
		IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
		IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
		if (FEDDLA = "Mirrored")
			{			
				return
			}
		guicontrol,,FEDDLB,|%FEDDLA%||%MIRDDLOC%
		Guicontrol,,FETXTE,Mirror= %CMIRLOC%
		Guicontrol,,FETXTF,Icons= %CICOLOC%
		Guicontrol,,FETXTG,Boxart= %CBOXLOC%		
		if (CMIRLOC = RJSYSTEMS)
			{
				guicontrol,show,FECHKD
				guicontrol,show,FECHKE
			}
		if (CICOLOC = "ERROR")
				{
					CICOLOC= 
				}
		if (CBOXLOC = "ERROR")
				{
					CBOXLOC= 
				}
		guicontrol,,FELVA,Mirrors
		FE_TDB= 	
		Loop, %RJSYSTEMS%\*,2
			{
				lvachk= ""
				tdbtog= 0
				exisys= %A_LoopFileName%
				ifexist,%CMIRLOC%\%exisys%
					{
						tdbtog= 1
						lvachk= +Check
					}
				LV_Add(lvachk,exisys)				
				FE_TDB.= A_LoopFileName . "|" . tdbtog
			}
		Loop, %CMIRLOC%\*,2
			{
				ifNotExist, %RJSYSTEMS%\%A_LoopFileName%
					{
						tdbtog= 0
						LV_Add("",A_LoopFileName)
						FE_TDB.= A_LoopFileName . "|" . tdbtog
					}
			}
		LV_ModifyCol()
	}
if (FERAD5C = 1)
	{
		
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeDDLB:
;{;;;;;;;;;;;;;;;;;;;;;  MIRROR DROPDOWN   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
guicontrol,,FECHKD,0
guicontrol,,FECHKE,0
guicontrol,hide,FECHKE
guicontrol,hide,FECHKD
Gui,ListView,FELVA
LV_Delete()
guicontrolget,FEDDLB,,FEDDLB
stringsplit,ddlcn,FEDDLB,_
IniRead, CMIRLOC,Settings.ini,GLOBAL,%FEDDLB%
IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
if (CMIRLOC = "ERROR")
		{
			CMIRLOC= 
		}
if (CICOLOC = "ERROR")
		{
			CICOLOC= 
		}
if (CBOXLOC = "ERROR")
		{
			CBOXLOC= 
		}
if (CMIRLOC = RJSYSTEMS)
	{
		guicontrol,show,FECHKE
		guicontrol,show,FECHKD
	}
Guicontrol,,FETXTE,Mirror= %CMIRLOC%
Guicontrol,,FETXTF,Icons= %CICOLOC%
Guicontrol,,FETXTG,Boxart= %CBOXLOC%	
if (FERAD5B = 1)
	{
		guicontrol,,FEDDLA,|%FEDDLB%||%MIRDDLOC%
	}
systmir= 
FE_TDB= 
Loop, %RJSYSTEMS%\*,2
	{
		lvachk= ""
		tdbtog= 0
		exisys= %A_LoopFileName%
		ifexist,%CMIRLOC%\%exisys%\
			{
				tdbtog= 1
				lvachk= +Check
			}
		LV_Add(lvachk,exisys)
		FE_TDB.= A_LoopFileName . "|" . tdbtog
	}
Loop, %CMIRLOC%\*,2
	{
		if (A_LoopFileName = "")
			{
				continue
			}
		ifNotExist, %RJSYSTEMS%\%A_LoopFileName%
			{
				tdbtog= 0
				LV_Add("",A_LoopFileName)
				FE_TDB.= A_LoopFileName . "|" . tdbtog
			}
	}	
LV_ModifyCol()		
MIRDISP:= "Mirror=" . CMIRLOC . "`n`r" . "Icons=" . CICOLOC . "`n`r" . "Boxart=" . CBOXLOC
;;Guicontrol,,FEEDTA,%MIRDISP%
Guicontrol,,FETXTE,Mirror= %CMIRLOC%
Guicontrol,,FETXTF,Icons= %CICOLOC%
Guicontrol,,FETXTG,Boxart= %CBOXLOC%
return

Mirrored_LinksfeDDLC:
guicontrol,hide,FEBUTC
guicontrolget,FEDDLC,,FEDDLC
stringsplit,ddlcn,FEDDLA,_
if (FEDDLC = "Other")
	{
		guicontrol,show,FEBUTC
		BXTMP= 
		FileSelectFolder,BXTMP,,3,Select a Folder containing boxart subdirectories
		if (BXTMP = "")
			{
				return
			}
		Guicontrolget,FEDDLC,,FEDDLB
		stringsplit,mirnvl,FEDDLB,_
		if (mirnvl2 = "")
			{
				return
			}
		IniWrite, %BXTMP%,Settings.ini,GLOBAL,Licon_%mirnvl2%
		guicontrol,,FETXTG,Boxart= %BXTMP%
		return
	}
IniWrite, %FEDDLC%,Settings.ini,GLOBAL,Licon_%ddlcn2%
guicontrol,,FETXTG,Boxart= %FEDDLC%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeLVA:
return

Mirrored_LinksfeEDTA:
return

Mirrored_LinksfeRAD5A:
;{;;;;;;;;;;;;;;;;;;;;;   JACKET RADIO   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Gui,ListView,FELVA
LV_Delete()
guicontrol,,FEDDLA,|Systems||%systmfldrs%
gosub, %FENAM%FEDDLA
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeRAD5B:
;{;;;;;;;;;;;;;;;;;;;;   MIRROR RADIO   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
CMIR1= Mirror_1
MIRDDLOC= 
Loop, Read, Settings.ini
		{
			stringsplit,mirlocv,A_LoopReadLine,=
			stringsplit, mirspl,mirlocv1,_
			if (mirspl1 = "Mirror")
				{
					mirnum+=1
					MIRDDLOC.= mirlocv1 . "|"
				}
		}
if (MIRDDLOC = "")
		{
			CMIR1= Mirrored
			MIRDDLOC= Mirrored
		}
if (CMIR1 <> "Mirrored")
	{
		guicontrolget,FEDDLB,,FEDDLB
		stringsplit,ddlcn,FEDDLB,_
		IniRead, CMIRLOC,Settings.ini,GLOBAL,%FEDDLB%
		IniRead, CICOLOC,Settings.ini,GLOBAL,Micon_%ddlcn2%
		IniRead, CBOXLOC,Settings.ini,GLOBAL,Licon_%ddlcn2%
		CMIR1= %FEDDLB%
		GUICONTROL,,FEDDLA,|%CMIR1%||%MIRDDLOC%
		gosub, %FENAM%FEDDLA
		return
	}
GUICONTROL,,FEDDLA,|%CMIR1%||%MIRDDLOC%	
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Mirrored_LinksfeRAD5C:
return

;{;;;;;;;;;;;;;;;; FE RIGHTCLICK ;;;;;;;;;;;;;;;;;

TOGFESEL:
gosub, %FENAM%TOGFESEL
return

ADDFESEL:
gosub, %FENAM%ADDFESEL
return

REMFESEL:
gosub, %FENAM%REMFESEL
return

EmulationStationTOGFESEL:
MediaTOGFESEL:
Mirrored_LinksTOGFESEL:
gui,submit,nohide
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		RowChecked := LV_GetNext(RowNumber - 1 , "Checked" )

		If ( RowNumber = RowChecked )
		   {
				LV_Modify(RowNumber, "-Check")
				stringreplace,FE_TDB,FE_TDB,%curtxt%|0,%curtxt%|1,All
				continue
			}
		Else
			{
				LV_Modify(RowNumber, "Check")
				stringreplace,FE_TDB,FE_TDB,%curtxt%|0,%curtxt%|1,All
			}
	}
return

EmulationStationADDFESEL:
MediaADDFESEL:
Mirrored_LinksADDFESEL:
gui,submit,nohide
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		RowChecked := LV_GetNext(RowNumber - 1 , "Checked" )

		If ( RowNumber = RowChecked )
		   {
			}
		Else
			{
				LV_Modify(RowNumber, "Check")
				stringreplace,FE_TDB,FE_TDB,%curtxt%|0,%curtxt%|1,All
			}	
	}
return

EmulationStationREMFESEL:
MediaREMFESEL:
Mirrored_LinksREMFESEL:
gui,submit,nohide
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		RowChecked := LV_GetNext(RowNumber - 1 , "Checked" )
		If ( RowNumber = RowChecked )
		   {
				LV_Modify(RowNumber, "-Check")
				stringreplace,FE_TDB,FE_TDB,%curtxt%|1,%curtxt%|0,All

			}
		Else
			{
			}
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;



;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;    UTILITY-OPTION FUNCTIONS    ;;;;;;;;;;;;;;;;;;

;{;;;; ~~~UTILITY-gui functions~~~  ;;;;;
utlBUTA:
gui,submit,nohide
if (utltog = "show")
	{
		utltog= hide
	}
	else if (utltog = "hide")
	{
		utltog= show
	}
gosub, UTLUNPOP
return

utlBUTB:
gui,submit,nohide

return

utlBUTC:
gui,submit,nohide

return

utlBUTG:
gui,submit,nohide

return

utlBUTD:
gui,submit,nohide

return

utlBUTE:
gui,submit,nohide

return

utlBUTF:
gui,submit,nohide

return

utlBUTH:
gui,submit,nohide

return

utlBUTI:
gui,submit,nohide

return

utlBUTJ:
gui,submit,nohide

return

utlCHKD:
gui,submit,nohide

return

utlCHKE:
gui,submit,nohide

return

utlCHKF:
gui,submit,nohide

return

utlCHKG:
gui,submit,nohide

return

utlCHKH:
gui,submit,nohide

return

utlCHKI:
gui,submit,nohide

return

utlCHKJ:
gui,submit,nohide

return

utlCHKK:
gui,submit,nohide

return

utlCHKL:
gui,submit,nohide

return

utlCHKM:
gui,submit,nohide

return

utlCHKN:
gui,submit,nohide

return

utlCHKO:
gui,submit,nohide

return

utlCHKP:
gui,submit,nohide

return

utlCHKQ:
gui,submit,nohide

return

utlCHKA:
gui,submit,nohide

return

utlCHKB:
gui,submit,nohide

return

utlCHKC:
gui,submit,nohide

return

utlCBXE:
gui,submit,nohide

return

utlCBXF:
gui,submit,nohide

return

utlCBXG:
gui,submit,nohide

return

utlCBXH:
gui,submit,nohide

return

utlCBXI:
gui,submit,nohide

return

utlCBXJ:
gui,submit,nohide

return

utlCBXA:
gui,submit,nohide

return

utlCBXB:
gui,submit,nohide

return

utlCBXC:
gui,submit,nohide

return

utlCBXD:
gui,submit,nohide

return

utlDDLE:
gui,submit,nohide

return

utlDDLF:
gui,submit,nohide

return

utlDDLG:
gui,submit,nohide

return

utlDDLH:
gui,submit,nohide

return

utlDDLI:
gui,submit,nohide

return

utlDDLJ:
gui,submit,nohide

return

utlDDLC:
gui,submit,nohide

return

utlDDLD:
gui,submit,nohide

return

utlDDLA:
gui,submit,nohide

return

utlDDLB:
gui,submit,nohide

return

utlEDTA:
gui,submit,nohide

return

utlEDTB:
gui,submit,nohide

return

utlEDTC:
gui,submit,nohide

return

utlEDTD:
gui,submit,nohide

return

utlEDTE:
gui,submit,nohide

return

utlEDTF:
gui,submit,nohide

return

utlEDTG:
gui,submit,nohide

return

utlUPDA:
gui,submit,nohide

return

utlEDTH:
gui,submit,nohide

return

utlEDTI:
gui,submit,nohide

return

utlUPDB:
gui,submit,nohide

return

utlUPDC:
gui,submit,nohide

return

utlLBXA:
gui,submit,nohide

return

utlLBXB:
gui,submit,nohide

return

utlLVA:
gui,submit,nohide

return

utlLVB:
gui,submit,nohide

return

utlLVC:
gui,submit,nohide

return

utlRad5B:
gui,submit,nohide

return

utlRad5C:
gui,submit,nohide

return

utlRad4A:
gui,submit,nohide

return

utlRad4B:
gui,submit,nohide

return

utlRad5A:
gui,submit,nohide

return

utlRad6A:
gui,submit,nohide

return

utlRad6B:
gui,submit,nohide

return

utlRad6C:
gui,submit,nohide

return

utlRad6D:
gui,submit,nohide

return

utlRad7A:
gui,submit,nohide

return

utlRad7B:
gui,submit,nohide

return

utlRad8A:
gui,submit,nohide

return

utlRad8B:
gui,submit,nohide

return

utlRad9A:
gui,submit,nohide

return

utlRad9B:
gui,submit,nohide

return

utlRad9C:
gui,submit,nohide

return

utlRad10A:
gui,submit,nohide

return

utlRad10B:
gui,submit,nohide

return

utlRad11A:
gui,submit,nohide

return

utlRad11B:
gui,submit,nohide

return

utlRad2A:
gui,submit,nohide

return

utlRad2B:
gui,submit,nohide

return

utlRad2C:
gui,submit,nohide

return

utlRad1A:
gui,submit,nohide

return

utlRad3A:
gui,submit,nohide

return

utlRad3B:
gui,submit,nohide

return

utlRad3C:
gui,submit,nohide

return

utlRad3D:
gui,submit,nohide

return

utlRad1B:
gui,submit,nohide

return

utlSLDA:
gui,submit,nohide

return

utlSLDB:
gui,submit,nohide

return

utlSLDC:
gui,submit,nohide

return

utlSLDD:
gui,submit,nohide

return

utlSLDE:
gui,submit,nohide

return

;};;;;;;;;;;;;;;;;;;;;;;;;;

;{;;; ~~~~ UTILITY-template items ~~~ ;;;

UTLUNPOP:
;;guicontrol, show, utlBUTA
guicontrol, %utltog%, utlBUTB
guicontrol, %utltog%, utlBUTC
guicontrol, %utltog%, utlBUTG
guicontrol, %utltog%, utlBUTD
guicontrol, %utltog%, utlBUTE
guicontrol, %utltog%, utlBUTF
guicontrol, %utltog%, utlBUTH
guicontrol, %utltog%, utlBUTI
guicontrol, %utltog%, utlBUTJ
guicontrol, %utltog%, utlCHKD
guicontrol, %utltog%, utlCHKE
guicontrol, %utltog%, utlCHKF
guicontrol, %utltog%, utlCHKG
guicontrol, %utltog%, utlCHKH
guicontrol, %utltog%, utlCHKI
guicontrol, %utltog%, utlCHKJ
guicontrol, %utltog%, utlCHKK
guicontrol, %utltog%, utlCHKL
guicontrol, %utltog%, utlCHKM
guicontrol, %utltog%, utlCHKN
guicontrol, %utltog%, utlCHKO
guicontrol, %utltog%, utlCHKP
guicontrol, %utltog%, utlCHKQ
guicontrol, %utltog%, utlCHKA
guicontrol, %utltog%, utlCHKB
guicontrol, %utltog%, utlCHKC
guicontrol, %utltog%, utlCBXE
guicontrol, %utltog%, utlCBXF
guicontrol, %utltog%, utlCBXG
guicontrol, %utltog%, utlCBXH
guicontrol, %utltog%, utlCBXI
guicontrol, %utltog%, utlCBXJ
guicontrol, %utltog%, utlCBXA
guicontrol, %utltog%, utlCBXB
guicontrol, %utltog%, utlCBXC
guicontrol, %utltog%, utlCBXD
guicontrol, %utltog%, utlDDLE
guicontrol, %utltog%, utlDDLF
guicontrol, %utltog%, utlDDLG
guicontrol, %utltog%, utlDDLH
guicontrol, %utltog%, utlDDLI
guicontrol, %utltog%, utlDDLJ
guicontrol, %utltog%, utlDDLC
guicontrol, %utltog%, utlDDLD
guicontrol, %utltog%, utlDDLA
guicontrol, %utltog%, utlDDLB
guicontrol, %utltog%, utlEDTA
guicontrol, %utltog%, utlEDTB
guicontrol, %utltog%, utlEDTC
guicontrol, %utltog%, utlEDTD
guicontrol, %utltog%, utlEDTE
guicontrol, %utltog%, utlEDTF
guicontrol, %utltog%, utlEDTG
guicontrol, %utltog%, utlEDTI
guicontrol, %utltog%, utlUPDA
guicontrol, %utltog%, utlEDTH
guicontrol, %utltog%, utlUPDB
guicontrol, %utltog%, utlLVA
guicontrol, %utltog%, utlUPDC
guicontrol, %utltog%, utlGRPA
guicontrol, %utltog%, utlGRPB
guicontrol, %utltog%, utlGRPC
guicontrol, %utltog%, utlGRPD
guicontrol, %utltog%, utlGRPE
guicontrol, %utltog%, utlGRPF
guicontrol, %utltog%, utlGRPG
guicontrol, %utltog%, utlLBXA
guicontrol, %utltog%, utlLBXB
guicontrol, %utltog%, utlLVA
guicontrol, %utltog%, utlLVB
guicontrol, %utltog%, utlLVC
guicontrol, %utltog%, utlPRGB
guicontrol, %utltog%, utlPRGA
guicontrol, %utltog%, utlRad5B
guicontrol, %utltog%, utlRad5C
guicontrol, %utltog%, utlRad4A
guicontrol, %utltog%, utlRad4B
guicontrol, %utltog%, utlRad5A
guicontrol, %utltog%, utlRad6A
guicontrol, %utltog%, utlRad6B
guicontrol, %utltog%, utlRad6C
guicontrol, %utltog%, utlRad6D
guicontrol, %utltog%, utlRad7A
guicontrol, %utltog%, utlRad7B
guicontrol, %utltog%, utlRad8A
guicontrol, %utltog%, utlRad8B
guicontrol, %utltog%, utlRad9A
guicontrol, %utltog%, utlRad9B
guicontrol, %utltog%, utlRad9C
guicontrol, %utltog%, utlRad10A
guicontrol, %utltog%, utlRad10B
guicontrol, %utltog%, utlRad11A
guicontrol, %utltog%, utlRad11B
guicontrol, %utltog%, utlRad2A
guicontrol, %utltog%, utlRad2B
guicontrol, %utltog%, utlRad2C
guicontrol, %utltog%, utlRad1A
guicontrol, %utltog%, utlRad3A
guicontrol, %utltog%, utlRad3B
guicontrol, %utltog%, utlRad3C
guicontrol, %utltog%, utlRad3D
guicontrol, %utltog%, utlRad1B
guicontrol, %utltog%, utlSLDA
guicontrol, %utltog%, utlSLDB
guicontrol, %utltog%, utlSLDD
guicontrol, %utltog%, utlSLDE
guicontrol, %utltog%, utlSLDC
guicontrol, %utltog%, utlTXTA
guicontrol, %utltog%, utlTXTB
guicontrol, %utltog%, utlTXTC
guicontrol, %utltog%, utlTXTD
guicontrol, %utltog%, utlTXTE
guicontrol, %utltog%, utlTXTF
guicontrol, %utltog%, utlTXTG
guicontrol, %utltog%, utlTXTS
guicontrol, %utltog%, utlTXTT
guicontrol, %utltog%, utlTXTR
guicontrol, %utltog%, utlTXTM
guicontrol, %utltog%, utlTXTH
guicontrol, %utltog%, utlTXTI
guicontrol, %utltog%, utlTXTN
guicontrol, %utltog%, utlTXTO
guicontrol, %utltog%, utlTXTP
guicontrol, %utltog%, utlTXTQ
guicontrol, %utltog%, utlTXTJ
guicontrol, %utltog%, utlTXTK
guicontrol, %utltog%, utlTXTL
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;    JACKETIZE FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


RJLSTV:
;;gui,submit,nohide
if (A_GuiEvent = RightClick)
		{
			return
		}
if	(ErrorLevel == "C")
		{
			LV_Modify(A_EventInfo, "+Select")				
			LV_GetNext(A_EventInfo, Focused)
			LV_GetText(curtxt, A_EventInfo)	
			stringreplace,RJSYSDD_TDB,RJSYSDD_TDB,%curtxt%|0,%curtxt%|1,All
		}
    Else if	(ErrorLevel == "c")
       {			
			LV_Modify(A_EventInfo, "+Select")
			LV_GetNext(A_EventInfo, Focused)
			LV_GetText(curtxt, A_EventInfo)
			stringreplace,RJSYSDD_TDB,RJSYSDD_TDB,%curtxt%|1,%curtxt%|0,All
	   }
return

;{;;;;;;;;;;;;;;;;  RJ BUTTONS   ;;;;;;;;;;;;;;;;;;;;;

RJButA:
gui,submit,nohide

return

RJDELCOMP:
gui,submit,nohide
Gui,ListView,RJLSTV
QItems= 
QItems:= LVGetCheckedItems("", "ahk_id" . RJLV)
guicontrolget,CDELNCH,,RJCHKL
guicontrolget,CDELCFG,,RJCHKM
guicontrolget,CDELJOY,,RJCHKP
Msgbox,3,Delete Confirmation,Are you sure you wish to delete these components from the selected Folders?
	ifMsgBox,Yes
		{
			Loop, Parse, QItems, `n, `r
				{
					qarray1= 
					qarray2= 
					fldrz1=
					fldrz2=
					stringsplit,qarray,A_LoopField,\
					stringsplit,fldrz,qarray1,:
					if (fldrz2 = "")
						{
							FileAppend, %fldrz2%`n,rj\%RJSYSDD%_todel.tdb
						}
					Loop, Read, rj\%RJSYSDD%_todel.tdb
						{
							if (CDELNCH = 1)
								{
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.bat
								}
							if (CDELCFG = 1)
								{
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.ini
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.cfg
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.config
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.cfg
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.xml
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.conf
								}
							if (CDELJOY = 1)
								{
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.xpadderprofile
									FileDelete, %RJSYSTEMS%\%RJSYSDD%\%A_LoopReadLine%\*.amgp
								}
						}
				}
			Msgbox,0,Complete,Files have been deleted,5
		}
guicontrol,,RJCHKL,0
guicontrol,,RJCHKM,0		
guicontrol,,RJCHKP,0
guicontrol,disable,RJDELCOMP
return

;{;;;;;;;;;;;;;;;;;;;;;;;  LOCAL / ABSOLUTE COMMAND TOGGLES  ;;;;;;;;;;;;;;;;;;;;;

RJRad11A:
gui,submit,nohide
guicontrol,hide,RJEDTO
guicontrol,show,RJCBXH
guicontrol,hide,RJBUTG
guicontrol,hide,RJDDLP
guicontrol,show,RJBUTO
guicontrolget,PRPS,,RJDDLF
CMDRO= RJPREOPT
CMDRT= RJPRERUN
CMDRS= RJPREW
optk= 
optn= 
ADDAK= 
RJCBXH= 
if (PRPS = "Post-Command")
	{
		CMDRO= RJPOSTOPT
		CMDRT= RJPOSTRUN
		CMDRS= RJPOSTW
	}
edtmode= 
guicontrol,disable,RJBUTO
IniRead, ADDFN,rj\cur.ini,%RJSYSDD%,%CMDRT%
IniRead, RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
IniRead, RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
guicontrol,,RJCBXH,|%ADDFN% |
guicontrol,,RJDDLP,|%ADDFN% |
guicontrol,,RJCHKW,0
guicontrol,,RJEDTO,
return

RJRad11B:
gui,submit,nohide
guicontrol,hide,RJBUTO
guicontrol,hide,RJCBXH
guicontrol,show,RJDDLP
guicontrol,show,RJBUTG
guicontrol,show,RJEDTO
CMDRO= RJPREOPT
CMDRT= RJPRERUN
CMDRS= RJPREW
optk= 
optn= 
ADDAK= 
RJDDLP= 
if (PRPS = "Post-Command")
	{
		CMDRO= RJPOSTOPT
		CMDRT= RJPOSTRUN
		CMDRS= RJPOSTW
	}
IniRead, ADDFN,rj\cur.ini,%RJSYSDD%,%CMDRT%
IniRead, RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
IniRead, RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
guicontrol,,RJCBXH,|%ADDFN% |
guicontrol,,RJDDLP,|%ADDFN% |
guicontrol,,RJCHKW,0
guicontrol,,RJEDTO,
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJEDTO:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;  EDIT PROGRAM COMMAND OPTIONS  ;;;;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
guicontrolget,RJEDTO,,RJEDTO
guicontrolget,RJDDLP,,RJDDLP
nvar1= 
nvar2= 
stringsplit,nvar,RJDDLP,>
optnew= %nvar2%
IniRead, RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
RJEDTW= 
if (optn = "")
	{
		return
	}
if (RJEDTO = "")
	{
		RJEDTO= :
	}
opvn= 
Loop, Parse, RJOPV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		opvn+=1
		if (opvn = optnew)
			{
				opvn+=1
				RJEDTW.= RJEDTO . "|"
				continue
			}
		RJEDTW.= A_LoopField . "|"
	}
if (RJOPV = "")
	{
		RJEDTW= %RJEDTO%
	}
iniwrite, %RJEDTW%,rj\cur.ini,%RJSYSDD%,%CMDRO%
RJOPV= %RJEDTW%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


RJCHKW:
;{;;;;;;;;;;;;;;;;;;;  TOGGLE COMMAND START OPTION  ;;;;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
IniRead, RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
guicontrolget,RJCHKW,,RJCHKW
guicontrolget,RJDDLP,,RJDDLP
nvar1= 
nvar2= 
stringsplit,nvar,RJDDLP,>
optn= %nvar2%
avar= 
apndtyp= 
Loop, Parse, RJSTV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		avar+=1
		if (avar = optn)
			{
				avar+=1
				apndtyp.= RJCHKW . "|"
				continue
			}
		apndtyp.= A_LoopField . "|"
	}
if (apndtyp = "")
	{
		apndtyp= %RJCHKW%
	}
IniWrite, %apndtyp%,rj\cur.ini,%RJSYSDD%,%CMDRS%
RJSTV= %apndtyp%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


RJBUTV:
;{;;;;;;;;;;;;;;;;;;;;  EDIT PROGRAM COMMAND   ;;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
if (RJRAD11A = 1)
	{
		guicontrol,enable,RJBUTO
		guicontrolget,RJCBXH,,RJCBXH
		nvar1= 
		nvar2= 
		stringsplit,nvar,RJCBXH,>
		if (nvar2 <> "")
			{
				edtmode= 2
				optn:= nvar2
				guicontrol,enable,RJBUTO
			}
		return
	}

guicontrolget,RJDDLP,,RJDDLP
if (RJDDLP = "")
	{
		SB_SetText("No command currently selected")
		return
	}
ADDTMP= 
FileSelectFIle,ADDTMP,1,,Select An executable or script
if (ADDTMP = "")
	{
		return
	}	
nvar1= 
nvar2= 
stringsplit,nvar,RJDDLP,>
stringreplace, ADDFN,ADDFN,%RJDDLP%,%ADDTMP%>%nvar2%,All
RJDDLP= %ADDTMP%>%nvar2%
guicontrol,,RJDDLP,|%RJDDLP%||%ADDFN%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJBUTG:
;{;;;;;;;;;;;;;;;;;;;;;   ADD PROGRAM COMMAND   ;;;;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
ADDFT= 
ADDAK= 
prepnd= 
FileSelectFile,ADDFT,1,,Select An executable or script
if (ADDFT = "")
	{
		return
	}
IniRead, RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
IniRead, ADDFN,rj\cur.ini,%RJSYSDD%,%CMDRT%
IniRead, RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
guicontrolget,RJDDLP,,RJDDLP
nvar1= 
nvar2= 
stringsplit,nvar,RJDDLP,>
optn= %nvar2%
if (nvar2 = "")
	{
		optn= 
		NEWFN= 
		if (ADDFN <> "")
			{
				cnttot= 100
				cntdwn= 99
				curadd= 1
				Loop, 99
					{
						cnttot-=1
						cntdwn-=1
						stringreplace,ADDFN,ADDFN,>%cntdwn%,>%cnttot%,All						
					}
				NEWFN.= ADDFT . ">" . "1" . "|" . ADDFN
				ADDAK= %NEWFN%
				prepnd= 1
			}
	}
if (prepnd = 1)
	{
		goto, popprepost
	}
adnm= 
curadd= 
Loop, Parse, ADDFN,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		nvar1= 
		nvar2= 		
		stringsplit,nvar,A_LoopField,>
		adnm+=1
		if (adnm = optn)
			{
				curadd:= adnm+1
				ADDAK.= nvar1 . ">" . adnm . "|" . ADDFT . ">" . curadd . "|"
				adnm+=1
				continue
			}
		ADDAK.= nvar1 . ">" . adnm . "|"
	}
	
;;if 1st addition	
if (adnm = "")
	{
		IniWrite,%ADDFT%>1,rj\cur.ini,%RJSYSDD%,%CMDRT%
		IniWrite,:,rj\cur.ini,%RJSYSDD%,%CMDRO%
		IniWrite,%RJCHKW%,rj\cur.ini,%RJSYSDD%,%CMDRS%
		guicontrol,,RJEDTO,
		guicontrol,,RJCBXH,|%ADDFT%>1|| |
		guicontrol,,RJDDLP,|%ADDFT%>1|| |
		optn= 1
		return
	}

if (optn = "")
	{
		ADDAK= %ADDFT%>1
	}
	
popprepost:	
guicontrol,,RJEDTO,
guicontrol,,RJCHKW,0
Sort,ADDAK,N D>
guicontrol,,RJCBXH,|%ADDFT%>%curadd%||%ADDAK% |
guicontrol,,RJDDLP,|%ADDFT%>%curadd%||%ADDAK% |
IniWrite, %ADDAK%,rj\cur.ini,%RJSYSDD%,%CMDRT%
opvn= 
curovn= 
RJEDTNX= 
if (optn = "")
	{
		RJEDTNX.= ":" . "|" . RJOPV
	}
if (optn <> "")
	{
		Loop, Parse, RJOPV,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				opvn+=1
				if (opvn = optn)
					{
						opvn+=1
						curovn:= opvn
						RJEDTNX.= A_LoopField . "|" . ":" . "|"
						continue
					}
				RJEDTNX.= A_LoopField . "|"
			}
	}
RJOPV= %RJEDTNX%	
IniWrite, %RJEDTNX%,rj\cur.ini,%RJSYSDD%,%CMDRO%	
RJSTX= 
opvn= 
if (optn = "")
	{
		RJSTX.= RJCHKW
	}
if (optn <> "")
	{
		Loop, Parse, RJSTV,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				opvn+=1
				if (opvn = optn)
					{
						opvn+=1
						RJSTX.= A_LoopField . "|" . "0" . "|"
						continue
					}	
				RJSTX.= A_LoopField . "|"
			}
	}
IniWrite, %RJSTX%,rj\cur.ini,%RJSYSDD%,%CMDRS%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJCBXH:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  ENTER CUSTOM COMMAND  ;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
ADDFT= 
optn= 
IniRead, RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
IniRead, ADDFN,rj\cur.ini,%RJSYSDD%,%CMDRT%
IniRead, RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
guicontrol,disable,RJBUTO
guicontrolget,RJCBXH,,RJCBXH
edtmode= 1
nvar1= 
nvar2= 
stringsplit,nvar,RJCBXH,>
optn:= nvar2
ORIGX:= nvar1
if (nvar2 <> "")
	{
	;;	edtmode= 
		optnx= %nvar2%
		guicontrol,,RJDDLP,|%nvar1%>%nvar2%||%ADDFN%| |
		guicontrol,,RJCBXH,|%ORIGX%>%nvar2%||%ADDFN%| |
	}
Loop, Parse, ADDFN,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		nvar1= 
		nvar2= 		
		stringsplit,nvar,A_LoopField,>	
		if (optn = nvar2)
			{
				ADDFT= %nvar1%
			}
	}
opto= 
RJOPV=
Loop, Parse, RJOPV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		opto+=1
		if (opto = optn)
			{
				RJEDTO= %A_LoopField%
				SNDEDTO= %RJEDTO%
				if (SNDEDTO = ":")
					{
						SNDEDTO= 
					}
				guicontrol,,RJEDTO,%SNDEDTO%
			}
	}
optv= 
Loop, Parse, RJSTV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		optv+=1
		if (optv = optn)
			{
				guicontrol,,RJCHKW,%A_LoopField%
				break
			}
	}	
if (nvar2 <> "")
	{
;;		edtmode= 
		guicontrol,disable,RJBUTO
	}
if (edtmode = "")
	{
		guicontrol,,RJCBX,|%ORIGX%>%optn%||%ADDFN%| |
		return
	}
if (edtmode = 2)
	{
		RJCBXX=
		guicontrolget,RJCBXX,,RJCBXH
		stringreplace,ADDFN,ADDFN,%RJCBXH%,%RJCBXX%,All
		;;edtmode= 
		guicontrol,disable,RJBUTO
		return
	}
guicontrol,enable,RJBUTO
ADDFT= %RJCBXH%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJBUTO:
if (edtmode = 2)
	{
		IniWrite, %ADDFN%,rj\cur.ini,%RJSYSDD%,%CMDRT%
		return
	}
;;edtmode= 
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   ADD CUSTOM LOCAL COMMAND  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
ADDAK= 
prepnd= 
optn= %optnx%
if (ADDFT = "")
	{
		guicontrol,disable,RJBUTO
		SB_SetText("Cannot add an empty command.  Use the delete button to delete a command.")
		return
	}
if (optnx = "")
	{
		optn= 
		NEWFN= 
		if (ADDFN <> "")
			{
				cnttot= 100
				cntdwn= 99
				curadd= 1
				Loop, 99
					{
						cnttot-=1
						cntdwn-=1
						stringreplace,ADDFN,ADDFN,>%cntdwn%,>%cnttot%,All						
					}
				NEWFN.= ADDFT . ">" . "1" . "|" . ADDFN
				ADDAK= %NEWFN%
				prepnd= 1
			}
	}
if (prepnd = 1)
	{
		goto, CSTMPPADD
	}
adnm= 
curadd= 
Loop, Parse, ADDFN,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		nvar1= 
		nvar2= 		
		stringsplit,nvar,A_LoopField,>
		adnm+=1
		if (adnm = optn)
			{
				curadd:= adnm+1
				ADDAK.= nvar1 . ">" . adnm . "|" . ADDFT . ">" . curadd . "|"
				adnm+=1
				continue
			}
		ADDAK.= nvar1 . ">" . adnm . "|"
	}
	
;;if 1st addition	
if (adnm = "")
	{
		IniWrite,%ADDFT%>1,rj\cur.ini,%RJSYSDD%,%CMDRT%
		IniWrite,:,rj\cur.ini,%RJSYSDD%,%CMDRO%
		IniWrite,%RJCHKW%,rj\cur.ini,%RJSYSDD%,%CMDRS%
		guicontrol,,RJEDTO,
		guicontrol,,RJCBXH,|%ADDFT%>1|| |
		guicontrol,,RJDDLP,|%ADDFT%>1|| |
		optn= 1
		return
	}

if (optn = "")
	{
		ADDAK= %ADDFT%>1
	}
	
CSTMPPADD:	
guicontrol,,RJEDTO,
guicontrol,,RJCHKW,0
Sort,ADDAK,N D>
guicontrol,,RJCBXH,|%ADDFT%>%curadd%||%ADDAK% |
guicontrol,,RJDDLP,|%ADDFT%>%curadd%||%ADDAK% |
IniWrite, %ADDAK%,rj\cur.ini,%RJSYSDD%,%CMDRT%
opvn= 
curovn= 
RJEDTNX= 
if (optn = "")
	{
		RJEDTNX.= ":" . "|" . RJOPV
	}
if (optn <> "")
	{
		Loop, Parse, RJOPV,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				opvn+=1
				if (opvn = optn)
					{
						opvn+=1
						curovn:= opvn
						RJEDTNX.= A_LoopField . "|" . ":" . "|"
						continue
					}
				RJEDTNX.= A_LoopField . "|"
			}
	}
RJOPV= %RJEDTNX%	
IniWrite, %RJEDTNX%,rj\cur.ini,%RJSYSDD%,%CMDRO%	
RJSTX= 
opvn= 
if (optn = "")
	{
		RJSTX.= RJCHKW
	}
if (optn <> "")
	{
		Loop, Parse, RJSTV,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				opvn+=1
				if (opvn = optn)
					{
						opvn+=1
						RJSTX.= A_LoopField . "|" . "0" . "|"
						continue
					}	
				RJSTX.= A_LoopField . "|"
			}
	}
IniWrite, %RJSTX%,rj\cur.ini,%RJSYSDD%,%CMDRS%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJDDLP:
;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   SELECT PROGRAM COMMAND   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
gui,submit,nohide
IniRead,RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
IniRead,RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
guicontrol,,RJEDTO,
guicontrolget,RJDDLP,,RJDDLP
ADDFT= 
ADDAK= 
optn= 
optk= 
nvar1= 
nvar2= 
stringsplit,nvar,RJDDLP,>
optn= %nvar2%
Loop, Parse, ADDFN,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		optk+=1
	}
opto= 
RJOPV=
Loop, Parse, RJOPV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		opto+=1
		if (opto = optn)
			{
				RJEDTO= %A_LoopField%
				SNDEDTO= %RJEDTO%
				if (SNDEDTO = ":")
					{
						SNDEDTO= 
					}
				guicontrol,,RJEDTO,%SNDEDTO%
			}
	}
optv= 
Loop, Parse, RJSTV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		optv+=1
		if (optv = optn)
			{
				guicontrol,,RJCHKW,%A_LoopField%
				break
			}
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;




RJSYSSAVAS:
gui,submit,nohide
CURINI= 
FileSelectFile,CURINI,S3,rj\%RJSYSDD%.ini,Select the %RJSYSDD% preset,*.ini
if (CURINI = "")
	{
		return
	}
FileCopy, rj\cur.ini,%CURINI%,1
guicontrol,,RJSYSRADC,1
return

RJSYSLOAD:
gui,submit,nohide
CURINI= 
FileSelectFile,CURINI,19,rj\%RJSYSDD%.ini,Select the %RJSYSDD% preset,*.ini
if (CURINI = "")
	{
		return
	}
FileCopy, %CURINI%, rj\cur.ini,1
guicontrol,,RJSYSRADC,1
return

RJSYSSAV:
gui,submit,nohide
FileCopy, rj\cur.ini,rj\%RJSYSDD%.ini,1
guicontrol,,RJSYSRADC,1
return

RJRFRSHLST:
gui,submit,nohide
FileDelete,rj\%RJSYSDD%*.tdb
gui,listview,RJLSTV
LV_Delete()
guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All Files
guicontrol,,RJEDTDN
guicontrol,,RJEDTBN
guicontrol,,RJEDTD
guicontrol,,RJEDTB
guicontrol,hide,RJTXTH
guicontrol,hide,RJEDTDN
guicontrol,hide,RJEDTBN
guicontrol,hide,RJEDTD
guicontrol,hide,RJEDTB
guicontrol,hide,RJFNDINLST
guicontrol,,RJINCEXCL,|All||A-Z|#
gosub,RJSYSDD
return

RJMAP1ROFTYP:
if (rjaval2 = 0)
	{
		guicontrol,,RJMAP1ROFTYPA,1
	}
if (rjaval2 = 1)
	{
		guicontrol,,RJMAP1ROFTYPB,1
	}
if (rjaval2 = 2)
	{
		guicontrol,,RJMAP1ROFTYPC,1
	}
return
RJMAP2ROFTYP:
if (rjaval2 = 0)
	{
		guicontrol,,RJMAP2ROFTYPA,1
	}
if (rjaval2 = 1)
	{
		guicontrol,,RJMAP2ROFTYPB,1
	}
if (rjaval2 = 2)
	{
		guicontrol,,RJMAP2ROFTYPC,1
	}
return




;{;;;;;;  Configure Emulator  ;;;;;;;;;

RJEMUPRM:
gui,submit,nohide
guicontrolget, RJEMUTG,,RJEMUPRECFG
ASVRM= 
guicontrol,,JCORE,|%runlist%

EMUNAMEPOP:
guicontrol,,LCORE,|%RJEMUTG%||%runlist%
gosub, EMUOPTPOP
guicontrol,,JOYCORE,|%EMUSN%||Global|%corelist%|Xpadder|Antimicro%addemu%
gosub, JOYEMUCORE
GuiControl, Choose, TABMENU, 2
return

;};;;;;;;;;;;;;;;;;

RJBUTH:
ADDFW= 
ADDFK= 
ADDFO= 
prepnd= 
guicontrolget,GETFRM,,RJCBXH
if (RJRAD11B = 1)
	{
		guicontrolget,GETFRM,,RJDDLP	
	}
IniRead, RJOPV,rj\cur.ini,%RJSYSDD%,%CMDRO%
IniRead, ADDFN,rj\cur.ini,%RJSYSDD%,%CMDRT%
IniRead, RJSTV,rj\cur.ini,%RJSYSDD%,%CMDRS%
if (GETFRM = "")
	{
		SB_SetText("No command selected")
		return
	}
nvar1= 
nvar2= 
stringsplit,nvar,GETFRM,>
optn= %nvar2%
if (nvar2 = "")
	{
		return
	}
newnm= 	
Loop, Parse, ADDFN,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		nvar1= 	
		nvar2= 	
		stringsplit,nvar,A_LoopField,>	
		if (nvar2 = optn)
			{
				continue
			}
		newnm+=1	
		ADDFK.= nvar1 . ">" . newnm . "|"
	}
newnm= 	
Loop, Parse, RJOPV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		newnm+=1
		if (newnm = optn)
			{
				continue
			}
		ADDFO.= A_LoopField . "|"
	}
newnm= 	
Loop, Parse, RJSTV,|
	{
		if (A_LoopField = "")
			{
				continue
			}
		newnm+=1
		if (newnm = optn)
			{
				continue
			}		
		ADDFW.= A_LoopField . "|"
	}
ADDFN= %ADDFK%	
RJOPV= %ADDFO%
RJSTV= %ADDFW%	
guicontrol,,RJEDTO,
guicontrol,,RJCHKW,0
guicontrol,,RJCBXH,|%ADDFN%| |
guicontrol,,RJDDLP,|%ADDFN%| |
IniWrite, %ADDFK%,rj\cur.ini,%RJSYSDD%,%CMDRT%
IniWrite, %ADDFO%,rj\cur.ini,%RJSYSDD%,%CMDRO%
IniWrite, %ADDFW%,rj\cur.ini,%RJSYSDD%,%CMDRS%
return

RJDIMGET:
gui,submit,nohide

return

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  PROCESS QUEUE  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJPROCQ:
gui,submit,nohide
FileDelete,rj\*.jak
;;FileDelete,rj\*inclfl.tdb
Loop, rj\*_q.tdb
	{
		fldrapnd= 
		curq:= A_LoopFileFullPath
		curntq:= A_LoopFileName
		SplitPath,curntq,,,,proq
		StringTrimRight,proq,proq,2
		IniRead,jakfil,rj\%proq%.ini,%proq%,RJACKET
		IniRead,condlm,rj\%proq%.ini,%proq%,RJCONSOLID
		if (condlm = "Individuate")
			{
				condlm:=
			}
		Loop, Read, %curq%
			{
				flpr1= 
 				flpr2= 
				StringSplit,flpr,A_LoopReadLine,:
				if (flpr2 <> "")
					{
						fldrapnd.= A_LoopReadLine . "|" . A_LoopReadLine . "`n"
						;;FileAppend,%A_LoopReadLine%`n,rj\%proq%_inclfl.tdb
						continue
					}
				if (jakfil = 1)
					{
						splitpath,A_LoopReadLine,ifilk,,,consolid
						indiv1= 
						indiv2= 
						stringsplit,indiv,consolid,%condlm%
						if (condlm = "")
							{
								indiv1= %consolid%
							}
						romcnt= 
						Loop, Read, %curq%
							{
								ftmp1= 
								ftmp2= 
								stringsplit,ftmp,A_LoopReadLine,:
								if (ftmp2 = "")
									{
										continue
									}
								SplitPath,A_LoopReadLine,jrf,jrd,jrx,jrn
								mindiv1= 
								mindiv2= 
								stringsplit,mindiv,jrn,%condlm%
								if (condlm = "")
									{
										mindiv1= %jrn%
									}
								if (indiv1 = mindiv1)
									{								
										romcnt+=1
									}
							}

						Loop, Read, rj\%proq%#c%romcnt%.jak
							{
								nh= 
								if (indiv1 = A_LoopReadLine)
									{
										nh= 1
										continue
									}
							}
						if (nh = "")
							{
								FileAppend,%indiv1%|%ifilk%`n,rj\%proq%#c%romcnt%.jak
							}
					}
			}	

		;;FileRead,fldrapnd,rj\%proq%_inclfl.tdb
		FileAppend,%fldrapnd%`n,rj\%proq%#c.jak
		FileMove,%curq%,%curq%.bak,1
		RJQNUM-= 1
	}

Loop, rj\*.jak
	{
		curjk:= A_LoopFileFullPath
		FileRead, CURTDB, %curjk%
		curjt:= A_LoopFileName
		StringSplit,divrm,curjt,#
		curjf:= divrm1
		RVLKUP= %curtjf%
		gosub, SHRTNMLkUp
		%SHRTNM%CFGF= 
;{;;;;  template launcher creation ;;;;;;
		IniRead,RJABSOLROM,rj\%curjf%.ini,%curjf%,RJABSOLROM
		IniRead,emuname,rj\%curjf%.ini,%curjf%,RJEMUPRESET
		IniRead,RJKEYOW,rj\%curjf%.ini,%curjf%,RJKEYOW
		IniRead,RJKEYMON,rj\%curjf%.ini,%curjf%,RJKEYON
		IniRead,RJMAP1ROFTYP,rj\%curjf%.ini,%curjf%,RJMAP1ROFTYP
		IniRead,RJMAP2ROFTYP,rj\%curjf%.ini,%curjf%,RJMAP2ROFTYP
		IniRead,RJMAPRET,rj\%curjf%.ini,%curjf%,RJMASTERPROF
		IniRead,RJMAP2PL,rj\%curjf%.ini,%curjf%,RJPLYR2
		IniRead,RJMAP1PL,rj\%curjf%.ini,%curjf%,RJPLYR1
		;;IniRead,optparse,rj\%curjf%.ini,%curjf%
		IniRead,RJROMINJ,rj\%curjf%.ini,%curjf%,RJROMINJ
		IniRead,RJQUOTES,rj\%curjf%.ini,%curjf%,RJQUOTES
		IniRead,RJPATH,rj\%curjf%.ini,%curjf%,RJPATH
		IniRead,RJEXT,rj\%curjf%.ini,%curjf%,RJEXT
		IniRead,RJEMULOC,rj\%curjf%.ini,%curjf%,RJEMULOC
		IniRead,RJKEYMAPPER,rj\%curjf%.ini,%curjf%,RJKEYMAPPER
		IniRead,RJPATH,rj\%curjf%.ini,%curjf%,RJPATH
		IniRead,RJRUNDIR,rj\%curjf%.ini,%curjf%,RJRUNDIR
		IniRead,RJEMUARGS,rj\%curjf%.ini,%curjf%,RJEMUARGS
		IniRead,RJPRERUN,rj\%curjf%.ini,%curjf%,RJPRERUN
		IniRead,RJPOSTRUN,rj\%curjf%.ini,%curjf%,RJPOSTRUN
		IniRead,RJPOSTOPT,rj\%curjf%.ini,%curjf%,RJPOSTOPT
		IniRead,RJPREOPT,rj\%curjf%.ini,%curjf%,RJPREOPT
		IniRead,NICEFLDR,rj\%curjf%.ini,%curjf%,NICEFLDR
		;;IniRead,SETLST,rj\%curjf%.ini,%curjf%,SETLST
		IniRead,RJEMUOPTS,rj\%curjf%.ini,%curjf%,RJEMUOPTS
		IniRead,RJPRECFG,rj\%curjf%.ini,%curjf%,RJPRECFG
		IniRead,RJPOSTCFG,rj\%curjf%.ini,%curjf%,RJPOSTCFG
		IniRead,RJEMUCFG,rj\%curjf%.ini,%curjf%,RJEMUCFG
		IniRead,RJEMUCFGOV,rj\%curjf%.ini,%curjf%,RJEMUCFGOV
		IniRead,RJLNCHCFGOW,rj\%curjf%.ini,%curjf%,RJLNCHCFGOW
		IniRead,RJLNCHCFG,rj\%curjf%.ini,%curjf%,RJLNCHCFG
		IniRead,RJROMSPL,rj\%curjf%.ini,%curjf%,RJROMXT
		IniRead,RJCONSOLID,rj\%curjf%.ini,%curjf%,RJCONSOLID
		IniRead,RJEXTRARC,rj\%curjf%.ini,%curjf%,RJEXTRARC
		IniRead,RJARCLOC,rj\%curjf%.ini,%curjf%,RJARCLOC
		FileCreateDir,rj\sysCfgs\%curjf%
		FileCreateDir,tmp\%curjf%
		RJROMXTINJ= 
		Loop, Parse, RJROMSPL,`,
			{
				RJROMXTINJ.= """" . "*" . A_LoopField . """" . A_Space
			}
		
		RJROMXTINJ= %RJROMXTINJ%
		;;StringReplace, RJROMSPL, RJROMSPL,`,,"%A_Space%,All
		;;StringReplace, RJROMSPL, RJROMSPL,.,"*.,All
		IniRead,emuloc,apps.ini,Emulators,%emuname%
		if (RJEMULOC <> 0)
			{
				emuloc= %RJEMULOC%
			}
		
		SplitPath,emuloc,emuxe,emulocd

		FileRead, toapa, rj\emuCfgs\rjcmd_header.set
		StringReplace, toapa,toapa,[EMUL],%emulocd%,All
		StringReplace, toapa,toapa,[EMUZ],%emuxe%,All
		StringReplace, toapa,toapa,[AMC],%AMCK%,All
		StringReplace, toapa,toapa,[XPD],%XPDK%,All
		if (RJKEYMAPPER = "Antimicro")
				{
					StringReplace, toapa,toapa,[XPALT],1,All			
				}
		if (RJRUNDIR = 1)
			{
				StringReplace, toapa,toapa,[FRLOC],,All
			}
		
		StringSplit,RJMAPRET,RJPMAPTR,RJMAPTD,,RJMAPTN

		StringSplit,RJMAP1PL,RJMAP1PLF,RJMAP1PLD
		StringReplace,toapa,toapa,[PLAYER1],%RJMAP1PLF%,All
		SplitPath,RJMAP1PL,rjmp1fn,rjmp1dn,rjmp1xn,rjmp1no
		RJMP1LC= 
		if (rjmp1dn = "")
			{
				RJMP1LC= 1
			}
		StringSplit,RJMAP2PL,RJMAP2PLF,RJMAP2PLD
		StringReplace,toapa,toapa,[PLAYER2],%RJMAP2PLF%,All
		SplitPath,RJMAP2PL,rjmp2fn,rjmp2dn,rjmp2xn,rjmp2no
		RJMP2LC= 
		if (rjmp2dn = "")
			{
				RJMP2LC= 1
			}
		StringReplace,toapa,toapa,[MediaCenter],%RJMAPTN%,All
		
		
		FileRead, toapb, rj\emuCfgs\rjcmd_prejoy.set
		if (RJMAP1PLD = "")
			{
				RJMAP1PLD= `%GAMDIR`%
			}
		
		StringReplace,toapb,toapb,[APL1LOC],%RJMAP1PLD%,All
		StringReplace,toapb,toapb,[XPL1LOC],%RJMAP1PLD%,All
		if (RJMAP2PLD = "")
			{
				RJMAP2PLD= `%GAMDIR`%
			}

		StringReplace,toapb,toapb,[APL2LOC],%RJMAP2PLD%,All
		StringReplace,toapb,toapb,[XPL2LOC],%RJMAP2PLD%,All
		rprn= 
		avvr= 
		preruni= 
		Loop, Parse, RJPRERUN,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				ikiv1= 
				ikiv2= 
				stringsplit,ikiv,A_LoopField,>
				stringreplace,avvr,ikiv1,[ROMPATH],`%GAMDIR`%,All
				stringreplace,avvr,avvr,[ROM],`%ROM`%,All
				stringreplace,avvr,avvr,[ROMF],`%ROMF`%,All
				stringreplace,avvr,avvr,[EMUL],`%EMUL`%,All
				stringreplace,avvr,avvr,[EMUZ],`%EMUZ`%,All
				rprn+=1	
				rprw= 
				STRTYP:= `%LAUNCH`%
				Loop, Parse, RJPREW,|
					{
						if (A_LoopField = "")
							{
								continue
							}
						rprw+=1
						if (rprw = rprn)
							{
								if (A_LoopField = 0)
									{
										STRTYP:= `%LSTART`%
									}
							}
					}
				preruni.= STRTYP . A_Space . """" . avvr . """"
				;;FileAppend,%STRTYP% %avvr%,rj\%proq%_preun.ini
				rjpro= 
				Loop, Parse, RJPREOPT,|
					{	
						if (A_LoopField = "")
							{
								continue
							}
						rjpro+=1
						if (rjpro = rprn)
							{
								if (A_LoopField = ":")
									{
										preruni.= "`n"
										;;FileAppend,`n,rj\%proq%_preun.ini
										continue
									}
								stringreplace,avvr,A_LoopField,[ROMPATH],`%GAMDIR`%,All
								stringreplace,avvr,avvr,[ROM],`%ROM`%,All
								stringreplace,avvr,avvr,[ROMF],`%ROMF`%,All
								stringreplace,avvr,avvr,[EMUL],`%EMUL`%,All
								stringreplace,avvr,avvr,[EMUZ],`%EMUZ`%,All
								preruni.= A_Space . avvr . "`n"
			;;					FileAppend, %A_Space%%avvr%`n,rj\%proq%_preun.ini
							}
					}
			}
		FileRead, toapc, rj\emuCfgs\rjcmd_runloop.set
		if (RJABSOLROM = 1)
			{
				StringReplace, toapc,toapc,[CMDLINEGET],[ABSOLROM]
			}
		StringReplace, toapc,toapc,[CMDLINEGET],%RJROMXTINJ%
		;;StringReplace, toapc,toapc,[CMDLINEGET],%RJROMSPL%
		FileRead, toapd, rj\emuCfgs\rjcmd_runproc.set
		if (BLNKLNCH = 1)
			{
				StringReplace,toapd,toapd,[RUNOPTS][ROMIN][RUNARGS],,All
			}
		if (RJEMUOPTS = "")
			{
				RJEMUOPTS:= A_Space
			}
		StringReplace,toapd,toapd,[RUNOPTS],%RJEMUOPTS%,All
		StringReplace,toapd,toapd,[RUNARGS],%RJEMUARGS%,All
		
		StringReplace,toapd,toapd,[EMUPATH],`%EMUL`%,All
		StringReplace,toapd,toapd,[ROMPATH],`%GAMDIR`%,All
		
		if (RJPATH = 0)
			{
				if (RJQUOTES = 0)
					{
						StringReplace,toapd,toapd,[ROMIN],%RJROMINJ%,All
					}
				if (RJQUOTES = 1)
					{
						StringReplace,toapd,toapd,[ROMIN],"%RJROMINJ%",All
					}
			}
		if (RJPATH = 1)
			{
				if (RJQUOTES = 0)
					{
						StringReplace,toapd,toapd,[ROMIN],`%GAMDIR`%\%RJROMINJ%,All
					}
				if (RJQUOTES = 1)
					{
						StringReplace,toapd,toapd,[ROMIN],"`%GAMDIR`%\%RJROMINJ%",All
					}
			}
		StringReplace,toapd,toapd,<,%A_Space%,All
		FileRead, toape, rj\emuCfgs\rjcmd_postjoy.set
		rprn= 	
		avvx= 
				postruni= 
		Loop, Parse, RJPOSTRUN,|
			{
				if (A_LoopField = "")
					{
						continue
					}
				ikiv1= 
				ikiv2= 
				stringsplit,ikiv,A_LoopField,>
				stringreplace,avvx,ikiv1,[ROMPATH],`%GAMDIR`%,All
				stringreplace,avvx,avvx,[ROM],`%ROM`%,All
				stringreplace,avvx,avvx,[ROMF],`%ROMF`%,All
				stringreplace,avvx,avvx,[EMUL],`%EMUL`%,All
				stringreplace,avvx,avvx,[EMUZ],`%EMUZ`%,All
				rprn+=1	
				rprw= 
				STRTYP:= `%LAUNCH`%
				Loop, Parse, RJPOSTW,|
					{
						if (A_LoopField = "")
							{
								continue
							}
						rprw+=1
						if (rprw = rprn)
							{
								if (A_LoopField = 0)
									{
										STRTYP:= `%LSTART`%
									}
							}
					}
				postruni.= STRTYP . A_Space . """" . avvx . """"
				;;FileAppend,%STRTYP% %avvx%,rj\%proq%_postun.ini
				rjpro= 
				Loop, Parse, RJPOSTOPT,|
					{	
						if (A_LoopField = "")
							{
								continue
							}
						rjpro+=1
						if (rjpro = rprn)
							{
								if (A_LoopField = ":")
									{
										postruni.= "`n"
										;;FileAppend,`n,rj\%proq%_postun.ini
										continue
									}
								stringreplace,avvx,A_LoopField,[ROMPATH],`%GAMDIR`%,All
								stringreplace,avvx,avvx,[EMUPATH],`%EMUL`%,All
								stringreplace,avvx,avvx,[ROM],`%ROM`%,All
								stringreplace,avvx,avvx,[ROMF],`%ROMF`%,All
								stringreplace,avvx,avvx,[EMUL],`%EMUL`%,All
								stringreplace,avvx,avvx,[EMUZ],`%EMUZ`%,All
								postruni.= A_Space . avvx . "`n"
			;;					FileAppend, %A_Space%%avvx%`n,rj\%proq%_postun.ini
							}
					}
			}
		;;FileRead,preruni,rj\%curjf%_preun.ini
		;;FileRead,postruni,rj\%curjf%_postun.ini
		FileDelete,rj\sysCfgs\%curjf%\lnch.cmd
		
		FileAppend, %toapa%, rj\sysCfgs\%curjf%\lnch.cmd
		Loop, Parse, RJPRECFG,|
			{
				FileAppend,`%XFG`%%A_LoopField%`n,rj\sysCfgs\%curjf%\lnch.cmd
			}
		;;FileAppend,%STRTYP% %avvx%,rj\%proq%_postun.ini	

		FileAppend,%toapb%,rj\sysCfgs\%curjf%\lnch.cmd
		FileAppend,%preruni%,rj\sysCfgs\%curjf%\lnch.cmd
		FileAppend,%toapc%,rj\sysCfgs\%curjf%\lnch.cmd
		FileAppend,%toapd%,rj\sysCfgs\%curjf%\lnch.cmd
		FileAppend,%postruni%,rj\sysCfgs\%curjf%\lnch.cmd

		Loop, Parse, RJPOSTCFG,|
			{
				FileAppend,`%XFG`%%A_LoopField%`n,rj\sysCfgs\%curjf%\lnch.cmd
			}


		StringReplace,toape,toape,[AMLOC],%RJMAPTD%,All
		StringReplace,toape,toape,[XPDLOC],%RJMAPTD%,All

		FileAppend,%toape%,rj\sysCfgs\%curjf%\lnch.cmd

;};;;;;;;

;{;;;;;;;;;;;;;;;;    EMULATOR CFG Configuration    ;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;
		if (NICEFLDR <> 1)
			{	
				inclfl= 
				IniRead,subdls,rj\%curjf%.ini,%curjf%,RJSUBDS
				Loop, Parse, CURTDB, `n, `r
					{
						
						if (A_LoopField = "")
							{
								continue
							}
						cursysfld= %A_LoopField%
						ninto1= 
						ninto2= 
						ibjn1= 
						ibjn2= 
						stringsplit,ibjn,A_LoopField,|
						stringsplit,ninto,ibjn1,:
						mvrom= %ninto2%
						nwjak= %mvrom%
						if (ninto2 <> "")
							{
								inclfl.= ninto2 . "`n"
								;;FileAppend, %ninto2%`n,rj\%curjf%_inclfl.tdb
							}
						if (ninto2 = "")
							{
								mvrom= %ibjn1%
								nwjak= %mvrom%
								FileCreateDir, %RJSYSTEMS%\%curjf%\%nwjak%
								inclfl.= nwjak . "`n"
								;;FileAppend, %nwjak%`n,rj\%curjf%_inclfl.tdb
							}
						
						Loop, Parse, subdls,|
							{		
								subda1= 
								subda2= 
								StringSplit,subda,A_LoopField,:
								FileCreateDir, %RJSYSTEMS%\%curjf%\%nwjak%\%subda1%
								if (subda2 = 1)
									{
										FileSetAttrib,+H,%RJSYSTEMS%\%curjf%\%nwjak%\%subda1%,2
									}
							}
						
								nwjakxtr= 
								SplitPath,ibjn2,nwjakf,nwjakd,nwjakx,nwjakn
								if (nwjakx = "zip")
									{
										nwjakxtr= 1
									}
								if (nwjakx = "rar")
									{
										nwjakxtr= 1
									}
								if (nwjakx = "7z")
									{
										nwjakxtr= 1
									}
								IF (nwjakxtr = 1)
									{
										if (RJEXTRARC = 1)
											{
												RunWait, %comspec% /c "7za.exe e -y "%RJSYSTEMS%\%curjf%\%ibjn2%" -O"%RJSYSTEMS%\%curjf%\%nwjakn%" ",,hide
												if (RJARCLOC = 0)
													{
														FileMove,%RJSYSTEMS%\%curjf%\%ibjn2%,tmp\%curjf%\%ibjn2%,1
													}
												if (RJARCLOC = 2)
													{
														FileDelete,%RJSYSTEMS%\%curjf%\%ibjn2%
													}
											}
										FileMove,%RJSYSTEMS%\%curjf%\%ibjn2%,%RJSYSTEMS%\%curjf%\%nwjak%\%ibjn2%
										If (errorlevel > 0)
											{
												FileMove,%RJSYSTEMS%\%curjf%\%ibjn2%,tmp\%curjf%\%ibjn2%,1
											}
										if (RJEXTRARC = 2)
											{
												RunWait, %comspec% /c "7za.exe e -y "%RJSYSTEMS%\%curjf%\%nwjak%\%ibjn2%" -O"%RJSYSTEMS%\%curjf%\%nwjak%" ",,hide
													if (RJARCLOC = 0)
														{
															FileMove,%RJSYSTEMS%\%curjf%\%nwjak%\%ibjn2%,tmp\%curjf%\%ibjn2%,1
														}
													if (RJARCLOC = 2)
														{
															FileDelete,%RJSYSTEMS%\%curjf%\%nwjak%\%ibjn2%
														}
											}	
									}
								IF (nwjakxtr = "")
									{
												FileMove,%RJSYSTEMS%\%curjf%\%ibjn2%,%RJSYSTEMS%\%curjf%\%nwjak%\%ibjn2%
												If (errorlevel > 0)
													{
														FileMove,%RJSYSTEMS%\%curjf%\%ibjn2%,tmp\%curjf%\%ibjn2%,1
													}
											}
																
					}
			}
				;;Loop, Read, rj\%curjf%_inclfl.tdb
				Loop, Parse, inclfl, `n, `r
					{						
						if (A_LoopField = "")
							{
								continue
							}
						curomfd= %A_LoopField%
						if (RJLNCHCFG <> 0)
							{
								if (RJABSOLROM = 1)
									{	
										if (RJROMXT = "*.*")
											{
												continue
											}
										FileRead, newlnch, rj\sysCfgs\%curjf%\lnch.cmd
										FileMove, rj\sysCfgs\%curjf%\lnch.cmd,rj\sysCfgs\%curjf%\lnch.orig,1
										extpvr= %RJROMSPL%
										stringreplace,extpvr,extpvr,.,,All
										stringsplit,extpvx,extpvr,`,
										ar := Object()
										Loop, %extpvx0%
											{
												new= % (extpvx%a_index%)
												if (extpvx%a_index% <> "")
													{
														ar.insert(new)
													}
											}
										Loop, %RJSYSTEMS%\%curjf%\%curomfd%\*.*
											{
												injromn= "*.*"
												ext= %A_LoopFileExt%
												for k, v in ar
													{
														extm:= v
														if (ext = extm)
															{
																injromn= %A_LoopFileFullPath%
																stringreplace,newlnch,newlnch,[ABSOLROM],"%injromn%",All
																break
															}
													}
											}
										FileAppend, %newlnch%,rj\sysCfgs\%curjf%\lnch.cmd
									}
								FileCopy, rj\sysCfgs\%curjf%\lnch.cmd,%RJSYSTEMS%\%curjf%\%curomfd%\%curomfd%.bat,%RJLNCHCFGOW%
								FileMove, rj\sysCfgs\%curjf%\lnch.orig,rj\sysCfgs\%curjf%\lnch.cmd,1
							}
						if (RJEMUCFG <> 0)
							{
								jsinvf= % %SHRTNM%CFGF
								jsinvr= % %SHRTNM%CFGR
								jsicpl:= jsinvf . jsinvr
								Loop, Parse, jsinvf,|
									{
										fileCopy, rj\sysCfgs\%curjf%\%A_LoopField%,%RJSYSTEMS%\%curjf%\%curomfd%
									}
								Loop, Parse, jsinvr,|
									{
										FileRead, romrpl,rj\sysCfgs\%curjf%\%A_LoopField%
										stringreplace, romrpl,romrpl,[ROMPTH],%RJSYSTEMS%\%curjf%\%curomfd%,All
										cinjr= %curomfd%
										Loop, Parse, CURTDB, `n, `r
											{
												stringsplit,injrom,A_LoopField,|,:
												if (injrom1 = curomfd)
													{
														splitpath,injrom2,,,,cinjr
														break
													}
											}
										stringreplace, romrpl,romrpl,[ROM],%cinjr%,All
										FileAppend,%romrpl%,%RJSYSTEMS%\%curjf%\%A_LoopField%
									}

							}
						If (RJKEYMON = 1)
							{
								if (RJMP1LC = 1)
									{
										curjoyf= %curjf%
										if (RJMAP1ROFTYP = 0)
											{
												joysubt= Joystick
											}
										if (RJMAP1ROFTYP = 1)
											{
												joysubt= Keyboard
											}
										if (RJMAP1ROFTYP = 2)
											{
												joysubt= Blank
												curjoyf= All
											}
										FileCopy, rj\joyCfgs\%RJKEYMAPPER%\%joysubt%\%curjoyf%\Player1.*,%RJSYSTEMS%\%curjf%\%curomfd%,%RJKEYOW%
									}
								if (RJMP1LC = "")
									{
										FileCopy, %RJMAP1P%,%RJSYSTEMS%\%curjf%\%curomfd%,%RJKEYOW%	
									}
								if (RJMP2LC = 1)
									{
										curjoyf= %curjf%
										if (RJMAP2ROFTYP = 0)
											{
												joysubt= Joystick
											}
										if (RJMAP2ROFTYP = 1)
											{
												joysubt= Keyboard
											}
										if (RJMAP2ROFTYP = 2)
											{
												joysubt= Blank
												curjoyf= All
											}
										FileCopy, rj\joyCfgs\%RJKEYMAPPER%\%joysubt%\%curjoyf%\Player2.*,%RJSYSTEMS%\%curjf%\%curomfd%,%RJKEYOW%
									}
								if (RJMP2LC = "")
									{
										FileCopy, %RJMAP2P%,%RJSYSTEMS%\%curjf%\%curomfd%,%RJKEYOW%	
									}
							}		
					}
		if (NICEFLDR = 1)
			{
				SETGAM= MAME_C.gam
				ifExist, gam\%curjf%.gam
					{
						SETGAM= %curjf%.gam
					}
				FileRead, fldmvr, gam\%SETGAM%
				FileCreateDir, %RJSYSTEMS%\%curjf%\SOURCE
				FileSetAttrib,+H,%RJSYSTEMS%\%curjf%\SOURCE,2
				IniRead,subdls,rj\%curjf%.ini,%curjf%,RJSUBDS
				inclfl= 
				Loop, Parse, CURTDB, `n, `r
					{
						if (A_LoopField = "")
							{
								continue
							}
						ninto1= 
						ninto2= 
						ibjn1= 
						ibjn2= 
						stringsplit,ibjn,A_LoopField,|
						stringsplit,ninto,ibjn1,:
						mvrom= %ninto2%
						nwjak= %mvrom%
						if (ninto2 <> "")
							{
								mvrom= %ninto2%
								nwjak= %mvrom%
								inclfl.= nwjak . "`n"
								continue
								;;FileAppend, %nwjak%`n,rj\%curjf%_inclfl.tdb
							}
							if (ninto2 = "")
								{
									mvrom= %ibjn1%
									nwjak= %mvrom%
									;;FileCreateDir, %RJSYSTEMS%\%curjf%\%nwjak%
									;;inclfl.= nwjak . "`n"
									;;FileAppend, %nwjak%`n,rj\%curjf%_inclfl.tdb
								}
						if (RJCONSOLID <> "Individuate")
							{
								mvromx1= 
								stringsplit,mvromx,nwjak,%RJCONSOLID%
								if (mvromx1 <> "")
									{
										nwjak= %mvromx1%
									}
							}	
						gosub, nicemove
						FileCreateDir, %RJSYSTEMS%\%curjf%\%nwjak%
						inclfl.= nwjak . "`n"
						;;FileAppend, %nwjak%`n,rj\%curjf%_inclfl.tdb
						Loop, Parse, subdls,|
							{		
								subda1= 
								subda2= 
								StringSplit,subda,A_LoopField,:
								FileCreateDir, %RJSYSTEMS%\%curjf%\%nwjak%\%subda1%
								if (subda2 = 1)
									{
										FileSetAttrib,+H,%RJSYSTEMS%\%curjf%\%nwjak%\%subda1%,2
									}
							}
						
						nwjrs= %mvrom%
						if (RJCONSOLID = "Individuate")
							{
								mvromtx= %mvrom%.*
							}
						if (RJCONSOLID <> "Individuate")
							{
								mvromcc1= 
								stringsplit,mvromcc,mvrom,%RJCONSOLID%
								mvromtx= %mvromcc1%*
							}
						nicesrc= 1	
						nicedir= SOURCE	
						if (curjf = "Sammy - Atomiswave")
							{
								nicesrc=
								nicedir= %nwjak%	
							}
						if (curjf = "Sega - NAOMI")
							{
								nicesrc=
								nicedir= %nwjak%	
							}
						if (curjf = "Sega - Hikaru")
							{
								nicesrc=
								nicedir= %nwjak%	
							}
						if (curjf = "Galeco")
							{
								nicesrc=
								nicedir= %nwjak%	
							}
						FileMove,%RJSYSTEMS%\%curjf%\%ibjn2%,%RJSYSTEMS%\%curjf%\%nicedir%\%ibjn2%
						if (errorlevel > 0)
							{
								FileMove,%RJSYSTEMS%\%curjf%\%mvrom%,tmp\%curjf%,1
							}
						if (nicesrc = 1)
							{
								RunWait, %comspec% cmd /c "mklink /H "%RJSYSTEMS%\%curjf%\%nwjak%\%ibjn2%" "%RJSYSTEMS%\%curjf%\SOURCE\%ibjn2%" ",,hide											
							}
					}
				Loop, Parse, inclfl, `n, `r
					{
						if (A_LoopField = "")
							{
								continue
							}
						nwinclfl= %A_LoopField%
						if (RJLNCHCFG <> 0)
							{
								FileCopy, rj\sysCfgs\%curjf%\lnch.cmd,%RJSYSTEMS%\%curjf%\%nwinclfl%\%nwinclfl%.bat,%RJLNCHCFGOW%
							}
						
						if (RJEMUCFG <> 0)
							{
								jsinvf= % %SHRTNM%CFGF
								jsinvr= % %SHRTNM%CFGR
								jsicpl:= jsinvf . jsinvr
								Loop, Parse, jsinvf,|
									{
										if (A_LoopField = "")
											{
												continue
											}
										fileCopy, rj\sysCfgs\%curjf%\%A_LoopField%,%RJSYSTEMS%\%curjf%\%nwinclfl%,%RJEMUCFGOV%
									}
								Loop, Parse, jsinvr,|
									{
										if (A_LoopField = "")
											{
												continue
											}
										FileRead, romrpl,rj\sysCfgs\%curjf%\%A_LoopField%
										stringreplace, romrpl,romrpl,[ROMPTH],%RJSYSTEMS%\%curjf%\%nwinclfl%,All
										stringreplace, romrpl,romrpl,[ROM],%nwinclfl%,All
										FileAppend,%romrpl%,%RJSYSTEMS%\%curjf%\%nwinclfl%
									}
							}
						If (RJKEYMON = 1)
							{
								if (RJMP1LC = 1)
									{
										curjoyf= %curjf%
										if (RJMAP1ROFTYP = 0)
											{
												joysubt= Joystick
											}
										if (RJMAP1ROFTYP = 1)
											{
												joysubt= Keyboard
											}
										if (RJMAP1ROFTYP = 2)
											{
												joysubt= Blank
												curjoyf= All
											}
										FileCopy, rj\joyCfgs\%RJKEYMAPPER%\%joysubt%\%curjoyf%\Player1.*,%RJSYSTEMS%\%curjf%\%nwinclfl%,%RJKEYOW%
									}
								if (RJMP1LC = "")
									{
										FileCopy, %RJMAP1P%,%RJSYSTEMS%\%curjf%\%nwinclfl%,%RJKEYOW%	
									}
								if (RJMP2LC = 1)
									{
										curjoyf= %curjf%
										if (RJMAP2ROFTYP = 0)
											{
												joysubt= Joystick
											}
										if (RJMAP2ROFTYP = 1)
											{
												joysubt= Keyboard
											}
										if (RJMAP2ROFTYP = 2)
											{
												joysubt= Blank
												curjoyf= All
											}
										FileCopy, rj\joyCfgs\%RJKEYMAPPER%\%joysubt%\%curjoyf%\Player2.*,%RJSYSTEMS%\%curjf%\%nwinclfl%,%RJKEYOW%
									}
								if (RJMP2LC = "")
									{
										FileCopy, %RJMAP2P%,%RJSYSTEMS%\%curjf%\%nwinclfl%,%RJKEYOW%
									}
							}
					}			
			}
	}
guicontrol,,RJTXTAB, %RJQNUM% Systems
guicontrol,,RJPROCQ, CONFIRM %RJQNUM%	
return

nicemove:
Loop, Parse, fldmvr,`n
	{
		mvrpt1= 
		mvrpt2= 
		mvaba1= 
		mvaba2= 
		mvrpx1= 
		mvrpx2= 
		stringsplit,mvrpt,A_LoopField,=
		stringsplit,mvaba,mvrpt1,.
		if (mvrom = mvaba1)
			{
				nwjak= %mvrpt2%
				if (RJCONSOLID <> "Individuate")
					{
						stringsplit,mvrpx,mvrpt2,%RJCONSOLID%
						if (mvrpx1 <> "")
							{
								nwjak= %mvrpx1%
							}
					}
				break
			}
	}
return

NICEFLDR:
return

Individuate:
return

;};;;;;;;;;;;;;;;;;;;

;{;;;;;  Set Range for ROM-List  ;;;;;;;;;;
RJSETRANGE:
gui,submit,nohide
return


;};;;;;;;;;;;;;

;{;;;;;  ADD SYSTEM TO QUEUE  ;;;;;

RJADDQ:
gui,submit,nohide
quryad= 1
guicontrolget,RJSYSDD,,RJSYSDD
guicontrolget,RJQLSTDD,,RJQLSTDD
SYSTMQ= 
RJQNUM:= 0
Loop, rj\*_q.tdb
	{
		RJQNUM+=1
		SplitPath,A_LoopFileName,,,,dbqv
		StringTrimRight,dbqueue,dbqv,2
		SYSTMQ.= dbqueue . "|"
	}

Loop, Parse, SYSTMQ, |
	{
		if (RJSYSDD = A_LoopField)
			{
				return
			}
	}
	
guicontrol,,RJINCEXCL,|All||A-Z|#

FileCopy, rj\cur.ini, rj\%RJSYSDD%.ini,1

RJQNUM+=1
gosub, MUTEJACKOPT
gui, Listview, RJLSTV
guicontrol,disable,RJLSTV
SYSTMQ.= RJSYSDD . "|"

QItems= 
QItems:= LVGetCheckedItems("", "ahk_id" . RJLV)
FileDelete, rj\%RJSYSDD%_incl.tdb
Loop, Parse, QItems,`n
	{
		qarray1= 
		qarray2= 
		stringsplit,qarray,A_LoopField,\
		FileAppend, %qarray1%`n,rj\%RJSYSDD%_incl.tdb
	}
FileMove,rj\%RJSYSDD%_incl.tdb, rj\%RJSYSDD%_q.tdb,1

guicontrol,,RJTXTAB,%RJQNUM%-Systems
guicontrol,,RJQLSTDD,|QUEUE||%SYSTMQ%
guicontrol,,RJSYSDD,|Systems||%systmfldrs%
SB_SetText("Adding " RJSYSDD " to the system queue")
guicontrol,disable,RJADDQ
Guicontrol,,RJPROCQ,CONFIRM %RJQNUM%
Iniread,syspref,rj\EmuCfgPresets.ini,%RJSYSDD%
loop, parse, syspref,`n
	{
		stringsplit,curpref,A_LoopField,=
		IniWrite,%curpref2%,rj\%RJSYSDD%.ini,%RJSYSDD%,%curpref2%
	}
guicontrol,enable,RJLSTV
gosub,OPENJACKOPT
gosub, RJSYSDD
return
;};;;;;;;;;;;;;;;;;;;;;;

;{;;;;  REMOVE SYSTEM FROM QUEUE  ;;;;;
DELRJQ:
Msgbox,8452,Clear the Queue,Delete All Systems in the queue?
		IfMsgBox, Yes
			{
				FileDelete,rj\*.tdb
				SYSTMQ= 
				guicontrol,,RJQLSTDD,|QUEUE||
				RJQNUM:= 0
				guicontrol,,RJTXTAB,%RJQNUM%-Systems
				guicontrol,,RJSYSDD,|Systems||%systmfldrs%
				guicontrol,,RJINCEXCL,|All||A-Z|#
				SB_SetText("cleared the system queue")
				Guicontrol,,RJPROCQ,CONFIRM
				return
			}
return

RJREMQSYS:
gui,submit,nohide
SYSTMQF= 
guicontrolget,RJQLSTDD,,RJQLSTDD
if (RJQLSTDD = "QUEUE")
	{
		gosub, DELRJQ
		return		
	}

gui, Listview, RJLSTV
SYSTMQ= 
RJQNUM:= 0
Loop, rj\*_q.tdb
	{
		RJQNUM+=1
		SplitPath,A_LoopFileName,,,,dbqv
		StringTrimRight,dbqueue,dbqv,2
		SYSTMQ.= dbqueue . "|"
	}

Loop, Parse, SYSTMQ, |
	{
		if (A_Loopfield = RJQLSTDD)
			{
					continue
			}	
		SYSTMQF.= A_LoopField . "|"
	}
SYSTMQ:= SYSTMQF
GUICONTROL,,RJTXTAB,%RJQNUM%-Systems
Guicontrol,,RJPROCQ,CONFIRM %RJQNUM%
ifexist, rj\%RJQLSTDD%_q.tdb
	{
		FileDelete, rj\%RJQLSTDD%_q.tdb
		RJQNUM-=1
	}
SB_SetText("Removing " RJQLSTDD " from the system queue")
if (RJSYSDD = RJQLSTDD)
	{
		Guicontrol,,RJSYSDD,|Systems||%systmfldrs%
		guicontrol,,RJINCEXCL,|All||A-Z|#
		gosub, RJSYSDD
	}
Guicontrol,,RJQLSTDD,|QUEUE||%SYSTMQ%
guicontrol,,RJTXTAB, %RJQNUM% Systems
guicontrol,,RJPROCQ, CONFIRM %RJQNUM%
gosub, RJSYSDD
return
;};;;;;;;;;;;;;;;;;;;

RJMAP1PLOPN:
gui,submit,nohide

return

RJMAP2PLOPN:
gui,submit,nohide

return

RJMAPRETOPN:
gui,submit,nohide
FileSelectFile,RJMASTERPROF,3,Mediacenter.*,Select FE Profile
if (RJMASTERPROF = "")
	{
		return
	}
IniWrite, %RJMASTERPROF%,rj\cur.ini,%RJSYSDD%,RJMASTERPROF	
return

RJBUTM:
gui,submit,nohide
RJEMULOCT= 
rjemuxe= 
rjemulocd= 
FileSelectFile, RJEMULOCT, 3, ,Select emulator,*.exe
if (RJEMULOCT = "")
	{
		return
	}
RJEMULOC= %RJEMULOCT%
SplitPath,RJEMULOC,rjemuxe,rjemulocd
return

;{;;;;;;;;;;   REMOVE CHECKED ITEMS FROM LIST   ;;;;;;;;;;;;;;

RJSALITMS:
gui,submit,nohide
Gui, ListView, RJLSTV
LV_Modify(0,"+Select")
return
;};;;;;;;;;;

;{;;;;;;;;;;;  RJ RIGHTCLICK MENUS  ;;;;;;;;;;;;;;

TOGRJSEL:
gui,submit,nohide
gui,ListView,RJLSTV
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		RowChecked := LV_GetNext(RowNumber - 1 , "Checked" )

		If ( RowNumber = RowChecked )
		   {
				LV_Modify(RowNumber, "-Check")
				stringreplace,RJSYSDD_TDB,RJSYSDD_TDB,%curtxt%|0,%curtxt%|1,All

			}
		Else
			{
				LV_Modify(RowNumber, "Check")
				stringreplace,RJSYSDD_TDB,RJSYSDD_TDB,%curtxt%|0,%curtxt%|1,All

			}
	}
return

ADDRJSEL:
gui,submit,nohide
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		RowChecked := LV_GetNext(RowNumber - 1 , "Checked" )

		If ( RowNumber = RowChecked )
		   {
			}
		Else
			{
				LV_Modify(RowNumber, "Check")
				stringreplace,RJSYSDD_TDB,RJSYSDD_TDB,%curtxt%|0,%curtxt%|1,All
			}
	}
return

REMRJSEL:
gui,submit,nohide
RowNumber = 0  
Loop
	{
		RowNumber := LV_GetNext(RowNumber)  
		if not RowNumber  
			{
				break
			}
		LV_GetNext(RowNumber, Focused)
		LV_GetText(curtxt, RowNumber)
		RowChecked := LV_GetNext(RowNumber - 1 , "Checked" )

		If ( RowNumber = RowChecked )
		   {
				LV_Modify(RowNumber, "-Check")
				stringreplace,RJSYSDD_TDB,RJSYSDD_TDB,%curtxt%|1,%curtxt%|0,All
			}
		Else
			{
			}
	}
return

;};;;;;;;;;;;;;


;{;;;;  PRECFG ADD ;;;;;
RJADDPRECFG:
gui,submit,nohide
guicontrolget,RJPRECFGCBX,,RJPRECFGCBX
if (RJPRECFGCBX = "")
	{
		return
	}
subdna= 
RJPRECFG= 
IniRead, RJPRECFG,rj\cur.ini,%RJSYSDD%,RJPRECFG
RJPRECFGW= 
RJPRECFGR= 
Loop, parse, RJPRECFG,|
	{
		if (A_LoopField = RJPRECFGCBX)
			{
				subdna= 1
				SB_SetText("Command is already added")	
				continue
			}
			RJPRECFGR.= A_LoopField . "|"
			RJPRECFGW.= A_LoopField . "|"
	}
if (subdna = 1)
	{
		IniWrite,%RJPRECFGW%,rj\cur.ini,%RJSYSDD%,RJPRECFG
		return
	}
RJPRECFGW= 	
RJPRECFGR:= RJPRECFGCBX . "|"
Loop, parse, RJPRECFG,|
	{
		RJPRECFGR.= A_LoopField . "|" 
		RJPRECFGW.= A_LoopField . "|" 
	}
guicontrol,,RJPRECFGCBX,|%RJPRECFGR%
stringreplace,RJPRECFGW,RJPRECFGW,||,|,All
IniWrite, %RJPRECFGCBX%|%RJPRECFGW%,rj\cur.ini,%RJSYSDD%,RJPRECFG
SB_SetText("Command Added")
return
;};;;;;

;{;;;;   PRECFG REMOVE   ;;;;;
RJREMPRECFG:
gui,submit,nohide
guicontrolget,RJPRECFGCBX,,RJPRECFGCBX
if (RJPRECFGCBX = "")
	{
		return
	}
RJPRECFGRM= 
RJPRECFGRW= 
IniRead,RJPRECFG,rj\cur.ini,%RJSYSDD%,RJPRECFG

Loop, Parse,RJPRECFG,|	
	{
		if (A_LoopField <> RJPRECFGCBX)
			{
				RJPRECFGRM.= A_LoopField . "|"
				RJPRECFGRW.= A_LoopField . "|"
			}
	}

guicontrol,,RJPRECFGCBX,|%RJPRECFGRM%
stringreplace,RJPRECFGRW,RJPRECFGRW,||,|,All
IniWrite,%RJPRECFGRW%,rj\cur.ini,%RJSYSDD%,RJPRECFG
return
;};;;;;

;{;;;;  POSTCFG ADD  ;;;;
RJADDPOSTCFG:
gui,submit,nohide
guicontrolget,RJPOSTCFGCBX,,RJPOSTCFGCBX
if (RJPOSTCFGCBX = "")
	{
		return
	}
POSTCFGa= 
RJPOSTCFG= 
IniRead, RJPOSTCFG,rj\cur.ini,%RJSYSDD%,RJPOSTCFG
RJPOSTCFGW= 
RJPOSTCFGR= 
Loop, parse, RJPOSTCFG,|
	{
		if (A_LoopField = RJPOSTCFGCBX)
			{
				POSTCFGa= 1
			}
	}
if (POSTCFGa = 1)
	{
		return
	}	
Loop, parse, RJPOSTCFG,|
	{
		if (A_LoopField = RJPOSTCFGCBX)
			{
				POSTCFGa= 1
				SB_SetText("Command is already added")	
				continue				
			}
		RJPOSTCFGR.= A_LoopField . "|"
		RJPOSTCFGW.= A_LoopField . "|"
		}
if (POSTCFGa = 1)
	{
		IniWrite,%RJPOSTCFGW%,rj\cur.ini,%RJSYSDD%,RJPOSTCFG
		return
	}
RJPOSTCFGW= 	
RJPOSTCFGR:= RJPOSTCFGCBX . "|"
Loop, parse, RJPOSTCFGS,|
	{
		RJPOSTCFGR.= A_LoopField . "|" 
		RJPOSTCFGW.= A_LoopField . "|" 
	}
guicontrol,,RJPOSTCFGCBX,|%RJPOSTCFGLSTSR%
stringreplace,RJPOSTCFGW,RJPOSTCFGW,||,|,All
IniWrite, %RJPOSTCFGCBX%|%RJPOSTCFGW%,rj\cur.ini,%RJSYSDD%,RJPOSTCFG
SB_SetText("Command Added")
return

;};;;;;;

;{;;;;  POSTCFG REMOVE  ;;;;
RJREMPOSTCFG:
gui,submit,nohide
guicontrolget,RJPOSTCFGCBX,,RJPOSTCFGCBX
if (RJPOSTCFGCBX = "")
	{
		return
	}
RJPOSTCFGRM= 
RJPOSTCFGRW= 
RJPOSTCFGa= 
IniRead,RJPOSTCFG,rj\cur.ini,%RJSYSDD%,RJPOSTCFG

Loop, Parse, RJPOSTCFG,|	
	{
		if (A_LoopField <> RJPOSTCFGCBX)
			{
				RJPOSTCFGRM.= A_LoopField . "|"
				RJPOSTCFGRW.= A_LoopField . "|"
			}
	}

guicontrol,,RJPOSTCFGCBX,|%RJPOSTCFGRM%
stringreplace,RJPOSTCFGRW,RJPOSTCFGRW,||,|,All
IniWrite,%RJPOSTCFGRW%,rj\cur.ini,%RJSYSDD%,RJPOSTCFG
return
;};;;;

;{;;;;  FIND IN LIST  ;;;;;
RJFNDINLST:
gui,submit,nohide
guicontrolget,RJEDTC,,RJEDTC
if (RJEDTC = "")
	{
		guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All Files
		gosub, RJLSTYP
		return
	}
gui,listview,RJLSTV
LV_Delete()
guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All Files
guicontrol,,RJEDTDN
guicontrol,,RJEDTBN
guicontrol,,RJEDTD
guicontrol,,RJEDTB
guicontrol,hide,RJTXTH
guicontrol,hide,RJEDTDN
guicontrol,hide,RJEDTBN
guicontrol,hide,RJEDTD
guicontrol,hide,RJEDTB
guicontrol,hide,RJFNDINLST
guicontrol,,RJINCEXCL,|All||A-Z|#
Loop, Parse, RJSYSDD_TDB, `n, `r
	{	
		stringsplit,rjflz,A_LoopField,|
		ifinstring,rjflz1,%RJEDTC%
			{
				lvachk= +Check
				if (rjflz2 = 0)
					{
						lvachk= ""
					}
				LV_Add(lvachk,rjflz1)
			}
	}
return
;};;;;;

;{;;;;;  FILTER IN LIST  ;;;;

RJFLTRLST:
gui,submit,nohide
if (RJINCEXCL = "A-Z")
	{
		gosub, ALPHAVALUES
		guicontrolget, RJBEGINF,,RJEDTDN
		guicontrolget, RJENDF,,RJEDTBN
		
		rjbfv= % (%RJBEGINF%)
		rjefv= % (%RJENDF%)
		if (rjbfv > rjefv)
			{
				SB_SetText("Beginning-Range exceeds end-range")
				return
			}
		
		gui,listview,RJLSTV
		LV_Delete()
		guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All Files
		inclnum= 
		rjadnum= 
		stlst= 
		Loop, Parse, RJSYSDD_TDB, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				lvachk= ""	
				inclnum+=1
				rjflz1= 
				rjflz2= 
				stringsplit,rjflz,A_LoopField,|,:
				stringLeft,rjflet,rjflz1,1
				stringsplit,rjflz,A_LoopField,|
				rjfletv:= % (%rjflet%)
				if (rjbfv <= rjfletv)
					{
						stlst:= 1
					}
				if (rjefv < rjfletv)
					{
						break
					}
				if (stlst = 1)
					{
						rjadnum+=1
						if (rjflz2 = 1)
							{
								lvachk= +Check
							}
						LV_Add(lvachk,rjflz1)
					}
			}
		LV_ModifyCol()
		LV_Modify(0, "-Select")		
		SB_SetText("Added " rjadnum " ROMs and Jackets")
		guicontrol,,RLSTOT,%rjadnum% items	
		return
	}
if (RJINCEXCL = "#")
	{
		guicontrolget, RJBEGINF,,RJEDTD
		guicontrolget, RJENDF,,RJEDTB
		if (RJBEGINF > RJENDF)
			{
				SB_SetText("Beginning-Range exceeds end-range")
				return
			}
		gui,listview,RJLSTV
		LV_Delete()
		guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All Files
		inclnum= 
		rjadnum= 
		Loop, Parse, RJSYSDD_TDB, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				if (RJBEGINF <= inclnum)
					{
						inclnum+=1
						if (RJENDF < inclnum)
							{
								break
							}
						rjadnum+=1	
						lvachk= ""
						rjflz1= 
						rjflz2= 
						stringsplit,rjflz,A_LoopField,|
						if (rjflz2 = 1)
							{
								lvachk= +Check
							}
						LV_Add(lvachk,rjflz1)												
					}
			}
		LV_ModifyCol()
		LV_Modify(0, "-Select")		
		SB_SetText("Added " rjadnum " ROMs and Jackets")
		guicontrol,,RLSTOT,%rjadnum% items
	}
return
;};;;;

;{;;;;;;;;;;;;;;;;;; ALPHABET VALUES  ;;;;;;;;;;;;;;;;;;;;;
ALPHAVALUES:
A:= 11
B:= 12
C:= 13
D:= 14
E:= 15
F:= 16
G:= 17
H:= 18
I:= 19
J:= 20
K:= 21
L:= 22
M:= 23
N:= 24
O:= 25
P:= 26
Q:= 27
R:= 28
S:= 29
T:= 30
U:= 31
V:= 32
W:= 33
X:= 34
Y:= 35
Z:= 36
return
;};;;;;;;;;;;;;;

;{;;;;;  Remove subdirectory  ;;;;;;;;
RJREMSUBD:
gui,submit,nohide
guicontrolget,RJSUBDCBX,,RJSUBDCBX
SUBDRM= 
SUBDRW= 
subdna= 
IniRead,cursubd,rj\cur.ini,%RJSYSDD%,RJSUBDS
Loop, parse, SUBDLST,|
		{
		subda1= 
		subda2= 
		stringsplit,subda,A_LoopField,:
		if (subda1 = RJSUBDCBX)
			{
				return
			}
	}
Loop, Parse, cursubd,|	
	{
		subda1= 
		subda2= 
		stringsplit,subda,A_LoopField,:
		if (subda1 <> RJSUBDCBX)
			{
				SUBDRM.= subda1 . "|"
				SUBDRW.= A_LoopField . "|"
			}
	}
guicontrol,,RJSUBDCBX,|%SUBDRM%
stringreplace,SUBDRW,SUBDRW,||,|,All
IniWrite,%SUBDRW%,rj\cur.ini,%RJSYSDD%,RJSUBDS
return
;};;;;;;;;;;;;;;;;;

;{;;;;   Add Subdirectory  ;;;;;;;;;
RJADDSUBD:
gui,submit,nohide
guicontrolget, RJSUBDH,,RJSUBDH
guicontrolget,RJSUBDCBX,,RJSUBDCBX
subdna= 
Loop, parse, SUBDLST,|
	{
		if (A_LoopField = RJSUBDCBX)
			{
				subdna= 1
			}
	}
if (subdna = 1)
	{
		return
	}
RJSUBDS= 	
IniRead, RJSUBDS,rj\cur.ini,%RJSYSDD%,RJSUBDS
RJSUBDLSTSW= 
RJSUBDLSTSR= 
Loop, parse, RJSUBDS,|
	{
		rjsubh1= 
		rjsubh2= 
		stringsplit,rjsubh,A_LoopField,:
		if (rjsubh1 = RJSUBDCBX)
			{
				subdna= 1
				continue				
			}
			RJSUBDLSTSR.= rjsubdh1 . "|"
			RJSUBDLSTSW.= A_LoopField . "|"
		}
if (subdna = 1)
	{
		IniWrite,%RJSUBDLSTSW%,rj\cur.ini,%RJSYSDD%,RJSUBDS
		return
	}
RJSUBDLSTSW= 	
RJSUBDLSTSR:= RJSUBDCBX . "|"
Loop, parse, RJSUBDS,|
	{
		subda1= 
		subda2= 
		stringsplit,subda,A_loopField,:
		RJSUBDLSTSR.= subda1 . "|" 
		RJSUBDLSTSW.= A_LoopField . "|" 
	}
guicontrol,,RJSUBDCBX,|%RJSUBDLSTSR%
stringreplace,RJSUBDLSTSW,RJSUBDLSTSW,||,|,All
IniWrite, %RJSUBDCBX%:%RJSUBDH%|%RJSUBDLSTSW%,rj\cur.ini,%RJSYSDD%,RJSUBDS
return
;};;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;   RJ CHECKBOXES   ;;;;;;;;;;;;;;;

RJENLNCHR:
gui,submit,nohide
guicontrolget,RJENLNCHR,,RJENLNCHR
if (RJENLNCHR = 1)
		{
			guicontrol,enable,RJLNCHOVR
			guicontrol,enable,RJRAD4A
			guicontrol,enable,RJRAD4B
			guicontrol,enable,RJEMUPRECFG
			guicontrol,enable,RJEMUPRM
			guicontrol,enable,RJCHKQ
			guicontrol,enable,RJBUTM
			guicontrol,enable,RJCHKK
		}
guicontrolget,RJRAD4A,,RJRAD4A
CREATELNCH= 3
if (RJRAD4A = 1)
	{
		CREATELNCH= 2
	}
if (RJENLNCHR = 0)
		{
			guicontrol,disable,RJLNCHOVR
			guicontrol,disable,RJRAD4A
			guicontrol,disable,RJRAD4B
			guicontrol,disable,RJEMUPRECFG
			guicontrol,disable,RJEMUPRM
			guicontrol,disable,RJCHKQ
			guicontrol,disable,RJBUTM
			guicontrol,disable,RJCHKK
			CREATELNCH= 0
		}
IniWrite, %CREATELNCH%,rj\cur.ini,%RJSYSDD%,RJLNCHCFG
return

RJLNCHOVR:
gui,submit,nohide
guicontrolget,RJLNCHOVR,,RJLNCHOVR
if (RJLNCHOVR = 0)
	{
		gui, font, s9 normal
		guicontrol, font, RJLNCHOVR
		guicontrol,,RJLNCHOVR,Overwrite
	}
if (RJLNCHOVR = 1)
	{
		gui, font, s11 bold	
		guicontrol, font, RJLNCHOVR
		guicontrol,,RJLNCHOVR,Overwrite
	}
IniWrite,%RJLNCHOVR%,rj\cur.ini,%RJSYSDD%,RJLNCHCFGOW
return

RJCHKF:
gui,submit,nohide
guicontrolget,RJCHKF,,RJCHKF
if (RJCHKF = 1)
		{
		guicontrol, enable, RJCHKO
		guicontrol, enable, RJRAD6A
		guicontrol, enable, RJRAD6B
		guicontrol, enable, RJCPYMVCFGA
		guicontrol, enable, RJCPYMVCFGB
		guicontrol, enable, RJPRECFGCBX
		guicontrol, enable, RJADDPRECFG
		guicontrol, enable, RJREMPRECFG
		guicontrol, enable, RJPOSTCFGCBX
		guicontrol, enable, RJADDPOSTCFG
		guicontrol, enable, RJREMPOSTCFG
		}
if (RJCHKF = 0)
		{
		guicontrol, disable, RJCHKO
		guicontrol, disable, RJRAD6A
		guicontrol, disable, RJRAD6B
		guicontrol, disable, RJCPYMVCFGA
		guicontrol, disable, RJCPYMVCFGB
		guicontrol, disable, RJPRECFGCBX
		guicontrol, disable, RJADDPRECFG
		guicontrol, disable, RJREMPRECFG
		guicontrol, disable, RJPOSTCFGCBX
		guicontrol, disable, RJADDPOSTCFG
		guicontrol, disable, RJREMPOSTCFG
		}
IniWrite, %RJCHKF%,rj\cur.ini,%RJSYSDD%,RJEMUCFG
return

RJCHKG:
gui,submit,nohide
guicontrolget,RJCHKG,,RJCHKG
if (RJCHKG = 1)
	{
		
	}
return

RJENCNSLD:
gui,submit,nohide
guicontrol,, RJCNSLDD,|Individuate||()[]|()|[]
guicontrolget,RJENCNSLD,,RJENCNSLD
guicontrol,enable,RJCNSLDD
if (RJENCNSLD = 1)
	{
		guicontrol,, RJCNSLDD,|()[]||()|[]|Individuate
	}
guicontrolget,RJCNSLDD,,RJCNSLDD
/*
if (RJCNSLDD = "Individuate")
	{
		CONSOLIDATE= 0
	}
if (RJCNSLDD = "( )")
	{
		CONSOLIDATE= 3
	}
if (RJCNSLDD = "[ ]")
	{
		CONSOLIDATE= 2
	}
if (RJCNSLDD = "( ) [ ]")
	{
		CONSOLIDATE= 1
	}
if (RJENCNSLD = 0)
	{
	guicontrol,,RJCNSLDD,|Individuate||( ) [ ]|( )|[ ]
	guicontrol,disable,RJCNSLDD
	CONSOLIDATE= 0
}
*/
IniWrite,%RJCNSLDD%,rj\cur.ini,%RJSYSDD%,RJCONSOLID
return

RJENDMNT:
gui,submit,nohide
guicontrolget,RJENDMNT,,RJENDMNT
if (RJENDMNT = 1)
		{
			guicontrol,enable,RJDMNTDD
			guicontrol,enable,RJENDMOV
			guicontrol,enable,RJRAD8A
			guicontrol,enable,RJRAD8B
			guicontrol,enable,RJDIMGET
		}
if (RJENDMNT = 0)
		{
			guicontrol,disable,RJDMNTDD
			guicontrol,disable,RJENDMOV
			guicontrol,disable,RJRAD8A
			guicontrol,disable,RJRAD8B
			guicontrol,disable,RJDIMGET
		}

return

RJCHKA:
gui,submit,nohide
guicontrolget,RJCHKA,,RJCHKA
if (RJCHKA = 1)
		{
			guicontrol,enable,RJENCNSLD
			guicontrol,enable,RJENXTRARC
		}
if (RJCHKA = 0)
		{
			guicontrol,disable,RJENCNSLD
			guicontrol,disable,RJENXTRARC
			guicontrol,disable,RJXTRARCA
			guicontrol,disable,RJXTRARCB
			guicontrol,disable,RJXTRARCDD
		}
IniWrite, %RJCHKA%,rj\cur.ini,%RJSYSDD%,RJACKET
return

RJENXTRARC:
gui,submit,nohide
guicontrolget,RJENXTRARC,,RJENXTRARC
if (RJENXTRARC = 1)
		{
			guicontrol,enable,RJXTRARCA
			guicontrol,enable,RJXTRARCB
			guicontrol,enable,RJXTRARCDD
		}
if (RJENXTRARC = 0)
		{
			guicontrol,disable,RJXTRARCA
			guicontrol,disable,RJXTRARCB
			guicontrol,disable,RJXTRARCDD
			guicontrol,,RJXTRARCDD,|Keep||Store|Delete
			RJEXTRARC= 0
			return
		}
guicontrolget,RJXTRARCA,,RJXTRARCA
if (RJXTRARCA = 1)
	{
		RJEXTRARC= 1
	}
if (RJXTRARCA = 0)
	{
		RJEXTRARC= 2
	}
IniWrite, %RJENXTRARC%,rj\cur.ini,%RJSYSDD%,RJEXTRARC	
return

RJENMAP:
gui,submit,nohide
guicontrolget,RJENMAP,,RJENMAP
if (RJENMAP = 1)
		{
			guicontrol, enable, RJOVKM
			guicontrol, enable, RJMAPDD
			guicontrol, enable, RJMAPRET
			guicontrol, enable, RJMAPRETOPN
			guicontrol, enable, RJMAP1ROFTYPA
			guicontrol, enable, RJMAP1ROFTYPB
			guicontrol, enable, RJMAP1ROFTYPC
			guicontrol, enable, RJMAP1PL
			guicontrol, enable, RJMAP1PLOPN
			guicontrol, enable, RJMAP2ROFTYPA
			guicontrol, enable, RJMAP2ROFTYPB
			guicontrol, enable, RJMAP2ROFTYPC
			guicontrol, enable, RJMAP2PL
			guicontrol, enable, RJMAP2PLOPN
		}
if (RJENMAP = 0)
		{
			guicontrol, disable, RJOVKM
			guicontrol, disable, RJMAPDD
			guicontrol, disable, RJMAPRET
			guicontrol, disable, RJMAPRETOPN
			guicontrol, disable, RJMAP1ROFTYPA
			guicontrol, disable, RJMAP1ROFTYPB
			guicontrol, disable, RJMAP1ROFTYPC
			guicontrol, disable, RJMAP1PL
			guicontrol, disable, RJMAP1PLOPN
			guicontrol, disable, RJMAP2ROFTYPA
			guicontrol, disable, RJMAP2ROFTYPB
			guicontrol, disable, RJMAP2ROFTYPC
			guicontrol, disable, RJMAP2PL
			guicontrol, disable, RJMAP2PLOPN
		}

IniWrite, %RJENMAP%,rj\cur.ini,%RJSYSDD%,RJKEYON
return


RJSUBDCBX:
gui,submit,nohide
guicontrolget,RJSUBDCBX,,RJSUBDCBX
guicontrol,,RJSUBDH,0
subdvar= 
IniRead,subdvar,rj\cur.ini,%RJSYSDD%,RJSUBDS
Loop, parse,subdvar,|
	{
		subdh1= 
		subdh2= 
		stringsplit,subdh,A_LoopField,:
			if (subdh1 = RJSUBDCBX)
				{
					if (subdh2 = 1)
						{
							guicontrol,,RJSUBDH,1
						}
				}
	}	
return

RJSUBDH:
gui,submit,nohide
guicontrolget,RJSUBDCBX,,RJSUBDCBX
guicontrolget,RJSUBDH,,RJSUBDH
RJCHKOP= 1
if (RJSUBDH = 1)
	{
		RJCHKOP= 0
	}
subdvar= 
IniRead,subdvar,rj\cur.ini,%RJSYSDD%,RJSUBDS
Loop, parse,subdvar,|
	{
		subdh1= 
		subdh2= 
		stringsplit,subdh,A_LoopField,:
			if (subdh1 = RJSUBDCBX)
				{
					if (subdh2 =RJCHKOP)
						{
							stringreplace, RJSUBDS, subdvar, %subdh1%:%RJCHKOP%, %subdh1%:%RJSUBDH%,All
							iniwrite, %RJSUBDS%,rj\cur.ini,%RJSYSDD%,RJSUBDS
						}
				}
	}	

return

RJENDMOV:
gui,submit,nohide

return

RJCHKJ:
gui,submit,nohide

return

RJCHKK:
gui,submit,nohide
guicontrolget,RJCHKK,,RJCHKK
IniWrite, %RJCHKK%,rj\cur.ini,%RJSYSDD%,RJABSOLROM
return

RJCHKL:
gui,submit,nohide
if (RJCHKL = 1)
	{
		guicontrol,enable,RJDELCOMP
	}
if (RJCHKP + RJCHKM + RJCHKL = 0)
	{
		guicontrol,disable,RJDELCOMP
	}
return

RJCHKM:
gui,submit,nohide
if (RJCHKM = 1)
	{
		guicontrol,enable,RJDELCOMP
	}
if (RJCHKP + RJCHKM + RJCHKL = 0)
	{
		guicontrol,disable,RJDELCOMP
	}
return

RJCHKP:
gui,submit,nohide
if (RJCHKP = 1)
	{
		guicontrol,enable,RJDELCOMP
	}
if (RJCHKP + RJCHKM + RJCHKL = 0)
	{
		guicontrol,disable,RJDELCOMP
	}
return

RJCHKO:
gui,submit,nohide
guicontrolget, RJCHKO,,RJCHKO
iniwrite, %RJCHKO%,rj\cur.ini,%RJSYSDD%,RJEMUCFGOV
return

RJCHKQ:
gui,submit,nohide
guicontrolget, RJCHKQ,,RJCHKQ
guicontrol,,RJCHKQ,Other
guicontrol,enable,RJBUTM
if (RJCHKQ = 1)
	{
		if (RJEMULOC = 0)
			{
				gosub, RJBUTM
				if (RJEMULOC = 0)
					{
						guicontrol,, RJCHKQ,0
						guicontrol,disable,RJBUTM
						iniwrite, 0,rj\cur.ini,%RJSYSDD%,RJEMULOC
						return
					}
			}
		guicontrol,,RJCHKQ,%rjemuxe%
		guicontrol,move,RJCHKQ,w60
		iniwrite, %RJEMULOC%,rj\cur.ini,%RJSYSDD%,RJEMULOC
		return
	}
iniWrite, 0,rj\cur.ini,%RJSYSDD%,RJEMULOC
return

RJCHKR:
gui,submit,nohide
guicontrolget,RJCHKR,,RJCHKR
if (RJCHKR = 1)
		{
			guicontrol,,RJCHKK,1
			guicontrol,enable,RJCBXJ
			guicontrolget,RJCBXJ,,RJCBXJ
		}
if (RJCHKR = 0)
		{
			guicontrol,disable,RJCBXJ
		}
iniwrite, %RJCHKR%,rj\cur.ini,%RJSYSDD%,RJMULTIDISC
iniwrite, $%RJCBXJ%$,rj\cur.ini,%RJSYSDD%,RJDISCIDENT
return

RJCHKU:
gui,submit,nohide
guicontrolget, RJCHKU,,RJCHKU
iniwrite, %RJCHKU%,rj\cur.ini,%RJSYSDD%,RJQUOTES
return

RJCHKT:
gui,submit,nohide
guicontrolget, RJCHKT,,RJCHKT
iniwrite, %RJCHKT%,rj\cur.ini,%RJSYSDD%,RJPATH
return

RJCHKS:
gui,submit,nohide
guicontrolget, RJCHKS,,RJCHKS
iniwrite, %RJCHKS%,rj\cur.ini,%RJSYSDD%,RJEXT
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;  RJ COMBOBOXES  ;;;;;;;;;;;;;
RJMAP1PL:
gui,submit,nohide
guicontrolget, RJMAP1PL,,RJMAP1PL
IniWrite, %RJMAP1PL%,rj\cur.ini,%RJSYSDD%,RJPLYR1
return

RJPRECFGCBX:
gui,submit,nohide
guicontrolget,RJPRECFGCBX,,RJPRECFGCBX
;;IniWrite, %RJPRECFGCBX%,rj\cur.ini,%RJSYSDD%,RJPRECFG
return

RJPOSTCFGCBX:
gui,submit,nohide
guicontrolget,RJPOSTCFGCBX,,RJPOSTCFGCBX
;;IniWrite, %RJPOSTCFGCBX%,rj\cur.ini,%RJSYSDD%,RJPOSTCFG
return

RJMAPRET:
gui,submit,nohide
guicontrolget,RJMAPRET,,RJMAPRET
IniWrite, %RJMAPRET%,rj\cur.ini,%RJSYSDD%,RJMASTERPROF
return

RJCBXJ:
gui,submit,nohide

return

RJMAP2PL:
gui,submit,nohide
guicontrolget, RJMAP2PL,,RJMAP2PL
IniWrite, %RJMAP2PL%,rj\cur.ini,%RJSYSDD%,RJPLYR2
return

RJEOPTSCBX:
gui,submit,nohide
guicontrolget,RJEOPTSCBX,,RJEOPTSCBX
;;StringReplace,RJEOPTSCBX,RJEOPTSCBX,",,All
;;"
stringreplace,RJEOPTSCBX,RJEOPTSCBX,%A_SPACE%,`<,All
IniWrite, %RJEOPTSCBX%,rj\cur.ini,%RJSYSDD%,RJEMUOPTS
return

RRJEARGSCBX:
gui,submit,nohide
guicontrolget,RRJEARGSCBX,,RRJEARGSCBX
;;StringReplace,RRJEARGSCBX,RRJEARGSCBX,",,All
;;"
stringreplace,RRJEARGSCBX,RRJEARGSCBX,%A_SPACE%,`<,All
IniWrite, %RRJEARGSCBX%,rj\cur.ini,%RJSYSDD%,RJEMUARGS
return

RJEMUXTCBX:
gui,submit,nohide
guicontrolget, RJEMUXTCBX,,RJEMUXTCBX
stringreplace,RJEMUXTCBX,RJEMUXTCBX,",,All
;"
stringreplace,RJEMUXTCBX,RJEMUXTCBX,*,,All
stringreplace,RJEMUXTCBX,RJEMUXTCBX,%A_Space%,,All
stringreplace,RJEMUXTCBX,RJEMUXTCBX,`%,,All
RJEXTENSIONS= %RJEMUXTCBX%
stringreplace,RJEXTENSIONS,RJEXTENSIONS,[ROM],`%ROM`%	
stringreplace,RJEXTENSIONS,RJEXTENSIONS,[ROMF],`%ROMF`%	
stringreplace,RJEXTENSIONS,RJEXTENSIONS,[EMUL],`%EMUZ`%	
stringreplace,RJEXTENSIONS,RJEXTENSIONS,[EMUL],`%EMUL`%	
IniWrite, %RJEXTENSIONS%,rj\cur.ini,%RJSYSDD%,RJROMXT
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;   RJ DROPDOWNS  ;;;;;;;;;;;;

RJMAPDD:
gui,submit,nohide
guicontrolget,RJMAPDD,,RJMAPDD
iniread, kmprloc,apps.ini,KEYBOARD_MAPPERS,%RJMAPDD%
if (RJMAPDD = "Antimicro")
	{
		kmprxtn= .amgp
		splitpath,kmprloc,,kmprd
		guicontrol,,RJMAPRET,|%kmprd%\Mediacenter%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
		guicontrol,,RJMAP1PL,|Player1%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
		guicontrol,,RJMAP2PL,|Player2%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
	}
if (RJMAPDD = "Xpadder")
	{
		kmprxtn= .xpadderprofile
		splitpath,kmprloc,,kmprd
		guicontrol,,RJMAPRET,|%kmprd%\Mediacenter%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
		guicontrol,,RJMAP1PL,|Player1%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
		guicontrol,,RJMAP2PL,|Player2%kmprxtn%||%kmprd%\nolayout1%kmprxtn%
	}
IniWrite, %RJMAPDD%,rj\cur.ini,%RJSYSDD%,RJKEYMAPPER	
return

RJPREW:
return
RJPOSTW:
return

RJDDLF:
gui,submit,nohide
guicontrolget,RJDDLF,,RJDDLF
CMDRO= RJPREOPT
CMDRT= RJPRERUN
CMDRS= RJPREW
if (RJDDLF = "Post-Command")
	{
		CMDRO= RJPOSTOPT
		CMDRT= RJPOSTRUN
		CMDRS= RJPOSTW
	}
IniRead, ADDFN,rj\cur.ini,%RJSYSDD%,%CMDRT%
guicontrol,,RJDDLP,|%ADDFN%	
return



RJDMNTDD:
gui,submit,nohide

return

RJCNSLDD:
gui,submit,nohide
guicontrolget,RJCNSLDD,,RJCNSLDD
if (RJCNSLDD = "Individuate")
	{
		guicontrol,disable,RJCNSLDD
		guicontrol,,RJENCNSLD,0
	}
iniwrite,%RJCNSLDD%,rj\cur.ini,%RJSYSDD%,RJCONSOLID
return



;{;;;;  RJ QUEUE LIST ;;;;;

RJQLSTDD:
noqq= 
RJDLTMP:= RJSYSDD
gui,submit,nohide
guicontrolget,RJQLSTDD,,RJQLSTDD
Guicontrol,,RJTXTAB, 1 System
Guicontrol,,RJPROCQ,CONFIRM 1
guicontrol,disable,RJADDQ
Loop, rj\*_q.tdb
	{
		rjvarn= 
		rjmvr= 
		splitpath,a_loopFilename,,,,rjmvr
		StringTrimRight,rjvarn,rjmvr,2
		if (rjvarn = RJSYSDD)
			{
				guicontrol,disable,RJADDQ
			}		
	}
if (RJQLSTDD = "QUEUE")
	{
		Guicontrol,,RJTXTAB,%RJQNUM%-Systems
		Guicontrol,,RJPROCQ,CONFIRM %RJQNUM%
		guicontrol,enable,RJADDQ
		gosub, OPENJACKOPT
		return
	}
gosub, MUTEJACKOPT
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;


MUTEJACKOPT:
guicontrol,hide,RJSYSRADA
guicontrol,hide,RJSYSRADB
guicontrol,hide,RJSYSRADC
guicontrol,hide,RJSYSLOAD
guicontrol,hide,RJCHKL
guicontrol,hide,RJCHKM
guicontrol,hide,RJCHKP
guicontrol,hide,RJDELCOMP
guicontrol,hide,RJSYSSAV
guicontrol,hide,RJSYSSAVAS
guicontrol,hide,RJENMAP
guicontrol,hide,RJOVKM
guicontrol,hide,RJMAPDD
guicontrol,hide,RJMAPRET
guicontrol,hide,RJMAPRETOPN
guicontrol,hide,RJMAP1ROFTYPA
guicontrol,hide,RJMAP1ROFTYPB
guicontrol,hide,RJMAP1ROFTYPC
guicontrol,hide,RJMAP1PL
guicontrol,hide,RJMAP1PLOPN
guicontrol,hide,RJMAP2ROFTYPA
guicontrol,hide,RJMAP2ROFTYPB
guicontrol,hide,RJMAP2ROFTYPC
guicontrol,hide,RJMAP2PL
guicontrol,hide,RJMAP2PLOPN
guicontrol,hide,RJENLNCHR
guicontrol,hide,RJLNCHOVR
guicontrol,hide,RJRad4B
guicontrol,hide,RJRad4A
guicontrol,hide,RJEMUPRECFG
guicontrol,hide,RJEMUPRM
guicontrol,hide,RJCHKQ
guicontrol,hide,RJBUTM
guicontrol,hide,RJCHKK
guicontrol,hide,RJCHKA
guicontrol,hide,RJADDSUBD
guicontrol,hide,RJREMSUBD
guicontrol,hide,RJSUBDCBX
guicontrol,hide,RJSUBDH
guicontrol,hide,RJCNSLDD
guicontrol,hide,RJENCNSLD
guicontrol,hide,RJENXTRARC
guicontrol,hide,RJXTRARCA
guicontrol,hide,RJXTRARCB
guicontrol,hide,RJXTRARCDD

guicontrol,hide,RJRad11A
guicontrol,hide,RJRad11B

guicontrol,hide,RJEDTO

guicontrol,hide,RJDDLF
guicontrol,hide,RJCHKW
guicontrol,hide,RJBUTV
guicontrol,hide,RJBUTG
guicontrol,hide,RJCBXJ
guicontrol,hide,RJDDLP
guicontrol,hide,RJCBXH
guicontrol,hide,RJBUTH
guicontrol,hide,RJENDMNT
guicontrol,hide,RJDMNTDD
guicontrol,hide,RJDIMGET
guicontrol,hide,RJRad8A
guicontrol,hide,RJRad8B
guicontrol,hide,RJENDMOV
guicontrol,hide,RJCHKF
guicontrol,hide,RJCHKO
guicontrol,hide,RJPRECFGCBX
guicontrol,hide,RJADDPRECFG
guicontrol,hide,RJREMPRECFG
guicontrol,hide,RJPOSTCFGCBX
guicontrol,hide,RJADDPOSTCFG
guicontrol,hide,RJREMPOSTCFG
guicontrol,hide,RRJEARGSCBX
guicontrol,hide,RJEMUXTCBX
guicontrol,hide,RJRAD1A
guicontrol,hide,RJRAD1B
guicontrol,hide,RJCHKU
guicontrol,hide,RJCHKT
guicontrol,hide,RJCHKS
guicontrol,hide,RJEOPTSCBX
guicontrol,hide,RJCHKR
guicontrol,hide,RJCHKJ
return


OPENJACKOPT:
guicontrol,show,RJSYSRADA
guicontrol,show,RJSYSRADB
guicontrol,show,RJSYSRADC
guicontrol,show,RJSYSLOAD
guicontrol,show,RJCHKL
guicontrol,show,RJCHKM
guicontrol,show,RJCHKP
guicontrol,show,RJDELCOMP
guicontrol,show,RJSYSSAV
guicontrol,show,RJSYSSAVAS
guicontrol,show,RJENMAP
guicontrol,show,RJOVKM
guicontrol,show,RJMAPDD
guicontrol,show,RJMAPRET
guicontrol,show,RJMAPRETOPN
guicontrol,show,RJMAP1ROFTYPA
guicontrol,show,RJMAP1ROFTYPB
guicontrol,show,RJMAP1ROFTYPC
guicontrol,show,RJMAP1PL
guicontrol,show,RJMAP1PLOPN
guicontrol,show,RJMAP2ROFTYPA
guicontrol,show,RJMAP2ROFTYPB
guicontrol,show,RJMAP2ROFTYPC
guicontrol,show,RJMAP2PL
guicontrol,show,RJMAP2PLOPN
guicontrol,show,RJENLNCHR
guicontrol,show,RJLNCHOVR
guicontrol,show,RJRad4B
guicontrol,show,RJRad4A
guicontrol,show,RJEMUPRECFG
guicontrol,show,RJEMUPRM
guicontrol,show,RJCHKQ
guicontrol,show,RJBUTM
guicontrol,show,RJCHKK
guicontrol,show,RJCHKA
guicontrol,show,RJADDSUBD
guicontrol,show,RJREMSUBD
guicontrol,show,RJSUBDCBX
guicontrol,show,RJSUBDH
guicontrol,show,RJCNSLDD
guicontrol,show,RJENCNSLD
guicontrol,show,RJENXTRARC
guicontrol,show,RJXTRARCA
guicontrol,show,RJXTRARCB
guicontrol,show,RJXTRARCDD

guicontrol,show,RJRad11A
guicontrol,show,RJRad11B

guicontrol,show,RJEDTO

guicontrol,show,RJDDLF
guicontrol,show,RJCHKW
guicontrol,show,RJBUTV
guicontrol,show,RJBUTG
guicontrol,show,RJDDLP
guicontrol,show,RJCBXJ
guicontrol,show,RJBUTH
guicontrol,show,RJENDMNT
guicontrol,show,RJDMNTDD
guicontrol,show,RJDIMGET
guicontrol,show,RJRad8A
guicontrol,show,RJRad8B
guicontrol,show,RJENDMOV
guicontrol,show,RJCHKF
guicontrol,show,RJCHKO
guicontrol,show,RJPRECFGCBX
guicontrol,show,RJADDPRECFG
guicontrol,show,RJREMPRECFG
guicontrol,show,RJPOSTCFGCBX
guicontrol,show,RJADDPOSTCFG
guicontrol,show,RJREMPOSTCFG
guicontrol,show,RRJEARGSCBX
guicontrol,show,RJEMUXTCBX
guicontrol,show,RJRAD1A
guicontrol,show,RJRAD1B
guicontrol,show,RJCHKU
guicontrol,show,RJCHKT
guicontrol,show,RJCHKS
guicontrol,show,RJEOPTSCBX
guicontrol,show,RJCHKR
guicontrol,show,RJCHKJ
return


RJXTRARCDD:
gui,submit,nohide
guicontrolget, RJXTRARCDD,,RJXTRARCDD
if (RJXTRARCDD = "Store")
	{
		RJARCLOC= 0
	}
if (RJXTRARCDD = "Keep")
	{
		RJARCLOC= 1
	}
if (RJXTRARCDD = "Delete")
	{
		RJARCLOC= 2
	}
IniWrite, %RJARCLOC%,rj\cur.ini,%RJSYSDD%,RJARCLOC	
return



;{;;;;;;;;;  RJ SYSTEM LIST   ;;;;;;;;;;;;;;;;

RJSYSDD:
ncfnd:= 8707
if (quryad = 1)
	{
		ncfnd= 3
	}
gui,submit,nohide
guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All files
guicontrolget,RJSYSDD,,RJSYSDD
if (RJSYSDD = "Systems")
	{
		LPLST= 
		FileDelete, rj\%RJSYSDD%.tdb
		Gui, ListView, RJLSTV
		LV_Delete()
		return
	}
guicontrol,,RJQLSTDD,|QUEUE||%SYSTMQ%
IfNotExist, rj\%RJSYSDD%.ini
	{
				if (RJSYSDD <> "")
					{
								MsgBox,% ncfnd,No config found,This configuration has not been saved.`nWould you like to save now?
									IfMsgBox,Yes
										{
											FileCopy,rj\cur.ini,rj\%RJSYSDD%.ini,1
										}
								IfMsgBox,Cancel
									{
										gui,submit, nohide
										guicontrol,,RJSYSDD,|%RJSYSDD%||Systems|%systmfldrs%
										return
									}
								IfMsgBox,No  
									{
										gui,submit, nohide
										guicontrol,,RJSYSDD,|%RJSYSDD%||Systems|%systmfldrs%
									}
					}
					
			
	}

CMDRO= RJPREOPT
CMDRT= RJPRERUN
CMDRS= RJPREW
optn= 
guicontrolget, RJCHKG,,RJCHKG
guicontrolget, RJLSTYP,,RJLSTYP
rjlistview= 
FileDelete, rj\dflt.ini
FileDelete, rj\cur.ini
LSTCTRLS= disable
gosub, LSTCTRLS
guicontrol,,RJSYSRADB,1
RJSYSDD_TDB= 

guicontrol,enable,RJADDQ
gosub, OPENJACKOPT

EXSTCFG= rj\dflt.ini
ifexist, rj\%RJSYSDD%.ini
	{
		guicontrol,,RJSYSRADA,1
		EXSTCFG= rj\%RJSYSDD%.ini
	}

FLTHRU:
Iniread,defprefs,emuCfgPresets.set,ROMJACKETS
Loop, parse, defprefs, `n, `r
	{
		defprfx1=  
		defprfx2= 
		defprfx3= 
		defprfx4= 
		defprfx5= 
		defprfx6= 
		stringsplit, defprfx,A_LoopField,=
		if (defprfx3 <> "")
			{
				defprfx3= =%defprfx3%
			}
		if (defprfx4 <> "")
			{
				defprfx4= =%defprfx4%
			}
		if (defprfx5 <> "")
			{
				defprfx5= =%defprfx5%
			}
		if (defprfx6 <> "")
			{
				defprfx6= =%defprfx6%
			}
		IniWrite,%defprfx2%%defprfx3%%defprfx4%%defprfx5%%defprfx6%,rj\dflt.ini,%RJSYSDD%,%defprfx1%
	}
guicontrolget,RJEMUPRECFG,,RJEMUPRECFG

IniRead,RJEMURMPG,emuCfgPresets.set,%RJSYSDD%,RJEMUPRESET
Iniread,syspref,emuCfgPresets.set,%RJSYSDD%
if (syspref <> "")
	{
		loop, parse, syspref, `n, `r
			{ 
				QARP1= 
				QARP2= 
				QARP3= 
				QARP4= 
				QARP5= 
				QARP6= 
				stringsplit,QARP,A_LoopField,?
				if (QARP2 <> "")
					{
						sysqv1= 
						sysqv2= 
						sysqv3= 
						sysqv4= 
						sysqv5= 
						sysqv6= 
						StringSplit,sysqv,QARP2,=
						if (sysqv3 <> "")
							{
								sysqv3= =%sysqv3%
							}
						if (sysqv4 <> "")
							{
								sysqv4= =%sysqv4%
							}
						if (sysqv5 <> "")
							{
								sysqv5= =%sysqv5%
							}
						if (sysqv6 <> "")
							{
								sysqv6= =%sysqv6%
							}
						if (sysqv1 = "RJEMUOPTS")
								{
									if (QARP1 = RJEMURMPG)
										{
											Iniwrite, %sysqv2%%sysqv3%%sysqv4%%sysqv5%%sysqv6%,rj\dflt.ini,%RJSYSDD%,RJEMUOPTS
											continue
										}
								}
						if (sysqv2 = "RJEMUARGS")
								{
									if (QARP1 = RJEMUPRECFG)
										{
											Iniwrite, %sysqv2%%sysqv3%%sysqv4%%sysqv5%%sysqv6%,rj\dflt.ini,%RJSYSDD%,RJEMUARGS
											continue
										}
								}
					}
				curepref1= 
				curepref2= 
				curepref3= 
				curepref4= 
				curepref5= 
				curepref6= 
				stringsplit,curepref,A_LoopField,=
				if (curepref3 <> "")
					{
						curepref3= =%curepref3%
					}
				if (curepref4 <> "")
					{
						curepref4= =%curepref4%
					}
				if (curepref5 <> "")
					{
						curepref5= =%curepref5%
					}
				if (curepref6 <> "")
					{
						curepref6= =%curepref6%
					}
				nnen1= 
				nnen2= 
				stringsplit,nnen,A_LoopField,?
				if (nnen2 <> "")
					{
						continue
					}
				IniWrite,%curepref2%%curepref3%%curepref4%%curepref5%%curepref6%,rj\dflt.ini,%RJSYSDD%,%curepref1%
				continue
			}
	}
RJEMUPRESET= 
Iniread,RJEMUPRESET,%EXSTCFG%,%RJSYSDD%,RJEMUPRESET

Iniread,emupref,emuCfgPresets.set,%RJEMUPRESET%

if (emupref <> "")
	{
		loop, parse, emupref, `n, `r
			{
				curepref1= 
				curepref2= 
				curepref3= 
				curepref4= 
				curepref5= 
				curepref6= 
				stringsplit,curepref,A_LoopField,=
				if (curepref3 <> "")
					{
						curepref3= =%curepref3%
					}
				if (curepref4 <> "")
					{
						curepref4= =%curepref4%
					}
				if (curepref5 <> "")
					{
						curepref5= =%curepref5%
					}
				if (curepref6 <> "")
					{
						curepref6= =%curepref6%
					}
				IniWrite,%curepref2%%curepref3%%curepref4%%curepref5%%curepref6%,rj\dflt.ini,%RJSYSDD%,%curepref1%
			}			
	}

FileCopy, %EXSTCFG%, rj\cur.ini,1

gosub, RJSYSRAD

Gui,listview,RJLSTV
LV_Delete()
if (RJSYSDD = "Systems")
	{
		LSTCTRLS= enable
		gosub, LSTCTRLS
		guicontrol,disable,RJADDQ
		return
	}

SB_SetText("Populating " RJSYSDD " ")
TOTFN= 
TOTRN= 
TOTJKTS= 
LPRFX= 
if (RJCHKG = 1)
	{
		LPRFX= %RJSYSDD%\
	}

stringsplit,rjexcl,omitxi,|

ar := Object()
	Loop, %rjexcl0%
		{
			new= % (rjexcl%a_index%)
			if (rjexcl%a_index% <> "")
				{
					ar.insert(new)
				}
		}
		
rjlistview= 
LPLST= 1

SB_SetText("Generating cache...")
gosub, RJFLTROMS
FileRead,RJSYSDD_TDB,rj\%RJSYSDD%.tdb
SB_SetText("Cache generated")

CURQN= 0
guicontrol,,RJINCEXCL,|All||A-Z|#

guicontrolget,RJCHKF,,RJCHKF
if (RJCHKF = 1)
	{
		guicontrolget,rjtmpemu,,RJEMUPRECFG
		gosub, EMUCFGCOPY
	}


IfExist,rj\%RJSYSDD%_q.tdb
	{	
		rjlistview= 
		SB_SetText(" Populating items from the queue. ")
		LV_Delete()
		FileRead, RJSYSDD_FUL,rj\%RJSYSDD%.tdb
		FileRead, RJSYSDD_TDB,rj\%RJSYSDD%_q.tdb
		guicontrol,,RJCHKG,1
		if (RJCHKG = 1)
			{
				Loop, Parse, RJSYSDD_FUL, `n, `r
					{
						if (A_LoopField = "")
							{
								continue
							}
						inclnum+=1
						lvachk= ""
						rjflz1= 
						rjflz2= 
						stringsplit,rjflz,A_LoopField,|
;;						if (rjflz2 = 1)
						ifinstring,RJSYSDD_TDB,%rjflz1%
							{
								lvachk= +Check
							}
						LV_Add(lvachk,rjflz1)
						rjlistview.= A_LoopField . "|"
					}
				LV_ModifyCol()
				LV_Modify(0, "-Select")
				LSTCTRLS= enable
				gosub, LSTCTRLS
				FileRead,RJSYSDD_TDB,rj\%RJSYSDD%_q.tdb
				SB_SetText(" Populated " RJSYSDD " . ")
			}
		return
	}

guicontrol,,RLSTOT,%CURQN% items

OVRKND= 
Loop, Read, LkUp.set
	{
		LKUP1= 
		LKUP2= 
		LKUP3= 
		stringsplit, LKUP, A_LoopReadLine, =
		if (RJSYSDD = LKUP1)
			{
				OVRKND:= LKUP2
				SHRTXT:= LKUP3
				%LKUP2%= %LKUP1%
				SHRTN= % %LKUP2%
				break
			}
	}

if (SHRTXT = "")
	{
		SHRTXT= *.*
	}

if (OVRKND = "")
	{
	
	}		

gosub, RJLSTYP

Loop, SYSTMQ,|
	{
		if (A_LoopField = RJSYSDD)
			{
				LSTCTRLS= enable
				gosub, LSTCTRLS
				return
			}
	}

LSTCTRLS= enable
gosub, LSTCTRLS	
guicontrol,enable,RJADDQ
return

LSTCTRLS:
guicontrol,%LSTCTRLS%,RJBUTA
guicontrol,%LSTCTRLS%,RJRFRSHLST
guicontrol,%LSTCTRLS%,RJSETRANGE
guicontrol,%LSTCTRLS%,RJADDQ
guicontrol,%LSTCTRLS%,RJFLTRLST
guicontrol,%LSTCTRLS%,RJCHKK
guicontrol,%LSTCTRLS%,RJFNDINLST
guicontrol,%LSTCTRLS%,RJDELCOMP
guicontrol,%LSTCTRLS%,RJSALITMS
guicontrol,%LSTCTRLS%,RJLSTYP
guicontrol,%LSTCTRLS%,RJINCEXCL
guicontrol,%LSTCTRLS%,RJLSTV
guicontrol,%LSTCTRLS%,RJSYSSAV
guicontrol,%LSTCTRLS%,RJPROCQ
guicontrol,%LSTCTRLS%,RJADDQ
guicontrol,%LSTCTRLS%,RJREMQSYS
guicontrol,%LSTCTRLS%,RJXTRARCDD
guicontrol,%LSTCTRLS%,RJPRECFGCBX
guicontrol,%LSTCTRLS%,RJADDPRECFG
guicontrol,%LSTCTRLS%,RJREMPRECFG
guicontrol,%LSTCTRLS%,RJPOSTCFGCBX
guicontrol,%LSTCTRLS%,RJADDPOSTCFG
guicontrol,%LSTCTRLS%,RJREMPOSTCFG
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

RJFLTRALL:
FileDelete, rj\%RJSYSDD%.tdb
RJALLFILES= 1
Loop, %RJSYSTEMS%\%RJSYSDD%\*,2
	{
		inclnum+=1
		FileAppend,:%A_LoopFileName%|1`n,rj\%RJSYSDD%.tdb
	}
Loop, %RJSYSTEMS%\%RJSYSDD%\*.*
	{
		if A_LoopFileAttrib not contains H
			{
				inclnum+=1
				FileAppend,%A_LoopFileName%|1`n,rj\%RJSYSDD%.tdb
			}
	}
FileRead, RJSYSDD_TDB,rj\%RJSYSDD%.tdb	
return			

RJFLTROMS:
FileDelete, rj\%RJSYSDD%.tdb
RJALLFILES= 
Loop, %RJSYSTEMS%\%RJSYSDD%\*, 2
			{
				if A_LoopFileAttrib contains H
					continue
				TOTFN+=1
				FileAppend,:%A_LoopFileName%|1`n,rj\%RJSYSDD%.tdb
				if (LPLST = "")
					{
						FileDelete,rj\%RJSYSDD%.tdb
						break
					}
			}		
Loop, %RJSYSTEMS%\%RJSYSDD%\*.*
	{
		if A_LoopFileAttrib contains H
			continue
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		if (noapl = "")
			{
				TOTRN+=1
				FileAppend,%A_LoopFileName%|1`n,rj\%RJSYSDD%.tdb
				if (LPLST = "")
					{
						FileDelete,rj\%RJSYSDD%.tdb
						break
					}
			}
	}
FileRead, RJSYSDD_TDB,rj\%RJSYSDD%.tdb		
return


RJEMUPRECFG:
gui,submit,nohide
guicontrolget, RJEMUTG,,RJEMUPRECFG
iniWrite, %RJEMUTG%,rj\cur.ini,%RJSYSDD%,RJEMUPRESET
gosub, EMUCFGCOPY
gosub, EMUPPSTPOP
return



EMUPPSTPOP:
lkupa= 
lkupb= 
lkupc= 
lkupd= 
lkupe= 
lkupf= 
iniread, lkupa, emuCfgPresets.set, %RJEMUTG%, RJEMUOPTS 
if (lkupa = "ERROR")
	{
		guicontrol,,RJEOPTSCBX,||%INJOPT%
		inidelete,RJEMUOPTS,rj\cur.ini,%RJSYSDD%
	}
if (lkupa <> "ERROR")
	{
		guicontrol,,RJEOPTSCBX,|%lkupa%||%INJOPT%
		iniWrite, %lkupa%,rj\cur.ini,%RJSYSDD%,RJEMUOPTS
	}

iniread, lkupb, emuCfgPresets.set, %RJEMUTG%, RJEMUARGS
if (lkupb = "ERROR")
	{
		guicontrol,,RRJEARGSCBX,||%INJARG%
		inidelete,RJEMUARGS,rj\cur.ini,%RJSYSDD%
	}
if (lkupb <> "ERROR")
	{
		guicontrol,,RRJEARGSCBX,|%lkupb%||%INJARG%
		iniWrite, %lkupb%,rj\cur.ini,%RJSYSDD%,RJEMUARGS
	}

iniread, lkupc, emuCfgPresets.set, %RJEMUTG%, RJPRECFG
if (lkupc = "ERROR")
	{
		guicontrol,,RJPRECFGCBX,|
	}
if (lkupc <> "ERROR")
	{
		guicontrol,,RJPRECFGCBX,|%lkupc%||%RJPRECFGR%
		iniWrite, %lkupc%,rj\cur.ini,%RJSYSDD%,RJPRECFG
	}

iniread, lkupd, emuCfgPresets.set, %RJEMUTG%, RJPOSTCFG
if (lkupd = "ERROR")
	{
		guicontrol,,RJPOSTCFGCBX,|
	}
if (lkupd <> "ERROR")
	{
		guicontrol,,RJPOSTCFGCBX,|%lkupd%||%RJPOSTCFG%
		iniWrite, %lkupd%,rj\cur.ini,%RJSYSDD%,RJPOSTCFG
	}

iniread, lkupd, emuCfgPresets.set, %RJEMUTG%, RJEXTRARC
if (lkupd <> "ERROR")
	{
		guicontrol,,RJENXTRARC,0
		if (lkupd <> 0)
			{
				guicontrol,,RJENXTRARC,1
			}
	}
iniWrite, %lkupd%,rj\cur.ini,%RJSYSDD%,RJEXTRARC

iniread, lkupe, emuCfgPresets.set, %RJEMUTG%, RJRUNDIR
if (lkupe <> "ERROR")
	{
		if (lkupe = 1)
			{
				guicontrol,,RJRAD1A,1
			}
		if (lkupe <> 1)
			{
				guicontrol,,RJRAD1B,1
			}
	}
iniWrite, %lkupe%,rj\cur.ini,%RJSYSDD%,RJRUNDIR

iniread, lkupf, emuCfgPresets.set, %RJEMUTG%, RJROMXT
if (lkupf <> "ERROR")
	{
		guicontrol,,RJEMUXTCBX,|%lkupf%||%RJEMUXTCBX%
		iniWrite, %lkupf%,rj\cur.ini,%RJSYSDD%,RJROMXT
	}
return

;{;;;;;;;; INCLUDE / EXCLUDE  ;;;;;;;;;;

RJINCEXCL:
gui,submit,nohide
guicontrolget,RJINCEXCL,,RJINCEXCL
if (RJINCEXCL = "All")
	{
		;;guicontrol,hide,RJSETRANGE
		guicontrol,hide,RJFLTRLST
		guicontrol,hide,RJTXTH
		guicontrol,hide,RJEDTD
		guicontrol,hide,RJEDTDN
		guicontrol,hide,RJEDTB
		guicontrol,hide,RJEDTBN
		RJLIMIT= 
		gosub, RJLSTYP
	}
if (RJINCEXCL = "A-Z")
	{
		;;guicontrol,show,RJSETRANGE
		guicontrol,show,RJFLTRLST
		guicontrol,show,RJTXTH
		guicontrol,hide,RJEDTD
		guicontrol,show,RJEDTDN
		guicontrol,hide,RJEDTB
		guicontrol,show,RJEDTBN
		RJLIMIT= X	
	}
if (RJINCEXCL = "#")
	{
		;;guicontrol,show,RJSETRANGE
		guicontrol,show,RJFLTRLST
		guicontrol,show,RJTXTH
		guicontrol,show,RJEDTD
		guicontrol,hide,RJEDTDN
		guicontrol,show,RJEDTB
		guicontrol,hide,RJEDTBN
		RJLIMIT= 1
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


RJLSTYP:
gui,submit,nohide
Gui, ListView, RJLSTV
LV_Delete()
guicontrolget, RJLSTYP,,RJLSTYP
if (RJLSTYP = "Jackets+ROMs")
	{
		if (RJALLFILES = 1)
			{
				gosub, RJFLTROMS
			}
		inclnum= 
		rjlistview= 
		Loop, Parse, RJSYSDD_TDB, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				inclnum+=1
				lvachk= ""
				rjflz1= 
				rjflz2= 
				stringsplit,rjflz,A_LoopField,|
				if (rjflz2 = 1)
					{
						lvachk= +Check
					}
				LV_Add(lvachk,rjflz1)
			}
		LV_ModifyCol()
		LV_Modify(0, "-Select")		
		SB_SetText("Added " inclnum " ROMs and Jackets")
		guicontrol,,RLSTOT,%inclnum% items
		return	
	}
if (RJLSTYP = "Jackets ONLY")
	{
		inclnum= 
		rjlistview= 
		Loop, Parse, RJSYSDD_TDB, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				inclnum+=1
				rjflz1= 
				rjflz2= 
				rjflzl1= 
				rjflzl2= 
				stringsplit,rjflz,A_LoopField,|
				stringsplit,rjflzl,rjflz1,:
				if (rjflzl2 <> "")
					{
						lvachk= ""
						if (rjflz2 = 1)
							{
								lvachk= +Check
							}
						LV_Add(lvachk,rjflz1)
					}
			}
		LV_ModifyCol() 
		SB_SetText("Added " inclnum " Jackets")
		guicontrol,,RLSTOT,%inclnum% items
		LV_Modify(0, "-Select")
		return	
	}
if (RJLSTYP = "ROMs ONLY")
	{		
		if (RJALLFILES = 1)
			{
				gosub, RJFLTROMS
			}
		inclnum= 
		rjlistview= 
		Loop, Parse, RJSYSDD_TDB, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				inclnum+=1
				rjflz1= 
				rjflz2= 
				rjflzl1= 
				rjflzl2= 
				stringsplit,rjflz,A_LoopField,|
				stringsplit,rjflzl,rjflz1,:
				if (rjflzl2 = "")
					{
						lvachk= ""
						if (rjflz2 = 1)
							{
								lvachk= +Check
							}
						LV_Add(lvachk,rjflz1)
					}
			}
		LV_ModifyCol() 
		SB_SetText("Added " inclnum " ROMs")
		guicontrol,,RLSTOT,%inclnum% items
		return
	}
if (RJLSTYP = "All Files")
	{
		gosub, RJFLTRALL
		inclnum= 
		rjlistview= 
		Loop, Parse, RJSYSDD_TDB, `n, `r
			{
				if (A_LoopField = "")
					{
						continue
					}
				lvachk= +Check
				stringsplit,inclxl,A_LoopField,|
				if (inclxl2 = 0)
					{
						lvachk= ""
					}
				inclnum+=1
				LV_Add(lvachk,inclxl1)
			}
		LV_ModifyCol() 
		LV_Modify(0, "-Select")
		SB_SetText("Added " inclnum " items")
		guicontrol,,RLSTOT,%inclnum% items
		guicontrol,,RJLSTYP,|Jackets+ROMs||Jackets ONLY|ROMs ONLY|All Files
		return
	}


SB_SetText("Added " inclnum " items")
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;  RJ EDITS  ;;;;;;;;;;;;;

RJEDTA:
gui,submit,nohide

return
RJEDTB:
gui,submit,nohide

return

RJEDTBN:
gui,submit,nohide

return

RJEDTC:
gui,submit,nohide
guicontrolget,RJEDTC,,RJEDTC
return

RJEDTD:
gui,submit,nohide

return
RJEDTDN:
gui,submit,nohide

return
;};;;;;;;;;;;

;{;;;;;;;;;;;;;;; RJ RADIOS  ;;;;;;;;;;;;;;;;;;;

RJCPYMVCFG:
gui,submit,nohide

return

RJRad1A:
gui,submit,nohide
IniWrite, 1,rj\cur.ini,%RJSYSDD%,RJRUNDIR
return

RJRad1B:
gui,submit,nohide
IniWrite, 0,rj\cur.ini,%RJSYSDD%,RJRUNDIR
return

RJSYSRADB:
gui,submit,nohide
Iniread,syspref,emuCfgPresets.set,%RJSYSDD%
if syspref <> "ERROR")
	{
		loop, parse, syspref,`n
			{
				curepref1= 
				curepref2= 
				curepref3= 
				curepref4= 
				curepref5= 
				curepref6= 
				stringsplit,curepref,A_LoopField,=
				if (curepref3 <> "")
					{
						curepref3= =%curepref3%
					}
				if (curepref4 <> "")
					{
						curepref4= =%curepref4%
					}
				if (curepref5 <> "")
					{
						curepref5= =%curepref5%
					}
				if (curepref6 <> "")
					{
						curepref6= =%curepref6%
					}
				IniWrite,%curpref2%,rj\%RJSYSDD%.ini,%RJSYSDD%,%curpref1%
			}
	}
return

RJSYSRADC:
gui,submit,nohide

return

RJRad4A:
gui,submit,nohide

return

RJRad4B:
gui,submit,nohide

return

RJSYSRAD:
gui,submit,nohide
guicontrolget,RJSYSRADA,,RJSYSRADA
if (RJSYSRADA = 1)
	{
		EXSTCFG= rj\%RJSYSDD%.ini
	}
if (RJSYSRADB = 1)
	{
		EXSTCFG= rj\dflt.ini
	}
if (RJSYSRADC = 1)
	{
		EXSTCFG= rj\cur.ini
	}
gosub, LOADRJINI
return

RJSYSRADA:
gui,submit,nohide

return

RJXTRARCA:
gui,submit,nohide
iniwrite,2,rj\cur.ini,%RJSYSDD%,RJEXTRARC
return

RJXTRARCB:
gui,submit,nohide
iniwrite,3,rj\cur.ini,%RJSYSDD%,RJEXTRARC
return

RJRad8A:
gui,submit,nohide

return

RJRad8B:
gui,submit,nohide

return

RJMAP2ROFTYPA:
gui,submit,nohide
guicontrol,,RJMAP2PL,|Player2%kmprtxn%||%kmprd%\nolayout2%kmprxtn%
IniWrite, Player2%kmprtxn%,rj\cur.ini,%RJSYSDD%,RJMAP2PL
IniWrite, 0,rj\cur.ini,%RJSYSDD%,RJMAP2ROFTYP
return

RJMAP2ROFTYPB:
gui,submit,nohide
guicontrol,,RJMAP2PL,|Player2%kmprtxn%||%kmprd%\nolayout2%kmprxtn%
IniWrite, Player2%kmprtxn%,rj\cur.ini,%RJSYSDD%,RJMAP2PL
IniWrite, 1,rj\cur.ini,%RJSYSDD%,RJMAP2ROFTYP
return

RJMAP2ROFTYPC:
gui,submit,nohide
guicontrol,,RJMAP2PL,|%kmprd%\nolayout2%kmprxtn%||Player2%kmprtxn%
IniWrite, %kmprd%\nolayout2%kmprxtn%,rj\cur.ini,%RJSYSDD%,RJMAP2PL
IniWrite, 2,rj\cur.ini,%RJSYSDD%,RJMAP2ROFTYP
return

RJOVKM:
gui,submit,nohide
guicontrolget, RJOVKM,,RJOVKM
IniWrite, %RJOVKM%,rj\cur.ini,%RJSYSDD%,RJKEYOW
return

RJMAP1ROFTYPA:
gui,submit,nohide
guicontrol,,RJMAP1PL,|Player1%kmprtxn%||%kmprd%\nolayout1%kmprxtn%
IniWrite, Player1%kmprtxn%,rj\cur.ini,%RJSYSDD%,RJMAP1PL
IniWrite, 0,rj\cur.ini,%RJSYSDD%,RJMAP1ROFTYP
return

RJMAP1ROFTYPB:
gui,submit,nohide
guicontrol,,RJMAP1PL,|Player1%kmprtxn%||%kmprd%\nolayout1%kmprxtn%
IniWrite, Player1%kmprtxn%,rj\cur.ini,%RJSYSDD%,RJMAP1PL
IniWrite, 1,rj\cur.ini,%RJSYSDD%,RJMAP1ROFTYP
return

RJMAP1ROFTYPC:
gui,submit,nohide
guicontrol,,RJMAP1PL,|%kmprd%\nolayout1%kmprxtn%||Player1%kmprtxn%
IniWrite, %kmprd%\nolayout1%kmprxtn%,rj\cur.ini,%RJSYSDD%,RJMAP1PL
IniWrite, 2,rj\cur.ini,%RJSYSDD%,RJMAP1ROFTYP
return

RJRad6A:
gui,submit,nohide

return

RJRad6B:
gui,submit,nohide

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

LOADRJINI:
gui,submit,nohide
ifnotexist, %MAMELOC%\%MAMEAPP%
	{
		MAMEAPP= mame.exe
		MAMELOC= apps\mame
	}
IniRead, allrjvals, %EXSTCFG%,%RJSYSDD%
IniRead, RJMAMENM, %EXSTCFG%,%RJSYSDD%,RJMAMENM
StringSplit,mamensp,mamenmz,-,%A_Space% ""
mamename:= mamensp1
fnd= 
bibxl= 

ifnotexist, %MAMELOC%\%MAMEAPP%	
	{
		goto, ALLRJVR
	}

if (RJEMUPRECFG = "MAME - Arcade")
	{
		if (RJMAMENM <> 0)
			{
				newxtlst= 
				Loop,Read,%MAMELOC%\media.txt
						{
							avn1=
							avn2=
							avn3=
							avn4=
							avn5=
							avn6=
							avn7=
							avn8=
							avn9=
							avn10=
							splsys1= 
							stringsplit,splsys,A_LoopReadline,%A_Space%
							stringsplit,avn,a_Loopreadline,(),%A_Space%
							stringsplit,axn,a_Loopreadline,.,%A_Space%
							if (splsys1 = mamename)
								{
									medtyp:= avn2				
									fnd+=1
								}
							tmpmed:= avn2
									if (tmpmed <> medtyp)
										{											
											fnd+=1
											newxtlst= 
										}	
							if (splsys1 <> "")
								{
									if (splsys1 <> mamename)
										{
											fnd= 
										}
								}
							if (fnd >= 1)
								{
									ar := Object()
									Loop, %axn0%
										{
											new= % (axn%a_index%)
											if (axn%a_index% <> "")
												{
													if (a_index <> 1)
														{
															ar.insert(new)
														}
															
												}
										}
									for k, v in ar
										{
											itrate= 
											Loop, newtxtlst, `,
											if (A_LoopField = v)
												{
													itrate= 1
												}
											if (itrate = "")
												{
													newxtlst.= v . "`,"
												}
										}
									bibxl.= newxtlst . "=" . "`"" . avn . "`"" . "|"
								}				
						}
							if (fnd = 1)
								{
									msgbox,1,,"%splsys1%`n%bibxl%"
								}
							if (splsys1 <> "")
								{	
									if (splsys1 <> mamename)
										{
											fnd= 
											axn1= 
											axn2= 
											axn3= 
											axn4= 
											axn5= 
											axn6= 
											axn7= 
											axn8= 
											axn9= 
											axn10= 
											axn11= 
											axn12= 
											axn13= 
											axn14= 
											axn15= 
											axn16= 
											axn17= 
											axn18= 
											axn19= 
											axn20= 
											axn21= 
											axn22= 
											axn23= 
										}
								}
			}
	}


/*
			optfnd= 
			argfnd= 
			Loop, Parse, optparse,`n
				{
					stringsplit, emunmq,A_LoopField,?
					if (emunmq1 = emuname)
						{
							stringsplit, RJEMUZ,emunmq2,=
							if (RJEMUZ1 = "RJEMUOPTS")
								{
									RJEMUOPTS:= RJEMUZ2
									optfnd= 1
									continue
								}
							if (RJEMUZ1= "RJEMUARGS")
								{
									RJEMUARGS:= RJEMUZ2
									argfnd= 1
									continue
								}
						}
				}
*/

ALLRJVR:
BLNKLNCH= 
Loop, Parse, allrjvals,`n
	{
		rjaval1= 
		rjaval2= 
		rjaval3= 
		rjaval4= 
		rjaval5= 
		rjaval6= 
		emprs1= 
		emprs2= 
		emprs3= 
		emprs4= 
		stringsplit,emprs, A_Loopfield,?
		if (emprs2 = "")
			{
				emprs2 = %emprs1%
			}
			
		stringsplit, rjaval, emprs2,=,$
		if (rjaval3 <> "")
			{
				rjaval2= %rjaval2%=%rjaval3%
			}
		if (rjaval4 <> "")
			{
				rjaval2= %rjaval2%=%rjaval4%
			}
		if (rjaval5 <> "")
			{
				rjaval2= %rjaval2%=%rjaval5%
			}
		if (rjaval6 <> "")
			{
				rjaval2= %rjaval2%=%rjaval6%
			}
		try gosub, %rjaval1%
		catch
			{
			}
	}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;  RJ INI LOADING  ;;;;;;;;;

RJEMUPRESET:
gui,submit,nohide
guicontrol,,RJEMUPRECFG,|%rjaval2%||%emulist%
return

RJMAMENM:
gui,submit,nohide
RJMAMENAME:= rjaval2
return

RJMEDNM:
gui,submit,nohide
RJMEDNM:= rjaval2
return

RJEMULOC:
rjemuxe= 
rjemulocd= 
gui,submit,nohide
guicontrol,,RJCHKQ,0
guicontrol,,RJCHKQ,Other
RJEMULOC= 0
if (rjaval2 <> 0)
	{
		RJEMULOC:= rjaval2
		guicontrol,,RJCHKQ,1
		SplitPath,RJEMULOC,rjemuxe,rjemulocd
		guicontrol,move,RJCHKQ, w60
		guicontrol,,RJCHKQ,%rjemuxe%
	}
return

RJSYSCFG:
gui,submit,nohide
guicontrol,,RJSYSRADB,1
if (rjaval2 = 0)
	{
		guicontrol,,RJSYSRADA,1
	}
if (rjaval2 = 1)
	{
		guicontrol,,RJSYSRADB,1
	}
if (rjaval2 = 2)
	{
		guicontrol,,RJSYSRADC,1
	}
return

RJEMUOPTS:
gui,submit,nohide
guicontrol,,RJEOPTSCBX,|%rjaval2%||%INJOPT%
return

RJEMUARGS:
guicontrol,,RRJEARGSCBX,|%rjaval2%||%INJARG%
gui,submit,nohide
return

RJQUOTES:
gui,submit,nohide
guicontrol,,RJCHKU,%rjaval2%
return

RJPATH:
gui,submit,nohide
guicontrol,,RJCHKT,%rjaval2%
return

RJEXT:
gui,submit,nohide
guicontrol,,RJCHKS,%rjaval2%
return

RJRUNDIR:
gui,submit,nohide
guicontrol,,RJRAD1B,1
if (rjaval2 = 1)
	{
		guicontrol,,RJRAD1A,1
	}
IniWrite,%rjaval2%,rj\cur.ini,%RJSYSDD%,RJRUNDIR	
return

ROMNAME:
gui,submit,nohide
guicontrol,,RJCHKK,0
if (rjaval2 = 1)
	{
		guicontrol,,RJCHKK,1
	}
return

RJEMUCFG:
gui,submit,nohide
guicontrol,,RJCHKF,0
if (rjaval2 >= 1)
	{
		guicontrol,,RJCHKF,1
		guicontrol,enable,RJCHKO
		guicontrol,enable,RJRAD6A
		guicontrol,enable,RJRAD6B
		guicontrol,enable,RJPRECFGCBX
		guicontrol,enable,RJADDPRECFG
		guicontrol,enable,RJREMPRECFG
		guicontrol,enable,RJCPYMVCFGA
		guicontrol,enable,RJCPYMVCFGB
		guicontrol,enable,RJPOSTCFGCBX
		guicontrol,enable,RJADDPOSTCFG
		guicontrol,enable,RJREMPOSTCFG
	}
return

RJEMUCFGOV:
gui,submit,nohide
guicontrol,,RJCHKO,0
if (rjaval2 = 1)
	{
		guicontrol,,RJCHKO,1
	}
return

RJLNCHCFG:
gui,submit,nohide
guicontrol,,RJENLNCHR,0
if (rjaval2 >= 1)
	{
		guicontrol,,RJENLNCHR,1
		guicontrol,enable,RJLNCHOVR
		guicontrol,enable,RJRAD4A
		guicontrol,enable,RJRAD4B
		guicontrol,enable,RJTXTB
		guicontrol,enable,RJEMUPRECFG
		guicontrol,enable,RJEMUPRM
		guicontrol,enable,RJCHKQ
		guicontrol,enable,RJBUTM
		guicontrol,enable,RJCHKKK
	}
return

RJLNCHCFGOW:
gui,submit,nohide
guicontrol,,RJLNCHOVR,0
gui, font, s9 normal	
guicontrol, font, RJLNCHOVR
guicontrol,,RJLNCHOVR,Overwrite
if (rjaval2 = 1)
	{
		gui, font, s11 bold	
		guicontrol, font, RJLNCHOVR
		guicontrol,,RJLNCHOVR,Overwrite
		guicontrol,,RJLNCHOVR,1
	}
return

RJDISCMNT:
gui,submit,nohide
guicontrol,,RJENDMNT,%rjaval2%
if (rjaval2 = 1)
	{
		guicontrol,enable,RJDMNTDD
		guicontrol,enable,RJDIMGET
		guicontrol,enable,RJRAD8A
		guicontrol,enable,RJRAD8B
		guicontrol,enable,RJENDMOV
	}
return

RJDISKMNTAPP:
gui,submit,nohide

return

RJDISCIMG:
gui,submit,nohide

return

RJSETLST:
gui,submit,nohide
return

RJNICEFLDR:
gui,submit,nohide
return



RJROMINJ:
gui,submit,nohide

return

RJLNCHP:
gui, submit,nohide
if (rjaval2 = "X")
	{
		BLNKLNCH= 1
	}
return

RJMULTIDISC:
gui,submit,nohide
guicontrol,,RJCHKR,%rjaval2%
if (rjaval2 = 1)
	{
		guicontrol,enable,RJCBXJ
	}
return

RJDISCIDENT:
gui,submit,nohide
guicontrol,,RJCBXJ,|%rjaval2%||(Disk 1 of|(Disk 1 of|(Disk A|Disk 1
return

RJROMXT:
gui,submit,nohide
if (rjaval2 <> 0)
	{
		guicontrol,,RJEMUXTCBX,|%rjaval2%||.exe`,.cmd`,,bat|.bin`,.cue
	}
return

RJSUBDS:
gui,submit,nohide
Loop, Parse, rjaval2,|,""
	{
		subds1= 
		subds2= 
		subds3= 
		subds4= 
		subds5= 
		subds6= 
		subds7= 
		subds8= 
		subds9= 
		subds10= 
		stringsplit,subdz,A_LoopField,:,""
			if (A_Index = 1)
				{
					SUBDPOP.= subdz1 . "|" . "|"
					If (subdz2 = 1)
						{
							guicontrol,,RJSUBDH,1
						}
				continue
					}
				SUBDPOP.= subdz1 . "|"
	}
guicontrol,,RJSUBDCBX,|%SUBDPOP%
return

SETLST:
return
gui,submit,nohide
SETLST= 
Loop, Parse, rjaval2, |
	{
		SETLST.= A_LoopField . "|"
	}
return		

RJABSOLROM:
guicontrol,,RJCHKK,%rjaval2%
IniWrite, %rjaval2%,rj\cur.ini,%RJSYSDD%,RJABSOLROM
return


RJKEYMAPPER:
gui,submit,nohide
if (rjaval2 = 0)
	{
		rjaval2= %keympr%
	}
SplitPath,rjaval2,,,,keymprn
guicontrol,,RJMAPDD,|%rjaval2%||Antimicro|Xpadder
IniWrite, %rjaval2%,rj\cur.ini,%RJSYSDD%,RJKEYMAPPER
return

RJKEYON:
gui,submit,nohide
guicontrol,,RJENMAP,0
if (rjaval2 = 1)
	{
		guicontrol,,RJENMAP,1
		guicontrol,enable,RJOVKM
		guicontrol,enable,RJMAPDD
		guicontrol,enable,RJMAPRET
		guicontrol,enable,RJMAPRETOPN
		guicontrol,enable,RJMAP1ROFTYPA
		guicontrol,enable,RJMAP1ROFTYPB
		guicontrol,enable,RJMAP1ROFTYPC
		guicontrol,enable,RJMAP1PL
		guicontrol,enable,RJMAP1PLOPN
		guicontrol,enable,RJMAP2ROFTYPA
		guicontrol,enable,RJMAP2ROFTYPB
		guicontrol,enable,RJMAP2ROFTYPC
		guicontrol,enable,RJMAP2PL
		guicontrol,enable,RJMAP2PLOPN
	}
return

RJKEYOW:
gui,submit,nohide
guicontrol,,RJOVKM,%rjaval2%
return

RJMASTERPROF:
gui,submit,nohide
if (rjaval2 <> "")
	{
		guicontrol,,RJMAPRET,|%rjaval2%||%kmprd%\Mediacenter%kmprxtn%|%kmprd%\nolayout1%kmprxtn%
	}
guicontrolget,RJMAPRET,,RJMAPRET
IniWrite, %RJMAPRET%,rj\cur.ini,%RJSYSDD%,RJMASTERPROF	
return

RJPLYR1:
gui,submit,nohide
if (rjaval2 <> "")
	{
		guicontrol,,RJMAP1PL,|%rjaval2%||Player1%kmprxtn%|%kmprd%\nolayout1%kmprxtn%
	}
guicontrolget,RJPLYR1,,RJMAP1PL
IniWrite, %RJPLYR1%,rj\cur.ini,%RJSYSDD%,RJPLYR1
return

RJPLYR2:
gui,submit,nohide
if (rjaval2 <> "")
	{
		guicontrol,,RJMAP2PL,|%rjaval2%||Player2%kmprxtn%|%kmprd%\nolayout2%kmprxtn%
	}
guicontrolget,RJPLYR2,,RJMAP2PL
IniWrite, %RJPLYR2%,rj\cur.ini,%RJSYSDD%,RJPLYR2
return

RJPOSTOPT:
gui,submit,nohide
guicontrol,,RJEDTO,
return

RJPREOPT:
gui,submit,nohide
guicontrol,,RJEDTO,
return

RJPRERUN:
gui,submit,nohide
guicontrol,,RJDDLP,|%rjaval2%| |
return

RJACKET:
gui,submit,nohide
guicontrol,,RJCHKA,0
if (rjaval2 = 1)
	{
		guicontrol,,RJCHKA,1
		guicontrol,enable,RJADDSUBD
		guicontrol,enable,RJREMSUBD
		guicontrol,enable,RJSUBDCBX
		guicontrol,enable,RJTXTA1
		guicontrol,enable,RJSUBDH
		guicontrol,enable,RJCNSLDD
		guicontrol,enable,RJENCNSLD
		guicontrol,enable,RJENXTRARC
	}
return

RJCONSOLID:
gui,submit,nohide
guicontrol,disable,RJCNSLDD
guicontrol,,RJENCNSLD,%rjaval2%
if (rjaval2 = "Individuate")
	{
		guicontrol,,RJCNSLDD,|Individuate||()[]|()|[]
	}
if (rjaval2 <> "Individuate")
	{
		guicontrol,enable,RJCNSLDD
		guicontrol,,RJENCNSLD,1
		guicontrol,,RJCNSLDD,|%rjaval2%||()[]|()|[]|Individuate
	}
return

RJEXTRARC:
gui,submit,nohide
guicontrol,,RJENXTRARC,0
if (rjaval2 >= 1)
	{
		guicontrol,,RJENXTRARC,1
		guicontrol,enable,RJXTRARCA
		guicontrol,enable,RJXTRARCB
		guicontrol,enable,RJTXTK
		guicontrol,enable,RJRJXTRARCDD
		if (rjaval2 = 2)
			{
				guicontrol,,RJXTRARCA,1
			}
		if (rjaval2 = 3)
			{
				guicontrol,,RJXTRARCB,1
			}
	
		}
return

RJARCLOC:
gui,submit,nohide
if (rjaval2 = 0)
	{
		guicontrol,,RJXTRARCDD,|Store||Delete|Keep
	}
return
if (rjaval2 = 1)
	{
		guicontrol,,RJXTRARCDD,|Delete||Store|Keep
	}
return
if (rjaval2 = 3)
	{
		guicontrol,,RJXTRARCDD,|Keep||Store|Delete
	}
return

RJPRECFG:
gui,submit,nohide
guicontrol,,RJPRECFGCBX,|%rjaval2%
return

RJPOSTCFG:
gui,submit,nohide
guicontrol,,RJPOSTCFGCBX,|%rjaval2%
return

RJPOSTRUN:
gui,submit,nohide
if (RJDDLF = "Post-Command")
	{
		guicontrol,,RJDDLP,|%rjaval2%| |
	}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;    CORE OPTION FUNCTIONS    ;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;    HIDE UI ELEMENTS   ;;;;;;;;;;
HideCoreUI:
GuiControl, hide,COREDDLB
GuiControl, hide,COREDDLC
GuiControl, hide,COREDDLD
GuiControl, hide,COREDDLE
GuiControl, hide,COREDDLTXTA
GuiControl, hide,COREDDLTXTB
GuiControl, hide,COREDDLTXTC
GuiControl, hide,COREDDLTXTD
GuiControl, hide,CORERADA
GuiControl, hide,CORERADB
GuiControl, hide,CORECMBA
GuiControl, hide,CORECMBTXTA
GuiControl, hide,CORERADC
GuiControl, hide,CORERADD
GuiControl, hide,CORERADE
GuiControl, hide,CORERADF
GuiControl, hide,CORECHKA
GuiControl, hide,CORECHKB
GuiControl, hide,CORECHKC
GuiControl, hide,COREDDLH
GuiControl, hide,CORERADG
GuiControl, hide,CORERADH
GuiControl, hide,CORECHKD
GuiControl, hide,CORECHKD
GuiControl, hide,CORECMBB
GuiControl, hide,CORECMBTXTB
GuiControl, hide,CORESLDA
GuiControl, hide,CORESLDTXTA
GuiControl, hide,CORERADI
GuiControl, hide,CORERADJ
GuiControl, hide,CORERADK
GuiControl, hide,CORERADL
GuiControl, hide,COREDDLTXTE
GuiControl, hide,COREDDLF
GuiControl, hide,COREDDLG
GuiControl, hide,COREDDLH
GuiControl, hide,COREDDLI
GuiControl, hide,COREDDLJ
GuiControl, hide,COREDDLK
GuiControl, hide,COREDDLL
GuiControl, hide,COREDDLTXTF
GuiControl, hide,COREDDLTXTG
GuiControl, hide,COREDDLTXTH
GuiControl, hide,COREDDLTXTI
GuiControl, hide,CORECHKE
GuiControl, hide,CORECHKF
GuiControl, hide,CORECHKG
GuiControl, hide,CORECHKH
GuiControl, hide,CORECHKI
GuiControl, hide,CORERADM
GuiControl, hide,CORERADN
GuiControl, hide,CORERADO
GuiControl, hide,CORERADP
GuiControl, hide,CORERADQ
GuiControl, hide,CORERADR
GuiControl, hide,CORERADS
GuiControl, hide,CORERADT
GuiControl, hide,CORERADU
GuiControl, hide,CORERADV
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;    CORE RESOLV   ;;;;;;;;;;;;;;;;;;

LoadRACFG:
FileSelectFile, coreoptfile, 3, racoreopt.cfg,1
if (coreoptfile <> "")
{
filecopy, %coreoptfile%,%racoreopt%,1
gosub, GetOptVars
}
return

CoreOptCopy:
gui, submit, nohide
guicontrol,hide,PICINV
guicontrol,enable,COREDDLA
guicontrol,show,SAVECOREOPT
guicontrol,show,CORENAMEDT
guicontrol,show,RESETCOREOPT
guicontrol,show,LOADRACORE
guicontrol,show,SELCORCFGLOC
guicontrol,show,SAVECORECFG
guicontrol,show,CORENAMTXT
guicontrol,show,DELCORECFG
guicontrolget,COREOPTCPY,,COREOPTCPY
if (COREOPTCPY = 0)
{
guicontrol,,COREDDLA,|Select_A_Core||%corelist%
guicontrol,show,PICINV
guicontrol,disable,COREDDLA
guicontrol, hide,CORENAMEDT
guicontrol, hide,SAVECOREOPT
guicontrol, hide,RESETCOREOPT
guicontrol, hide,LOADRACORE
guicontrol, hide,SELCORCFGLOC
guicontrol, hide,SAVECORECFG
guicontrol, hide,CORENAMTXT
guicontrol, hide,DELCORECFG
gosub, HideCoreUI
}
CORECOPY= %COREOPTCPY%
iniwrite, "%CORECOPY%", Settings.ini,GLOBAL,core_option_copy
return

ResetCoreOptions:
gui, submit, nohide
guicontrolget,currstcore,,COREDDLA
gosub, %coreconc1%%coreconc2%%coreconc3%%coreconc4%RESET
guicontrol, ,COREDDLA,|Select_A_Core|%currstcore%||%corelist%
return

SaveCoreOptions:
gosub, WriteOptVars
FileCopy,%racoreopt%,%raexeloc%\retroarch-core-options.cfg, 1
return

SelectCoreCfgLoc:
coreoptflie= 
gosub, getCREN
FileSelectFile, coreoptfile, S24, %raexeloc%\config\%corcfgnam%\%corcfgnam%.cfg
if (coreoptfile <> "")
{
	guicontrol,,CORENAMEDT,%raexeloc%\config\%corcfgnam%\%corcfgnam%.cfg
	return
}
else 
{
guicontrol,,CORENAMEDT,%raexeloc%\config\%corcfgnam%\%corcfgnam%.cfg
}
return

SaveCoreCfg:
gui, submit, nohide
guicontrolget,CORENAMEDT,,CORENAMEDT
SplitPath, CORENAMEDT, ccvf, corecfgfldr,,,
ifnotexist, %corecfgfldr%
{
FileCreateDir, %corecfgfldr%
}
FileCopy, config.cfg,%CORENAMEDT%, 1
return

DeleteCoreCfg:
gosub, getCREN
if (coreoptfile = "")
{
coreoptfile= %raexeloc%\config\%corcfgnam%\%corcfgnam%.cfg
}
MsgBox,3,Confirm,Are you sure you want to delete %coreoptfile% ?
ifmsgbox, yes
{
FileDelete, %coreoptfile%
guicontrol,,CORENAMEDT,
}
return

;{;;;;;;;;;;;;;;;;   CORE TO CFG NAME    ;;;;;;;;;;;;;;;;;
getCREN:
szip= 
corcfgnam= %ccv%
if (ccv = "bsnes_accuracy")
	{
		corcfgnam= bSNES
	}
if (ccv = "bsnes_balanced")
	{
		corcfgnam= bSNES
	}
if (ccv = "bsnes_cplusplus98")
	{
		corcfgnam= bSNES
	}
if (ccv = "bsnes mercury_accuracy")
	{
		corcfgnam= bsnes_mercury
	}
if (ccv = "bsnes_mercury_balanced")
	{
		corcfgnam= bsnes-mercury
	}
if (ccv = "bsnes_mercury_performance")
	{
		corcfgnam= bsnes-mercury
	}
if (ccv = "bsnes_performance")
	{
		corcfgnam= bSNES
	}
if (ccv = "bzsnes")
	{
		corcfgnam= bZSNES
	}
if (ccv = "catsfc")
	{
		corcfgnam= CATSFC(SNES9x)
	}
if (ccv = "emux_chip8")
	{
		corcfgnam= emux-chip8
	}
if (ccv = "emux_gb")
	{
		corcfgnam= emux-gb
	}
if (ccv = "crocods")
	{
		corcfgnam= crocods
	}
if (ccv = "emux_nes")
	{
		corcfgnam= emux-nes
	}
if (ccv = "dolphin")
	{
		corcfgnam= Dolphin
	}
if (ccv = "DeSmuME")
	{
		corcfgnam= DeSmuME
	}
if (ccv = "Citra")
	{
		corcfgnam= Citra
	}
if (ccv = "emux_sms")
	{
		corcfgnam= emux-sms
	}
if (ccv = "fbalpha2012_cps1")
	{
		szip= 1
		corcfgnam= FB Alpha 2012 CPS1
	}
if (ccv = "fbalpha2012_cps2")
	{
		szip= 1
		corcfgnam= FB Alpha 2012 CPS-2
	}
if (ccv = "fbalpha2012")
	{
		szip= 1
		corcfgnam= FB Alpha 2012
	}
if (ccv = "fbalpha2012_neogeo")
	{
		szip= 1
		corcfgnam= FB Alpha 2012 NeoGeo
	}
if (ccv = "fbalpha")
	{
		szip= 1
		corcfgnam= FB Alpha
	}
if (ccv = "fba")
	{
		szip= 1
		corcfgnam= FB Alpha
	}
if (ccv = "fb_alpha_cps2")
	{
		szip= 1
		corcfgnam= FB Alpha CPS2
	}
if (ccv = "fb_alpha")
	{
		szip= 1
		corcfgnam= FB Alpha
	}
if (ccv = "fb_alpha_neo")
	{
		szip= 1
		corcfgnam= FB Alpha NeoGeo
	}
if (ccv = "fuse")
	{
		szip= 1
		corcfgnam= Sinclair ZX Spectrum
	}
if (ccv = "81")
	{
		szip= 1
		corcfgnam= Sinclair ZX 81
	}
if (ccv = "gpSP")
	{
		szip= 1
		corcfgnam= gpSP
	}
if (ccv = "gambatte_gbc")
	{
		corcfgnam= Gambatte-GBC
	}
if (ccv = "genesis_plus_gx_gg")
	{
		corcfgnam= Genesis Plus GX - Game Gear
	}
if (ccv = "genesis_plus_gx")
	{
		corcfgnam= Genesis Plus GX
	}
if (ccv = "genesis_plus_gx_segacd")
	{
		corcfgnam= Genesis Plus GX - Sega CD
	}
if (ccv = "genesis_plus_gx_sms")
	{
		corcfgnam= Genesis Plus GX - SMS
	}
if (ccv = "parallel_n64")
	{
		corcfgnam= ParaLLEl N64
	}
if (ccv = "glupen64")
	{
		glpndr= OpenGL
		if (videoDriver = "vulkan")
			{
				glpndr= Vulkan
			}
corcfgnam= GlupeN64 %glpndr%
	}
if (ccv = "mame2000")
	{
		szip= 1
		corcfgnam= MAME 2000
	}
if (ccv = "mame2003")
	{
		szip= 1
		corcfgnam= MAME 2003
	}
if (ccv = "mame 2010")
	{
		szip= 1
		corcfgnam= MAME 2010
	}
if (ccv = "mame2016")
	{
		szip= 1
		corcfgnam= MAME 2016
	}
if (ccv = "mame2014")
	{
		szip= 1
		corcfgnam= MAME 2014
	}
if (ccv = "mame")
	{
		szip= 1
		corcfgnam= MAME
	}
if (ccv = "mednafen_gba")
	{
		corcfgnam= Mednafen GBA
	}
if (ccv = "mednafen_lynx")
	{
		corcfgnam= Mednafen Lynx
	}
if (ccv = "mednafen_ngp")
	{
		corcfgnam= Mednafen NeoPop
	}
if (ccv = "mednafen_pce_fast")
	{
		corcfgnam= Mednafen PCE Fast
	}
if (ccv = "mednafen_pcfx")
	{
		corcfgnam= Mednafen PC-FX
	}
if (ccv = "mednafen_psx_hw")
	{
		corcfgnam= Beetle PSX-HW
	}
if (ccv = "pcsx_rearmed")
	{
		corcfgnam= PCSX-ReARMed
	}
if (ccv = "mednafen_psx")
	{
		corcfgnam= Beetle PSX
	}
if (ccv = "mednafen_saturn")
	{
		corcfgnam= Mednafen Saturn
	}
if (ccv = "mednafen_snes")
	{
		corcfgnam= Mednafen Snes
	}
if (ccv = "mednafen_supergrafx")
	{
		corcfgnam= Mednafen SuperGrafx
	}
if (ccv = "mednafen_vb")
	{
		corcfgnam= Mednafen VB
	}
if (ccv = "mednafen_wswan")
	{
		corcfgnam= Mednafen WonderSwan
	}
if (ccv = "mess2014")
	{
		szip= 1
		corcfgnam= MESS 2014
	}
if (ccv = "px68k")
	{
		corcfgnam= PX68K
	}
if (ccv = "puae")
	{
		corcfgnam= PUAE
	}
if (ccv = "fuse")
	{
		corcfgnam= fuse
	}
if (ccv = "bluemsx")
	{
		corcfgnam= Blue-MSX
	}
if (ccv = "quicknes")
	{
		corcfgnam= QuickNES
	}
if (ccv = "reicast")
	{
		corcfgnam= Reicast
	}
if (ccv = "redream")
	{
		corcfgnam= Redream
	}
if (ccv = "scummvm")
	{
		corcfgnam= ScummVM
	}
if (ccv = "snes9x2002")
	{
		corcfgnam= Snes9x 2002
	}
if (ccv = "snes9x2005")
	{
		corcfgnam= Snes9x 2005
	}
if (ccv = "snes9x2005_plus")
	{
		corcfgnam= Snes9x 2005 plus
	}
if (ccv = "snes9x2010")
	{
		corcfgnam= Snes9x 2010
	}
if (ccv = "snes9x")
	{
		corcfgnam= Snes9x
	}
if (ccv = "snes9x_next")
	{
		corcfgnam= Snes9x Next
	}
if (ccv = "stella")
	{
		corcfgnam= Stella
	}
if (ccv = "tgbdual")
	{
		corcfgnam= TGB Dual
	}
if (ccv = "ume2014")
	{
		szip= 1
		corcfgnam= UME 2014
	}
if (ccv = "vbam")
	{
		corcfgnam= VBA-M
	}
if (ccv = "vba_next")
	{
		corcfgnam= VBA Next
	}
if (ccv = "vecx")
	{
		corcfgnam= VecX
	}
if (ccv = "virtualjaguar")
	{
		corcfgnam= Virtual Jaguar
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;   REVERSE SYSTEM LOOKUP   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
revCREN:
szip= 
ASPOP=
corelk= %syslk%
corverlk1=
corverlk2=
corverlk3=
corverlk4=
stringsplit,corverlk,corever,%A_Space%,()
if (syslk = "bSNES")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		ifInString,corever,Balanced
			{
				corelk= bsnes_balanced
			}
		ifInString,corever,Performance
		{
		ifInString,corever,v095
			{
				corelk= bsnes_performance
			}
		ifInString,corever,v085
			{
				corelk= bsnes_cplusplus98
			}
		}
		ifInString,corever,Accuracy
		{
			corelk= bsnes_accuracy
		}
	}
if (syslk = "bsnes-mercury")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		ifInString,corever,Accuracy
			{
				corelk= bsnes mercury_accuracy
			}
		ifInString,corever,Balanced
			{
				corelk= bsnes_mercury_balanced
			}
		ifInString,corever,Performance
			{
				corelk= bsnes_mercury_performance
			}
	}
if (syslk = "bZSNES")
	{
	ASPOP= Nintendo - Super Nintendo Entertainment System
	corelk= bzsnes
	}
if (syslk = "CATSFC(SNES9x)")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= catsfc
	}
if (syslk = "emux-chip8")
	{
		corelk= emux_chip8
	}
if (syslk = "emux-gb")
	{
		ASPOP= Nintendo - Game Boy
		corelk= emux_gb
	}
if (syslk = "crocods")
	{
		ASPOP= Amstrad - CPC
		corelk= crocods
	}
if (syslk = "emux-nes")
	{
		ASPOP= Nintendo - Nintendo Entertainment System
		corelk= emux_nes
	}
if (syslk = "Dolphin")
	{
		ASPOP= Nintendo - Gamecube-WII
		corelk= dolphin
	}
if (syslk = "emux-sms")
	{
		ASPOP= Sega - Master System - Mark III
		corelk= emux_sms
	}
if (syslk = "ProSystem")
	{
		ASPOP= Atari - 7800
		corelk= prosystem
	}
if (syslk = "FB Alpha 2012 CPS1")
	{
		ASPOP= Capcom Play System - CPS
		szip= 1
		corelk= fbalpha2012_cps1
	}
if (syslk = "FB Alpha 2012 CPS-2")
	{
		ASPOP= Capcom Play System - CPS II
		szip= 1
		corelk= fbalpha2012_cps2
	}
if (syslk = "FB Alpha 2012 CPS2")
	{
		ASPOP= Capcom Play System - CPS II
		szip= 1
		corelk= fbalpha2012_cps2
	}
if (syslk = "FB Alpha 2012")
	{
		ASPOP= MAME
		szip= 1
		corelk= fbalpha2012
	}
if (syslk = "FB Alpha 2012 NeoGeo")
	{
		ASPOP= SNK - Neo Geo MVS
		szip= 1
		corelk= fbalpha2012_neogeo
	}
if (syslk = "FB Alpha")
	{
		ASPOP= MAME
		szip= 1
		corelk= fbalpha
	}
if (syslk = "final burn alpha")
	{
		ASPOP= MAME
		szip= 1
		corelk= fba
	}
if (syslk = "Mednafen GBA")
	{
		ASPOP= Nintendo - Game Boy Color
		corelk= mednafen_gba
	}
if (syslk = "Gambatte-GBC")
	{
		ASPOP= Nintendo - Game Boy Color
		corelk= gambatte_gbc
	}
if (syslk = "Gambatte")
	{
		ASPOP= Nintendo - Game Boy
		corelk= gambatte
	}
if (syslk = "DesMuME")
	{
		ASPOP= Nintendo - Nintendo DS
		corelk= desmume
	}
if (syslk = "Citra")
	{
		ASPOP= Nintendo - Nintendo 3DS
		corelk= citra
	}
if (syslk = "Genesis Plus GX - Game Gear")
	{
		ASPOP= Sega - Game Gear
		corelk= genesis_plus_gx_gg
	}
if (syslk = "Genesis Plus GX")
	{
		ASPOP= Sega - Mega Drive - Genesis
		corelk= genesis_plus_gx
	}
if (syslk = "Genesis Plus GX - Sega CD")
	{
		ASPOP= Sega - Mega-CD - Sega CD
		szip= 0
		corelk= genesis_plus_gx_segacd
	}
if (syslk = "Genesis Plus GX - SMS")
	{
		ASPOP= Sega - Master System - Mark III
		corelk= genesis_plus_gx_sms
	}
if (syslk = "Genesis Plus GX - GG")
	{
		ASPOP= Sega - Game Gear
		corelk= genesis_plus_gx_gg
	}
if (syslk = "GlupeN64 OpenGL")
	{
		ASPOP= Nintendo - Nintendo 64
		corelk= glupen64
	}
if (syslk = "Mupen64Plus OpenGL")
	{
		ASPOP= Nintendo - Nintendo 64
		corelk= mupen64plus
	}
if (syslk = "ParaLLEl N64")
	{
		ASPOP= Nintendo - Nintendo 64
		corelk= parallel_n64
	}
if (syslk = "GlupeN64 Vulkan")
	{
		ASPOP= Nintendo - Nintendo 64
		corelk= glupen64
	}
if (syslk = "MAME 2000")
	{
		ASPOP= MAME
		szip= 1
		corelk= mame2000
	}
if (syslk = "MAME 2003")
	{
		ASPOP= MAME
		szip= 1
		corelk= mame2003
	}
if (syslk = "MAME 2010")
	{
		ASPOP= MAME
		zip= 1
		corelk= mame 2010
	}
if (syslk = "MAME 2014")
	{
		ASPOP= MAME
		szip= 1
		corelk= mame2014
	}
if (syslk = "MAME 2016")
	{
		ASPOP= MAME
		szip= 1
		corelk= mame2016
	}
if (syslk = "MAME")
	{
		ASPOP= MAME
		szip= 1
		corelk= mame
	}
if (syslk = "Mr.Boom")
	{
		ASPOP= Mr. Boom	
		szip= 1
		corelk= mrboom
	}
if (syslk = "Mednafen GBA")
	{
		ASPOP= Nintendo - Game Boy Advance
		corelk= mednafen_gba
	}
if (syslk = "gpSP")
	{
		ASPOP= Nintendo - Game Boy Advance
		corelk= gpSP
	}
if (syslk = "Mednafen Lynx")
	{
		ASPOP= Atari - Lynx
		corelk= mednafen_lynx
	}
if (syslk = "Mednafen NeoPop")
	{
		ASPOP= SNK - Neo Geo Pocket
		corelk= mednafen_ngp
	}
if (syslk = "Mednafen PCE Fast")
	{
		ASPOP= NEC - PC Engine - TurboGrafx 16
		corelk= mednafen_pce_fast
	}
if (syslk = "Mednafen/Beetle PCE Fast")
	{
		ASPOP= NEC - PC Engine - TurboGrafx 16
		corelk= mednafen_pce_fast
	}
if (syslk = "Mednafen PC-FX")
	{
		ASPOP= NEC - PC-FX
		corelk= mednafen_pcfx
	}
if (syslk = "Mednafen PSX HW")
	{
		ASPOP= Sony - Playstation
		szip= 0
		corelk= mednafen_psx_hw
	}
if (syslk = "Mednafen PSX")
	{
		ASPOP= Sony - Playstation
		szip= 0
		corelk= mednafen_psx
	}
if (syslk = "PCSX-ReARMed")
	{
		ASPOP= Sony - Playstation
		szip= 0
		corelk= pcsx_rearmed
	}
if (syslk = "Mednafen Saturn")
	{
		ASPOP= Sega - Saturn
		szip= 0
		corelk= mednafen_saturn
	}
if (syslk = "Mednafen Snes")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= mednafen_snes
	}
if (syslk = "PicoDrive")
	{
		ASPOP= Sega - 32X
		corelk= picodrive
	}
if (syslk = "Mednafen SuperGrafx")
	{
		ASPOP= NEC - PC Engine - SuperGrafx
		corelk= mednafen_supergrafx
	}
if (syslk = "Mednafen VB")
	{
		ASPOP= Nintendo - Virtual Boy
		corelk= mednafen_vb
	}
if (syslk = "Mednafen WonderSwan")
	{
		ASPOP= Bandai - WonderSwan
		corelk= mednafen_wswan
	}
if (syslk = "MESS 2014")
	{
		szip= 1
		corelk= mess2014
	}
if (syslk = "PUAE")
	{
		ASPOP= Commodore - Amiga
		szip= 0
		corelk= puae
	}
if (syslk = "PX68K")
	{
		ASPOP= Sharp - X68000
		szip= 0
		corelk= px68k
	}
if (syslk = "QuickNES")
	{
		ASPOP= Nintendo - Nintendo Entertainment System
		corelk= quicknes
	}
if (syslk = "bnes")
	{
		ASPOP= Nintendo - Nintendo Entertainment System
		corelk= bnes
	}
if (syslk = "Mesen")
	{
		ASPOP= Nintendo - Nintendo Entertainment System
		corelk= mesen
	}

if (syslk = "Nestopia")
	{
		ASPOP= Nintendo - Nintendo Entertainment System
		corelk= nestopia
	}
if (syslk = "PPSSPP")
	{
		ASPOP= Sony - Playstation Portable
		corelk= ppsspp
	}
if (syslk = "Reicast")
	{
		ASPOP= Sega - Dreamcast
		szip= 0
		corelk= reicast
	}
if (syslk = "Redream")
	{
		ASPOP= Sega - Dreamcast
		szip= 0
		corelk= redream
	}
if (syslk = "ScummVM")
	{
		corelk= scummvm
	}
if (syslk = "Snes9x 2002")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= snes9x2002
	}
if (syslk = "Snes9x 2005")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= snes9x2005
	}
iif (syslk = "Snes9x 2005 plus")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= snes9x2005_plus
	}
if (syslk = "Snes9x 2010")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= snes9x2010
	}
if (syslk = "Snes9x")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= snes9x
	}
if (syslk = "Snes9x Next")
	{
		ASPOP= Nintendo - Super Nintendo Entertainment System
		corelk= snes9x_next
	}
if (syslk = "Stella")
	{
		ASPOP= Atari - 2600
		corelk= stella
	}
if (syslk = "Sinclair ZX 81")
	{
		ASPOP= Sinclair - ZX 81
		corelk= 81
	}
if (syslk = "Sinclair ZX Spectrum")
	{
		ASPOP= Sinclair - ZX Spectrum
		corelk= fuse
	}
if (syslk = "TGB Dual")
	{
		ASPOP= Nintendo - Game Boy
		corelk= tgbdual
	}
if (syslk = "UME 2014")
	{
		ASPOP= MAME
		szip= 1
		corelk= ume2014
	}
if (syslk = "VBA-M")
	{
		ASPOP= Nintendo - Game Boy Advance
		corelk= vbam
	}
if (syslk = "mGBA")
	{
		ASPOP= Nintendo - Game Boy Advance
		corelk= mgba
	}
if (syslk = "VBA Next")
	{
		ASPOP= Nintendo - Game Boy Advance
		corelk= vba_next
	}
if (syslk = "VecX")
	{
		ASPOP= GCE - Vectrex
		corelk= vecx
	}
if (syslk = "Virtual Jaguar")
	{
		ASPOP= Atari - Jaguar
		szip= 2
		corelk= virtualjaguar
	}
if (syslk = "4do")
	{
		ASPOP= The 3DO Company - 3DO
		szip= 0
		corelk= 4do
	}
if (syslk = "Blue MSX")
	{
		ASPOP= Microsoft - MSX
		szip= 0
		corelk= bluemsx
	}
if (syslk = "FCEUmm")
	{
		ASPOP= Nintendo - Nintendo Entertainment System
		szip= 0
		corelk= fceumm
	}
if (syslk = "fmsx")
	{
		ASPOP= Microsoft - MSX
		szip= 0
		corelk= fmsx
	}
if (syslk = "Blue-MSX")
	{
		ASPOP= Microsoft - MSX
		szip= 0
		corelk= bluemsx
	}
if (syslk = "handy")
	{
		ASPOP= Atari - Lynx
		szip= 0
		corelk= handy
	}
if (syslk = "hatari")
	{
		ASPOP= Atari - ST
		szip= 0
		corelk= hatari
	}
if (syslk = "x64")
	{
		ASPOP= Commodore - 64
		szip= 0
		corelk= x64
	}
if (syslk = "Vice")
	{
		ASPOP= Commodore - 64
		szip= 0
		corelk= vice_x64
	}
if (syslk = "yabause")
	{
		ASPOP= Sega - Saturn
		szip= 0
		corelk= yabause
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;;;;;;;;;;;;     CORE PARSE   ;;;;;;;;;;;;;;;;;;;;;;;

OPNCORE:
gui,submit,nohide
guicontrolget,LCORE,,LCORE
ifinstring,LCORE,_libretro
	{
		ASVRM= 
		guicontrol,,CoreDDLA, |%LCORE%||Select_A_Core|%corelist%
		Guicontrol,,TABMENU,|Install-Apps|Options||JoyPad-CFG|Playlists|Frontends|Archive.org|Netplay-Lobby|Jackets|Core-CFG
		moptog= hide
		raoptgl= show
		emutog= hide
		gosub, TOGSKELONLY
		gosub, EMUUNPOP
		gosub, TOGRAOPTS
		;;guicontrol, show, LCORE
		;;guicontrol,show,SWHOST
		runningcore= core
		GuiControl, Choose, TABMENU, 9
		gosub, CoreDDLA
		return
	}
moptog= hide
raoptgl= hide
emutog= hide
ASVRM= 1
RJEMUTG= %LCORE%
gosub, TOGRAOPTS
gosub, TOGSKELONLY
gosub, EMUUNPOP
gosub, EMUNAMEPOP
return

CoreDDLA:
gui, submit, nohide
guicontrol,hide,PICINV
gosub, GetOptVars
guicontrolget,ccav, ,COREDDLA
stringreplace, ccv, ccav,_libretro.dll, ,All
coreconc1= 
coreconc2= 
coreconc3= 
coreconc4= 
stringsplit, coreconc,ccv,_
corecfg= %ccv%.cfg
gosub, getCREN
guicontrol,,CORENAMEDT,%raexeloc%\config\%corcfgnam%\%corcfgnam%.cfg
guicontrol,,CORENAMTXT,%corcfgnam%
FileReadLine, optline, %racoreopt%, 1

if optline <> [OPTIONS]
{
	gosub, WriteCORETop
}
gosub, %ccv%DDLA
return

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

CoreDDLB:
gosub, %ccv%DDLB 
return
CoreDDLC:
gosub, %ccv%DDLC
return
CoreDDLD:
gosub, %ccv%DDLD
return
CoreDDLE:
gosub, %ccv%DDLE
return
CoreDDLF:
gosub, %ccv%DDLF
return
CoreDDLG:
gosub, %ccv%DDLG
return
CoreDDLH:
gosub, %ccv%DDLH
return
CoreDDLI:
gosub, %ccv%DDLI
return
CoreDDLJ:
gosub, %ccv%DDLJ
return
CoreDDLK:
gosub, %ccv%DDLK
return
CoreDDLL:
gosub, %ccv%DDLL
return
CoreRadA:
gosub, %ccv%RadA
return
CoreRadB:
gosub, %ccv%RadB
return
CoreCMBA:
gosub, %ccv%CMBA
return
CoreRadC:
gosub, %ccv%RadC
return
CoreRadD:
gosub, %ccv%RadD
return
CoreRadE:
gosub, %ccv%RadE
return
CoreRadF:
gosub, %ccv%RadF
return
CoreCHKA:
gosub, %ccv%CHKA
return
CoreCHKB:
gosub, %ccv%CHKB
return
CoreCHKC:
gosub, %ccv%CHKC
return
CoreRadG:
gosub, %ccv%RadG
return
CoreRadH:
gosub, %ccv%RadH
return
CoreCHKD:
gosub, %ccv%CHKD
return
CoreCHKE:
gosub, %ccv%CHKE
return
CoreCMBB:
gosub, %ccv%CMBB
return
CoreSLDA:
gosub, %ccv%SLDA
return
CoreRadI:
gosub, %ccv%RadI
return
CoreRadJ:
gosub, %ccv%RadJ
return
CoreRadK:
gosub, %ccv%RadK
return
CoreRadL:
gosub, %ccv%RadL
return
CoreCHKF:
gosub, %ccv%CHKF
return
CoreCHKG:
gosub, %ccv%CHKG
return
CoreCHKH:
gosub, %ccv%CHKH
return
CoreCHKI:
gosub, %ccv%CHKI
return
CoreRadM:
gosub, %ccv%RadM
return
CoreRadN:
gosub, %ccv%RadN
return
CoreRadO:
gosub, %ccv%RadO
return
CoreRadP:
gosub, %ccv%RadP
return
CoreRadQ:
gosub, %ccv%RadQ
return
CoreRadR:
gosub, %ccv%RadR
return
CoreRadS:
gosub, %ccv%RadS
return
CoreRadT:
gosub, %ccv%RadT
return
CoreRadU:
gosub, %ccv%RadU
return
CoreRadV:
gosub, %ccv%RadV
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Select_a_CoreDDLA:
2048DDLA:
3dengineDDLA:
craftDDLA:
openlaraDDLA:
nekop2DDLA:
np2kaiDDLA:
dolphin_launcherDDLA:
dolphinDDLA:
melondsDDLA:
mrboomDDLA:
dinothawrDDLA:
imageviewerDDLA:
lutroDDLA:
pcsx_rearmedDDLA:
ffmpegDDLA:
nxengineDDLA:
meteorDDLA:
remotejoyDDLA:
pocketcdgDDLA:
tyrquakeDDLA:
pokeminiDDLA:
MesenDDLA:
redreamDDLA:
sameboyDDLA:
vice_x64DDLA:
x64DDLA:
xrickDDLA:
citraDDLA:
mednafen_snesDDLA:
gosub, HideCoreUI
return
;{;;;;;;;;   4DO CORE  ;;;;;;;;;;;
4DODDLA:
gosub, HideCoreUI
4doDDLBdef= |disabled||enabled
if (4dohighresolution <> "enabled")
	{
		4doDDLBdef= |enabled||disabled
	}
GuiControl, show, COREDDLB
GuiControl, show, COREDDLTXTB
GuiControl, , COREDDLTXTB,High-Res
GuiControl, ,COREDDLB, %4doDDLBdef%
return

4DODDLB:
gui,submit,nohide
guicontrolget,4dohighresolution,,COREDDLB
iniwrite, "%4dohighresolution%",%racoreopt%,OPTIONS,4do_high_resolution
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;  CROCODS CORE  ;;
crocodsDDLA:

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;; 81 CORE  ;;;;;
81DDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;

;{;;;;; bluemsx CORE  ;;;;;
bluemsxDDLA:
guicontrol,,COREDDLTXTB,System Type
guicontrol,,COREDDLTXTC,Sync Type
guicontrol,,COREDDLB,|%bluemsxmsxtype%||MSX|MSX2+|MSXturboR
guicontrol,,COREDDLC,|%bluemsxvdpsynctype%||Auto|50Hz|60Hz
guicontrol,,CORECHKA, YM2413 Sound
if (bluemsxym2413enable = "disabled")
	{
		guicontrol,,CORECHKA,0
	}
gosub, HideCoreUI
guicontrol, show,COREDDLTXTB
guicontrol, show,COREDDLB
guicontrol, show,COREDDLTXTC
guicontrol, show,COREDDLC
guicontrol, show,CORECHKA
return
bluemsxDDLB:
gui,submit,nohide
guicontrolget,bluemsxmsxtype,,COREDDLB
iniwrite, "%bluemsxmsxtype%",%racoreopt%,OPTIONS,bluemsx_msx_type
return
bluemsxDDLC:
gui,submit,nohide
guicontrolget,bluemsxvdpsynctype,,COREDDLC
iniwrite, "%bluemsxvdpsynctype%",%racoreopt%,OPTIONS,bluemsx_vdp_synctype
return
bluemsxCHKA:
gui,submit,nohide
guicontrolget,bluemsxym2413enable,,CORECHKA
iniwrite, "%bluemsxym2413enable%",%racoreopt%,OPTIONS,bluemsx_ym2413_enable
return
;};;;;;;;;;;;


;{;;;;; bnes CORE  ;;;;;
bnesDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; bsnes CORE  ;;;;;
bsnes_accuracyDDLA:
bsnes_mercury_accuracyDDLA:
bsnes_mercury_performanceDDLA:
bsnes_performanceDDLA:
higan_sfc_balancedDDLA:
higan_sfcDDLA:
bsnes_balancedDDLA:
bsnes_mercury_balancedDDLA:
bsnes_cplusplus98DDLA:
stringsplit,bsnspl,ccv,_
ccv= %bsnspl1%
guicontrol,,CORECHKA,0
if (bsnesviolateaccuracy = "Yes")
{
	guicontrol,,CORECHKA,1
}

guicontrol,,CORECHKA,Violate Accuracy
guicontrol,,COREDDLTXTC,superFX overclock
guicontrol,,COREDDLTXTB,Chip Accuracy
guicontrol,,COREDDLC,|%bsnessuperfxoverclock%||100`%|150`%|200`%|300`%|400`%|500`%|1000`%
guicontrol,,COREDDLB,|%bsneschiphle%||HLE|LLE
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,CORECHKA
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
return

bsnesDDLB:
gui,submit,nohide
bsneschiphle= %COREDDLB%
iniwrite, "%bsneschiphle%",%racoreopt%,OPTIONS,bsnes_chip_hle
return

bsnesCHKA:
gui,submit,nohide
bsnesviolateaccuracy= disabled
if (CORECHKA = 1)
{
bsnesviolateaccuracy= enabled
}
iniwrite, "%bsnesviolateaccuracy%",%racoreopt%,OPTIONS,bsnes_violate_accuracy
return

bsnesDDLC:
gui,submit,nohide
bsnessuperfxoverclock= %COREDDLC%
iniwrite, "%bsnessuperfxoverclock%",%racoreopt%,OPTIONS,bsnes_superfx_overclock
return

;};;;;;;;;;;;


;{;;;;; bzsnes CORE  ;;;;;
bzsnesDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; catsfc CORE  ;;;;;
catsfcDDLA:
guicontrol,,CORECHKA,0
if (catsfcswapjoypads = "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,COREDDLTXTB,Video Mode
guicontrol,,CORECHKA,Swap Joypads
guicontrol,,COREDDLB,|%catsfcvideomode%||auto|NTSC|PAL
gosub, HideCoreUI
guicontrol,show,CORECHKA
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
return
catsfcDDLB:
gui,submit,nohide
catsfcvideomode= %COREDDLB%
iniwrite, "%catsfcvideomode%",%racoreopt%,OPTIONS,catsfc_videomode
return

catsfcCHKA:
gui,submit,nohide
catsfswapjoypads= disabled
if (CORECHKA = 1)
{
catsfswapjoypads= enabled
}
iniwrite, "%catsfswapjoypads%",%racoreopt%,OPTIONS,catsf_swapjoypads
return

;};;;;;;;;;;;


;{;;;;; desmume CORE  ;;;;;
desmumeDDLA:
guicontrol,,COREDDLTXTB,CPU Cores
guicontrol,,COREDDLTXTC,Layout
guicontrol,,COREDDLTXTD,Pointer Color
guicontrol,,COREDDLTXTE,Frameskip
guicontrol,,COREDDLTXTG,FW Language
guicontrol,,COREDDLTXTF,Resolution
guicontrol,,COREDDLTXTI,Deadzone
guicontrol,,CORECMBTXTA,Screen pixel-Gap
guicontrol,,CORECMBTXTB,JIT Block
guicontrol,,CORESLDTXTA,stylus pressure
guicontrol,,CORERADC, Hybrid #1 Scale
guicontrol,,CORERADD, Hybrid #3 Scale
guicontrol,,CORECHKB,Stylus Jitter
guicontrol,,CORECHKA,Load in Memory
guicontrol,,CORECHKC,Advanced Timing
guicontrol,,CORECHKD,Edgemark
guicontrol,,CORECHKE,Line Hack
guicontrol,,CORECHKF,TXT Hack
guicontrol,,CORECHKG,Fast Pointer
guicontrol,,CORECHKI,Mic FORCE
guicontrol,,CORERADS, touch
guicontrol,,CORERADT, mouse

guicontrol,,CORERADA,jit
guicontrol,,CORERADB,interpreter
guicontrol,,CORERADK, no device
guicontrol,,CORERADG, Mouse Enabled
guicontrol,,CORERADH, Mouse Disabled
guicontrol,,CORERADL, l-stick
guicontrol,,CORERADP, r-stick
guicontrol,,COREDDLB,|%desmumenumcores%||1|2|3|4
guicontrol,,COREDDLC,|%desmumescreenslayout%||top/bottom|bottom/top|left/right|right/left|top only|bottom only|quick switch|hybrid/top|hybrid/bottom
guicontrol,,COREDDLD,|%desmumepointercolour%||white|black|red|blue|yellow
guicontrol,,COREDDLG,|%desmumefirmwarelanguage%||Auto|English|Japanese|French|German|Italian|Spanish
guicontrol,,COREDDLE,|%desmumeframeskip%||0|1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLF,|%desmumeinternalresolution%||256x192|512x384|768x576|1024x768|1280x960|1536x1152|1792x1344|2048x1536|2304x1728|2560x1920
guicontrol,,COREDDLI,|%desmumepointerdevicedeadzone%||5|10|15|20|25|30
guicontrol,,COREDDLK,|%desmumemicmode%||internal|sample|random|physical

guicontrol,,CORECMBB,|%desmumejitblocksize%||12
guicontrol,,CORECMBA,|%desmumescreensgap%||0|1|5|10|20|30|50

gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
guicontrol,show,COREDDLG
guicontrol,show,COREDDLK
guicontrol,show,COREDDLI

guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKI

guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLTXTG
guicontrol,show,COREDDLTXTI

guicontrol,show,CORECMBA
guicontrol,show,CORECMBB

guicontrol,show,CORECMBTXTA
guicontrol,show,CORECMBTXTB

guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,show,CORERADK
guicontrol,show,CORERADG
guicontrol,show,CORERADH
guicontrol,show,CORERADL
guicontrol,show,CORERADP
guicontrol,show,CORERADS
guicontrol,show,CORERADT

guicontrol,show,CORESLDA
guicontrol,show,CORESLDTXTA

guicontrol,,CORERADG,1
guicontrol,,CORERADH,0

guicontrol,,CORESLDA,%desmumepointerstyluspressure%

if (desmumepointermouse = "disable")
	{
		guicontrol,,CORERADG,0
		guicontrol,,CORERADH,1
	}
	
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
if (desmumecpumode = "interpreter")
	{
		guicontrol,,CORERADA,0
		guicontrol,,CORERADB,1
	}
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
if (desmumehybidlayoutscale = "3")
	{
		guicontrol,,CORERADC,0
		guicontrol,,CORERADD,1
	}

guicontrol,,CORERADK,0
guicontrol,,CORERADL,1
guicontrol,,CORERADP,0
if (desmumepointerdevice = "r-stick")
	{
		guicontrol,,CORERADK,0
		guicontrol,,CORERADL,0
		guicontrol,,CORERADP,1
	}
if (desmumepointerdevice = "none")
	{
		guicontrol,,CORERADK,1
		guicontrol,,CORERADL,0
		guicontrol,,CORERADP,0
	}
	guicontrol,,CORECHKA,0
if (desmumeloadtomemory = "enable")
	{
		guicontrol,,CORECHKA,1
	}
	guicontrol,,CORECHKB,0
if (desmumepointerstylusjitter = "enable")
	{
		guicontrol,,CORECHKB,1
	}
	guicontrol,,CORECHKC,1
if (desmumeadvancedtiming = "disable")
	{
		guicontrol,,CORECHKB,0
	}
	guicontrol,,CORECHKF,0
if (desmumegfxtxthack = "enable")
	{
		guicontrol,,CORECHKF,1
	}
	guicontrol,,CORECHKD,1
if (desmumegfxlinehack = "disable")
	{
		guicontrol,,CORECHKD,0
	}
	guicontrol,,CORECHKE,1
if (desmumegfxedgemark = "disable")
	{
		guicontrol,,CORECHKE,0
	}
	guicontrol,,CORECHKI,0
if (desmumemicforcenable = "enable")
	{
		guicontrol,,CORECHKI,1
	}
guicontrol,,CORERADS,0	
guicontrol,,CORERADT,1
if (desmumepointertype = "touch")
	{
		guicontrol,,CORERADS,1
		guicontrol,,CORERADT,0
	}
return

desmumeDDLB:
gui,submit,nohide
guicontrolget,desmumenumcores,,COREDDLB
iniwrite, "%desmumenumcores%",%racoreopt%,OPTIONS,desmume_num_cores
return
desmumeDDLC:
gui,submit,nohide
guicontrolget,desmumescreenslayout,,COREDDLC
iniwrite, "%desmumescreenslayout%",%racoreopt%,OPTIONS,desmume_screens_layout
return
desmumeDDLD:
gui,submit,nohide
guicontrolget,desmumepointercolour,,COREDDLD
iniwrite, "%desmumepointercolour%",%racoreopt%,OPTIONS,desmume_pointer_colour
return
desmumeDDLE:
gui,submit,nohide
guicontrolget,desmumefirmwarelanguage,,COREDDLE
iniwrite, "%desmumefirmwarelanguage%",%racoreopt%,OPTIONS,desmume_firmware_language
return
desmumeDDLF:
gui,submit,nohide
guicontrolget,desmumeinternalresolution,,COREDDLF
iniwrite, "%desmumeinternalresolution%",%racoreopt%,OPTIONS,desmume_internal_resolution
return
desmumeDDLG:
gui,submit,nohide
guicontrolget,desmumeframeskip,,COREDDLG
iniwrite, "%desmumeframeskip%",%racoreopt%,OPTIONS,desmume_frameskip
return
desmumeDDLI:
gui,submit,nohide
guicontrolget,desmumepointerdevicedeadzone,,COREDDLI
iniwrite, "%desmumepointerdevicedeadzone%",%racoreopt%,OPTIONS,desmume_pointer_device_deadzone
return
desmumeDDLK:
gui,submit,nohide
guicontrolget,desmumemicmode,,COREDDLK
iniwrite, "%desmumemicmode%",%racoreopt%,OPTIONS,desmume_mic_mode
return

desmumeCHKA:
gui,submit,nohide
desmumeloadtomemory= disable
if (CORECHKA = 1)
	{
		desmumeloadtomemory= enable
	}
iniwrite, "%desmumeloadtomemory%",%racoreopt%,OPTIONS,desmume_load_to_memory
return
desmumeCHKB:
gui,submit,nohide
desmumepointerstylusjitter= disable 
if (CORECHKB = 1)
	{
		desmumepointerstylusjitter= enable
	}
iniwrite, "%desmumepointerstylusjitter%",%racoreopt%,OPTIONS,desmume_pointer_stylus_jitter
return
desmumeCHKC:
gui,submit,nohide
desmumeadvancedtiming= enable
if (CORECHKC = 0)
	{
		desmumeadvancedtiming= disable
	}
iniwrite, "%desmumeadvancedtiming%",%racoreopt%,OPTIONS,desmume_advanced_timing
return
desmumeCHKD:
gui,submit,nohide
desmumegfxedgemark= enable
if (CORECHKD = 0)
	{
		desmumegfxedgemark= disable
	}
iniwrite, "%desmumegfxedgemark%",%racoreopt%,OPTIONS,desmume_gfx_edgemark
return
desmumeCHKE:
gui,submit,nohide
desmumegfxlinehack=  enable
if (CORECHKE = 0)
	{
		desmumegfxlinehack= disable
	}
iniwrite, "%desmumegfxlinehack%",%racoreopt%,OPTIONS,desmume_gfx_linehack
return
desmumeCHKF:
gui,submit,nohide
desmumegfxtxthack=  disable
if (CORECHKF = 1)
	{
		desmumegfxtxthack= enable
	}
iniwrite, "%desmumegfxtxthack%",%racoreopt%,OPTIONS,desmume_gfx_txthack
return
desmumeCHKG:
gui,submit,nohide
desmumePointerDeviceAccelerationMod=  disable
if (CORECHKG = 1)
	{
		desmumePointerDeviceAccelerationMod= enable
	}
iniwrite, "%desmumePointerDeviceAccelerationMod%",%racoreopt%,OPTIONS,desmume_pointer_device_accelleration_mod
return
desmumeCHKI:
gui,submit,nohide
desmumemicforceenable=  disable
if (CORECHKI = 1)
	{
		desmumemicforceenable= enable
	}
iniwrite, "%desmumemicforceenable%",%racoreopt%,OPTIONS,desmume_mic_force_enable
return

desmumeCMBA:
gui,submit,nohide
desmumescreensgap= %CORECMBA%
iniwrite, "%desmumescreensgap%",%racoreopt%,OPTIONS,desmume_screens_gap
return
desmumeCMBB:
gui,submit,nohide
desmumejitblocksize= %CORECMBB%
iniwrite, "%desmumejitblocksize%",%racoreopt%,OPTIONS,desmume_jit_block_size
return

desmumeRADA:
gui,submit,nohide
desmumecpumode= jit
iniwrite, "%desmumecpumode%",%racoreopt%,OPTIONS,desmume_cpu_mode
return
desmumeRADB:
gui,submit,nohide
desmumecpumode= interpreter
iniwrite, "%desmumecpumode%",%racoreopt%,OPTIONS,desmume_cpu_mode
return
desmumeRADC:
desmumehybridlayoutscale= 1
iniwrite, "%desmumehybridlayoutscale%",%racoreopt%,OPTIONS,desmume_hybrid_layout_scale
gui,submit,nohide
return
desmumeRADD:
desmumehybridlayoutscale= 3
iniwrite, "%desmumehybridlayoutscale%",%racoreopt%,OPTIONS,desmume_hybrid_layout_scale
gui,submit,nohide
return
desmumeRADK:
gui,submit,nohide
desmumepointerdevice= none
iniwrite, "%desmumepointerdevice%",%racoreopt%,OPTIONS,desmume_pointer_device
return
desmumeRADL:
gui,submit,nohide
desmumepointerdevice= l-stick
iniwrite, "%desmumepointerdevice%",%racoreopt%,OPTIONS,desmume_pointer_device
return
desmumeRADP:
gui,submit,nohide
desmumepointerdevice= r-stick
iniwrite, "%desmumepointerdevice%",%racoreopt%,OPTIONS,desmume_pointer_device
return
desmumeRADS:
gui,submit,nohide
desmumepointerdevicetype= touch
iniwrite, "%desmumepointerdevicetype%",%racoreopt%,OPTIONS,desmume_pointer_device_type
return
desmumeRADT:
gui,submit,nohide
desmumepointerdevicetype= mouse
iniwrite, "%desmumepointerdevicetype%",%racoreopt%,OPTIONS,desmume_pointer_device_type
return

desmumeSLDA:
gui,submit,nohide
desmumepointerstyluspressure= %CORESLDA%
iniwrite, "%desmumepointerstyluspressure%",%racoreopt%,OPTIONS,desmume_pointer_stylus_pressure
return

;};;;;;;;;;;;


;{;;;;; px68k CORE  ;;;;;
px68kDDLA:
guicontrol,,CORECHKA,1
if (px68kanalog = "OFF")
{
	guicontrol,,CORECHKA,0
}
guicontrol,,COREDDLF,|%px68kcpuspeed%||10Mhz|16Mhz|25Mhz|33Mhz (OC)|66Mhz (OC)|100Mhz (OC)|150Mhz (OC)|200Mhz (OC)
guicontrol,,COREDDLB,|%px68kramsize%||1MB|2MB|3MB|4MB|5MB|6MB|7MB|8MB|9MB|10MB|11MB|12MB
guicontrol,,COREDDLC,|%px68kjoytype1%||Default (2 Buttons)|CPSF-MD (8 Buttons)|CPSF-SFC (8 Buttons)
guicontrol,,COREDDLD,|%px68kjoytype2%||Default (2 Buttons)|CPSF-MD (8 Buttons)|CPSF-SFC (8 Buttons)
guicontrol,,COREDDLTXTF,CPU Speed
guicontrol,,COREDDLTXTB, RAM Size
guicontrol,,COREDDLTXTC, Player 1 : JOY Device 
guicontrol,,COREDDLTXTD, Player 2 : JOY Device 
guicontrol,,CORECHKA,Use Analog
gosub, HideCoreUI

guicontrol,show,CORECHKA
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLF
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
return

px68kDDLB:
gui,submit,nohide
px68kramsize= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,px68k_ramsize
return

px68kDDLC:
gui,submit,nohide
px68kjoytype1= %COREDDLC%
iniwrite, "%COREDDLC%",%racoreopt%,OPTIONS,px68k_joytype1
return

px68kDDLD:
gui,submit,nohide
px68kjoytype2= %COREDDLD%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,px68k_joytype2
return

px68kDDLF:
gui,submit,nohide
px68kcpuspeed= %COREDDLF%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,px68k_cpuspeed
return

px68kCHKA:
gui,submit,nohide
px68kanalog= OFF
if (CORECHKA = 1)
{
px68kanalog= ON
}
iniwrite, "%px68analog%",%racoreopt%,OPTIONS,px68k_analog
return


;};;;;;;;;;;;
;{;;;;; dosbox CORE  ;;;;;
dosboxDDLA:
guicontrol,,CORECHKA,1
if (dosboxemulatedmouse = "disabled")
{
	guicontrol,,CORECHKA,0
}
guicontrol,,COREDDLF,|%dosboxmachinetype%||vgaonly|svga_et3000|svga_et4000|svga_paradise|hercules|cga|tandy|pcjr|ega
guicontrol,,COREDDLB,|%dosboxcpucycles0%||0|1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLC,|%dosboxcpucycles1%||0|1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLD,|%dosboxcpucycles2%||0|1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLE,|%dosboxcpucycles3%||0|1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLG,|y||y|x|b|a|l|r|up|down|left|select|start
guicontrol,,COREDDLH,|%dosboxmappery%||%KBSET%
guicontrol,,COREDDLTXTF,Machine Type
guicontrol,,COREDDLTXTB, Cpu cycles 100k
guicontrol,,COREDDLTXTC, Cpu cycles 10k
guicontrol,,COREDDLTXTD, Cpu cycles 1k
guicontrol,,COREDDLTXTE, Cpu cycles 100
guicontrol,,COREDDLTXTG, Retropad Mapper
guicontrol,,COREDDLTXTH, Mapped Key
guicontrol,,CORECHKA,Gamepad Mouse
gosub, HideCoreUI

guicontrol,show,CORECHKA
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLG
guicontrol,show,COREDDLH
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTG
guicontrol,show,COREDDLTXTH
return

dosboxDDLB:
gui,submit,nohide
dosboxcpucycles0= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,dosbox_cpu_cycles_0
return

dosboxDDLC:
gui,submit,nohide
dosboxcpucycles1= %COREDDLC%
iniwrite, "%COREDDLC%",%racoreopt%,OPTIONS,dosbox_cpu_cycles_1
return

dosboxDDLD:
gui,submit,nohide
dosboxcpucycles2= %COREDDLD%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,dosbox_cpu_cycles_2
return

dosboxDDLE:
gui,submit,nohide
dosboxcpucycles3= %COREDDLE%
iniwrite, "%COREDDLE%",%racoreopt%,OPTIONS,dosbox_cpu_cycles_3
return

dosboxDDLG:
gui,submit,nohide
dbjmp= % dosboxmapper%COREDDLG%
guicontrol,,COREDDLH,|%dbjmp%||%KBSET%
return

dosboxDDLH:
gui,submit,nohide
guicontrolget,rpad,,COREDDLG
dosboxmapper%rpad%= %COREDDLH%
iniwrite, "%COREDDLH%",%racoreopt%,OPTIONS,dosbox_mapper_%rpad%
return

dosboxCHKA:
gui,submit,nohide
dosboxemulatedmouse= enabled
if (CORECHKA = 0)
{
dosboxemulatedmouse= disabled
}
iniwrite, "%dosboxemulatedmouse%",%racoreopt%,OPTIONS,dosbox_emulated_mouse
return


;};;;;;;;;;;;


;{;;;;; emux_chip8 CORE  ;;;;;
emux_chip8DDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; emux_gb CORE  ;;;;;
emux_gbDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; emux_nes CORE  ;;;;;
emux_nesDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; emux_sms CORE  ;;;;;
emux_smsDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; fbalpha CORE  ;;;;;
fbalphaDDLA:
fbaDDLA:
fb_alphaDDLA:
fbalpha2012DDLA:
fb_alpha_neoDDLA:
fbalpha2012_neogeoDDLA:
fbalpha2012_cps1DDLA:
fb_alpha_cps1DDLA:
fbalpha2012_cps2DDLA:
fb_alpha_cps2DDLA:
stringleft,fbcc,ccv,2
ccv= %fbcc%
guicontrol,,COREDDLB,|%fbacpuspeedadjust%||100|110|120|130|140|150|160|170|180|190|200
guicontrol,,COREDDLTXTB,Overclock
guicontrol,,CORECHKA,Diagnostics
guicontrol,,CORECHKB,NEOGEO Uni-BIOS
guicontrol,,CORECHKC,Hi-Scores
guicontrol,,CORERADA,DAR Aspect
guicontrol,,CORERADB,PAR Aspect
guicontrol,,CORERADC,MVS (Home)
guicontrol,,CORERADD,AES (Arcade)
guicontrol,,COREDDLC,|%fbash2mode%||accurate|fast
guicontrol,,COREDDLTXTC,SH2 Mode
guicontrol,,COREDDLD,|%fbalrcontrolsp1%||gamepad|arcade|newgen|classic
guicontrol,,COREDDLE,|%fbalrcontrolsp2%||gamepad|arcade|newgen|classic
guicontrol,,COREDDLG,|%fbaneogeocontrolsp1%||gamepad|arcade|newgen|classic
guicontrol,,COREDDLH,|%fbaneogeocontrolsp2%||gamepad|arcade|newgen|classic
guicontrol,,COREDDLTXTD,P1 Joy Type
guicontrol,,COREDDLTXTE,P2 Joy Type
guicontrol,,COREDDLTXTG,P1 NeoGeo Joy
guicontrol,,COREDDLTXTH,P2 NeoGeo Joy
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLG
guicontrol,show,COREDDLH
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTG
guicontrol,show,COREDDLTXTH
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,,CORECHKA,0

if (fbadiagnostics = "enabled")
{
guicontrol,,CORECHKA,1
}

if (diagnostics = "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0

if (fbaunibios = "enabled")
{
guicontrol,,CORECHKB,0
}
guicontrol,,CORECHKC,1

if (fbahiscores = "disabled")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0

if (fbaaspect = "PAR")
{
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
}

if (fbaneogeomode = "MVS")
{
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
}
return

fbDDLB:
gui,submit,nohide
fbacpuspeedadjust= %COREDDLB%
iniwrite, "%fbacpuspeedadjust%",%racoreopt%,OPTIONS,fba-cpu-speed-adjust
iniwrite, "%fbacpuspeedadjust%",%racoreopt%,OPTIONS,cpu-speed-adjust
return

fbDDLC:
gui,submit,nohide
fbash2mode= %COREDDLB%
iniwrite, "%fbash2mode%",%racoreopt%,OPTIONS,fba-sh2-mode
return

fbDDLD:
gui,submit,nohide
fbalrcontrolsp1= %COREDDLD%
iniwrite, "%fbalrcontrolsp1%",%racoreopt%,OPTIONS,fba-lr-controls-p1
iniwrite, "%fbacontrols%",%racoreopt%,OPTIONS,fba-controls
return

fbDDLE:
gui,submit,nohide
fbalrcontrolsp2= %COREDDLE%
iniwrite, "%fbalrcontrolsp2%",%racoreopt%,OPTIONS,fba-lr-controls-p2
return

fbDDLG:
gui,submit,nohide
fbaneogeocontrolsp1= %COREDDLG%
iniwrite, "%fbaneogeocontrolsp1%",%racoreopt%,OPTIONS,fba-neogeo_controls-p1
return

fbDDLH:
gui,submit,nohide
fbaneogeocontrolsp2= %COREDDLH%
iniwrite, "%fbaneogeocontrolsp2%",%racoreopt%,OPTIONS,fba-neogeo_controls-p2
return

fbCHKA:
gui,submit,nohide
fbadiagnostics= disabled
diagnostics= disabled
if (CORECHKA = 1)
{
fbadiagnostics= enabled
diagnostics= enabled
}
iniwrite, "%fbadiagnostics%",%racoreopt%,OPTIONS,fba-diagnostics
iniwrite, "%diagnostics%",%racoreopt%,OPTIONS,diagnostics
return

fbCHKB:
fbaunibios= disabled
if (CORECHKB = 1)
{
fbaunibios= enabled
}
iniwrite, "%fbaunibios%",%racoreopt%,OPTIONS,fba-unibios
return

fbCHKC:
fbahiscores= enabled
if (CORECHKC = 0)
{
fbahiscores= enabled
}
iniwrite, "%fbahiscores%",%racoreopt%,OPTIONS,fba-hiscores
return

fbRADA:
gui,submit,nohide
fbaaspect=DAR
iniwrite, "%fbaaspect%",%racoreopt%,OPTIONS,fba-aspect
return
fbRADB:
gui,submit,nohide
fbaaspect=PAR
iniwrite, "%fbaaspect%",%racoreopt%,OPTIONS,fba-aspect
return

fbRADC:
gui,submit,nohide
fbaneogeomode=MVS
iniwrite, "%fbaneogeomode%",%racoreopt%,OPTIONS,fba-neogeo-mode
return

fbRADD:
gui,submit,nohide
fbaneogeomode=AES
iniwrite, "%fbaneogeomode%",%racoreopt%,OPTIONS,fba-neogeo-mode
return

;};;;;;;;;;;;


;{;;;;; fceumm CORE  ;;;;;
fceummDDLA:
guicontrol,,COREDDLTXTB,Palette
guicontrol,,COREDDLTXTC,Aspect
guicontrol,,COREDDLB,|%fceummpalette%||asqrealc|loopy|quor|chris|matt|pasofami|crashman|mess|zphod-cv|zphod-smb|vs-drmar|vs-cv|vs-smb|nintendo-vc|yuv-v3|unsaturated-vc|sony-xa2025as-us|pal|bmf-final2|bmf-final3|raw
guicontrol,,COREDDLC,|%fceummaspect%||8:7 PAR|4:3
guicontrol,,CORECHKA,No Spritelimit
guicontrol,,CORECHKB,Overclock
guicontrol,,CORECHKC,Overscan
gosub, HideCoreUI
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,,CORECHKA,0
if (fceummnospritelimit = "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (fceummoverclocking = "enabled")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,1
if (fceummoverscan = "disabled")
{
guicontrol,,CORECHKC,0
}
return

fceummDDLB:
gui,submit,nohide
fceummpalette= %COREDDLB%
iniwrite, "%fceummpalette%",%racoreopt%,OPTIONS,fceumm_palette
return

fceummDDLC:
gui,submit,nohide
fceummaspect= %COREDDLC%
iniwrite, "%fceummaspect%",%racoreopt%,OPTIONS,fceumm_aspect
return

fceummCHKA:
gui,submit,nohide
fceummnospritelimit= disabled
if (CORECHKA = 1)
{
fceummnospritelimit= enabled
}
iniwrite, "%fceumm%",%racoreopt%,OPTIONS,fceumm_
return

fceummCHKB:
gui,submit,nohide
fceummoverclocking = disabled
if (CORECHKB = 1)
{
fceummoverclocking = enabled
}
iniwrite, "%fceummoverclocking%",%racoreopt%,OPTIONS,fceumm_overclocking 
return

fceummCHKC:
gui,submit,nohide
fceummoverscan= enabled
if (CORECHKC = 0)
{
fceummoverscan= disabled
}
iniwrite, "%fceummoverscan%",%racoreopt%,OPTIONS,fceumm_overscan
return



;};;;;;;;;;;;


;{;;;;; fmsx CORE  ;;;;;
fmsxDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; fuse CORE  ;;;;;
fuseDDLA:
guicontrol,,COREDDLB,|%fusemachine%||Spectrum 48K|Spectrum 48K (NTSC)|Spectrum 128K|Spectrum +2|Spectrum +2A|Spectrum +3|Spectrum +3e|Spectrum SE|Timex TC2048|Timex TC2068|imex TS2068|Spectrum 16K|Pentagon 128K|Pentagon 512K|Pentagon 1024|Scorpion 256K
guicontrol,,COREDDLC,|%fusespeakertype%||tv speaker|beeper|unfiltered
guicontrol,,COREDDLD,|%fuseaystereoseparation%||none|abc|acb
guicontrol,,CORECMBA,|%fusekeyholdtime%||500|1000|100|300
guicontrol,,CORECMBTXTA,Key Hold-Time
guicontrol,,CORECHKA,Hide Border
guicontrol,,CORECHKB,Fast-Load
guicontrol,,CORECHKD,Keyboard Overlay
guicontrol,,CORECHKC,Tape-Sound
guicontrol,,COREDDLTXTB,Machine Type
guicontrol,,COREDDLTXTC,Speaker Type
guicontrol,,COREDDLTXTD,Stereo Separation
gosub, HideCoreUI
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,CORECMBA
guicontrol,show,CORECMBTXTA
return

fuseDDLB:
gui,submit,nohide
fusemachine= %COREDDLB%
iniwrite, "%fusemachine%",%racoreopt%,OPTIONS,fuse_machine
return

fuseDDLC:
gui,submit,nohide
fusemachine= %COREDDLC%
iniwrite, "%fusespeakertype%",%racoreopt%,OPTIONS,fuse_speaker_type
return

fuseDDLD:
gui,submit,nohide
fuseaystereoseparation= %COREDDLD%
iniwrite, "%fuseaystereoseparation%",%racoreopt%,OPTIONS,fuse_ay_stereo_separation
return

fuseCMBA:
gui,submit,NoHide
fusekeyholdtime= %CORECMBA%
iniwrite, "%fusekeyholdtime%",%racoreopt%,OPTIONS,fuse_key_hold_time
return

fuseCHKA:
gui,submit,nohide
fusehideborder= disabled
if (CORECHKA = 1)
{
fusehideborder= enabled
}
iniwrite, "%fusehideborder%",%racoreopt%,OPTIONS,fuse_hide_border
return

fuseCHKB:
gui,submit,nohide
fusefastload= enabled
if (CORECHKB = 0)
{
fusefastload= disabled
}
iniwrite, "%fusefastload%",%racoreopt%,OPTIONS,fuse_fast_load
return

fuseCHKC:
gui,submit,nohide
fuseloadsound= enabled
if (CORECHKC = 0)
{
fuseloadsound= disabled
}
iniwrite, "%fuseloadsound%",%racoreopt%,OPTIONS,fuse_load_sound
return

fuseCHKD:
gui,submit,nohide
fusekeyovrlaytransp= enabled
if (CORECHKD = 0)
{
fusekeyovrlaytransp= disabled
}
iniwrite, "%fusekeyovrlaytransp%",%racoreopt%,OPTIONS,fuse_key_ovrlay_transp
return

;};;;;;;;;;;;


;{;;;;; gambatte CORE  ;;;;;
gambatte_GBCDDLA:
stringtrimright,ccv,ccv,4
gambatteDDLA:
guicontrol,,COREDDLB,|%gambattegbcolorization%||auto|internal|custom|off
guicontrol,,COREDDLC,|%gambattegbinternalpalette%||GBC - Blue|GBC - Brown|GBC - Dark Blue|GBC - Dark Brown|GBC - Green|GBC - Dark Green|GBC - Greyscale|GBC - Inverted|GBC - Orange|GBC - Pastel Mix|GBC - Red|GBC - Yellow|Special 1|Special 2|Special 3
guicontrol,,COREDDLD,|%gambattegbhwmode%||Auto|GB|GBA
guicontrol,,COREDDLF,|%gambattegblinkmode%||Not Connected|Network Server|Network Client
guicontrol,,CORECMBB,|%gambattegblinknetworkport%||56401
guicontrol,,COREDDLE,|octet1||octet2|octet3|octet4
guicontrol,,CORECMBA,|%gambattegblinknetworkserveripoctet1%||0|255
guicontrol,,CORECMBTXTB,Network Port
guicontrol,,COREDDLTXTB,Colorization
guicontrol,,COREDDLTXTC,Internal Palette
guicontrol,,COREDDLTXTD,Hardware Mode
guicontrol,,CORECMBTXTA,Number
guicontrol,,COREDDLTXTE,Octet number
guicontrol,,COREDDLTXTF,Link Mode
guicontrol,,CORECHKA,Color Correction
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLF
guicontrol,show,COREDDLTXTF
guicontrol,show,CORECMBA
guicontrol,show,CORECMBTXTA
guicontrol,show,CORECMBB
guicontrol,show,CORECMBTXTB
guicontrol,show,CORECHKA
return

gambatteDDLB:
gui,submit,nohide
gambattegbcolorization= %COREDDLB%
iniwrite, "%gambattegbcolorization%",%racoreopt%,OPTIONS,gambatte_gb_colorization
return

gambatteDDLC:
gui,submit,nohide
gambattegbinternalpalette= %COREDDLC%
iniwrite, "%gambattegbinternalpalette%",%racoreopt%,OPTIONS,gambatte_gb_internal_palette
return

gambatteDDLD:
gui,submit,nohide
gambattegbhwmode= %COREDDLD%
iniwrite, "%gambattegbhwmode%",%racoreopt%,OPTIONS,gambatte_gb_hwmode
return

gambatteDDLE:
gui,submit,nohide
togboctet= % gambattegblinknetworkserverip%COREDDLE%
guicontrol,,CORECMBA,|%togboctet%||0|255
return

gambatteDDLF:
gui,submit,nohide
gambattegblinkmode= %COREDDLF%
iniwrite, "%gambattegblinkmode%",%racoreopt%,OPTIONS,gambatte_gb_link_mode
return

gambatteCMBB:
gui,submit,nohide
gambattegblinknetworkport= %CORECMBB%
iniwrite, "%gambattegblinknetworkport%",%racoreopt%,OPTIONS,gambatte_gb_link_network_port
return

gambatteCMBA:
gui,submit,nohide
gambattegblinknetworkserverip%COREDDLE%= %CORECMBA%
iniwrite, "%CORECMBA%",%racoreopt%,OPTIONS,gambatte_gb_link_network_server_ip_%COREDDLE%
return

gambatteCHKA:
gui,submit,nohide
gambattecolorcorrection= enabled
if (CORECHKA = 0)
{
gambattecolorcorrection= disabled
}
iniwrite, "%gambattecolorcorrection%",%racoreopt%,OPTIONS,gambatte_gb_color_correction
return
;};;;;;;;;;;;


;{;;;;; genesis_plus_gx CORE  ;;;;;
genesis_plus_gx_ggDDLA:
stringtrimright,ccv,ccv,3
goto, genesis_plus_gxDDLA
genesis_plus_gx_SMSDDLA:
stringtrimright,ccv,ccv,4
genesis_plus_gxDDLA:
guicontrol,,COREDDLB,|%genesisplusgxsystemhw%||auto|sg-1000|sg-1000 II|Mark-III|master system|master system II|game gear|megadrive / genesis
guicontrol,,COREDDLTXTB,System

guicontrol,,COREDDLC,|%genesisplusgxregiondetect%||auto|ntsc-u|pal|ntsc-j
guicontrol,,COREDDLTXTC,Region

guicontrol,,COREDDLD,|%genesisplusgxbram%||per bios|per game
guicontrol,,COREDDLTXTD,BRAM

guicontrol,,COREDDLE,|%genesisplusgxrender%||single field|double field
guicontrol,,COREDDLTXTE,Interlacing

guicontrol,,COREDDLF,|%genesisplusgxym2413%||auto|enabled|disabled
guicontrol,,COREDDLTXTF,MarkIII FM

guicontrol,,CORECHKA,1
if (genesisplusgxforcedtack = "disabled")
	{
		guicontrol,,CORECHKA,0
	}
guicontrol,,CORECHKA,Lockups

guicontrol,,CORECHKB,1
if (genesisplusgxaddrerror = "disabled")
	{
		guicontrol,,CORECHKB,0
	}
guicontrol,,CORECHKB,68kError

guicontrol,,CORECHKC,0
if (genesisplusgxlcdfilter = "enabled")
	{
		guicontrol,,CORECHKC,1
	}
guicontrol,,CORECHKC,Ghosting

guicontrol,,CORECHKD,0
if (genesisplusgxbios = "enabled")
	{
		guicontrol,,CORECHKD,1
	}
guicontrol,,CORECHKD,bootrom

guicontrol,,CORECHKG,0
if (genesisplusgxoverscan = "enabled")
	{
		guicontrol,,CORECHKE,1
	}
guicontrol,,CORECHKG,borders

guicontrol,,CORECHKF,0
if (genesisplusgxggextra = "enabled")
	{
		guicontrol,,CORECHKF,1
	}
guicontrol,,CORECHKF,GG Extend

guicontrol,,CORECHKE,0
if (genesisplusgxlockon = "enabled")
	{
		guicontrol,,CORECHKG,1
	}
guicontrol,,CORECHKE,Lock on

guicontrol,,CORECHKH,0
if (genesisplusgxdacbits = "enabled")
	{
		guicontrol,,CORECHKH,1
	}
guicontrol,,CORECHKH,DAC Quant

if (genesisplusgxblarggntscfilter = "enabled")
{
	guicontrol,,CORERADC,1
	guicontrol,,CORERADD,0
}
guicontrol,,CORERADC,Blarg on

if (genesisplusgxblarggntscfilter = "disabled")
{
	guicontrol,,CORERADC,0
	guicontrol,,CORERADD,1
}
guicontrol,,CORERADD,Blarg off

if (genesisplusgxguncursor = "yes")
{
	guicontrol,,CORERADM,1
	guicontrol,,CORERADN,0
}
guicontrol,,CORERADM,Crosshairs On

if (genesisplusgxguncursor = "no")
{
	guicontrol,,CORERADM,0
	guicontrol,,CORERADN,1
}
guicontrol,,CORERADN,Crosshairs Off

if (genesisplusgxinvertmouse = "yes")
{
	guicontrol,,CORERADO,1
	guicontrol,,CORERADP,0
}
guicontrol,,CORERADO,Invert Mouse On

if (genesisplusgxinvertmouse = "no")
{
	guicontrol,,CORERADO,0
	guicontrol,,CORERADP,1
}
guicontrol,,CORERADP,Invert Mouse Off
gosub, HideCoreUI
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKH
guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,show,CORERADM
guicontrol,show,CORERADN
guicontrol,show,CORERADO
guicontrol,show,CORERADP
return

genesis_plus_gxDDLB:
gui, submit, nohide
genesisplusgxsystemhw= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,genesis_plus_gx_system_hw
return

genesis_plus_gxDDLC:
gui, submit, nohide
genesisplusgxregiondetect= %COREDDLC%
iniwrite, "%COREDDLC%",%racoreopt%,OPTIONS,genesis_plus_gx_region_detect
return

genesis_plus_gxDDLD:
gui, submit, nohide
genesisplusgxbram= %COREDDLD%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,genesis_plus_gx_bram
return

genesis_plus_gxDDLE:
gui, submit, nohide
genesisplusgxrender= %COREDDLE%
iniwrite, "%COREDDLE%",%racoreopt%,OPTIONS,genesis_plus_gx_render
return

genesis_plus_gxDDLF:
gui, submit, nohide
genesisplusgxym2413= %COREDDLF%
iniwrite, "%COREDDLF%",%racoreopt%,OPTIONS,genesis_plus_gx_ym2413
return

genesis_plus_gxRADC:
gui, submit, nohide
genesisplusgxblarggntscfilter= enable
iniwrite, "enable",%racoreopt%,OPTIONS,genesis_plus_gx_blargg_ntsc_filter
return

genesis_plus_gxRADD:
gui, submit, nohide
genesisplusgxblarggntscfilter= disable
iniwrite, "disable",%racoreopt%,OPTIONS,genesis_plus_gx_blargg_ntsc_filter
return

genesis_plus_gxRADM:
gui, submit, nohide
genesisplusgxguncursor= yes
iniwrite, "yes",%racoreopt%,OPTIONS,genesis_plus_gx_gun_cursor
return

genesis_plus_gxRADN:
gui, submit, nohide
genesisplusgxguncursor= no
iniwrite, "no",%racoreopt%,OPTIONS,genesis_plus_gx_gun_cursor
return

genesis_plus_gxRADO:
gui, submit, nohide
genesisplusgxinvertmouse= yes
iniwrite, "yes",%racoreopt%,OPTIONS,genesis_plus_gx_invert_mouse
return

genesis_plus_gxRADP:
gui, submit, nohide
genesisplusgxinvertmouse= no
iniwrite, "no",%racoreopt%,OPTIONS,genesis_plus_gx_invert_mouse
return

genesis_plus_gxCHKA:
gui, submit, nohide
genesisplusgxforcedtack= disabled
if (CORECHKA = 1)
	{
		genesisplusgxforcedtack= enabled
	}
iniwrite, "%genesisplusgxforcedtack%",%racoreopt%,OPTIONS,genesis_plus_gx_force_dtack
return

genesis_plus_gxCHKB:
gui, submit, nohide
genesisplusgxaddrerror= disabled
if (CORECHKB = 1)
	{
		genesisplusgxaddrerror= enabled
	}
iniwrite, "%genesisplusgxaddrerror%",%racoreopt%,OPTIONS,genesis_plus_addr_error
return

genesis_plus_gxCHKC:
gui, submit, nohide
genesisplusgxlcdfilter= disabled
if (CORECHKC = 1)
	{
		genesisplusgxlcdfilter= enabled
	}
iniwrite, "%genesisplusgxlcdfilter%",%racoreopt%,OPTIONS,genesis_plus_lcd_filter
return

genesis_plus_gxCHKD:
gui, submit, nohide
genesisplusgxbios= disabled
if (CORECHKD = 1)
	{
		genesisplusgxbios= enabled
	}
iniwrite, "%genesisplusgxbios%",%racoreopt%,OPTIONS,genesis_plus_gx_bios
return

genesis_plus_gxCHKG:
gui, submit, nohide
genesisplusgxoverscan= disabled
if (CORECHKG = 1)
	{
		genesisplusgxoverscan= enabled
	}
iniwrite, "%genesisplusgxoverscan%",%racoreopt%,OPTIONS,genesis_plus_gx_overscan
return

genesis_plus_gxCHKF:
gui, submit, nohide
genesisplusgxggextra= disabled
if (CORECHKF = 1)
	{
		genesisplusgxggextra= enabled
	}
iniwrite, "%genesisplusgxggextra%",%racoreopt%,OPTIONS,genesis_plus_gx_gg_extra
return

genesis_plus_gxCHKE:
gui, submit, nohide
genesisplusgxlockon= disabled
if (CORECHKE = 1)
	{
		genesisplusgxlockon= enabled
	}
iniwrite, "%genesisplusgxlockon%",%racoreopt%,OPTIONS,genesis_plus_gx_lock_on
return

genesis_plus_gxCHKH:
gui, submit, nohide
genesisplusgxdacbits= disabled
if (CORECHKH = 1)
	{
		genesisplusgxdacbits= enabled
	}
iniwrite, "%genesisplusgxdacbits%",%racoreopt%,OPTIONS,genesis_plus_gx_dac_bits
return

genesis_plus_gxDDLG:
genesis_plus_gxDDLH:
genesis_plus_gxDDLI:
genesis_plus_gxDDLJ:
genesis_plus_gxDDLK:
genesis_plus_gxDDLL:
genesis_plus_gxRadA:
genesis_plus_gxRadB:
genesis_plus_gxCMBA:
genesis_plus_gxRadE:
genesis_plus_gxRadF:
genesis_plus_gxRadG:
genesis_plus_gxRadH:
genesis_plus_gxCMBB:
genesis_plus_gxSLDA:
genesis_plus_gxRadI:
genesis_plus_gxRadJ:
genesis_plus_gxRadK:
genesis_plus_gxRadL:
genesis_plus_gxCHKI:
genesis_plus_gxRadQ:
genesis_plus_gxRadR:
genesis_plus_gxRadS:
genesis_plus_gxRadT:
genesis_plus_gxRadU:
genesis_plus_gxRadV:
return

;};;;;;;;;;;;


;{;;;;; gme CORE  ;;;;;
gmeDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; gpsp CORE  ;;;;;
gpspDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; gw CORE  ;;;;;
gwDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; handy CORE  ;;;;;
handyDDLA:
guicontrol,,COREDDLB,|%handyrot%||None|90|240
guicontrol,,COREDDLTXTB,Display Rotation
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
return

handyDDLB:
gui,submit,nohide
handyrot= %CORDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,handy_rot
return
;};;;;;;;;;;;


;{;;;;; hatari CORE  ;;;;;
hatariDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mame2000 CORE  ;;;;;
mame2000DDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mame2003 CORE  ;;;;;
mame2003DDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mame2010 CORE  ;;;;;
mame2010DDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mame2014 CORE  ;;;;;
mame2014DDLA:
guicontrol,,CORECHK,0
if (mame2014= "enabled")
{
guicontrol,,CORECHK,1
}
guicontrol,,CORECHKA,0
if (mame2014readconfig= "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (mame2014writecofig= "enabled")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (mame2014autosave= "enabled")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (mame2014hideagscreen= "enabled")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKE,0
if (mame2014hidewarnings= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (mame2014hidegameinfo= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (mame2014throttle= "enabled")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKG,0
if (mame2014alternaterenderer= "enabled")
{
guicontrol,,CORECHKG,1
}
guicontrol,,CORECHKH,1
if (mame2014softlistsenable= "disabled")
{
guicontrol,,CORECHKH,0
}
guicontrol,,CORECHKI,0
if (mame2014cheatsenable= "enabled")
{
guicontrol,,CORECHK,1
}


guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
if (mame2014mouseenable= "enabled")
{
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
}

guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
if (mame2014bootfromcli= "enabled")
{
guicontrol,,CORERADG,0
guicontrol,,CORERADH,1
}

guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
if (mame2014boottobios= "enabled")
{
guicontrol,,CORERADQ,0
guicontrol,,CORERADR,1
}

guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
if (mame2014boottoosd= "enabled")
{
guicontrol,,CORERADU,0
guicontrol,,CORERADV,1
}


guicontrol,,CORECHKA,Read Config
guicontrol,,CORECHKB,Write Config
guicontrol,,COREDDLTXTB,Save Type
guicontrol,,COREDDLTXTC,Media Type
guicontrol,,COREDDLB,|%mame2014saves%||game|system
guicontrol,,COREDDLC,|%mame2014mediatype%||rom|cart|flop|cdrom|cass|hard|serl|prin
guicontrol,,CORECHKC,auto-save
guicontrol,,CORECHKD,NO-Nag
guicontrol,,CORECHKE,NO-Warnings
guicontrol,,CORECHKF,Throttle
guicontrol,,CORECHKG,NO-Game Info
guicontrol,,COREDDLTXTD,Alt-Renderer
guicontrol,,COREDDLD,|%mame2014alternaterenderer%||disabled|enabled
guicontrol,,CORECHKH,Softlists
guicontrol,,COREDDLI,|%mame2014softlistsautomedia%||enabled|disabled
guicontrol,,COREDDLTXTI,Softlist Automedia
guicontrol,,CORECHKI,Cheats

guicontrol,,CORERADA,Mouse On
guicontrol,,CORERADB,Mouse Off

guicontrol,,CORERADG,GUI Boot
guicontrol,,CORERADH,CLI Boot

guicontrol,,CORERADQ,Skip BIOS
guicontrol,,CORERADR,BIOS Boot

guicontrol,,CORERADU,OSD Off
guicontrol,,CORERADV,OSD Boot

gosub, HideCoreUI

guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKH
guicontrol,show,CORECHKI
guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORERADG
guicontrol,show,CORERADH
guicontrol,show,CORERADQ
guicontrol,show,CORERADR
guicontrol,show,CORERADU
guicontrol,show,CORERADV
guicontrol,show,CORERADB
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLI
guicontrol,show,COREDDLTXTI
return

mame2014DDLB:
gui,submit,nohide
mame2014saves= %COREDDLB%
iniwrite, "%mame2014saves%",%racoreopt%,OPTIONS,mame2014_saves
return

mame2014DDLC:
gui,submit,nohide
mame2014mediatype= %COREDDLC%
iniwrite, "%mame2014mediatype%",%racoreopt%,OPTIONS,mame2014_media_type
return

mame2014DDLD:
gui,submit,nohide
mame2014alternaterenderer= %COREDDLD%
iniwrite, "%mame2014alternaterenderer%",%racoreopt%,OPTIONS,mame2014_alternate_renderer
return

mame2014DDLI:
gui,submit,nohide
mame2014softlistsautomedia= %COREDDLI%
iniwrite, "%mame2014softlistsautomedia%",%racoreopt%,OPTIONS,mame2014_softlists_auto_media
return

mame2014CHKA:
gui,submit,nohide
mame2014readconfig= disabled
if (CORECHKA = 1)
{
mame2014readconfig= enabled
}
iniwrite, "%mame2014readconfig%",%racoreopt%,OPTIONS,mame2014_read_config
return

mame2014CHKB:
gui,submit,nohide
mame2014writeconfig= disabled
if (CORECHKB = 1)
{
mame2014writeconfig= enabled
}
iniwrite, "%mame2014writeconfig%",%racoreopt%,OPTIONS,mame2014_write_config
return

mame2014CHKC:
gui,submit,nohide
mame2014autosave= disabled
if (CORECHKC = 1)
{
mame2014autosave= enabled
}
iniwrite, "%mame2014autosave%",%racoreopt%,OPTIONS,mame2014_auto_save
return

mame2014CHKD:
gui,submit,nohide
mame2014hidenagscreen= disabled
if (CORECHKD = 1)
{
mame2014hidenagscreen= enabled
}
iniwrite, "%mame2014hidenagscreen%",%racoreopt%,OPTIONS,mame2014_hide_nagscreen
return

mame2014CHKE:
gui,submit,nohide
mame2014hidewarnings= disabled
if (CORECHKE = 1)
{
mame2014hidewarnings= enabled
}
iniwrite, "%mame2014hidewarnings%",%racoreopt%,OPTIONS,mame2014_hide_warnings
return

mame2014CHKF:
gui,submit,nohide
mame2014throttle= disabled
if (CORECHKF = 1)
{
mame2014throttle= enabled
}
iniwrite, "%mame2014throttle%",%racoreopt%,OPTIONS,mame2014_throttle
return

mame2014CHKG:
gui,submit,nohide
mame2014hidegameinfo= disabled
if (CORECHKG = 1)
{
mame2014hidegameinfo= enabled
}
iniwrite, "%mame2014hidegameinfo%",%racoreopt%,OPTIONS,mame2014_hide_gameinfo
return

mame2014CHKH:
gui,submit,nohide
mame2014softlistsenable= enabled
if (CORECHKH = 0)
{
mame2014softlistsenable= disabled
}
iniwrite, "%mame2014softlistsenable%",%racoreopt%,OPTIONS,mame2014_softlists_enable
return

mame2014CHKI:
gui,submit,nohide
mame2014cheatsenable= disabled
if (CORECHKI = 1)
{
mame2014cheatsenable= enabled
}
iniwrite, "%mame2014cheatsenable%",%racoreopt%,OPTIONS,mame2014_cheats_enable
return

mame2014RADA:
mame2014mouseenable= enabled
iniwrite, "%mame2014mouseenable%",%racoreopt%,OPTIONS,mame2014_mouse_enable
return
mame2014RADB:
mame2014mouseenable= disabled
iniwrite, "%mame2014mouseenable%",%racoreopt%,OPTIONS,mame2014_mouse_enable
return

mame2014RADG:
mame2014boottobios= disabled
iniwrite, "%mame2014boottobios%",%racoreopt%,OPTIONS,mame2014_boot_to_bios
return
mame2014RADH:
mame2014boottobios= enabled
iniwrite, "%mame2014boottobios%",%racoreopt%,OPTIONS,mame2014_boot_to_bios
return

mame2014RADQ:
mame2014bootfromcli= disabled
iniwrite, "%mame2014boottobios%",%racoreopt%,OPTIONS,mame2014_boot_from_cli
return
mame2014RADR:
mame2014boottobios= enabled
iniwrite, "%mame2014boottobios%",%racoreopt%,OPTIONS,mame2014_boot_from_cli
return

mame2014RADU:
mame2014boottoosd= disabled
iniwrite, "%mame2014boottobios%",%racoreopt%,OPTIONS,mame2014_boot_to_osd
return
mame2014RADV:
mame2014boottoosd= enabled
iniwrite, "%mame2014boottobios%",%racoreopt%,OPTIONS,mame2014_boot_to_osd
return

;};;;;;;;;;;;


;{;;;;; mame2016 CORE  ;;;;;
mame2016DDLA:
guicontrol,,CORECHK,0
if (mame2016= "enabled")
{
guicontrol,,CORECHK,1
}
guicontrol,,CORECHKA,0
if (mame2016readconfig= "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (mame2016writecofig= "enabled")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (mame2016autosave= "enabled")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (mame2016hideagscreen= "enabled")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKE,0
if (mame2016hidewarnings= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (mame2016hidegameinfo= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (mame2016throttle= "enabled")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKG,0
if (mame2016alternaterenderer= "enabled")
{
guicontrol,,CORECHKG,1
}
guicontrol,,CORECHKH,1
if (mame2016softlistsenable= "disabled")
{
guicontrol,,CORECHKH,0
}
guicontrol,,CORECHKI,0
if (mame2016cheatsenable= "enabled")
{
guicontrol,,CORECHK,1
}


guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
if (mame2016mouseenable= "enabled")
{
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
}

guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
if (mame2016bootfromcli= "enabled")
{
guicontrol,,CORERADG,0
guicontrol,,CORERADH,1
}

guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
if (mame2016boottobios= "enabled")
{
guicontrol,,CORERADQ,0
guicontrol,,CORERADR,1
}

guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
if (mame2016boottoosd= "enabled")
{
guicontrol,,CORERADU,0
guicontrol,,CORERADV,1
}


guicontrol,,CORECHKA,Read Config
guicontrol,,CORECHKB,Write Config
guicontrol,,COREDDLTXTB,Save Type
guicontrol,,COREDDLTXTC,Media Type
guicontrol,,COREDDLB,|%mame2016saves%||game|system
guicontrol,,COREDDLC,|%mame2016mediatype%||rom|cart|flop|cdrom|cass|hard|serl|prin
guicontrol,,CORECHKC,auto-save
guicontrol,,CORECHKD,NO-Nag
guicontrol,,CORECHKE,NO-Warnings
guicontrol,,CORECHKF,Throttle
guicontrol,,CORECHKG,NO-Game Info
guicontrol,,COREDDLTXTD,Alt-Renderer
guicontrol,,COREDDLD,|%mame2016alternaterenderer%||disabled|enabled
guicontrol,,CORECHKH,Softlists
guicontrol,,COREDDLI,|%mame2016softlistsautomedia%||enabled|disabled
guicontrol,,COREDDLTXTI,Softlist Automedia
guicontrol,,CORECHKI,Cheats

guicontrol,,CORERADA,Mouse On
guicontrol,,CORERADB,Mouse Off

guicontrol,,CORERADG,GUI Boot
guicontrol,,CORERADH,CLI Boot

guicontrol,,CORERADQ,Skip BIOS
guicontrol,,CORERADR,BIOS Boot

guicontrol,,CORERADU,OSD Off
guicontrol,,CORERADV,OSD Boot

gosub, HideCoreUI

guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKH
guicontrol,show,CORECHKI
guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORERADG
guicontrol,show,CORERADH
guicontrol,show,CORERADQ
guicontrol,show,CORERADR
guicontrol,show,CORERADU
guicontrol,show,CORERADV
guicontrol,show,CORERADB
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLI
guicontrol,show,COREDDLTXTI
return

mame2016DDLB:
gui,submit,nohide
mame2016saves= %COREDDLB%
iniwrite, "%mame2016saves%",%racoreopt%,OPTIONS,mame2016_saves
return

mame2016DDLC:
gui,submit,nohide
mame2016mediatype= %COREDDLC%
iniwrite, "%mame2016mediatype%",%racoreopt%,OPTIONS,mame2016_media_type
return

mame2016DDLD:
gui,submit,nohide
mame2016alternaterenderer= %COREDDLD%
iniwrite, "%mame2016alternaterenderer%",%racoreopt%,OPTIONS,mame2016_alternate_renderer
return

mame2016DDLI:
gui,submit,nohide
mame2016softlistsautomedia= %COREDDLI%
iniwrite, "%mame2016softlistsautomedia%",%racoreopt%,OPTIONS,mame2016_softlists_auto_media
return

mame2016CHKA:
gui,submit,nohide
mame2016readconfig= disabled
if (CORECHKA = 1)
{
mame2016readconfig= enabled
}
iniwrite, "%mame2016readconfig%",%racoreopt%,OPTIONS,mame2016_read_config
return

mame2016CHKB:
gui,submit,nohide
mame2016writeconfig= disabled
if (CORECHKB = 1)
{
mame2016writeconfig= enabled
}
iniwrite, "%mame2016writeconfig%",%racoreopt%,OPTIONS,mame2016_write_config
return

mame2016CHKC:
gui,submit,nohide
mame2016autosave= disabled
if (CORECHKC = 1)
{
mame2016autosave= enabled
}
iniwrite, "%mame2016autosave%",%racoreopt%,OPTIONS,mame2016_auto_save
return

mame2016CHKD:
gui,submit,nohide
mame2016hidenagscreen= disabled
if (CORECHKD = 1)
{
mame2016hidenagscreen= enabled
}
iniwrite, "%mame2016hidenagscreen%",%racoreopt%,OPTIONS,mame2016_hide_nagscreen
return

mame2016CHKE:
gui,submit,nohide
mame2016hidewarnings= disabled
if (CORECHKE = 1)
{
mame2016hidewarnings= enabled
}
iniwrite, "%mame2016hidewarnings%",%racoreopt%,OPTIONS,mame2016_hide_warnings
return

mame2016CHKF:
gui,submit,nohide
mame2016throttle= disabled
if (CORECHKF = 1)
{
mame2016throttle= enabled
}
iniwrite, "%mame2016throttle%",%racoreopt%,OPTIONS,mame2016_throttle
return

mame2016CHKG:
gui,submit,nohide
mame2016hidegameinfo= disabled
if (CORECHKG = 1)
{
mame2016hidegameinfo= enabled
}
iniwrite, "%mame2016hidegameinfo%",%racoreopt%,OPTIONS,mame2016_hide_gameinfo
return

mame2016CHKH:
gui,submit,nohide
mame2016softlistsenable= enabled
if (CORECHKH = 0)
{
mame2016softlistsenable= disabled
}
iniwrite, "%mame2016softlistsenable%",%racoreopt%,OPTIONS,mame2016_softlists_enable
return

mame2016CHKI:
gui,submit,nohide
mame2016cheatsenable= disabled
if (CORECHKI = 1)
{
mame2016cheatsenable= enabled
}
iniwrite, "%mame2016cheatsenable%",%racoreopt%,OPTIONS,mame2016_cheats_enable
return

mame2016RADA:
mame2016mouseenable= enabled
iniwrite, "%mame2016mouseenable%",%racoreopt%,OPTIONS,mame2016_mouse_enable
return
mame2016RADB:
mame2016mouseenable= disabled
iniwrite, "%mame2016mouseenable%",%racoreopt%,OPTIONS,mame2016_mouse_enable
return

mame2016RADG:
mame2016boottobios= disabled
iniwrite, "%mame2016boottobios%",%racoreopt%,OPTIONS,mame2016_boot_to_bios
return
mame2016RADH:
mame2016boottobios= enabled
iniwrite, "%mame2016boottobios%",%racoreopt%,OPTIONS,mame2016_boot_to_bios
return

mame2016RADQ:
mame2016bootfromcli= disabled
iniwrite, "%mame2016boottobios%",%racoreopt%,OPTIONS,mame2016_boot_from_cli
return
mame2016RADR:
mame2016boottobios= enabled
iniwrite, "%mame2016boottobios%",%racoreopt%,OPTIONS,mame2016_boot_from_cli
return

mame2016RADU:
mame2016boottoosd= disabled
iniwrite, "%mame2016boottobios%",%racoreopt%,OPTIONS,mame2016_boot_to_osd
return
mame2016RADV:
mame2016boottoosd= enabled
iniwrite, "%mame2016boottobios%",%racoreopt%,OPTIONS,mame2016_boot_to_osd
return

;};;;;;;;;;;;


;{;;;;; mame CORE  ;;;;;
mameDDLA:
guicontrol,,CORECHK,0
if (mame= "enabled")
{
guicontrol,,CORECHK,1
}
guicontrol,,CORECHKA,0
if (mamereadconfig= "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (mamewritecofig= "enabled")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (mameautosave= "enabled")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (mamehideagscreen= "enabled")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKE,0
if (mamehidewarnings= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (mamehidegameinfo= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (mamethrottle= "enabled")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKG,0
if (mamealternaterenderer= "enabled")
{
guicontrol,,CORECHKG,1
}
guicontrol,,CORECHKH,1
if (mamesoftlistsenable= "disabled")
{
guicontrol,,CORECHKH,0
}
guicontrol,,CORECHKI,0
if (mamecheatsenable= "enabled")
{
guicontrol,,CORECHK,1
}


guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
if (mamemouseenable= "enabled")
{
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
}

guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
if (mamebootfromcli= "enabled")
{
guicontrol,,CORERADG,0
guicontrol,,CORERADH,1
}


guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
if (mameboottobios= "enabled")
{
guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
}


guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
if (mameboottoosd= "enabled")
{
guicontrol,,CORERADU,0
guicontrol,,CORERADV,1
}


guicontrol,,CORECHKA,Read Config
guicontrol,,CORECHKB,Write Config
guicontrol,,COREDDLTXTB,Save Type
guicontrol,,COREDDLTXTC,Media Type
guicontrol,,COREDDLB,|%mamesaves%||game|system
guicontrol,,COREDDLC,|%mamemediatype%||rom|cart|flop|cdrom|cass|hard|serl|prin
guicontrol,,CORECHKC,auto-save
guicontrol,,CORECHKD,NO-Nag
guicontrol,,CORECHKE,NO-Warnings
guicontrol,,CORECHKF,Throttle
guicontrol,,CORECHKG,NO-Game Info
guicontrol,,COREDDLTXTD,Alt-Renderer
guicontrol,,COREDDLD,|%mamealternaterenderer%||disabled|enabled
guicontrol,,CORECHKH,Softlists
guicontrol,,COREDDLI,|%mamesoftlistsautomedia%||enabled|disabled
guicontrol,,COREDDLTXTI,Softlist Automedia
guicontrol,,CORECHKI,Cheats

guicontrol,,CORERADA,Mouse On
guicontrol,,CORERADB,Mouse Off

guicontrol,,CORERADG,GUI Boot
guicontrol,,CORERADH,CLI Boot

guicontrol,,CORERADQ,Skip BIOS
guicontrol,,CORERADR,BIOS Boot

guicontrol,,CORERADU,OSD Off
guicontrol,,CORERADV,OSD Boot

gosub, HideCoreUI

guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKH
guicontrol,show,CORECHKI
guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORERADG
guicontrol,show,CORERADH
guicontrol,show,CORERADQ
guicontrol,show,CORERADR
guicontrol,show,CORERADU
guicontrol,show,CORERADV
guicontrol,show,CORERADB
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLI
guicontrol,show,COREDDLTXTI
return

mameDDLB:
gui,submit,nohide
mamesaves= %COREDDLB%
iniwrite, "%mamesaves%",%racoreopt%,OPTIONS,mame_saves
return

mameDDLC:
gui,submit,nohide
mamemediatype= %COREDDLC%
iniwrite, "%mamemediatype%",%racoreopt%,OPTIONS,mame_media_type
return

mameDDLD:
gui,submit,nohide
mamealternaterenderer= %COREDDLD%
iniwrite, "%mamealternaterenderer%",%racoreopt%,OPTIONS,mame_alternate_renderer
return

mameDDLI:
gui,submit,nohide
mamesoftlistsautomedia= %COREDDLI%
iniwrite, "%mamesoftlistsautomedia%",%racoreopt%,OPTIONS,mame_softlists_auto_media
return

mameCHKA:
gui,submit,nohide
mamereadconfig= disabled
if (CORECHKA = 1)
{
mamereadconfig= enabled
}
iniwrite, "%mamereadconfig%",%racoreopt%,OPTIONS,mame_read_config
return

mameCHKB:
gui,submit,nohide
mamewriteconfig= disabled
if (CORECHKB = 1)
{
mamewriteconfig= enabled
}
iniwrite, "%mamewriteconfig%",%racoreopt%,OPTIONS,mame_write_config
return

mameCHKC:
gui,submit,nohide
mameautosave= disabled
if (CORECHKC = 1)
{
mameautosave= enabled
}
iniwrite, "%mameautosave%",%racoreopt%,OPTIONS,mame_auto_save
return

mameCHKD:
gui,submit,nohide
mamehidenagscreen= disabled
if (CORECHKD = 1)
{
mamehidenagscreen= enabled
}
iniwrite, "%mamehidenagscreen%",%racoreopt%,OPTIONS,mame_hide_nagscreen
return

mameCHKE:
gui,submit,nohide
mamehidewarnings= disabled
if (CORECHKE = 1)
{
mamehidewarnings= enabled
}
iniwrite, "%mamehidewarnings%",%racoreopt%,OPTIONS,mame_hide_warnings
return

mameCHKF:
gui,submit,nohide
mamethrottle= disabled
if (CORECHKF = 1)
{
mamethrottle= enabled
}
iniwrite, "%mamethrottle%",%racoreopt%,OPTIONS,mame_throttle
return

mameCHKG:
gui,submit,nohide
mamehidegameinfo= disabled
if (CORECHKG = 1)
{
mamehidegameinfo= enabled
}
iniwrite, "%mamehidegameinfo%",%racoreopt%,OPTIONS,mame_hide_gameinfo
return

mameCHKH:
gui,submit,nohide
mamesoftlistsenable= enabled
if (CORECHKH = 0)
{
mamesoftlistsenable= disabled
}
iniwrite, "%mamesoftlistsenable%",%racoreopt%,OPTIONS,mame_softlists_enable
return

mameCHKI:
gui,submit,nohide
mamecheatsenable= disabled
if (CORECHKI = 1)
{
mamecheatsenable= enabled
}
iniwrite, "%mamecheatsenable%",%racoreopt%,OPTIONS,mame_cheats_enable
return

mameRADA:
mamemouseenable= enabled
iniwrite, "%mamemouseenable%",%racoreopt%,OPTIONS,mame_mouse_enable
return
mameRADB:
mamemouseenable= disabled
iniwrite, "%mamemouseenable%",%racoreopt%,OPTIONS,mame_mouse_enable
return

mameRADG:
mameboottobios= disabled
iniwrite, "%mameboottobios%",%racoreopt%,OPTIONS,mame_boot_to_bios
return
mameRADH:
mameboottobios= enabled
iniwrite, "%mameboottobios%",%racoreopt%,OPTIONS,mame_boot_to_bios
return

mameRADQ:
mamebootfromcli= disabled
iniwrite, "%mameboottobios%",%racoreopt%,OPTIONS,mame_boot_from_cli
return
mameRADR:
mameboottobios= enabled
iniwrite, "%mameboottobios%",%racoreopt%,OPTIONS,mame_boot_from_cli
return

mameRADU:
mameboottoosd= disabled
iniwrite, "%mameboottobios%",%racoreopt%,OPTIONS,mame_boot_to_osd
return
mameRADV:
mameboottoosd= enabled
iniwrite, "%mameboottobios%",%racoreopt%,OPTIONS,mame_boot_to_osd
return


;};;;;;;;;;;;


;{;;;;; mednafen_gba CORE  ;;;;;
mednafen_gbaDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mednafen_lynx CORE  ;;;;;
mednafen_lynxDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mednafen_ngp CORE  ;;;;;
mednafen_ngpDDLA:
guicontrol,,COREDDLTXTB,Language
guicontrol,,COREDDLB,|%ngplanguage%||english|spanish|german|french|japanese|korean
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
return

mednafen_ngpDDLB:
gui,submit,nohide
ngplanguage= %CORDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,ngp_language
return
;};;;;;;;;;;;


;{;;;;; mednafen_pce_fast CORE  ;;;;;
mednafen_pce_fastDDLA:
mednafen_supergrafxDDLA:
guicontrol,,COREDDLB,|%pceocmultiplier%||1|2|3|4|5|6|7|8|9|10|20|30|40|50
guicontrol,,COREDDLTXTB,Overclock
guicontrol,,COREDDLTXTC,CD Speed
guicontrol,,COREDDLTXTD,Turbo Delay
guicontrol,,COREDDLTXTF,VolumeType
guicontrol,,COREDDLTXTI,Turbo
guicontrol,,COREDDLC,|%pcecdspeed%||1|2|4|8
guicontrol,,COREDDLD,|%turbodelay%||Fast|Medium|Slow
guicontrol,,COREDDLF,|cdda||adpcm|cdpsg
guicontrol,,CORESLDA,%pcecddavolume%
guicontrol,,CORESLDTXTA,Volume
guicontrol,,CORECHKA,CD Imagecache
guicontrol,,CORECHKB,No Sprite Limit
guicontrol,,CORECHKC,Hoverscan
guicontrol,,COREDDLI,|p0_turbo_I||p0_turbo_II|p1_turbo_I|p1_turbo_II|p2_turbo_I|p2_turbo_II|p3_turbo_I|p3_turbo_II|p4_turbo_I|p4_turbo_II
guicontrol,,CORECHKH,Enable
guicontrol,,CORECMBA,|%pceinitialscanline%||3
guicontrol,,CORECMBB,|%pcelastscanline%||242
guicontrol,,CORECMBTXTA,Start Scanline
guicontrol,,CORECMBTXTB,End Scanline
gosub, HideCoreUI
guicontrol,,CORECHKA,0
if (pcefastimagecache = "enabled")
{
	guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (pcenospritelimit = "enabled")
{
	guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (pcehoverscan = "enabled")
{
	guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKH,0
if (p0turboIenable = "enabled")
{
	guicontrol,,CORECHKH,1
}

guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLF
guicontrol,show,COREDDLI
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLTXTI
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKH
guicontrol,show,CORECMBA
guicontrol,show,CORECMBB
guicontrol,show,CORECMBTXTA
guicontrol,show,CORECMBTXTB
guicontrol,show,CORESLDA
guicontrol,show,CORESLDTXTA
return

mednafen_pce_fastDDLB:
mednafen_supergrafxDDLB:
gui,submit,nohide
pceocmultiplier= %COREDDLB%
iniwrite, "%pceocmultiplier%",%racoreopt%,OPTIONS,pce_ocmultiplier
return

mednafen_pce_fastDDLC:
mednafen_supergrafxDDLC:
gui,submit,nohide
pcecdspeed= %COREDDLC%
iniwrite, "%pcecdspeed%",%racoreopt%,OPTIONS,pce_cdspeed
return

mednafen_pce_fastDDLD:
mednafen_supergrafxDDLD:
gui,submit,nohide
pceturbodelay= %COREDDLD%
iniwrite, "%pceturbodelay%",%racoreopt%,OPTIONS,Turbo_Delay
return

mednafen_pce_fastDDLF:
mednafen_supergrafxDDLF:
gui,submit,nohide
guicontrol,,CORESLDA,% pce%COREDDLF%volume
guicontrol,,CORESLDTXTA,%COREDDLF% Volume
guicontrol,,COREDDLTXTF,%COREDDLF% Volume
return

mednafen_pce_fastCHKA:
mednafen_supergrafxCHKA:
gui,submit,nohide
guicontrol,,CORECHKA,0
if (pcefastimagecache = "enabled")
{
guicontrol,,CORECHKA,1
}
return

mednafen_pce_fastCHKB:
mednafen_supergrafxCHKB:
gui,submit,nohide
guicontrol,,CORECHKB,0
if (pcenospritelimit = "enabled")
{
guicontrol,,CORECHKB,1
}
return

mednafen_pce_fastCHKC:
mednafen_supergrafxCHKC:
gui,submit,nohide
guicontrol,,CORECHKC,0
if (pcehoverscan = "enabled")
{
guicontrol,,CORECHKC,1
}
return

mednafen_pce_fastDDLI:
mednafen_supergrafxDDLI:
gui,submit,nohide
pcej1=
pcej2=
pcej3=
stringsplit,pcej,COREDDLI,_
pturb= % %pcej1%%pcej2%%pcej3%enable
guicontrol,,CORECHKH,0
if (pturb = "enabled")
{
guicontrol,,CORECHKH,1
}	
return

mednafen_pce_fastCHKH:
mednafen_supergrafxCHKH:
gui,submit,nohide
%pcej1%%pcej2%%pcej3%enable= disabled
if (CORECHKH = 1)
{
guicontrol,,CORECHKH,1
%pcej1%%pcej2%%pcej3%enable= enabled
pturb= enabled
}
iniwrite, "%pturb%",%racoreopt%,OPTIONS,%COREDDLI%_enable
return

mednafen_pce_fastSLDA:
mednafen_supergrafxSLDA:
gui,submit,nohide
guicontrolget,vollvl,,COREDDLF
pce%vollvl%volume= %CORESLDA%
iniwrite, "%CORESLDA%",%racoreopt%,OPTIONS,pce_%vollvl%volume
return

mednafen_pce_fastCMBA:
mednafen_supergrafxCMBA:
gui,submit,nohide
pceinitialscanline= %CORECMBA%
iniwrite, "%pceinitialscanline%",%racoreopt%,OPTIONS,pce_initial_scanline
return

mednafen_supergrafxCMBB:
mednafen_pce_fastCMBB:
gui,submit,nohide
pcelastscanline= %CORECMBB%
iniwrite, "%pcelastscanline%",%racoreopt%,OPTIONS,pce_last_scanline
return

;};;;;;;;;;;;


;{;;;;; mednafen_pcfx CORE  ;;;;;
mednafen_pcfxDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mednafen_psx_hw CORE  ;;;;;
mednafen_psx_hwDDLA:
guicontrol,,COREDDLB,|%beetlepsxdithermode%||internal resolution
guicontrol,,COREDDLC,|%beetlepsxfilter%||nearest
guicontrol,,COREDDLD,|%beetlepsxinternalcolordepth%||32bpp
guicontrol,,COREDDLE,|%beetlepsxpgxpmode%||memory + cpu
guicontrol,,COREDDLF,|%beetlepsxrenderer%||opengl
guicontrol,,COREDDLTXTB,Dither Mode
guicontrol,,COREDDLTXTC,Filter
guicontrol,,COREDDLTXTD,Color Depth
guicontrol,,COREDDLTXTE,PGXP Mode
guicontrol,,COREDDLTXTF,Renderer
guicontrol,,CORECHKA,Display VRAM
guicontrol,,CORECHKB,PGXP Caching
guicontrol,,CORECHKC,PGXP Texture
guicontrol,,CORECHKD,Software Framebuffer
guicontrol,,CORECHKE,Scale Dither
guicontrol,,CORECHKF,Wireframe
gosub, HideCoreUI
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
return

mednafen_psx_hwDDLB:
gui,submit,nohide
beetlepsxdithermode= %COREDDLB%
iniwrite, "%beetlepsxdithermode%",%racoreopt%,OPTIONS,beetle_psx_dither_mode
return

mednafen_psx_hwDDLC:
gui,submit,nohide
beetle_psx_filter= %COREDDLC%
iniwrite, "%beetle_psx_filter%",%racoreopt%,OPTIONS,beetle_psx_filter
return

mednafen_psx_hwDDLD:
gui,submit,nohide
beetlepsxinternalcolordepth= %COREDDLD%
iniwrite, "%beetlepsxinternalcolordepth%",%racoreopt%,OPTIONS,beetle_psx_internal_color_depth
return

mednafen_psx_hwDDLE:
gui,submit,nohide
beetlepsxpgxpmode= %COREDDLE%
iniwrite, "%beetlepsxpgxpmode%",%racoreopt%,OPTIONS,beetle_psx_pgxp_mode
return

mednafen_psx_hwDDLF:
gui,submit,nohide
beetlepsxrenderer= %COREDDLE%
iniwrite, "%beetle_psx_renderer%",%racoreopt%,OPTIONS,beetle_psx_renderer
return

mednafen_psx_hwCHKA:
gui,submit,nohide
beetlepsxdisplayvram= disabled
if (CORECHKA = 1)
{
beetlepsxdisplayvram= enabled
}
iniwrite, "%beetlepsxdisplayvram%",%racoreopt%,OPTIONS,beetle_psx_display_vram
return

mednafen_psx_hwCHKB:
gui,submit,nohide
beetlepsxpgxpcaching= enabled
if (CORECHKB = 0)
{
beetlepsxpgxpcaching= disabled
}
iniwrite, "%beetlepsxpgxpcaching%",%racoreopt%,OPTIONS,beetle_psx_pgxp_caching
return

mednafen_psx_hwCHKC:
gui,submit,nohide
beetlepsxpgxptexture= enabled
if (CORECHKC = 0)
{
beetlepsxpgxptexture= disabled
}
iniwrite, "%beetlepsxpgxptexture%",%racoreopt%,OPTIONS,beetle_psx_pgxp_texture
return

mednafen_psx_hwCHKD:
gui,submit,nohide
beetlepsxrenderersoftwarefb= enabled
if (CORECHKFD = 0)
{
beetlepsxrenderersoftwarefb= enabled
}
iniwrite, "%beetlepsxrenderersoftwarefb%",%racoreopt%,OPTIONS,beetle_psx_renderer_software_fb
return

mednafen_psx_hwCHKE:
gui,submit,nohide
beetlepsxscaledither= enabled
if (CORECHKE = 0)
{
beetlepsxscaledither= disabled
}
iniwrite, "%beetlepsxscaledither%",%racoreopt%,OPTIONS,beetle_psx_scale_dither
return

mednafen_psx_hwCHKF:
gui,submit,nohide
beetlepsxwireframe= disabled
if (CORECHKF = 1)
{
beetlepsxwireframe= enabled
}
iniwrite, "%beetlepsxwireframe%",%racoreopt%,OPTIONS,beetle_psx_wireframe
return




;};;;;;;;;;;;


;{;;;;; mednafen_psx CORE  ;;;;;
mednafen_psxDDLA:
guicontrol,,CORECHKA,0
if (beetlepsxanalogtoggle = "enabled")
	{
		guicontrol,,CORECHKA,1
	}
guicontrol,,CORECHKB,0
if (beetlepsxcdimagecache = "enabled")
	{
		guicontrol,,CORECHKB,1
	}
guicontrol,,CORECHKC,
if (beetlepsxcpuoverclock = "enabled")
	{
		guicontrol,,CORE#,
	}
guicontrol,,CORECHKD,0
if (beetlepsxwidescreenhack = "enabled")
	{
		guicontrol,,CORECHKD,1
	}
guicontrol,,CORECHKE,0
if (beetlepsxframedupingenabled = "enabled")
	{
		guicontrol,,CORECHKE,1
	}
guicontrol,,CORECHKF,1
if (beetlepsxskipbios = "disabled")
	{
		guicontrol,,CORECHKF,0
	}
guicontrol,,CORECHKG,1
if (beetlepsxenablememcard1 = "disabled")
	{
		guicontrol,,COREHKG,0
	}
guicontrol,,CORECHKH,0
if (beetlepsxenablemultitapport1 = "enabled")
	{
		guicontrol,,COREHKH,1
	}
guicontrol,,CORECHKI,0
if (beetlepsxenablemultitapport2 = "enabled")
	{
		guicontrol,,COREHKI,1
	}
guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
if (beetlepsxcropoverscan = "enabled")
	{
		guicontrol,,CORERADA,1
		guicontrol,,CORERADB,0
	}
guicontrol,,CORERADG,0
guicontrol,,CORERADH,1
if (beetlepsximagecrop = 1)
	{
		guicontrol,,CORERADG,1
		guicontrol,,CORERADH,0
	}
guicontrol,,CORERADK,0
guicontrol,,CORERADL,1
if (beetlepsximageoffset = "enabled")
	{
		guicontrol,,CORERADA,1
		guicontrol,,CORERADB,0
	}
guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
if (beetlepsxdisplayinternalframerate = "enabled")
	{
		guicontrol,,CORERADM,1
		guicontrol,,CORERADN,0
	}
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
if (beetlepsxvusemednafenmemcard0method = "enabled")
	{
		guicontrol,,CORERADS,1
		guicontrol,,CORERADT,0
	}

guicontrol,,COREDDLB,|%beetlepsxinternalresolution%||1x(native)|2x|4x|8x
guicontrol,,COREDDLC,|%beetlepsxusemednafenmemcard0method%||libretro|mednafen
guicontrol,,COREDDLTXTB,Internal Resolution
guicontrol,,COREDDLTXTC,MemoryCard Type

guicontrol,,CORECMBA,|%beetlepsxinitialscanline%||0|0
guicontrol,,CORECMBB,|%beetlepsxlastscanline%||239|287
guicontrol,,CORECMBTXTA,Start Scanline
guicontrol,,CORECMBTXTB,End Scanline

guicontrol,,CORECHKA,analog toggle
guicontrol,,CORECHKB,cd image cache
guicontrol,,CORECHKC,overclock
guicontrol,,CORECHKD,widescreen
guicontrol,,CORECHKE,frame-duping
guicontrol,,CORECHKF,skip bios

guicontrol,,CORECHKG,Memory Cards
guicontrol,,CORECHKH,p1 Multiport
guicontrol,,CORECHKI,p2 Multiport

guicontrol,,CORERADC,Crop Ovrscan On
guicontrol,,CORERADD,Crop Ovrscan off
guicontrol,,CORERADG,Image Crop On
guicontrol,,CORERADH,Image Crop Off
guicontrol,,CORERADK,Img Offset On
guicontrol,,CORERADL,Img Offset Off
guicontrol,,CORERADM,Show Internal Framerate
guicontrol,,CORERADN,Hide Internal Framerate
guicontrol,,CORERADS,Shared Memcard On
guicontrol,,CORERADT,Shared Memcard Off

gosub, HideCoreUI

guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKH
guicontrol,show,CORECHKI

guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,show,CORERADG
guicontrol,show,CORERADH
guicontrol,show,CORERADK
guicontrol,show,CORERADL
guicontrol,show,CORERADM
guicontrol,show,CORERADN
guicontrol,show,CORERADS
guicontrol,show,CORERADT

guicontrol,show,CORECMBTXTA
guicontrol,show,CORECMBTXTB
guicontrol,show,CORECMBA
guicontrol,show,CORECMBB

return

mednafen_psxDDLB:
gui,submit,nohide
beetlepsxinternalresolution= %COREDDLB%
iniwrite, "%beetlepsxinternalresolution%",%racoreopt%,OPTIONS,beetle_psx_internal_resolution
return
mednafen_psxDDLC:
gui,submit,nohide
beetlepsxenablememcad1= %COREDDLC%
iniwrite, "%beetlepsxenablememcad1%",%racoreopt%,OPTIONS,beetle_psx_enable_memcard1
return
mednafen_psxCMBA:
gui,submit,nohide
beetlepsxinitialscanline= %CORECMBA%
iniwrite, "%beetlepsxinitialscanline%",%racoreopt%,OPTIONS,beetle_psx_initial_scanline
iniwrite, "%beetlepsxinitialscanline%",%racoreopt%,OPTIONS,beetle_psx_initial_scanline_pal
return
mednafen_psxCMBB:
gui,submit,nohide
beetlepsxlastscanline= %CORECMBB%
iniwrite, "%beetlepsxlastscanline%",%racoreopt%,OPTIONS,beetle_psx_last_scanline
iniwrite, "%beetlepsxlastscanline%",%racoreopt%,OPTIONS,beetle_psx_last_scanline_pal
return
mednafen_psxCHKA:
gui,submit,nohide
beetlepsxanalogtoggle= disabled
if (CORECHKA = 1)
	{
		beetlepsxanalogtoggle= enabled
	}
iniwrite, "%beetlepsxanalogtoggle%",%racoreopt%,OPTIONS,beetle_psx_analog_toggle
return
mednafen_psxCHKB:
gui,submit,nohide
beetlepsxcdimagecache= disabled
if (CORECHKB = 1)
	{
		beetlepsxcdimagecache= enabled
	}
iniwrite, "%beetlepsxcdimagecache%",%racoreopt%,OPTIONS,beetle_psx_cd_imagecache
return
mednafen_psxCHKC:
gui,submit,nohide
beetlepsxcdimagecache= disabled
if (CORECHKC = 1)
	{
		beetlepsxcpuoverclock= enabled
	}
iniwrite, "%beetlepsxcpuoverclock%",%racoreopt%,OPTIONS,beetle_psx_cpu_overclock
return
mednafen_psxCHKD:
gui,submit,nohide
beetlepsxwidescreenhack= disabled
if (CORECHKD = 1)
	{
		beetlepsxwidescreenhack= enabled
	}
iniwrite, "%beetlepsxwidescreenhack%",%racoreopt%,OPTIONS,beetle_psx_widescreen_hack
return
mednafen_psxCHKE:
gui,submit,nohide
beetlepsxframedupingenable= disabled
if (CORECHKE = 1)
	{
		beetlepsxframedupingenable= enabled
	}
iniwrite, "%beetlepsxframedupingenable%",%racoreopt%,OPTIONS,beetle_psx_frame_duping_enable
return
mednafen_psxCHKF:
gui,submit,nohide
beetlepsxskipbios= disabled
if (CORECHKF = 0)
	{
		beetlepsxskipbios= disabled
	}
iniwrite, "%beetlepsxskipbios%",%racoreopt%,OPTIONS,beetle_psx_skip_bios
return
mednafen_psxCHKG:
gui,submit,nohide
beetlepsxenablememcard1= disabled
if (CORECHKG = 0)
	{
		beetlepsxenablememcard1= disabled
	}
iniwrite, "%beetlepsxenablememcard1%",%racoreopt%,OPTIONS,beetle_enable_memcard1
return
mednafen_psxCHKH:
gui,submit,nohide
beetlepsxenablemultitapport1= disabled
if (CORECHKH = 1)
	{
		beetlepsxenablemultitapport1= enabled
	}
iniwrite, "%beetlepsxenablemultitapport1%",%racoreopt%,OPTIONS,beetle_psx_enable_multitap_port1
return
mednafen_psxCHKI:
beetlepsxenablemultitapport2= disabled
if (CORECHKI = 1)
	{
		beetlepsxenablemultitapport2= enabled
	}
iniwrite, "%beetlepsxenablemultitapport2%",%racoreopt%,OPTIONS,beetle_psx_enable_multitap_port2
gui,submit,nohide
return
mednafen_psxRADA:
gui,submit,nohide
beetlepsxcropoverscan= enabled
iniwrite, "%beetlepsxcropoverscan%",%racoreopt%,OPTIONS,beetle_psx_crop_overscan
return
mednafen_psxRADB:
gui,submit,nohide
beetlepsxcropoverscan= disabled
iniwrite, "%beetlepsxcropoverscan%",%racoreopt%,OPTIONS,beetle_psx_crop_overscan
return
mednafen_psxRADM:
gui,submit,nohide
beetlepsxdisplayinternalframerate= enabled
iniwrite, "%beetlepsxdisplayinternalframerate%",%racoreopt%,OPTIONS,beetle_psx_display_internal_framerate
return
mednafen_psxRADN:
beetlepsxdisplayinternalframerate= disabled
iniwrite, "%beetlepsxdisplayinternalframerate%",%racoreopt%,OPTIONS,beetle_psx_display_internal_framerate
gui,submit,nohide
return
mednafen_psxRADK:
gui,submit,nohide
beetlepsximageoffset= enabled
iniwrite, "%beetlepsximageoffset%",%racoreopt%,OPTIONS,beetle_psx_image_offset
return
mednafen_psxRADL:
gui,submit,nohide
beetlepsximageoffset= disabled
iniwrite, "%beetlepsximageoffset%",%racoreopt%,OPTIONS,beetle_psx_image_offset
return
mednafen_psxRADS:
gui,submit,nohide
beetlepsxsharedmemorycards= enabled
iniwrite, "%beetlepsxsharedmemorycards%",%racoreopt%,OPTIONS,beetle_psx_shared_memory_cards
return
mednafen_psxRADT:
gui,submit,nohide
beetlepsxsharedmemorycards= disabled
iniwrite, "%beetlepsxsharedmemorycards%",%racoreopt%,OPTIONS,beetle_psx_shared_memory_cards
return
;};;;;;;;;;;;


;{;;;;; mednafen_saturn CORE  ;;;;;
mednafen_saturnDDLA:
guicontrol,,CORECHKA,CD Imagecache
guicontrol,,CORECMBTXTA,Start scanline
guicontrol,,CORECMBTXTB,Last scanline
guicontrol,,CORECMBA,|%beetlesaturninitialscanline%||0|0
guicontrol,,CORECMBB,|%beetlesaturnlastscanline%||239|287
gosub, HideCoreUI
guicontrol,show,CORECHKA
guicontrol,show,CORECMBA
guicontrol,show,CORECMBTXTA
guicontrol,show,CORECMBB
guicontrol,show,CORECMBTXTB
return
mednafen_saturnCMBA:
gui,submit,nohide
iniwrite, "%beetlesaturninitialscanline%",%racoreopt%,OPTIONS,beetle_saturn_initial_scanline
iniwrite, "%beetlesaturninitialscanline%",%racoreopt%,OPTIONS,beetle_saturn_initial_scanline_pal
return
mednafen_saturnCMBB:
gui,submit,nohide
iniwrite, "%beetlesaturnlastscanline%",%racoreopt%,OPTIONS,beetle_saturn_last_scanline
iniwrite, "%beetlesaturnlastscanline%",%racoreopt%,OPTIONS,beetle_saturn_last_scanline_pal
return
mednafen_saturnCHKA:
gui,submit,nohide
beetlesaturncdimagecache= disabled
if (CORECHKA = 1)
	{
		beetlesaturncdimagecache= disabled
	}
iniwrite, "%beetlesaturncdimagecache%",%racoreopt%,OPTIONS,beetle_saturn_cdimagecache
return

;};;;;;;;;;;;


;{;;;;; mednafen_vb CORE  ;;;;;
mednafen_vbDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mednafen_wswan CORE  ;;;;;
mednafen_wswanDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mess2014 CORE  ;;;;;
mess2014DDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; mgba CORE  ;;;;;
mgbaDDLA:
guicontrol,,COREDDLB,|%mgbasolarsensorlevel%||0|1|2|3|4|5|6|7|8|9|10
guicontrol,,CORECHKA,0
if (mgbaallowoppoingdirections = "ON")
{
	guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (mgbausebios = "ON")
{
	guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,1
if (mgbaskipbios = "OFF")
{
	guicontrol,,CORECHKC,0
}

guicontrol,,COREDDLC,|%mgbaidleoptimization%||Remove Known|Don't Remove|Detect and Remove
guicontrol,,COREDDLTXTC,Optimize
gosub, HideCoreUI
guicontrol, show, CORECHKA
guicontrol,, CORECHKA,Allow Opposite
guicontrol, show, CORECHKB
guicontrol,, CORECHKB,Use BIOS
guicontrol, show, CORECHKC
guicontrol,, CORECHKC,Skip BIOS
guicontrol, show, COREDDLB
guicontrol, show, COREDDLTXTB
guicontrol, show, COREDDLC
guicontrol, show, COREDDLTXTC
guicontrol,,COREDDLTXTB,Solar Lvl
return

mgbaDDLC:
gui,submit,nohide
guicontrolget,mgbaidleoptimization,,COREDDLB
iniwrite, "%mgbaidleoptimization%",%racoreopt%,OPTIONS,mgba_idle_optimization
return

mgbaDDLB:
gui,submit,nohide
guicontrolget,mgbasolarsensorlevel,,COREDDLB
iniwrite, "%mgbasolarsensorlevel%",%racoreopt%,OPTIONS,mgba_solar_sensor_level
return

mgbaCHKB:
gui, submit, nohide
mgbaUSE= 0
if (CORECHKB = 1)
{
	mgbaUSE= 1
}
iniwrite, "%mgbaUSE%",%racoreopt%,OPTIONS,mgba_use_bios
return
mgbaCHKC:
gui, submit, nohide
mgbaSKP= disabled
if (CORECHKC = 1)
{
	mgbaSKP= enabled
}
iniwrite, "%mgbaSKP%",%racoreopt%,OPTIONS,mgba_skip_bios

return
mgbaCHKA:
gui, submit, nohide
mgbaDPADOP= disabled
if (CORECHKA= 1)
{
	mgbaDPADOP= enabled
}
iniwrite, "%mgbaDPADOP%",%racoreopt%,OPTIONS,mgba_allow_opposing_directions
return

;};;;;;;;;;;;


;{;;;;;; glupen64 CORE ;;;;;;
glupen64DDLA:

guicontrol,,CORECHKA,0
if (glupen64aspect= "16:9")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (glupen64EnableFBEmulation = "True")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (glupen64BilinearMode = "3point")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (glupen64EnableHWLighting = "True")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKE,0
if (glupen64EnableLegacyBlending = "True")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (glupen64rspmode = "LLE")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKH,0
if (glupen64EnableNativeResTexrects = "True")
{
guicontrol,,CORECHKH,1
}
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
guicontrol,,CORERADE,0
guicontrol,,CORERADF,0
guicontrol,,COREDDLB,|%glupen64cpucore%||dynamic_recompiler|pure_interpreter|cached_interpreter
guicontrol,,COREDDLTXTB,CPU Core
guicontrol,,COREDDLC,|%glupen6443screensize%||320x240|640x480|960x720|1280x960|1600x1200|1920x1440
guicontrol,,COREDDLTXTI,Resolution Scale
guicontrol,,COREDDLD,|%glupen64169screensize%||320x180|640x360|960x540|1280x720|1920x1080|3840x2160
guicontrol,,COREDDLTXTD,Widescreen Resolution
guicontrol,,COREDDLTXTC,Standard Resolution
guicontrol,,COREDDLTXTE,Deadzone
guicontrol,,COREDDLE,|%glupen64astickdeadzone%||5|10|15|20|25|30
guicontrol,,COREDDLI,|%glupen64usenativeresolutionfactor%||0x|1x|2x|3x|4x
guicontrol,,COREDDLG,|%glupen64EnableCopyColorToRDRAM%||Sync|Async|Off
guicontrol,,COREDDLH,|%glupen64EnableCopyDepthToRDRAM%||Software|FromMem|Off
guicontrol,,COREDDLTXTG,Copy Color to RDRAM
guicontrol,,COREDDLTXTH,Copy Depth to RDRAM
guicontrol,,CORECHKA,Widescreen
guicontrol,,CORECHKB,Framebuffer Emulation
guicontrol,,CORECHKC,3point filtering
guicontrol,,CORECHKD,Per-Pixel Lighting
guicontrol,,CORECHKE,Fast-Blending
guicontrol,,CORECHKF,LLE RSP Mode
guicontrol,,CORECHKH,Native 2d Texrects
guicontrol,,COREDDLTXTF,Continuous Texrect coord
guicontrol,,COREDDLF,|%glupen64CorrectTexrectCoords%||Auto|Force|Off
guicontrol,,CORECMBTXTA,Pak Type
guicontrol,,CORECMBA,|%glupen64pak1%||none|memory|rumble
guicontrol,,CORERADK,No textrect
guicontrol,,CORERADL,Auto textrect
guicontrol,,CORERADM,Force textrect
guicontrol,,CORERADC,P1 Pak
guicontrol,,CORERADD,P2 Pak
guicontrol,,CORERADE,P3 Pak
guicontrol,,CORERADF,P4 Pak
guicontrol,,CORECHKH,Native 2D Textrects
gosub, HideCoreUI
guicontrol,show,CORECMBA
guicontrol,show,CORECMBTXTA
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLF
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLG
guicontrol,show,COREDDLTXTG
guicontrol,show,COREDDLH
guicontrol,show,COREDDLTXTH
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,show,CORERADE
guicontrol,show,CORERADF
return

glupen64DDLB:
gui,submit,nohide
glupen64pucore= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,glupen64-cpucore
return

glupen64DDLC:
gui,submit,nohide
glupen6443screensize= %COREDDLC%
iniwrite, "%COREDDLC%",%racoreopt%,OPTIONS,glupen64-43screensize
return

glupen64DDLD:
gui,submit,nohide
glupen64169screensize= %COREDDLD%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,glupen64-169screensize
return

glupen64plusDDLE:
gui,submit,nohide
glupen64astickdeadzone= %COREDDLE%
iniwrite, "%COREDDLE%",%racoreopt%,OPTIONS,glupen64-astick-deadzone
return

glupen64DDLI:
gui,submit,nohide
glupen64usenativeresolutionfactor= %COREDDLI%
iniwrite, "%COREDDLI%",%racoreopt%,OPTIONS,glupen64-usenativeresolutionfactor
return

glupen64DDLG:
gui,submit,nohide
glupen64EnableCopyColorToRDRAM= %COREDDLG%
iniwrite, "%COREDDLG%",%racoreopt%,OPTIONS,glupen64-EnableCopyColorToRDRAM
return

glupen64DDLH:
gui,submit,nohide
glupen64EnableCopyColorFromRDRAM= %COREDDLH%
iniwrite, "%COREDDLH%",%racoreopt%,OPTIONS,glupen64-EnableCopyColorFromRDRAM
return

glupen64CHKA:
gui,submit,nohide
glupen64aspect= 4:3
if (CORECHKA = 1)
{
glupen64aspect= 16:9
}
iniwrite, "%glupen64aspect%",%racoreopt%,OPTIONS,glupen64-aspect
return

glupen64CHKB:
gui,submit,nohide
glupen64EnableFBEmulation= True
if (CORECHKB = 0)
{
glupen64EnableFBEmulation= False
}
iniwrite, "%glupen64EnableFBEmulation%",%racoreopt%,OPTIONS,glupen64-EnableFBEmulation
return

glupen64CHKC:
gui,submit,nohide
glupen64BilinearMode= standard
if (CORECHKC = 0)
{
glupen64BilinearMode= 3point
}
iniwrite, "%glupen64BilinearMode%",%racoreopt%,OPTIONS,glupen64-BilinearMode
return

glupen64CHKE:
gui,submit,nohide
glupen64EnableLegacyBlending= False
if (CORECHKE = 1)
{
glupen64EnableLegacyBlending= True
}
iniwrite, "%glupen64EnableLegacyBlending%",%racoreopt%,OPTIONS,glupen64-EnableLegacyBlending
return

glupen64CHKD:
gui,submit,nohide
glupen64EnableHWLighting= True
if (CORECHKD = 0)
{
glupen64EnableHWLighting= False
}
iniwrite, "%glupen64EnableHWLighting%",%racoreopt%,OPTIONS,glupen64-EnableHWLighting
return

glupen64CHKF:
gui,submit,nohide
glupen64rspmode= HLE
if (CORECHKF = 1)
{
glupen64rspmode= LLE
}
iniwrite, "%glupen64rspmode%",%racoreopt%,OPTIONS,glupen64-rspmode
return

glupen64CHKH:
gui,submit,nohide
glupen64EnableNativeResTexrects= Off
if (CORECHKG = 1)
{
glupen64EnableNativeResTexrects= On
}
iniwrite, "%glupen64EnableNativeResTexrects%",%racoreopt%,OPTIONS,glupen64-EnableNativeResTexrects
return

glupen64plusCMBA:
gui,submit,nohide
guicontrolget,paknum1,,CORERADC
guicontrolget,paknum2,,CORERADD
guicontrolget,paknum3,,CORERADE
guicontrolget,paknum4,,CORERADF
if (paknum1 = 1)
{
mupak= 1
}
if (paknum1 = 2)
{
mupak= 2
}
if (paknum1 = 3)
{
mupak= 3
}
if (paknum1 = 4)
{
mupak= 4
}
glupen64pak%mupak%= %CORECMBA%
iniwrite, "%CORECMBA%",%racoreopt%,OPTIONS,glupen64-pak%mupak%
return

glupen64RADA:
gui,submit,nohide
glupen64aspect= 4:3
iniwrite, "%glupen64aspect%",%racoreopt%,OPTIONS,glupen64-aspect
return

glupen64RADB:
gui,submit,nohide
glupen64aspect= 16:9
iniwrite, "%glupen64aspect%",%racoreopt%,OPTIONS,glupen64-aspect
return

glupen64RADC:
gui,submit,nohide
guicontrol,,CORECMBA,|%glupen64pak1%||none|memory|rumble
return

glupen64RADD:
gui,submit,nohide
guicontrol,,CORECMBA,|%glupen64pak2%||none|memory|rumble
return

glupen64RADE:
gui,submit,nohide
guicontrol,,CORECMBA,|%glupen64pak3%||none|memory|rumble
return

glupen64RADF:
gui,submit,nohide
guicontrol,,CORECMBA,|%glupen64pak4%||none|memory|rumble
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;{;;;;; mupen64plus CORE  ;;;;;
mupen64plusDDLA:
guicontrol,,CORECHKA,0
if (mupen64aspectratiohint= "widescreen")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (mupen64bufferswap= "on")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (mupen64vcachevbo= "on")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (mupen64= "64DD IPL")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKF,0
if (mupen64angrylionvioverlay= "enabled")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKG,0
if (mupen64disableexpmem= "enabled")
{
guicontrol,,CORECHKG,1
}
guicontrol,,CORECHKE,0
if (mupen64framerate= "fullspeed")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORERADC,1
guicontrol,,CORERAD,0
guicontrol,,CORERAD,0
guicontrol,,CORERADF,0

guicontrol,,CORERADS,1
guicontrol,,CORERADT,0
if (mupen64audiobuffersize = "2200")
{
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
}

guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
if (mupen64audiobuffersize = "1024")
{
guicontrol,,CORERADM,1
guicontrol,,CORERADN,0
}


guicontrol,,COREDDLB,|%mupen64cpucore%||dynamic_recompiler|cached_interpreter|pure_interpreter
guicontrol,,COREDDLC,|%mupen64gfxpluginaccuracy%||veryhigh|high|medium|low
guicontrol,,COREDDLD,|%mupen64gfxplugin%||auto|glide64|gln64|rice|angrylion|parallel
guicontrol,,COREDDLF,|%mupen64rspplugin%||auto|hle|parallel|cxd4
guicontrol,,COREDDLG,|%mupen64screensize%||640x480|960x720|1280x960|1600x1200|1920x1440|2240x1680|320x240|
guicontrol,,COREDDLH,|%mupen64filtering%||automatic|bilinear|N64 3-point|nearest
guicontrol,,COREDDLE,|%mupen64astickdeadzone%||5|10|15|20|25|30
guicontrol,,COREDDLTXTB,CPU Recompiler
guicontrol,,COREDDLTXTC,GFX Accuracy
guicontrol,,COREDDLTXTD,GFX Plugin
guicontrol,,COREDDLTXTF,RSP Plugin
guicontrol,,COREDDLTXTE,Deadzone
guicontrol,,COREDDLTXTG,Resolution
guicontrol,,COREDDLTXTH,Texture Filter
guicontrol,,CORECMBTXTA,Pak Type
guicontrol,,CORECHKA,Widescreen
guicontrol,,CORECHKB,Buffer Swap
guicontrol,,CORECHKC,Vertex Cache VBO
guicontrol,,CORECHKD,64DD IPL Boot
guicontrol,,CORECHKE,Fullspeed Framerate
guicontrol,,CORECHKF,VI Overlay
guicontrol,,CORECHKG,RAM Pak
guicontrol,,CORERADC,P1 Pak
guicontrol,,CORERADD,P2 Pak
guicontrol,,CORERADE,P3 Pak
guicontrol,,CORERADF,P4 Pak
guicontrol,,CORERADS,VI-Refr 1500
guicontrol,,CORERADT,VI-Refr 2200
guicontrol,,CORECMBA,|%mupen64pak1%||none|memory|rumble
guicontrol,,CORERADM,Audio Buffer 1024
guicontrol,,CORERADN,Audio Buffer 2048
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
guicontrol,show,COREDDLG
guicontrol,show,COREDDLH
guicontrol,show,CORECMBA
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLTXTG
guicontrol,show,COREDDLTXTH
guicontrol,show,CORECMBTXTA
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,show,CORERADE
guicontrol,show,CORERADF
guicontrol,show,CORERADS
guicontrol,show,CORERADT
guicontrol,show,CORERADM
guicontrol,show,CORERADN
return

mupen64plusDDLB:
gui,submit,nohide
mupen64cpucore= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,mupen64-cpucore
return

mupen64plusDDLC:
gui,submit,nohide
mupen64gfxpluginaccuracy= %COREDDLC%
iniwrite, "%COREDDLC%",%racoreopt%,OPTIONS,mupen64-gfxplugin-accuracy
return

mupen64plusDDLD:
gui,submit,nohide
mupen64gfxplugin= %COREDDLD%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,mupen64-gfxplugin
return

mupen64plusDDLE:
gui,submit,nohide
mupen64astickdeadzone= %COREDDLE%
iniwrite, "%COREDDLE%",%racoreopt%,OPTIONS,mupen64-astick-deadzone
return

mupen64plusDDLF:
gui,submit,nohide
mupen64rspplugin= %COREDDLF%
iniwrite, "%COREDDLF%",%racoreopt%,OPTIONS,mupen64-rspplugin
return

mupen64plusDDLG:
gui,submit,nohide
mupen64screensize= %COREDDLG%
iniwrite, "%COREDDLG%",%racoreopt%,OPTIONS,mupen64-screensize
return

mupen64plusDDLH:
gui,submit,nohide
mupen64filtering= %COREDDLH%
iniwrite, "%COREDDLH%",%racoreopt%,OPTIONS,mupen64-filtering
return

mupen64plusCMBA:
gui,submit,nohide
guicontrolget,paknum1,,CORERADC
guicontrolget,paknum2,,CORERADD
guicontrolget,paknum3,,CORERADE
guicontrolget,paknum4,,CORERADF
if (paknum1 = 1)
{
mupak= 1
}
if (paknum1 = 2)
{
mupak= 2
}
if (paknum1 = 3)
{
mupak= 3
}
if (paknum1 = 4)
{
mupak= 4
}
mupen64pak%mupak%= %CORECMBA%
iniwrite, "%CORECMBA%",%racoreopt%,OPTIONS,mupen64-pak%mupak%
return

mupen64plusCHKA:
gui,submit,nohide
mupen64apsectratiohint= normal 
if (CORECHKA = 1)
{
mupen64apsectratiohint= widescreen
}
iniwrite, "%mupen64apsectratiohint%",%racoreopt%,OPTIONS,mupen64-aspectratiohint
return

mupen64plusCHKB:
gui,submit,nohide
mupen64bufferswap= "off"
if (CORECHKB = 1)
{
mupen64bufferswap= "on"
}
iniwrite, "%mupen64bufferswap%",%racoreopt%,OPTIONS,mupen64-bufferswap
return

mupen64plusCHKC:
gui,submit,nohide
mupen64vcachevbo= "off"
if (CORECHKC = 1)
{
mupen64vcachevbo= "on"
}
iniwrite, "%mupen64vcachevbo%",%racoreopt%,OPTIONS,mupen64-vcache-vbo
return

mupen64plusCHKD:
gui,submit,nohide
mupen6464ddhardware= "disabled"
if (CORECHKD = 1)
{
mupen6464ddhardware= "enabled"
}
iniwrite, "%mupen6464ddhardware%",%racoreopt%,OPTIONS,mupen64-64dd-hardware
return

mupen64plusCHKE:
gui,submit,nohide
mupen64framerate= "fullspeed"
if (CORECHKE = 0)
{
mupen64framerate= "original"
}
iniwrite, "%mupen64framerate%",%racoreopt%,OPTIONS,mupen64-ramerate
return

mupen64plusCHKF:
gui,submit,nohide
mupen64angrylionvioverlay= "disabled"
if (CORECHKF = 1)
{
mupen64angrylionvioverlay= "enabled"
}
iniwrite, "%mupen64angrylionvioverlay%",%racoreopt%,OPTIONS,mupen64-angrylion-vi-overlay
return

mupen64plusCHKG:
gui,submit,nohide
mupen64disableexpmem= "disabled"
if (CORECHKF = 1)
{
mupen64disableexpmem= "enabled"
}
iniwrite, "%mupen64disableexpmem%",%racoreopt%,OPTIONS,mupen64-disable-expmem
return

mupen64plusRADC:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak1%||none|memory|rumble
return

mupen64plusRADD:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak2%||none|memory|rumble
return

mupen64plusRADE:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak3%||none|memory|rumble
return

mupen64plusRADF:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak4%||none|memory|rumble
return

mupen64plusRADS:
gui,submit,nohide
iniwrite, "1500",%racoreopt%,OPTIONS,mupen64-virefresh
return

mupen64plusRADT:
gui,submit,nohide
iniwrite, "2200",%racoreopt%,OPTIONS,mupen64-virefresh
return

mupen64plusRADM:
gui,submit,nohide
iniwrite, "1024",%racoreopt%,OPTIONS,mupen64-audio-buffer-size
return

mupen64plusRADN:
gui,submit,nohide
iniwrite, "2048",%racoreopt%,OPTIONS,mupen64-audio-buffer-size
return


;};;;;;;;;;;;


;{;;;;; paralleln64CORE  ;;;;;
parallel_n64DDLA:
guicontrol,,CORECHKA,0

if (paralleln64aspectratiohint= "widescreen")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (paralleln64bufferswap= "on")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (paralleln64vcachevbo= "on")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (paralleln64= "64DD IPL")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKF,0
if (paralleln64angrylionvioverlay= "enabled")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKG,0
if (paralleln64disableexpmem= "enabled")
{
guicontrol,,CORECHKG,1
}
guicontrol,,CORECHKE,0
if (paralleln64framerate= "fullspeed")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORERADC,1
guicontrol,,CORERAD,0
guicontrol,,CORERAD,0
guicontrol,,CORERADF,0

guicontrol,,CORERADS,1
guicontrol,,CORERADT,0
if (paralleln64audiobuffersize = "2200")
{
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
}

guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
if (paralleln64audiobuffersize = "1024")
{
guicontrol,,CORERADM,1
guicontrol,,CORERADN,0
}


guicontrol,,COREDDLB,|%paralleln64cpucore%||dynamic_recompiler|cached_interpreter|pure_interpreter
guicontrol,,COREDDLC,|%paralleln64gfxpluginaccuracy%||veryhigh|high|medium|low
guicontrol,,COREDDLD,|%paralleln64gfxplugin%||auto|glide64|gln64|rice|angrylion|parallel
guicontrol,,COREDDLF,|%paralleln64rspplugin%||auto|hle|parallel|cxd4
guicontrol,,COREDDLG,|%paralleln64screensize%||640x480|960x720|1280x960|1600x1200|1920x1440|2240x1680|320x240|
guicontrol,,COREDDLH,|%paralleln64filtering%||automatic|bilinear|N64 3-point|nearest
guicontrol,,COREDDLE,|%paralleln64astickdeadzone%||5|10|15|20|25|30
guicontrol,,COREDDLTXTB,CPU Recompiler
guicontrol,,COREDDLTXTC,GFX Accuracy
guicontrol,,COREDDLTXTD,GFX Plugin
guicontrol,,COREDDLTXTF,RSP Plugin
guicontrol,,COREDDLTXTE,Deadzone
guicontrol,,COREDDLTXTG,Resolution
guicontrol,,COREDDLTXTH,Texture Filter
guicontrol,,CORECMBTXTA,Pak Type
guicontrol,,CORECHKA,Widescreen
guicontrol,,CORECHKB,Buffer Swap
guicontrol,,CORECHKC,Vertex Cache VBO
guicontrol,,CORECHKD,64DD IPL Boot
guicontrol,,CORECHKE,Fullspeed Framerate
guicontrol,,CORECHKF,VI Overlay
guicontrol,,CORECHKG,RAM Pak
guicontrol,,CORERADC,P1 Pak
guicontrol,,CORERADD,P2 Pak
guicontrol,,CORERADE,P3 Pak
guicontrol,,CORERADF,P4 Pak
guicontrol,,CORERADS,VI-Refr 1500
guicontrol,,CORERADT,VI-Refr 2200
guicontrol,,CORECMBA,|%paralleln64pak1%||none|memory|rumble
guicontrol,,CORERADM,Audio Buffer 1024
guicontrol,,CORERADN,Audio Buffer 2048
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
guicontrol,show,COREDDLG
guicontrol,show,COREDDLH
guicontrol,show,CORECMBA
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLTXTG
guicontrol,show,COREDDLTXTH
guicontrol,show,CORECMBTXTA
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORERADC
guicontrol,show,CORERADD
guicontrol,show,CORERADE
guicontrol,show,CORERADF
guicontrol,show,CORERADS
guicontrol,show,CORERADT
guicontrol,show,CORERADM
guicontrol,show,CORERADN
return


parallel_n64DDLB:
gui,submit,nohide
paralleln64cpucore= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,parallel_n64-cpucore
return

parallel_n64DDLC:
gui,submit,nohide
paralleln64gfxpluginaccuracy= %COREDDLC%
iniwrite, "%COREDDLC%",%racoreopt%,OPTIONS,parallel_n64-gfxplugin-accuracy
return

parallel_n64DDLD:
gui,submit,nohide
paralleln64gfxplugin= %COREDDLD%
iniwrite, "%COREDDLD%",%racoreopt%,OPTIONS,parallel_n64-gfxplugin
return

parallel_n64DDLE:
gui,submit,nohide
paralleln64astickdeadzone= %COREDDLE%
iniwrite, "%COREDDLE%",%racoreopt%,OPTIONS,parallel_n64-astick-deadzone
return

parallel_n64DDLF:
gui,submit,nohide
paralleln64rspplugin= %COREDDLF%
iniwrite, "%COREDDLF%",%racoreopt%,OPTIONS,parallel_n64-rspplugin
return

parallel_n64DDLG:
gui,submit,nohide
paralleln64screensize= %COREDDLG%
iniwrite, "%COREDDLG%",%racoreopt%,OPTIONS,parallel_n64-screensize
return

parallel_n64DDLH:
gui,submit,nohide
paralleln64filtering= %COREDDLH%
iniwrite, "%COREDDLH%",%racoreopt%,OPTIONS,parallel_n64-filtering
return

parallel_n64CMBA:
gui,submit,nohide
guicontrolget,paknum1,,CORERADC
guicontrolget,paknum2,,CORERADD
guicontrolget,paknum3,,CORERADE
guicontrolget,paknum4,,CORERADF
if (paknum1 = 1)
{
mupak= 1
}
if (paknum1 = 2)
{
mupak= 2
}
if (paknum1 = 3)
{
mupak= 3
}
if (paknum1 = 4)
{
mupak= 4
}
paralleln64pak%mupak%= %CORECMBA%
iniwrite, "%CORECMBA%",%racoreopt%,OPTIONS,parallel_n64-pak%mupak%
return

parallel_n64CHKA:
gui,submit,nohide
paralleln64apsectratiohint= normal 
if (CORECHKA = 1)
{
paralleln64apsectratiohint= widescreen
}
iniwrite, "%paralleln64apsectratiohint%",%racoreopt%,OPTIONS,parallel_n64-aspectratiohint
return

parallel_n64CHKB:
gui,submit,nohide
paralleln64bufferswap= "off"
if (CORECHKB = 1)
{
paralleln64bufferswap= "on"
}
iniwrite, "%paralleln64bufferswap%",%racoreopt%,OPTIONS,parallel_n64-bufferswap
return

parallel_n64CHKC:
gui,submit,nohide
paralleln64vcachevbo= "off"
if (CORECHKC = 1)
{
paralleln64vcachevbo= "on"
}
iniwrite, "%paralleln64vcachevbo%",%racoreopt%,OPTIONS,parallel_n64-vcache-vbo
return

parallel_n64CHKD:
gui,submit,nohide
paralleln6464ddhardware= "disabled"
if (CORECHKD = 1)
{
paralleln6464ddhardware= "enabled"
}
iniwrite, "%paralleln6464ddhardware%",%racoreopt%,OPTIONS,parallel_n64-64dd-hardware
return

parallel_n64CHKE:
gui,submit,nohide
paralleln64framerate= "fullspeed"
if (CORECHKE = 0)
{
paralleln64framerate= "original"
}
iniwrite, "%paralleln64framerate%",%racoreopt%,OPTIONS,parallel_n64-ramerate
return

parallel_n64CHKF:
gui,submit,nohide
paralleln64angrylionvioverlay= "disabled"
if (CORECHKF = 1)
{
paralleln64angrylionvioverlay= "enabled"
}
iniwrite, "%paralleln64angrylionvioverlay%",%racoreopt%,OPTIONS,parallel_n64-angrylion-vi-overlay
return

parallel_n64CHKG:
gui,submit,nohide
paralleln64disableexpmem= "disabled"
if (CORECHKF = 1)
{
paralleln64disableexpmem= "enabled"
}
iniwrite, "%paralleln64disableexpmem%",%racoreopt%,OPTIONS,parallel_n64-disable-expmem
return

parallel_n64RADC:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak1%||none|memory|rumble
return

parallel_n64RADD:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak2%||none|memory|rumble
return

parallel_n64RADE:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak3%||none|memory|rumble
return

parallel_n64RADF:
gui,submit,nohide
guicontrol,,CORECMBA,|%mupen64pak4%||none|memory|rumble
return

parallel_n64RADS:
gui,submit,nohide
iniwrite, "1500",%racoreopt%,OPTIONS,parallel_n64-virefresh
return

parallel_n64RADT:
gui,submit,nohide
iniwrite, "2200",%racoreopt%,OPTIONS,parallel_n64-virefresh
return

parallel_n64RADM:
gui,submit,nohide
iniwrite, "1024",%racoreopt%,OPTIONS,parallel_n64-audio-buffer-size
return

parallel_n64RADN:
gui,submit,nohide
iniwrite, "2048",%racoreopt%,OPTIONS,parallel_n64-audio-buffer-size
return


;};;;;;;;;;;;


;{;;;;; nestopia CORE  ;;;;;
nestopiaDDLA:
guicontrol,,CORECHKA,NTSC Filter
guicontrol,,CORECHKB,Sprite Limit
guicontrol,,CORECHKC,Auto Disk1
guicontrol,,CORECHKD,Vertical Mask
guicontrol,,CORECHKE,Horiz Mask
guicontrol,,CORECHKF,GGenie Sound
guicontrol,,COREDDLTXTB,Palette
guicontrol,,COREDDLB,|%nestopiapalette%||consumer|canonical|alternative|rgb|unsaturated-v7|pal|raw|custom
guicontrol,,COREDDLTXTC,Aspect
guicontrol,,COREDDLTXTD,Favored System
guicontrol,,COREDDLTXTE,RAM On-State
guicontrol,,COREDDLC,|%nestopiaaspect%||auto|ntsc|pal|4:3
guicontrol,,COREDDLD,|%nestopiafavoredsystem%||auto|ntsc|pal|famicom|dendy
guicontrol,,COREDDLE,|%nestopiarampowerstate%||0x00|0xFF|random
gosub, HideCoreUI
guicontrol, show,COREDDLTXTB
guicontrol, show,COREDDLTXTC
guicontrol, show,COREDDLTXTD
guicontrol, show,COREDDLTXTE
guicontrol, show,COREDDLB
guicontrol, show,COREDDLC
guicontrol, show,COREDDLD
guicontrol, show,COREDDLE
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
return

nestopiaDDLB:
gui,submit,nohide
guicontrolget,nestopiapalette,,COREDDLB
iniwrite, "%nestopiapalette%",%corecfg%,OPTIONS,nestopia_palette
return

nestopiaDDLC:
gui,submit,nohide
return

nestopiaDDLD:
gui,submit,nohide
guicontrolget,nestopiafavoredsystem,,COREDDLB
iniwrite, "%nestopiafavoredsystem%",%corecfg%,OPTIONS,nestopia_favored_system
return

nestopiaDDLE:
gui,submit,nohide
guicontrolget,nestopiarampowerstate,,COREDDLB
iniwrite, "%nestopiarampowerstate%",%corecfg%,OPTIONS,nestopia_ram_power_state
return

nestopiaCHKA:
gui,submit,nohide
nestopiablarggntscfilter= disabled
if (CORECHKA = 1)
	{
		nestopiablarggntscfilter= enabled
	}
iniwrite, "%nestopiablarggntscfilter%",%corecfg%,OPTIONS,nestopia_blargg_ntsc_filter
return

nestopiaCHKB:
gui,submit,nohide
nestopianospritelimit= disabled
if (CORECHKB = 1)
	{
		nestopianospritelimit= enabled
	}
iniwrite, "%nestopianospritelimit%",%corecfg%,OPTIONS,nestopia_nospritelimit
return


nestopiaCHKC:
gui,submit,nohide
nestopiafdsautoinsert= enabled
if (CORECHKC = 0)
	{
		nestopiafdsautoinsert= disabled
	}
iniwrite, "%nestopiafdsautoinsert%",%corecfg%,OPTIONS,nestopia_fds_auto_insert
return

nestopiaCHKD:
nestopiaoverscanv= enabled
if (CORECHKD = 0)
	{
		nestopiaoverscanv= disabled
	}
iniwrite, "%nestopiaoverscanv%",%corecfg%,OPTIONS,nestopia_overscan_v
return

nestopiaCHKE:
nestopiaoverscanh= disabled
if (CORECHKE = 1)
	{
		nestopiaoverscanh= enabled
	}
iniwrite, "%nestopiaoverscanh%",%hcorecfg%,OPTIONS,nestopia_overscan_h

return

nestopiaCHKF:
nestopiageniedistortion= disabled
if (CORECHKF = 1)
	{
		nestopiageniedistortion= enabled
	}
iniwrite, "%nestopiageniedistortion%",%hcorecfg%,OPTIONS,nestopia_genie_distortion
return


;};;;;;;;;;;;


;{;;;;; o2em CORE  ;;;;;
o2emDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; parallel CORE  ;;;;;
parallelDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; picodrive CORE  ;;;;;
picodriveDDLA:
guicontrol,,COREDDLTXTB,P1 Joy-Type
guicontrol,,COREDDLTXTC,P2 Joy-Type
guicontrol,,COREDDLTXTD,Region
guicontrol,,COREDDLTXTE,FPS Region
guicontrol,,COREDDLTXTF,Aspect
guicontrol,,COREDDLB,|%picodriveinput1%||none|3 button pad|6 button pad
guicontrol,,COREDDLC,|%picodriveinput2%||none|3 button pad|6 button pad
guicontrol,,COREDDLD,|%picodriveregion%||Auto|Japan NTSC|Japan PAL|US|Europe
guicontrol,,COREDDLE,|%picodriveregionfps%||Auto|NTSC|PAL
guicontrol,,COREDDLF,|%picodriveaspect%||PAR|4/3|CRT
guicontrol,,CORECHKA,Sprite Limit
guicontrol,,CORECHKB,RAM Cart
gosub, HideCoreUI
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
return

picodriveDDLB:
gui,submit,nohide
picodriveinput1= %COREDDLB%
iniwrite, "%picodriveinput1%",%racoreopt%,OPTIONS,picodrive_input1
return

picodriveDDLC:
gui,submit,nohide
picodriveinput2= %COREDDLC%
iniwrite, "%picodriveinput2%",%racoreopt%,OPTIONS,picodrive_input2
return

picodriveDDLD:
gui,submit,nohide
picodriveregion= %COREDDLD%
iniwrite, "%picodriveregion%",%racoreopt%,OPTIONS,picodrive_region
return

picodriveDDLE:
gui,submit,nohide
picodriveregionfps= %COREDDLE%
iniwrite, "%picodriveregionfps%",%racoreopt%,OPTIONS,picodrive_region_fps
return

picodriveDDLF:
gui,submit,nohide
picodriveaspect= %COREDDLF%
iniwrite, "%picodriveaspect%",%racoreopt%,OPTIONS,picodrive_aspect
return

picodriveCHKA:
gui,submit,nohide
picodrivesprlim= disabled
if (CORECHKA = 1)
	{
		picodrivesprlim= enabled
	}
iniwrite, "%picodrivesprlim%",%racoreopt%,OPTIONS,picodrive_sprlim
return

picodriveCHKB:
gui,submit,nohide
picodriveramcart= disabled
if (CORECHKA = 1)
	{
		picodriveramcart= enabled
	}
iniwrite, "%picodrivesramcart%",%racoreopt%,OPTIONS,picodrive_ramcart
return


;};;;;;;;;;;;


;{;;;;; ppsspp CORE  ;;;;;
ppssppDDLA:
guicontrol,,COREDDLTXTB,CPU Speed
guicontrol,,COREDDLB,|%ppsspplockedcpuspeed%||off|222|266|333
guicontrol,,COREDDLC,|%ppsspprenderingmode%||buffered|nonbuffered|cpu|gpu
guicontrol,,COREDDLTXTC,Buffer
guicontrol,,COREDDLD,|%ppsspptextureanisotropicfiltering%||off|1x|2x|4x|8x|16x
guicontrol,,COREDDLTXTD,Anisotropy Lvl
guicontrol,,COREDDLE,|%ppsspptexturescalingtype%||xbrz|hybrid|bicubic|hybrid_bicubic
guicontrol,,COREDDLTXTE,Texture Scale
guicontrol,,COREDDLTXTF,Internal Resolution
guicontrol,,COREDDLTXTG,Output Resolution
guicontrol,,COREDDLTXTH,Language
guicontrol,,COREDDLF,|%ppssppinternalresolution%||480x272|960x544|1440x816|1920x1088|2400x1360|2880x1632|3360x1904|3840x2176|4320x2448|4800x2720
guicontrol,,COREDDLG,|%ppssppoutputresolution%||480x272|960x544|1440x816|1920x1088|2400x1360|2880x1632|3360x1904|3840x2176|4320x2448|4800x2720
guicontrol,,COREDDLH,|%ppsspplanguage%||automatic|english|japanese|french|german|spanish|italian|dutch|portuguese|russian|korean|chinese_traditional|chinese_simplified

guicontrol,,CORECMBA,|%ppsspptexturescalinglevel%||0|1|2|3|4|5
guicontrol,,CORECMBB,|%ppssppframeskip%||0|1|2|3|4|5|6|7|8|9
guicontrol,,CORECMBTXTA,Texture Scaling Lvl
guicontrol,,CORECMBTXTB,Frameskip

guicontrol,,CORESLDA,|%ppssppframeskiplimit%||0|15|30|45|50|60
guicontrol,,CORESLDTXTA,Frameskip limit

guicontrol,,CORECHKA,Auto Frameskip
guicontrol,,CORECHKB,Force Max FPS
guicontrol,,CORECHKC,Fast Memory
guicontrol,,CORECHKD,Rounding
guicontrol,,CORECHKE,GPU Block Transfer
guicontrol,,CORECHKF,IO Threading
guicontrol,,CORECHKG,Prescale UV
guicontrol,,CORECHKH,Input Hack
guicontrol,,CORECHKI,Deposterize

GuiControl,,CORERADA,JIT
GuiControl,,CORERADB,Interpreter
guicontrol,,CORERADC,Audio Latency 1
guicontrol,,CORERADD,Audio Latency 2
guicontrol,,CORERADE,Audio Latency 3
guicontrol,,CORERADG,GPU T-L On
guicontrol,,CORERADH,GPU T-L Off
guicontrol,,CORERADO,Vert Cache On
guicontrol,,CORERADP,Vert Cache Off
guicontrol,,CORERADM,Unsafe Functons ON
guicontrol,,CORERADN,Unsafe Functons OFF
guicontrol,,CORERADQ,Snd hack On
guicontrol,,CORERADR,Snd hack Off
guicontrol,,CORERADI,[X] Confirm
guicontrol,,CORERADJ,[O] Confirm

gosub, HideCoreUI

GuiControl,show,COREDDLB
GuiControl,show,COREDDLTXTB
GuiControl,show,COREDDLC
GuiControl,show,COREDDLTXTC
GuiControl,show,COREDDLD
GuiControl,show,COREDDLTXTD
GuiControl,show,COREDDLE
GuiControl,show,COREDDLTXTE
GuiControl,show,COREDDLF
GuiControl,show,COREDDLTXTF
GuiControl,show,COREDDLG
GuiControl,show,COREDDLTXTG
GuiControl,show,COREDDLH
GuiControl,show,COREDDLTXTH

GuiControl,show,CORECHKA
GuiControl,show,CORECHKB
GuiControl,show,CORECHKC
GuiControl,show,CORECHKD
GuiControl,show,CORECHKE
GuiControl,show,CORECHKF
GuiControl,show,CORECHKG
GuiControl,show,CORECHKH
GuiControl,show,CORECHKI

GuiControl,show,CORERADA
GuiControl,show,CORERADB
GuiControl,show,CORERADC
GuiControl,show,CORERADD
GuiControl,show,CORERADE
GuiControl,show,CORERADG
GuiControl,show,CORERADH
GuiControl,show,CORERADI
GuiControl,show,CORERADJ
GuiControl,show,CORERADM
GuiControl,show,CORERADN
GuiControl,show,CORERADO
GuiControl,show,CORERADP
GuiControl,show,CORERADQ
GuiControl,show,CORERADR

guicontrol,show,CORESLDA
guicontrol,show,CORESLDTXTA

guicontrol,show,CORECMBTXTA
guicontrol,show,CORECMBA
guicontrol,show,CORECMBTXTB
guicontrol,show,CORECMBB

guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
if (ppsspplockedcpuspeed= "interpreter")
	{
guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
	}
guicontrol,,CORERADC,1	
guicontrol,,CORERADD,0	
guicontrol,,CORERADE,0	
if (ppssppaudiolatency= 1)
	{
guicontrol,,CORERADC,0
guicontrol,,CORERADD,1	
guicontrol,,CORERADE,0	
	}
if (ppssppaudiolatency= 2)
	{
guicontrol,,CORERADC,0
guicontrol,,CORERADD,0
guicontrol,,CORERADE,1	
	}
guicontrol,,CORERADI,1
guicontrol,,CORERADJ,0
if (ppssppbuttonpreference = "circle")
	{
		guicontrol,,CORERADI,0
		guicontrol,,CORERADJ,1
	}
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
if (ppsspphardwaretransform = "disabled")
	{
		guicontrol,,CORERADG,0
		guicontrol,,CORERADH,1
	}
guicontrol,,CORERADO,0
guicontrol,,CORERADP,1
if (ppssppvertexcache = "enabled")
	{
		guicontrol,,CORERADO,1
		guicontrol,,CORERADP,0
	}
guicontrol,,CORERADQ,0
guicontrol,,CORERADR,1
if (soundspeedhack = "enabled")
	{
		guicontrol,,CORERADQ,1
		guicontrol,,CORERADR,0
	}
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
if (ppssppunsafefuncreplacements= "enabled")
	{
		guicontrol,,CORERADS,1
		guicontrol,,CORERADT,0
	}
	
	guicontrol,,CORECHKA,0
if (ppssppautoframeskip = "enabled")
	{
		guicontrol,,CORECHKA,1
	}
	guicontrol,,CORECHKB,0
if (ppssppforcemaxfps = "enabled")
	{
		guicontrol,,CORECHKB,1
	}
	guicontrol,,CORECHKC,1
if (ppssppfastmemory = "disabled")
	{
		guicontrol,,CORECHKC,1
	}
	guicontrol,,CORECHKD,0
if ppssppsetroundingmode = "enabled")
	{
		guicontrol,,CORECHKD,1
	}
	guicontrol,,CORECHKE,0
if (ppssppblocktransfergpu = "enabled")
	{
		guicontrol,,CORECHKE,1
	}
	guicontrol,,CORECHKF,0
if (ppssppseparateiothread = "enabled")
	{
		guicontrol,,CORECHKF,1
	}
	guicontrol,,CORECHKG,0
if (ppssppprescaleuv = "enabled")
	{
		guicontrol,,CORECHKG,1
	}
	guicontrol,,CORECHKH,0
if (ppssppthreadedinput = "enabled")
	{
		guicontrol,,CORECHKH,1
	}
	guicontrol,,CORECHKI,0
if (ppsspptexturedeposterize = "enabled")
	{
		guicontrol,,CORECHKI,1
	}
return

ppssppDDLB:
gui,submit,nohide
ppssppcpucore= %COREDDLB%
iniwrite, "%ppssppcpucore%",%racoreopt%,OPTIONS,ppsspp_cpu_core	
return

ppssppDDLC:
gui,submit,nohide
ppsspprenderingmode= %COREDDLC%
iniwrite, "%ppsspprenderingmode%",%racoreopt%,OPTIONS,ppsspp_rendering_mode
return

ppssppDDLD:
gui,submit,nohide
ppsspptextureanisotropicfiltering= %COREDDLD%
iniwrite, "%ppsspptextureanisotropicfiltering%",%racoreopt%,OPTIONS,ppsspp_texture_anisotropic_filtering
return

ppssppDDLE:
gui,submit,nohide
ppsspptexturescalingtype= %COREDDLE%
iniwrite, "%ppsspptexturescalingtype%",%racoreopt%,OPTIONS,ppsspp_textures_caling_type
return

ppssppDDLF:
gui,submit,nohide
ppssppinternalresolution= %COREDDLF%
iniwrite, "%ppssppinternalresolution%",%racoreopt%,OPTIONS,ppsspp_internal_resolution
return

ppssppDDLG:
gui,submit,nohide
ppssppoutputresolution= %COREDDLG%
iniwrite, "%ppssppoutputresolution%",%racoreopt%,OPTIONS,ppsspp_output_resolution
return

ppssppDDLH:
gui,submit,nohide
ppsspplanguage= %COREDDLH%
iniwrite, "%ppsspplanguage%",%racoreopt%,OPTIONS,ppsspp_language
return


ppssppCMBA:
gui,submit,nohide
ppsspptexturescalinglevel= %CORECMBA%
iniwrite, "%ppsspptexturescalinglevel%",%racoreopt%,OPTIONS,ppsspp_texture_scaling_level
return

ppssppCMBB:
gui,submit,nohide
ppssppframeskip= %CORECMBB%
iniwrite, "%ppssppframeskip%",%racoreopt%,OPTIONS,ppsspp_frameskip
return

ppssppRadA:
gui,submit,nohide
ppsspplockedcpuspeed= jit
iniwrite, "%ppsspplockedcpuspeed%",%racoreopt%,OPTIONS,ppsspp_locked_cpu_speed	
return
ppssppRadB:
gui,submit,nohide
ppsspplockedcpuspeed= interpreter
iniwrite, "%ppsspplockedcpuspeed%",%racoreopt%,OPTIONS,ppsspp_locked_cpu_speed	
return
ppssppRadC:
gui,submit,nohide
ppssppaudiolatency= 0
iniwrite, "%ppssppaudiolatency%",%racoreopt%,OPTIONS,ppsspp_audio_latency
return
ppssppRadD:
gui,submit,nohide
ppssppaudiolatency= 1
iniwrite, "%ppssppaudiolatency%",%racoreopt%,OPTIONS,ppsspp_audio_latency
return
ppssppRadE:
gui,submit,nohide
ppssppaudiolatency= 2
iniwrite, "%ppssppaudiolatency%",%racoreopt%,OPTIONS,ppsspp_audio_latency
return
ppssppRadG:
gui,submit,nohide
ppsspphardwaretransform= enabled
iniwrite, "%ppsspphardwaretransform%",%racoreopt%,OPTIONS,ppsspp_gpu_hardware_transform
return
ppssppRadH:
gui,submit,nohide
ppsspphardwaretransform= disabled
iniwrite, "%ppsspphardwaretransform%",%racoreopt%,OPTIONS,ppsspp_gpu_hardware_transform
return
ppssppRadI:
gui,submit,nohide
ppssppbuttonpreference= cross
iniwrite, "%ppssppbuttonpreference%",%racoreopt%,OPTIONS,ppsspp_button_preference
return
ppssppRadJ:
gui,submit,nohide
ppssppbuttonpreference= circle
iniwrite, "%ppssppbuttonpreference%",%racoreopt%,OPTIONS,ppsspp_button_preference
return
ppssppRadM:
gui,submit,nohide
ppssppunsafefuncreplacements= enabled
iniwrite, "%ppssppunsafefuncreplacements%",%racoreopt%,OPTIONS,ppsspp_unsafe_func_replacements
return
ppssppRadN:
gui,submit,nohide
ppssppunsafefuncreplacements= disabled
iniwrite, "%ppssppunsafefuncreplacements%",%racoreopt%,OPTIONS,ppsspp_unsafe_func_replacements
return
ppssppRadO:
gui,submit,nohide
ppssppvertexcache= enabled
iniwrite, "%ppssppvertexcache%",%racoreopt%,OPTIONS,ppsspp_vertex_cache
return
ppssppRadP:
gui,submit,nohide
ppssppvertexcache= disabled
iniwrite, "%ppssppvertexcache%",%racoreopt%,OPTIONS,ppsspp_vertex_cache
return
ppssppRadQ:
gui,submit,nohide
ppssppsoundspeedhack= enabled
iniwrite, "%ppssppsoundspeedhack%",%racoreopt%,OPTIONS,ppsspp_sound_speedhack
return
ppssppRadR:
gui,submit,nohide
ppssppsoundspeedhack= disabled
iniwrite, "%ppssppsoundspeedhack%",%racoreopt%,OPTIONS,ppsspp_sound_speedhack
return

ppssppCHKA:
gui,submit,nohide
ppssppautoframeskip= disabled
if (CORECHKA = 1)
{
	ppssppautoframeskip= enabled
}
iniwrite, "%ppssppautoframeskip%",%racoreopt%,OPTIONS,ppsspp_auto_frameskip
return
ppssppCHKB:
gui,submit,nohide
ppssppforcemaxfps= disabled
if (CORECHKB = 1)
{
	ppssppforcemaxfps= enabled
}
iniwrite, "%ppssppforcemaxfps%",%racoreopt%,OPTIONS,ppsspp_force_max_fps
return
ppssppCHKC:
gui,submit,nohide
ppssppfastmemory= enabled
if (CORECHKC = 0)
{
	ppssppppssppfastmemory= disabled 
}
iniwrite, "%ppssppfastmemory%",%racoreopt%,OPTIONS,ppsspp_fast_memory
return
ppssppCHKD:
gui,submit,nohide
ppssppsetroundingmode= enabled
if (CORECHKD = 0)
{
	ppssppppssppsetroundingmode= disabled
}
iniwrite, "%ppssppsetroundingmode%",%racoreopt%,OPTIONS,ppsspp_set_rounding_mode
return
ppssppCHKE:
gui,submit,nohide
ppssppblocktransfergpu= enabled
if (CORECHKE = 0)
{
	ppssppblocktransfergpu= disabled
}
iniwrite, "%ppssppblocktransfergpu%",%racoreopt%,OPTIONS,ppsspp_block_transfer_gpu
return
ppssppCHKF:
gui,submit,nohide
ppssppseparateiothread= disabled
if (CORECHKF = 1)
{
	ppssppseparateiothread= enabled
}
iniwrite, "%ppssppseparateiothread%",%racoreopt%,OPTIONS,ppsspp_separate_io_thread
return
ppssppCHKG:
gui,submit,nohide
ppssppprescaleuv= disabled
if (CORECHKG = 1)
{
	ppssppprescaleuv= enabled
}
iniwrite, "%ppssppprescaleuv%",%racoreopt%,OPTIONS,ppsspp_prescale_uv
return
ppssppCHKH:
gui,submit,nohide
ppssppthreadedinput= disabled
if (CORECHKH = 1)
{
	ppssppthreadedinput= enabled
}
iniwrite, "%ppssppthreadedinput%",%racoreopt%,OPTIONS,ppsspp_threaded_input
return
ppssppCHKI:
gui,submit,nohide
ppsspptexturedeposterize= disabled
if (CORECHKI = 1)
{
	ppsspptexturedeposterize= enabled
}
iniwrite, "%ppsspptexturedeposterize%",%racoreopt%,OPTIONS,ppsspp_texture_deposterize
return

ppssppSLDA:
gui,submit,nohide
ppssppframeratelimit= %CORESLDA%
iniwrite, "%ppssppframeratelimit%",%racoreopt%,OPTIONS,ppsspp_framerate_limit
return
;};;;;;;;;;;;


;{;;;;; prboom CORE  ;;;;;
prboomDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; prosystem CORE  ;;;;;
prosystemDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; puae CORE  ;;;;;
puaeDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; quicknes CORE  ;;;;;
quicknesDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; reicast CORE  ;;;;;
reicastDDLA:
guicontrol,,CORERADA,dynamic-recompiler
guicontrol,,CORERADB,generic-recompiler
guicontrol,,CORECMBA,|%reicastaudiobuffersize%||1024|2048
guicontrol,,CORECMBTXTA,Audiobuffer
guicontrol,,CORECHKA,Boot to BIOS
guicontrol,,CORECHKB,Mipmapping
guicontrol,,CORECHKC,Widescreen
guicontrol,,CORECHKF,Volume Mod
guicontrol,,CORECHKE,Render to Texture
guicontrol,,CORECHKD,Precompiled Shader
guicontrol,,CORECHKG,PuruPuru Pack
guicontrol,,COREDDLTXTB,Internal Resolution
guicontrol,,COREDDLTXTD,Broadcast
guicontrol,,COREDDLTXTC,Cable Type
guicontrol,,COREDDLTXTE,Region
guicontrol,,COREDDLTXTF,Framerate
guicontrol,,COREDDLB,|%reicastinternalresolution%||640x480|1280x960|1920x1440|2560x1920|3200x2400|3840x2880|4480x3360
guicontrol,,COREDDLC,|%reicastcabletype%||V (VBS/Y+S/C)|TV (RGB)|VGA (RGB)
guicontrol,,COREDDLD,|%reicastbroadcast%||0|1|2|3|4
guicontrol,,COREDDLE,|%reicastregion%||0|1|2|3
guicontrol,,COREDDLF,|%reicastframerate%||normal|fullspeed

guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
if (reicastcpumode= "enabled")
	{
		guicontrol,,CORERADA,0
		guicontrol,,CORERADB,1
	}
guicontrol,,CORECHKA,0
if (reicastboottobios= "enabled")
	{
		guicontrol,,CORECHKA,1
	}
guicontrol,,CORECHKB,1
if (reicastmipmapping= "disabled")
	{
		guicontrol,,CORECHKB,0
	}
guicontrol,,CORECHKC,1
if (reicastwidescreenhack= "disabled")
	{
		guicontrol,,CORECHKC,0
	}
guicontrol,,CORECHKF,0
if (reicastvolumemodifiermode= "enabled")
	{
		guicontrol,,CORECHKF,1
	}
guicontrol,,CORECHKE,1
if (reicastrendertotexture= "disabled")
	{
guicontrol,,CORECHKE,0
	}
	guicontrol,,CORECHKD,1
if (reicastprecompileshaders= "disabled")
	{
			guicontrol,,CORECHKD,0
	}
guicontrol,,CORECHKG,1
if (reicastnablepurupuru= "disabled")
	{
		guicontrol,,CORECHKG,0
	}
gosub, HideCoreUI
guicontrol,,CORE,0
guicontrol,show,CORECMBA
guicontrol,show,CORECMBTXTA
guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLTXTE
guicontrol,show,COREDDLTXTF
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,COREDDLD
guicontrol,show,COREDDLE
guicontrol,show,COREDDLF
return
reicastDDLB:
gui,submit,nohide
reicastinternalresolution= %COREDDLB%
iniwrite, "%reicastinternalresolution%",%racoreopt%,OPTIONS,reicast_internal_resolution
return

reicastRADA:
gui,submit,nohide
reicastaudiobuffersize= %CORERADA%
iniwrite, "%reicastaudiobuffersize%",%racoreopt%,OPTIONS,reicast_audio_buffer_size
return

reicastRADB:
gui,submit,nohide
reicastaudiobuffersize= %CORERADB%
iniwrite, "%reicastaudiobuffersize%",%racoreopt%,OPTIONS,reicast_audio_buffer_size
return

reicastDDLC:
gui,submit,nohide
reicastcabletype= %COREDDLC%
return

reicastDDLD:
gui,submit,nohide
reicastbroadcast= %COREDDLD%
return

reicastDDLF:
gui,submit,nohide
reicastframerate= %COREDDLF%
return

reicastDDLE:
gui,submit,nohide
reicastregion= %COREDDLE%
return

reicastCHKA:
gui,submit,nohide
reicastboottobios= disabled
if (CORECHKA = 1)
	{
		reicastboottobios= enabled
	}
iniwrite, "%reicastboottobios%",%racoreopt%,OPTIONS,reicast_boot_to_bios
return

reicastCHKB:
gui,submit,nohide
reicastmipmapping= enabled
if (CORECHKB = 0)
	{
		reicastmipmapping= disabled
	}
iniwrite, "%reicastmipmapping%",%racoreopt%,OPTIONS,reicast_mipmapping
return

reicastCHKC:
gui,submit,nohide
reicastwidescreenhack= disabled
if (CORECHKC = 1)
	{
		reicast= enabled
	}
iniwrite, "%reicastwidescreenhack%",%racoreopt%,OPTIONS,reicast_widescreen_hack
return

reicastCHKF:
gui,submit,nohide
reicastvolumemodifiermode= disabled
if (CORECHKF = 1)
	{
		reicastvolumemodifiermode= enabled
	}
iniwrite, "%reicastvolumemodifiermode%",%racoreopt%,OPTIONS,reicast_volume_modifier_mode
return

reicastCHKE:
gui,submit,nohide
reicastrendertotexture= enabled
if (CORECHKE = 0)
	{
		reicastrendertotexture= disabled
	}
iniwrite, "%reicastrendertotexture%",%racoreopt%,OPTIONS,reicast_render_to_texture
return

reicastCHKD:
gui,submit,nohide
reicastprecompileshaders= disabled
if (CORECHKD = 1)
	{
		reicastprecompileshaders= enabled
	}
iniwrite, "%reicastprecompileshaders%",%racoreopt%,OPTIONS,reicast_precompile_shaders
return

reicastCHKG:
gui,submit,nohide
reicastenablepurupuru= disabled
if (CORECHKG = 0)
	{
		reicastreicastenablepurupuru= disabled
	}
iniwrite, "%reicastenablepurupuru%",%racoreopt%,OPTIONS,reicast_enable_purupuru
return

reicastCMBA:
iniwrite, "%reicastaudiobuffersize%",%racoreopt%,OPTIONS,reicast_audio_buffer_size
return

;};;;;;;;;;;;


;{;;;;; scummvm CORE  ;;;;;
scummvmDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; snes9x CORE  ;;;;;
snes9x2002DDLA:
snes9x2005_plusDDLA:
snes9x2005DDLA:
snes9x2010DDLA:
snes9xDDLA:
snes9x_nextDDLA:
stringright,sncc,ccv,6
ccv= %sncc%
guicontrol,,COREDDLTXTB,GFX Layer
guicontrol,,COREDDLTXTC,Sound Channels
guicontrol,,CORECHKA,Enable
guicontrol,,COREDDLB,|layer_1||layer_2|layer_3|layer_4|layer_5
guicontrol,,CORECHKB,Enable
guicontrol,,COREDDLC,|sndchan_1||sndchan_2|sndchan_3|sndchan_4|sndchan_5|sndchan_6|sndchan_7|sndchan_8
guicontrol,,CORECHKD,Clip GFX
guicontrol,,CORECHKE,GFX Transparency
guicontrol,,CORERADA,S-FX Overclock ON
guicontrol,,CORERADB,S-FX Overclock OFF

gosub, HideCoreUI

guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLB
guicontrol,show,COREDDLC
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORERADA
guicontrol,show,CORERADB

if (snes9xlayer1 = "Yes")
{
guicontrol,,CORECHKA,1
}
if (snes9xsndchan1 = "Yes")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORERADA,0	
guicontrol,,CORERADB,1
if (snes9xoverclock = "enabled")
{
guicontrol,,CORERADA,1	
guicontrol,,CORERADB,0
}
guicontrol,,CORECHKD,1
if (snes9xgfxclip = "No")
{
guicontrol,,CORECHKD,0
}
guicontrol,,CORECHKE,1
if (snes9xgfxtransp = "No")
{
guicontrol,,CORECHKE,0
}
return

snes9xDDLB:
gui,submit,NoHide
stringsplit,sncon,COREDDLB,_
snes9x%sncon1%%sncon2%%COREDDLB%= Yes
snslyr= Yes
if (CORECHKA = 1)
{
snes9x%sncon1%%sncon2%%COREDDLB%= No
snslyr= No
}
iniwrite, "%snslyr%",%racoreopt%,OPTIONS,snes9x_%COREDDLB%
return

snes9xDDLC:
gui,submit,NoHide
snes9x%sncon1%%sncon2%%COREDDLB%= Yes
snssnd= Yes
if (CORECHKB = 1)
{
snes9x%sncon1%%sncon2%%COREDDLC%= No
snssnd= No
}
return

snes9xCHKA:
gui,submit,NoHide
iniwrite, "%snslyr%",%racoreopt%,OPTIONS,snes9x_%COREDDLB%
return

snes9xCHKB:
gui,submit,NoHide
iniwrite, "%snssnd%",%racoreopt%,OPTIONS,snes9x_%COREDDLC%
return

snes9xCHKD:
gui,submit,NoHide
snes9xgfxclip= Yes
if (CORECHKD = 0)
{
snes9xgfxclip= Yes
}
iniwrite, "%snes9xgfxclip%",%racoreopt%,OPTIONS,snes9x_gfx_clip
return

snes9xCHKE:
gui,submit,NoHide
snes9xgfxtransp= Yes
if (CORECHKE = 0)
{
snes9xgfxtransp= Yes
}
iniwrite, "%snes9xgfxtransp%",%racoreopt%,OPTIONS,snes9x_gfx_transp
return

snes9xRADA:
gui,submit,NoHide
snes9xoverclock= disabled
iniwrite, "%snes9xoverclock%",%racoreopt%,OPTIONS,snes9x_overclock
iniwrite, "%snes9xoverclock%",%racoreopt%,OPTIONS,snes9x_next_overclock
return

snes9xRADB:
gui,submit,NoHide
snes9xoverclock= enabled
iniwrite, "%snes9xoverclock%",%racoreopt%,OPTIONS,snes9x_overclock
return

;};;;;;;;;;;;


;{;;;;; stella CORE  ;;;;;
stellaDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; tgbdual CORE  ;;;;;
tgbdualDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; ume2014 CORE  ;;;;;
ume2014DDLA:
guicontrol,,CORECHK,0
if (ume2014= "enabled")
{
guicontrol,,CORECHK,1
}
guicontrol,,CORECHKA,0
if (ume2014readconfig= "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (ume2014writecofig= "enabled")
{
guicontrol,,CORECHKB,1
}
guicontrol,,CORECHKC,0
if (ume2014autosave= "enabled")
{
guicontrol,,CORECHKC,1
}
guicontrol,,CORECHKD,0
if (ume2014hideagscreen= "enabled")
{
guicontrol,,CORECHKD,1
}
guicontrol,,CORECHKE,0
if (ume2014hidewarnings= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (ume2014hidegameinfo= "enabled")
{
guicontrol,,CORECHKE,1
}
guicontrol,,CORECHKF,0
if (ume2014throttle= "enabled")
{
guicontrol,,CORECHKF,1
}
guicontrol,,CORECHKG,0
if (ume2014alternaterenderer= "enabled")
{
guicontrol,,CORECHKG,1
}
guicontrol,,CORECHKH,1
if (ume2014softlistsenable= "disabled")
{
guicontrol,,CORECHKH,0
}
guicontrol,,CORECHKI,0
if (ume2014cheatsenable= "enabled")
{
guicontrol,,CORECHK,1
}


guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
if (ume2014mouseenable= "enabled")
{
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
}

guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
if (ume2014bootfromcli= "enabled")
{
guicontrol,,CORERADG,0
guicontrol,,CORERADH,1
}


guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
if (ume2014boottobios= "enabled")
{
guicontrol,,CORERADQ,0
guicontrol,,CORERADR,1
}


guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
if (ume2014boottoosd= "enabled")
{
guicontrol,,CORERADU,0
guicontrol,,CORERADV,1
}


guicontrol,,CORECHKA,Read Config
guicontrol,,CORECHKB,Write Config
guicontrol,,COREDDLTXTB,Save Type
guicontrol,,COREDDLTXTC,Media Type
guicontrol,,COREDDLB,|%ume2014saves%||game|system
guicontrol,,COREDDLC,|%ume2014mediatype%||rom|cart|flop|cdrom|cass|hard|serl|prin
guicontrol,,CORECHKC,auto-save
guicontrol,,CORECHKD,NO-Nag
guicontrol,,CORECHKE,NO-Warnings
guicontrol,,CORECHKF,Throttle
guicontrol,,CORECHKG,NO-Game Info
guicontrol,,COREDDLTXTD,Alt-Renderer
guicontrol,,COREDDLD,|%ume2014alternaterenderer%||disabled|enabled
guicontrol,,CORECHKH,Softlists
guicontrol,,COREDDLI,|%ume2014softlistsautomedia%||enabled|disabled
guicontrol,,COREDDLTXTI,Softlist Automedia
guicontrol,,CORECHKI,Cheats

guicontrol,,CORERADA,Mouse On
guicontrol,,CORERADB,Mouse Off

guicontrol,,CORERADG,GUI Boot
guicontrol,,CORERADH,CLI Boot

guicontrol,,CORERADQ,Skip BIOS
guicontrol,,CORERADR,BIOS Boot

guicontrol,,CORERADU,OSD Off
guicontrol,,CORERADV,OSD Boot

gosub, HideCoreUI

guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,show,CORECHKC
guicontrol,show,CORECHKD
guicontrol,show,CORECHKE
guicontrol,show,CORECHKF
guicontrol,show,CORECHKG
guicontrol,show,CORECHKH
guicontrol,show,CORECHKI
guicontrol,show,CORERADA
guicontrol,show,CORERADB
guicontrol,show,CORERADG
guicontrol,show,CORERADH
guicontrol,show,CORERADQ
guicontrol,show,CORERADR
guicontrol,show,CORERADU
guicontrol,show,CORERADV
guicontrol,show,CORERADB
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,COREDDLD
guicontrol,show,COREDDLTXTD
guicontrol,show,COREDDLC
guicontrol,show,COREDDLTXTC
guicontrol,show,COREDDLI
guicontrol,show,COREDDLTXTI
return

ume2014DDLB:
gui,submit,nohide
ume2014saves= %COREDDLB%
iniwrite, "%ume2014saves%",%racoreopt%,OPTIONS,ume2014_saves
return

ume2014DDLC:
gui,submit,nohide
ume2014mediatype= %COREDDLC%
iniwrite, "%ume2014mediatype%",%racoreopt%,OPTIONS,ume2014_media_type
return

ume2014DDLD:
gui,submit,nohide
ume2014alternaterenderer= %COREDDLD%
iniwrite, "%ume2014alternaterenderer%",%racoreopt%,OPTIONS,ume2014_alternate_renderer
return

ume2014DDLI:
gui,submit,nohide
ume2014softlistsautomedia= %COREDDLI%
iniwrite, "%ume2014softlistsautomedia%",%racoreopt%,OPTIONS,ume2014_softlists_auto_media
return

ume2014CHKA:
gui,submit,nohide
ume2014readconfig= disabled
if (CORECHKA = 1)
{
ume2014readconfig= enabled
}
iniwrite, "%ume2014readconfig%",%racoreopt%,OPTIONS,ume2014_read_config
return

ume2014CHKB:
gui,submit,nohide
ume2014writeconfig= disabled
if (CORECHKB = 1)
{
ume2014writeconfig= enabled
}
iniwrite, "%ume2014writeconfig%",%racoreopt%,OPTIONS,ume2014_write_config
return

ume2014CHKC:
gui,submit,nohide
ume2014autosave= disabled
if (CORECHKC = 1)
{
ume2014autosave= enabled
}
iniwrite, "%ume2014autosave%",%racoreopt%,OPTIONS,ume2014_auto_save
return

ume2014CHKD:
gui,submit,nohide
ume2014hidenagscreen= disabled
if (CORECHKD = 1)
{
ume2014hidenagscreen= enabled
}
iniwrite, "%ume2014hidenagscreen%",%racoreopt%,OPTIONS,ume2014_hide_nagscreen
return

ume2014CHKE:
gui,submit,nohide
ume2014hidewarnings= disabled
if (CORECHKE = 1)
{
ume2014hidewarnings= enabled
}
iniwrite, "%ume2014hidewarnings%",%racoreopt%,OPTIONS,ume2014_hide_warnings
return

ume2014CHKF:
gui,submit,nohide
ume2014throttle= disabled
if (CORECHKF = 1)
{
ume2014throttle= enabled
}
iniwrite, "%ume2014throttle%",%racoreopt%,OPTIONS,ume2014_throttle
return

ume2014CHKG:
gui,submit,nohide
ume2014hidegameinfo= disabled
if (CORECHKG = 1)
{
ume2014hidegameinfo= enabled
}
iniwrite, "%ume2014hidegameinfo%",%racoreopt%,OPTIONS,ume2014_hide_gameinfo
return

ume2014CHKH:
gui,submit,nohide
ume2014softlistsenable= enabled
if (CORECHKH = 0)
{
ume2014softlistsenable= disabled
}
iniwrite, "%ume2014softlistsenable%",%racoreopt%,OPTIONS,ume2014_softlists_enable
return

ume2014CHKI:
gui,submit,nohide
ume2014cheatsenable= disabled
if (CORECHKI = 1)
{
ume2014cheatsenable= enabled
}
iniwrite, "%ume2014cheatsenable%",%racoreopt%,OPTIONS,ume2014_cheats_enable
return

ume2014RADA:
ume2014mouseenable= enabled
iniwrite, "%ume2014mouseenable%",%racoreopt%,OPTIONS,ume2014_mouse_enable
return
ume2014RADB:
ume2014mouseenable= disabled
iniwrite, "%ume2014mouseenable%",%racoreopt%,OPTIONS,ume2014_mouse_enable
return

ume2014RADG:
ume2014boottobios= disabled
iniwrite, "%ume2014boottobios%",%racoreopt%,OPTIONS,ume2014_boot_to_bios
return
ume2014RADH:
ume2014boottobios= enabled
iniwrite, "%ume2014boottobios%",%racoreopt%,OPTIONS,ume2014_boot_to_bios
return

ume2014RADQ:
ume2014bootfromcli= disabled
iniwrite, "%ume2014boottobios%",%racoreopt%,OPTIONS,ume2014_boot_from_cli
return
ume2014RADR:
ume2014boottobios= enabled
iniwrite, "%ume2014boottobios%",%racoreopt%,OPTIONS,ume2014_boot_from_cli
return

ume2014RADU:
ume2014boottoosd= disabled
iniwrite, "%ume2014boottobios%",%racoreopt%,OPTIONS,ume2014_boot_to_osd
return
ume2014RADV:
ume2014boottoosd= enabled
iniwrite, "%ume2014boottobios%",%racoreopt%,OPTIONS,ume2014_boot_to_osd
return

;};;;;;;;;;;;


;{;;;;; vbam CORE  ;;;;;
vbamDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; vba_next CORE  ;;;;;
vba_nextDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; vecx CORE  ;;;;;
vecxDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; virtualjaguar CORE  ;;;;;
virtualjaguarDDLA:
gosub, HideCoreUI
return
;};;;;;;;;;;;


;{;;;;; yabause CORE  ;;;;;
yabauseDDLA:
guicontrol,,COREDDLTXTB,Memory Cart
guicontrol,,COREDDLB,|%yabauseaddoncart%||none|1M_ram|4M_ram
guicontrol,,CORECHKA,Frameskip
guicontrol,,CORECHKB,Force HLE BIOS
gosub, HideCoreUI
guicontrol,show,COREDDLB
guicontrol,show,COREDDLTXTB
guicontrol,show,CORECHKA
guicontrol,show,CORECHKB
guicontrol,,CORECHKA,0
if (yabauseframeskip = "enabled")
{
guicontrol,,CORECHKA,1
}
guicontrol,,CORECHKB,0
if (yabauseforcehlebios = "enabled")
{
guicontrol,,CORECHKB,1
}
return

yabauseDDLB:
gui,submit,nohide
yabauseaddoncart= %COREDDLB%
iniwrite, "%COREDDLB%",%racoreopt%,OPTIONS,yabause_addon_cart
return

yabauseCHKA:
gui,submit,nohide
yabauseframeskip= disabled
if (CORECHKA = 1)
{
yabauseframeskip= enabled
}
iniwrite, "%yabauseframeskip%",%racoreopt%,OPTIONS,yabause_frameskip
return

yabauseCHKB:
gui,submit,nohide
yabauseforcehlebios= disabled
if (CORECHKB = 1)
{
yabauseforcehlebios= enabled
}
iniwrite, "%yabauseforcehlebios%",%racoreopt%,OPTIONS,yabause_force_hle_bios
return

;};;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;    NETPLAY FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;  NETPLAY-SWITCHES  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ClientSwitch:
SelectedRow= 
HOSTINGUSERS= 
IPADR= 
LOBTYP= 
netplayRemotePort= 
HOSTINGROMS= 
syslk= 
corever= 
HOSTINGCRCS= 
guicontrolget,NETPLIST,,NETPLIST
guicontrol,show,NETROM
guicontrol,show,AUTOCORE
guicontrol,show,FORCEROM
guicontrol,show,SRCHARCORG
guicontrol,show,AUTSYS
;;guicontrol,show,RETROM
if (NETPLIST = 1)
	{
		guicontrolget,NETCOREASSETS,,NETCOREASSETS
		guicontrol,,NETCOREASSETS,|%NETCOREASSETS%||History|%plistfiles%
	}
guicontrol,show,NETCONNECT
guicontrol,enable,NETCORE
guicontrol,enable,NETHOSTLIST
guicontrol,hide,INETHOST
guicontrol,show,ROOMFILTER
guicontrol,hide,ALSLV
guicontrol,hide,SLVONLY
guicontrol,hide,PRVTSV
guicontrol,show,IPA
guicontrol,show,IPB
guicontrol,show,IPC
guicontrol,show,IPD
guicontrol,show,CPORTNUM
guicontrol,show,NETCROM
guicontrol,hide,IPORTNUM
guicontrol,hide,NOSTATE
guicontrol,hide,CHECKFRAMES
guicontrol,hide,CHKFTXT
guicontrol,hide,CHKFRSLD
guicontrol,hide,MINLAT
guicontrol,hide,MINLATTXT
guicontrol,hide,MINLATSLD
guicontrol,hide,LATRNG
guicontrol,hide,LATRNGTXT
guicontrol,hide,LATRNGSLD
guicontrol,hide,NETHROM
guicontrol,hide,HOSTBUTTON
guicontrol,show,PSTIP
guicontrol,hide,HOSTIP
guicontrol,hide,FSRVTXT
guicontrol,hide,FILESERV
guicontrol,hide,SERVPORT
guicontrol,hide,GETIP
guicontrol,hide,GETLAN
guicontrol,hide,NETIPRAD
guicontrol,hide,LANIPRAD
guicontrol,hide,NETPW
guicontrol,show,NETSPECPW
guicontrolget,NETDWNL,,NETDWNL
guicontrolget,NETCOREASSETS,,NETCOREASSETS
guicontrolget,NETROMLIST,,NETROMLIST
guicontrolget,coreselv,,NETCORE
return

HostSwitch:
SelectedRow= 
HOSTINGUSERS= 
IPADR= 
LOBTYP= 
netplayRemotePort= 
HOSTINGROMS= 
syslk= 
corever= 
HOSTINGCRCS= 
guicontrolget,NETPLIST,,NETPLIST
guicontrol,hide,NETROM
guicontrol,hide,AUTOCORE
guicontrol,hide,ROOMFILTER
guicontrol,hide,FORCEROM
guicontrol,hide,SRCHARCORG
guicontrol,hide,AUTSYS
guicontrol,hide,RETROM
guicontrol,,NETHINFO
guicontrol,,ARCDET
if (NETPLIST = 1)
	{
		guicontrol,,NETCOREASSETS,|All_Playlists||%plistfiles%
	}
guicontrol,hide,NETCONNECT


guicontrol,enable,NETCORE
guicontrol,disable,NETHOSTLIST
guicontrol,show,INETHOST
guicontrol,show,ALSLV
guicontrol,show,SLVONLY
guicontrol,show,PRVTSV
guicontrol,hide,IPA
guicontrol,hide,IPB
guicontrol,hide,IPC
guicontrol,hide,IPD
guicontrol,hide,NETCROM
guicontrol,show,IPORTNUM
guicontrol,hide,CPORTNUM
guicontrol,show,NOSTATE
guicontrol,show,CHECKFRAMES
guicontrol,show,CHKFTXT
guicontrol,show,CHKFRSLD
guicontrol,show,MINLAT
guicontrol,show,MINLATTXT
guicontrol,show,MINLATSLD
guicontrol,show,LATRNG
guicontrol,show,LATRNGTXT
guicontrol,show,LATRNGSLD
guicontrol,show,NETHROM
guicontrol,show,HOSTBUTTON
guicontrol,hide,PSTIP
guicontrol,show,HOSTIP
guicontrol,show,FSRVTXT
guicontrol,show,FILESERV
guicontrol,show,SERVPORT
guicontrol,show,GETIP
guicontrol,show,NETIPRAD
guicontrol,show,LANIPRAD
guicontrol,show,NETPW
guicontrol,hide,NETSPECPW
guicontrolget,NETDWNL,,NETDWNL
guicontrol,enable,NETCOREASSETS
guicontrolget,NETCOREASSETS,,NETCOREASSETS
guicontrolget,NETROMLIST,,NETROMLIST
guicontrolget,coreselv,,NETCORE

ReadyHost:
guicontrol,enable,HOSTBUTTON
guicontrolget,NETROMLIST,,NETROMLIST
if (NETROMLIST = "")
	{
		guicontrol,disable,HOSTBUTTON
	}
guicontrolget,NETCORE,,NETCORE
if (NETCORE = "")
	{
		guicontrol,disable,HOSTBUTTON
	}
guicontrolget,NETCOREASSETS,,NETCOREASSETS
if (NETCOREASSETS = "")
	{
		guicontrol,disable,HOSTBUTTON
	}
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

NetConnect:
gui, submit, nohide
BRKO= 1
guicontrolget,coreselv,,NETCORE
goto, ConnectRA
return

;{;;;;;;;;;;;;;;;    RELOAD HOSTS    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;{;;;;;;;;;;;;;;;;   OLD REFRESH   ;;;;;;;;;;;;;;;;;;;;
ChkPorts:
gui, submit, nohide
guicontrolget,CHKPORTS,,CHKPORTS
return

RefHosts:
guicontrol,hide,INVADERPIC
guicontrol,show,NETHOSTLIST
guicontrol, ,NETHINFO
guicontrol, ,ARCDET
BRKO= 1
FileDelete,lobby.ini
LV_Delete()
HOSTSELECT= 
guicontrol,,AUTOCORE,1
guicontrol,,FORCEROM,0
guicontrol,disable,NETCONNECT
guicontrol,disable,ARCNCT
gosub, NewLobby
SB_SetText("Netplay Lobby Populated")
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

NewLobby:	
FileReadLine,curlobby,arcorg.set,3
URLDownloadToFile,%curlobby%,%A_ScriptDir%\lobby.ini
if ErrorLevel = 1
  {
	MsgBox,16,NETHOST,NETHOSTs-List could not be retrieved., 3
  }

;{;;;;;;;;;;;;   REFRESH HOSTINGS  ;;;;;;;;;;;;;;;;;;
LPNUM= 
Loop, 50
	{
		LPNUM+=1
		ROOMFLT%LPNUM%= 
	}
FILTNUM= 
ARBIP= 
MITMIP= 
PORTOPEN= 
STARTTIME= 
NETHOSTIPS= 
UPDATETIME= 
NETPWDZ= 
NETHOSTCORES= 
NETHOSTCORES= 
NETHOSTNAMES= 
NETHOSTGAMES= 
NETHOSTPASSWDS= 
NETHOSTSPECPASSWDS= 
NETHOSTCOREVERSIONS= 

Loop, Read, lobby.ini
	{
	ARBIP= 
	PORTOPEN= 
	PORTAV= ?
	guicontrolget,CHKPORTS,,CHKPORTS
	arrsp1= 
	arrsp2= 
	arrsp3= 
	arrsp4= 
	stringsplit,arrsp,A_LoopReadLine,:,`" `,
;;"
	if (arrsp1 = "username")
		{
			NETHOSTNAMES:= arrsp2
		}
		if (arrsp1 = "game_crc")
		{
			NETHOSTCRCD:= arrsp2
		}
	if (arrsp1 = "mitm_ip")
		{
			MITMIP:= arrsp2
		}
	if (arrsp1 = "created")
		{
			STARTTIME= %arrsp2%:%arrsp3%
		}
	if (arrsp1 = "core_version")
		{
			NETHOSTCOREVERSIONS:= arrsp2
		}
	if (arrsp1 = "ip")
		{
			NETHOSTIPS:= arrsp2
		}
	if (arrsp1 = "country")
		{
			WORLDLOC= %arrsp2%
		}
	if (arrsp1 = "retroarch_version")
		{
			RAEXEVERS= %arrsp2%
		}
	if (arrsp1 = "updated")
		{
			UPDATETIME= %arrsp2%:%arrsp3%
		}
	if (arrsp1 = "host_method")
		{
			NETHOSTMETHODS:= arrsp2
		}
	if (arrsp1 = "has_password")
		{
			NETHOSTPASSWDS:= arrsp2
		}
	if (arrsp1= "game_name")
		{
			gamsplt1= 
			gamsplt2= 
			stringsplit,gamsplt,A_LoopReadLine,:","
			NETHOSTGAMES= %gamsplt5%
		}
	if (arrsp1 = "has_spectate_password")
		{
			NETHOSTSPECPASSWDS:= arrsp2
		}
	if (arrsp1 = "core_name")
		{
			NETHOSTCORES:= arrsp2
		}
	if (arrsp1 = "mitm_port")
		{
			MITMPORTS:= arrsp2
		}
	if (arrsp1 = "fixed")
		{
			FIXEDHOST:= arrsp2
		}
	PORTOPEN= 
	PORTAV= !
	if (NETHOSTMETHODS = "3")
		{
			NETHOSTPORTS:= MITMPORTS
			PORTAV= Yes
			CHKPORTS= 0
			gosub, evalurl
		}
	HOSTPW= =
	if (NETHOSTPASSWDS = "true")
		{
			HOSTPW= ?
		}	
	if (arrsp1 = "port")
		{
			NETHOSTPORTS:= arrsp2
			if (ARBIP <> "")
				{
					NETHOSTIPS:= ARBIP
					NETHOSTPORTS:= MITMPORTS
				}
			if (CHKPORTS = 1)
				{
					PORTOPEN= 
					HOSTINGIPS= %NETHOSTINGIPS%
					HOSTINGPORTS= %NETHOSTPORTS%
					HOSTINGNAMES= %NETHOSTNAMES%
					PORTAV= No
					gosub, PortCheck
				}
			if (PORTOPEN= 1)
				{
					PORTAV= Yes
				}
			gosub, PopPlay
		}
	if (arrsp1 = "}")
		{
			MITMIP= 
			WORLDLOC= 
			RAEXEVERS= 
			PORTOPEN= 
			STARTTIME= 
			NETHOSTIPS= 
			NETPWDZ= 
			UPDATETIME= 
			NETHOSTPORTS= 
			NETHOSTCORES= 
			NETHOSTNAMES= 
			NETHOSTGAMES= 
			NETHOSTPASSWDS= 
			NETHOSTSPECPASSWDS= 
			NETHOSTCOREVERSIONS= 
		}
	if (arrsp1 = "]")
		{
			return
		}
	}
return

PopPlay:
Gui, ListView, NETHOSTLIST
NETPWDZ= N
if (NETHOSTPASSWDS = "true")
		{
			NETPWDZ= Y
			if (NETHOSTSPECPASSWDS = "true")
					{
						NETPWDZ= *
					}
		}

trpn= 
FILTNUM+=1
ROOMFLT%FILTNUM%=  %NETHOSTNAMES% | %NETHOSTGAMES% | %NETHOSTCRCD% | %NETHOSTCORES% | %NETHOSTCOREVERSIONS% | %NETHOSTIPS% | %NETHOSTPORTS% | %PORTAV% | %WORLDLOC% | %RAEXEVERS%
LV_Add("", NETHOSTNAMES ,  NETHOSTGAMES , NETHOSTCRCD , NETHOSTCORES , NETHOSTCOREVERSIONS , NETHOSTIPS, NETHOSTPORTS, PORTAV, NETPWDZ, WORLDLOC, RAEXEVERS )
/*
LV_ModifyCol(1,110)
LV_ModifyCol(2,250)
LV_ModifyCol(3,65)
LV_ModifyCol(4,60)
LV_ModifyCol(5,60)
LV_ModifyCol(6,85)
LV_ModifyCol(7,50)
LV_ModifyCol(8,20)
LV_ModifyCol(9,34)
LV_ModifyCol(10,34)
LV_ModifyCol(11,34)
*/
LV_ModifyCol()
;;LV_Add("", NETHOSTNAMES ,  NETHOSTGAMES , NETHOSTCRCD , NETHOSTCORES , NETHOSTCOREVERSIONS , NETHOSTIPS, NETHOSTPORTS, PORTAV, HOSTPW )
Return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

evalurl:
ARBIP=
for k, ARBIP in ResolveHostname(MITMIP)
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;   NETPLAY ROM BROWSER   ;;;;;;;;;;;;;;;;;;;;
NetROM:
NetHROM:
gui, submit, nohide
BRKO= 1
romf= 
FileSelectFile,romf,3,%coreassetsdirectory%\%NETLPARSE%
if (romf = "")
{
return
}
guicontrol,,NETDWNL, 0
guicontrol,,NETPLIST, 0
guicontrol,,NETCOREASSETS,||
guicontrol,,NETROMLIST,|%romf%||%romf%
splitpath,romf,romtitle,rompth,romext,romname
ApndCRC=
CrCFLN= %romf%
gosub, CRC32GET
if (ApndCRC <> HOSTINGCRCS)
	{
		guicontrol,,FORCEROM,1
		if (FRC <> "")
			{
				guicontrol,enable,NETCONNECT
			}
	}
SB_SetText(" " romf " ")
return

NetCROM:
gui, submit, nohide
BRKO= 1
romf= 
FileSelectFile,romf,3,%coreassetsdirectory%\%NETLPARSE%
if (romf = "")
	{
		return
	}
guicontrol,,NETDWNL, 0
guicontrol,,NETPLIST, 0
guicontrol,,NETCOREASSETS,||
guicontrol,,NETROMLIST,|%romf%||%romf%
splitpath,romf,romtitle,rompth,romext,romname
ApndCRC=
CrCFLN= %romf%
gosub, CRC32GET
if (ApndCRC <> HOSTINGCRCS)
	{
	guicontrol,,FORCEROM,1
	if (FRC <> "")
		{
			guicontrol,enable,NETCONNECT
		}
	}
SB_SetText(" " romf " ")
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;  ROOM FILTER  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
HostCores:
return

ArcFind:
gui,submit,nohide
gosub,FindInArc
return


RoomFilter:
gui,submit,nohide
Gui,ListView,NETHOSTLIST
LV_Delete()
guicontrolget,FILTERLK,,ROOMFILTER
if (FILTERLK = "Room Filter")
	{
		FILTERLK= 
	}

ccv:= FILTERLK
gosub, getCren
syslk:= corcfgnam
gosub,revCren
if (corcfgnam <> ccv)
	{
		FILTERLK:= syslk 
	}
SRGNUM= 
Loop, 50
	{
		SRGNUM+=1
		SGNUM= % ROOMFLT%SRGNUM%
		if ( SGNUM = "")
		{
			return
		}
IfInString, SGNUM, %FILTERLK%
			{
				SGSPL1= 
				SGSPL2= 
				SGSPL3= 
				SGSPL4= 
				SGSPL5= 
				SGSPL6= 
				SGSPL7= 
				SGSPL8= 
				stringsplit,SGSPL,SGNUM, |
				LV_Add("Col", SGSPL1, SGSPL2, SGSPL3, SGSPL4, SGSPL5, SGSPL6, SGSPL7, SGSPL8)
			}
	}
LV_ModifyCol(1,110)
LV_ModifyCol(2,250)
LV_ModifyCol(3,60)
LV_ModifyCol(4,60)
LV_ModifyCol(5,60)
LV_ModifyCol(6,85)
LV_ModifyCol(7,50)
LV_ModifyCol(8,20)
LV_ModifyCol(9,34)
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;  CORE DDL  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
NetCore:
gui,submit,nohide
gosub, ReadyHost
guicontrolget, NETCORE,,NETCORE
guicontrol,,ARCCORES,|%NETCORE%||%runlist%
coreselv= %NETCORE%
gosub,RCNCTCHK
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;  FOLDER/PLAYLIST DDL  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;

CLNetCoreAssets:
CLActive= 1
gosub, ReadyHost
guicontrol,,AUTSYS,0

NetCoreAssets:
plistadd= 
dwnlistadd= 
curhostrom= 
topdlist= 
matchlist= 
dwnlistadd= 
NETLPARSE=
LTA= 
romf= 
romdp= 
romdisp= 
actit= 
acton= 
fnd= 
gui, submit, NoHide
BRKO= 

;{;;;;;;;;;;;;;;;;   playlist parse  ;;;;;;;;;;;;;;;;;;;;;;;;
if (NETPLIST = 1)
	{
		guicontrolget,NETLPARSE, ,NETCOREASSETS
	    splitpath,NETLPARSE,,,,NETRPARSE
		iniwrite, "%NETLPARSE%",Settings.ini,GLOBAL,netplay_playlist_directory
		if (NETLPARSE = "All_Playlists")
			{
				;LTA= 1
				NETRPARSE= 
				SB_SetText("Searching Playlist Database")
				StringLeft,curhostrom,HOSTINGROMS,12
				Loop, Read, hashdb.ini
					{
						xactm=
						romf= 
						romprt= 
						plistadd= 
						matchlist= 
						qfind1= 
						qfind2= 
						qfind3= 
						qfind4= 
						fndrom= 
						fndpl= 
						fndnum= 
						HASHSPLIT1= 
						stringsplit,qfind,A_LoopReadLine,|
						romsr:= qfind1
						splitpath,romsr,romtitle,rompth,romext,romname
						fndpl:= qfind2
						fndnum:= qfind3
						HASHSPLIT:= qfind4
						gosub, NewMtch
						if (BRKO = 1)
							{
								HOSTFND= 
								break
							}
					}	 
				matchlist:= xactm . plistadd
				if (romf = "")
					{
						romf:= romprt						
					}
				guicontrol,enable,NETCONNECT	
				guicontrol,,NETROMLIST,|%romf%||%matchlist%
				if (romf = "")
					{
						SB_SetText("No Matches Found")
						guicontrol,,FORCEROM,1
						guicontrol,disable,NETCONNECT
					}
				CLActive= 
				return
			}
		BRKO= 1
		gosub, AutSys
		splitpath,NETLPARSE,,,,NETRPARSE
		PlayLP:
		PLineNum= 
		PLineAdd= 
		Loop, Read, %playlistDirectory%\%NETLPARSE%,|
			{
				PLineNum+=1
				if (HOSTSELECT <> "")
					{
						stringsplit, HASHSPLIT, A_LoopReadLine,|
						if (HASHSPLIT1 = HOSTINGCRCS)
							{
								if (HASHSPLIT1 <> 0)
									{
										gosub, SUBRLINE
										splitpath,romf,romtitle,rompth,romext,romname
										guicontrol,enable,NETCONNECT
										HOSTFND= 
										romdisp= 1
										BRKO= 1
										break
									}
							}
					}
				PLineAdd+=1
				if (PLineAdd = 1)
					{
						SplitPath,A_LoopReadLine,lmtitle
						intitle1= 
						intitle2= 
						stringsplit,intitle,lmtitle,#
						if (intitle2 = "")
							{
								intitle2 := intitle1
							}
						;;if (LTA = 1)
						;;	{
						;;		plistadd.= intitle2 . "|"
						;;		plistplus.= "PL" . PLNUM . "=" . intitle2 . "|"
						;;	}
						;;else if (LTA <> 1)
						;;	{
								plistadd.= intitle2 . "|"
								plistplus:= plistadd
						;;	}
					}
				if (PLineAdd =  6)
					{
						PLineAdd= 
					}
			}
			matchlist= %plistadd%
			romfj1= 
			romfj2= 
			stringsplit, romfj, romdp,#
			stringmid,romhnck,romdp,2,1
			if (romhnck <> ":")
				{
					ifexist, %raexeloc%\%romfj1%
						{
							romdp= %raexeloc%\%romfj1%
							if (romfj2 <> "")
								{
									romdp= %raexeloc%\%romfj1%#%romfj2%
								}
						}
				}

			guicontrol,,NETROMLIST,|%romdp%||%plistplus%
			if (romdisp = "")
				{
					gosub, SurfaceROMName
					guicontrol,,FORCEROM,1
					guicontrol,enable,NETCONNECT
				}
			if (LTA = "")
				{
					guicontrol,,ARCSYS,|%NETRPARSE%||%syslist%
					NPLC= 1
					guicontrol,,ARCCORES,|%coreselv%||%runlist%
					gosub,RCNCTCHK
					gosub, ArchiveSystems
					NPLC= 
				}
	if (CLActive = 1)
		{
			guicontrolget, HOSTSWITCH
			if (HOSTSWITCH = 1)
				{
					gosub, MatchSyst
				}
		}
		CLActive= 		
	Return
	}
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;  downloads parse  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

matchlist= %dwnlistadd%
guicontrolget, FORCEROM,,FORCEROM
guicontrolget, NETLPARSE,,NETCOREASSETS
NETRPARSE:= NETLPARSE
if (NETLPARSE= "Downloads")
	{
		guicontrol,,RETROM,0
		guicontrol,,NETROMLIST,|
		return
	}
if (RETROM = 1)
	{
		RETDLF= %NETCOREASSETS%
		SB_SetText(" " HOSTINGROMS " wll be received to " NETCOREASSETS " directory.")
	}
Loop, Parse, syslist,|
	{
		if (NETLPARSE = A_LoopField)
				{
					guicontrol,,ARCSYS,|%A_LoopField%||%syslist%
					NPLC= 1
					gosub, ArchiveSystems
					coreselv= %CONNECTINGCORE%
					guicontrol,,ARCCORES,|%coreselv%||%runlist%
					NPLC= 
					break
				}
	}
iniwrite, "%coreassetsdirectory%\%NETLPARSE%",Settings.ini,GLOBAL,netplay_core_assets_directory

actit= 
	stringsplit,omitxtn,omitxt,= | ""
ar := Object()
Loop, %omitxtn0%
{
	new= % (omitxtn%a_index%)
	if (omitxtn%a_index% <> "")
		{
			ar.insert(new)
		}
}
SB_SetText("...Searching...")

Loop, %coreassetsdirectory%\%NETLPARSE%\*.*,
	{
		ext= %A_LoopFileExt%
		noapl= 
		for k, v in ar
			{
				extm:= v
				if (ext = extm)
					{
						noapl= 1
					}
			}
		actit= 
		if (noapl = "")
			{
				StringLeft,curhostrom,A_LoopFileName,12
				dwnlistadd.= A_LoopFileName . "|"
			}
	}
matchlist= %dwnlistadd%
plistplus:= matchlist
gosub, SurfaceROMName
if (dwncrcm = "")
	{
		guicontrolget, NETLPARSE,,NETCOREASSETS
		guicontrol,,FORCEROM,1
	}
guicontrol,enable,NETCONNECT
gosub,RCNCTCHK
gosub,CCNCTCHK
if (CLActive = 1)
		{
			guicontrolget, HOSTSWITCH
			if (HOSTSWITCH = 1)
				{
					gosub, MatchSyst
				}
		}
CLActive= 
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

NewMtch:
if (HOSTINGCRCS = "")
	{
		return
	}
if (HOSTSELECT <> "")
	{
		if (HOSTINGCRCS <> 0)
			{
				if (HASHSPLIT = HOSTINGCRCS)
					{
						guicontrol,enable,NETCONNECT
						romf:= romsr
						guicontrol,, NETROMLIST,|%romf%||%plistadd%
						romdisp= 1
						BRKO= 1
						xactm= 1
						HOSTFND= 
						SB_SetText("CRC-MATCH " romf " FOUND!!!")
						return
					}
			}
	if (topdlist = curhostrom)
		{
			romprt:= romsr
			plistadd.= romsr . "|"
			SB_SetText("PARTIAL-MATCH FOUND!!!")
			HOSTFND= 2
		}
	if (romname = HOSTINGROMS)
			{
				romf:= romsr
				xactm.= romsr . "|"
				romname= 
				SB_SetText("NAME-MATCH FOUND!!!")
				HOSTFND= 1
			}
	stringleft,topdlist,romname,12
	}
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;  ROM DDL SELECTION  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
NetROMList:
matchlist= 
CONNECTINGROM= 
nplistnum= 
nplistrp= 
romf= 

gui,submit,nohide
gosub, ReadyHost
gosub,CCNCTCHK
BRKO= 1
guicontrol,,RETROM,0
guicontrolget,NAMEDROM,,NETROMLIST

if (NETPLIST = 1)
	{
		rominc= 
		if (NETLPARSE = "All_Playlists")
		;;if (LTA = 1)
			{
				stringsplit,prsdl,NAMEDROM,=
				NETLPARSE:= % (%prsdl1%)
				NAMEDROM:= prsdl2
			}
		Loop, Read, %playlistdirectory%\%NETLPARSE%
			{
				rominc+=1
				romtitle= 
				rompth= 
				romname= 
				splitpath,A_LoopReadLine,romtitle,rompth,romext,romname
				intitle1= 
				intitle2= 
				stringsplit,intitle,romtitle,#
				if (intitle2 = "")
					{
						intitle2:= intitle1
					}
				if (intitle2 = NAMEDROM)
					{
						romf= %A_LoopReadLine%
						SB_SetText(" MATCH" romf " found!!! ")
						HOSTFND= 2
						return
					}
			}
	return
	}
if (NETDWNL = 1)
	{
		romf= %coreassetsDirectory%\%NETLPARSE%\%NAMEDROM%
	}
gosub,CCNCTCHK
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

AutSys:
ARCSYSPOP= 
gui,submit,nohide
guicontrolget,AUTSYS,,AUTSYS
guicontrol,disable,SRCHARCORG
guicontrol,disable,NETCOREASSETS
guicontrolget,NETLPARSE,,NETCOREASSETS
guicontrolget, NETPLIST,,NETPLIST
guicontrolget, NETDWNL,,NETDWNL
if (AUTSYS = 1)
	{
		guicontrol,enable,SRCHARCORG
		guicontrol,enable,NETCOREASSETS
		if (NETDWNL = 1)
			{
				ifexist, %coreassetsdirectory%\%ASPOP%
					{
						if (ASPOP = "")
							{
								ASPOP= Downloads
							}
						guicontrol,,NETCOREASSETS,|%ASPOP%||%dwnlfldrs%
						SB_SetText("Switching to "ASPOP " ")
						NETLPARSE:= ASPOP
						ARCSYSPOP= 1						
					}
			}
		if (NETPLIST = 1)
			{
				if (NETLPARSE = "All_Playlists")
					{
						guicontrol,,NETCOREASSETS,|All_Playlists||%plistfiles%
						guicontrol,,NETROMLIST
						;;return
					}
				if (ASPOP = "")
					{
						guicontrol,,NETCOREASSETS,|All_Playlists||%plistfiles%
						guicontrol,,NETROMLIST
						return
					}
				ifexist, %playlistdirectory%\%ASPOP%.lpl
					{
						SB_SetText("Switching to "ASPOP " ")
						guicontrol,,NETCOREASSETS,|%ASPOP%.lpl|||All_Playlists|%plistfiles%
						gosub, JustPop
						NETLPARSE= %ASPOP%.lpl
						SplitPath,NETLPARSE,,,,NETRPARSE
						guicontrol,,NETROMLIST,|%plistplus%|
						ARCSYSPOP= 1
					}
			}
		;;guicontrol,,SRCHARCORG,1
		;;guicontrol,enable,SRCHARCORG
		Loop, Parse, syslist,|
			{
				if (A_loopField = NETRPARSE)
					{
						guicontrol,,ARCSYS,|%NETRPARSE%||%syslist%
						break
					}					
			}
		NPLC= 1
		guicontrol,,ARCCORES,|%coreselv%||%runlist%
		gosub,RCNCTCHK
		gosub, ArchiveSystems
		NPLC= 
		return
	}
guicontrol,enable,NETCOREASSETS	
guicontrol,,SRCHARCORG,0
return

;;;;;;;;;;;;;;;;;;;;;;    JUST POPULATE   ;;;;;;;;;;;;;;;;;;;;;;;;

JustPop:
Loop, Read, %playlistDirectory%\%NETLPARSE%,|
	{
		PLineNum+=1
		if (HOSTSELECT <> "")
			{
				stringsplit, HASHSPLIT, A_LoopReadLine,|
				if (HASHSPLIT1 = HOSTINGCRCS)
					{
						if (HASHSPLIT1 <> 0)
							{
								gosub, SUBRLINE
								splitpath,romf,romtitle,rompth,romext,romname
								guicontrol,enable,NETCONNECT
								HOSTFND= 
								romdisp= 1
								BRKO= 1
								break
							}
					}
			}
		PLineAdd+=1
		if (PLineAdd = 1)
			{
				SplitPath,A_LoopReadLine,lmtitle
				intitle1= 
				intitle2= 
				stringsplit,intitle,lmtitle,#
				if (intitle2 = "")
					{
						intitle2 := intitle1
					}
						plistadd.= intitle2 . "|"
						plistplus:= plistadd
			}
		if (PLineAdd =  6)
			{
				PLineAdd= 
			}
	}
return

;{;;;;;;;;;  CONNECTION ENABLE PROC ;;;;;;;;;;;;;;;;;;;;;
CCNCTCHK:
FRC= 
guicontrolget,FRC,,NETCORE
if (FRC <> "")
		{
			guicontrol,enable,NETCONNECT
			return
		}
guicontrol,disable,NETCONNECT
return

RCNCTCHK:
FRC= 
guicontrolget,FRC,,NETROMLIST
if (FRC <> "")
		{
			guicontrol,enable,NETCONNECT
			return
		}
guicontrol,disable,NETCONNECT
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;  ROM SELECTION PROC ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SurfaceROMName:
dwncrcm= 
fnd= 
if (HOSTINGCRCS = "")
	{
		guicontrol,,NETROMLIST,|%plistplus%|
		return
	}
SB_SetText("")
if (NETDWNL = 1)
	{
		
		actit= 
			stringsplit,omitxtn,omitxt,= | ""
		ar := Object()
		Loop, %omitxtn0%
		{
			new= % (omitxtn%a_index%)
			if (omitxtn%a_index% <> "")
				{
					ar.insert(new)
				}
		}
		SB_SetText("...Searching...")
		Loop, %coreassetsdirectory%\%NETLPARSE%\%HOSTINGROMS%.*
			{
				ext= %A_LoopFileExt%
				noapl= 
				for k, v in ar
					{
						extm:= v
						if (ext = extm)
							{
								noapl= 1
							}
					}
				actit= 
				if (noapl = "")
					{
						SB_SetText(" NAME-MATCH " A_LoopFileName " found!!! ")
						HOSTFND= 1
						romf:= A_LoopFileFullPath
						lmxt:= A_LoopFileExt
						actit.= A_LoopFileFullPath . "|"
					}
				Loop, Read,adpl.ini
					{
						HASHSPLIT1= 
						HASHSPLIT2= 
						stringsplit, HASHSPLIT,A_LoopReadLine,=
						if (HASHSPLIT2 = HOSTINGCRCS)
							{
								dwncrcm= 1
								romf= %romf%#%HASHSPLIT1%
							}
						if (dwncrcm = 1)
							{
								SB_SetText(" CRC-MATCH " romf " found! ! ! ")
								guicontrol,,RETROM,0
								guicontrol,,NETROMLIST,|%romf%||%matchlist%
								return
							}
					}
				if (dwncrcm = 1)
					{	
						HOSTFND= 
						break
					}
			}
		if (HOSTFND <> "")
			{
				Loop, %coreassetsdirectory%\%NETLPARSE%\%HOSTINGROMS%*
					{
						ext= %A_LoopFileExt%
						noapl= 
						for k, v in ar
							{
								extm:= v
								if (ext = extm)
									{
										noapl= 1
									}
							}
						actit= 
						if (noapl = "")
							{
								SB_SetText(" NAME-MATCH " A_LoopFileName " found!!! ")
								HOSTFND= 1
								romf:= A_LoopFileFullPath
								lmxt:= A_LoopFileExt
								actit.= A_LoopFileFullPath . "|"
							}
						Loop, Read,adpl.ini
							{
								HASHSPLIT1= 
								HASHSPLIT2= 
								stringsplit, HASHSPLIT,A_LoopReadLine,=
								if (HASHSPLIT2 = HOSTINGCRCS)
									{
										dwncrcm= 1
										romf= %romf%#%HASHSPLIT1%
									}
								if (dwncrcm = 1)
									{
										SB_SetText(" CRC-MATCH " romf " found! ! ! ")
										guicontrol,,RETROM,0
										guicontrol,,NETROMLIST,|%romf%||%matchlist%
										return
									}
							}
						if (dwncrcm = 1)
							{	
								HOSTFND= 
								break
							}
					}
			}
		guicontrol,,NETROMLIST,|%actit%||%plistplus%
		if (actit <> "")
			{
				return
			}
	}
Loop, Parse, matchlist,|
	{
		splitpath,A_LoopField,lmtitle,,lmxt,lmname
		StringLeft,topdlist,lmname,12
		StringLeft,curhostrom,HOSTINGROMS,12
		if (curhostrom = "")
			{
				guicontrol,,NETROMLIST,|%plistplus%
				return
			}
		if (topdlist = curhostrom)
			{
				
				romf:= A_LoopField
				HOSTFND= 2
				fnd= 1
				if (NETDWNL = 1)
					{
						romsr= 
						romf= %coreassetsdirectory%\%NETLPARSE%\%A_LoopField%
						if (FORCEROM = 1)
							{
								if (HOSTINGCRC <> 0)
									{
										gosub, ChkNetCRC
										Loop, Read,adpl.ini
										{
											HASHSPLIT1= 
											HASHSPLIT2= 
											stringsplit, HASHSPLIT,A_LoopReadLine,=
											if (HASHSPLIT2 = HOSTINGCRCS)
												{
													dwncrcm= 1													
													romf= %romf%#%HASHSPLIT1%
												}
											if (dwncrcm = 1)
												{
													SB_SetText(" CRC-MATCH " romf " found !!! ")
													guicontrol,,RETROM,0
													guicontrol,,NETROMLIST,|%romf%||%matchlist%
													HOSTFND= 
													return
												}
										}
									}
							}
					}
		SB_SetText(" Partial-MATCH " lmtitle " found!!! ")
				if (NETPLIST = 1)
					{
						netPLnm=
					Loop, Read, %playlistDirectory%\%NETLPARSE%
						{
							lmname= 
							intitle1= 
							intitle2= 
							netPLnm+=1
							recNum+=1
							SplitPath,A_LoopReadLine,lmplt,,,lmpln
							stringsplit,intitle,lmplt,#
							if (intitle2 <> "")
								{
									SplitPath,intitle2,,,,lmpln
								}
							if (lmtitle = lmplt)
								{
									if (recNum = 1)
										{
											;;netPLnm-=1
											FileReadLine, romf, %playlistDirectory%\%NETLPARSE%,%netPLnm%
											SB_SetText(" NAME-MATCH " lmpln " found!!! ") 
											if (lmpln = HOSTINGROMS)
												{
													HOSTFND= 1
													actit .= romf . "|"
													if (LTA <> 1)
														{
															guicontrol,,NETROMLIST,|%actit%|%plistplus%
														}
												}
										}
								}
							if (recNum = 6)
								{
									recnum= 
								}
						}
					}
				if (actit = "")
					{
						guicontrol,,NETROMLIST,|%frplst%||%plistplus%
						return
					}
					guicontrol,,NETROMLIST,|%actit%|%plistplus%
					return
			}
	}
if (fnd = "")
	{
		guicontrol,,NETROMLIST,|%plistplus%
	}
return

;{;;;;;;;;;;;;;  CRC CHECK PROC  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ChkNetCRC:
FileDelete,adpl.ini
dwncrcm= 
if (szip = 0)
	{
		return
	}
CrCFLN:= romf
if (szip = 1)
	{
		gosub, CRCfz
		return
	}
linfo= 
if (lmxt = "zip")
	{
		ROMZ= 
		Runwait,%comspec% /c "7za.exe l -slt "%CrCFLN%" >7z.ini ",,hide
		Loop, Read, 7z.ini
			{
				line1= 
				line2= 
				StringSplit,line,A_loopReadline,=,%A_Space%
				if (line1 = "----------")
					{
						linfo= 1
					}
				if (linfo = "1")
					{
						if (line1 = "Path")
							{
								ROMZ:= line2
							}
						if (line1 = "CRC")
							{
								FileAppend,%ROMZ%=%line2%`n,adpl.ini
							}
					}
			}
	}
return

CRCfz:
gosub, CRC32GET
if (ApndCRC = HOSTINGCRCS)
	{
		dwncrcm= 1
		HOSTFND= 
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;  SUB POP PROC  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SUBRLINE:
SUBRLINE= 
SUBRLINE := PLineNum-3
SUBFROM := PLineNum-4
guicontrol,,FORCEROM,0
guicontrol,enable,NETCONNECT

plinecnt= 
FileReadLine, romdp,%playlistDirectory%\%NETLPARSE%,%SUBRLINE%
FileReadLine, romf,%playlistDirectory%\%NETLPARSE%,%SUBFROM%
guicontrol,,RETROM,0
SB_SetText(" CRC-MATCH " romf " found!! ! ")
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;  HOST SELECTION  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

NetHostList:
gui, submit, nohide
BRKO= 1
SelectedRow := A_EventInfo
;;SB_SetText(" " SelectedRow " ")
if A_GuiEvent = Normal
	{
		guicontrol, hide, RetROM
		if (A_EventInfo = 0)
			{
				BRKO= 1
				VarSetCapacity(LVITEM, 4*13, 0) ;;Do *13 if you're not on Vista or Win 7 (see MSDN)
				NumPut(0x00000008, LVITEM, 4*0) ;;mask = LVIF_STATE
				NumPut(0x00000000, LVITEM, 4*3) ;;state = <second LSB must be 0>
				NumPut(0x0002,     LVITEM, 4*4) ;;stateMask = LVIS_SELECTED
				;;LVM_SETITEMSTATE = LVM_FIRST + 43
				SendMessage, 0x1000 + 43, -1, &LVITEM,, ahk_id %HostView%			
				guicontrol, ,NETHINFO
				guicontrol, ,ARCDET
				ControlFocus, SysListview321
				LV_Modify(0, "+Select +Focus")
				return
			} 
		BRKO=
		LV_Modify(SelectedRow, "+Select +Focus")
		LV_GetText(HOSTINGUSER, A_EventInfo,1)
		LV_GetText(IPADR, A_EventInfo,6)
		LV_GetText(LOBTYP, A_EventInfo,8)
		LV_GetText(netplayRemotePort, A_EventInfo,7)
		LV_GetText(HOSTINGROMS, A_EventInfo,2)
		LV_GetText(syslk, A_EventInfo,4)
		LV_GetText(corever, A_EventInfo,5)
		LV_GetText(HOSTINGCRCS, A_EventInfo,3)
		guicontrol,,AUTOCORE,1
		romname= %HOSTINGROMS%
			;;if (HOSTINGCRCS = 0)
				;;{
				;;	HOSTINGCRCS= Null
				;;}
		gosub, revCREN
		gosub, AutSys
		CONNECTINGCORE= 
		if (IPADR <> "")
			{
				HOSTSELECT= 1
				fsprt1= 
				stringsplit,fsprt,HOSTINGUSER,_,[]
				if fsprt1 is digit
					{
						guicontrol, show, RetROM
						guicontrol,,SERVPORT,%fsprt1%
						gosub, ServPort
					}
				ifnotexist, %libretrodirectory%\%corelk%_libretro.dll
					{
						guicontrolget,SRCHARCORG,,SRCHARCORG
						guicontrol,,AUTOCORE,0
						guicontrol,enable,NETCORE
						guicontrol,disable,NETCONNECT
						guicontrol,,NETCORE,|%corelist%
						if (SRCHARCORG = 1)
							{
								guicontrol,,NETCORE,|%corelist%
							}
					}
				ifexist, %libretrodirectory%\%corelk%_libretro.dll
						{
							guicontrolget,AUTOCORE,,AUTOCORE
							CONNECTINGCORE= %corelk%_libretro.dll
							if (AUTOCORE = 1)
								{
									coreselv= %CONNECTINGCORE%
									guicontrol,,NETCORE,|%coreselv%||%corelist%
									guicontrol,,ARCCORES,|%coreselv%||%runlist%
								}
						}
							HOSTFND= 2
							guicontrolget, SRCHARCORG,,SRCHARCORG
							gosub, NetCoreAssets
			}
		IniWrite, "%IPADR%",Settings.ini,GLOBAL,last_connect
		IniWrite, "%netplayRemotePort%",Settings.ini,GLOBAL,last_port
		guicontrol,,NETHINFO,%HOSTINGUSER% | %HOSTINGROMS% | %HOSTINGCRCS% | %corelk% |  %IPADR%:%netplayRemotePort% 
		guicontrol,,ARCDET,%HOSTINGROMS% | %corelk% | %HOSTINGUSER% | %HOSTINGCRCS% |  %IPADR%:%netplayRemotePort% 

		cipsp1=
		cipsp2=
		cipsp3=
		cipsp4=
		stringsplit,cipsp,IPADR,.
		guicontrol,,IPA,%cipsp1%
		guicontrol,,IPB,%cipsp2%
		guicontrol,,IPC,%cipsp3%
		guicontrol,,IPD,%cipsp4%
		guicontrol,,CPORTNUM,%netplayRemotePort%
	}
if A_GuiEvent = DoubleClick
	{	
				BRKO= 1
				SelectedRow= 
				LV_Modify(0, "+Select +Focus")
				return
	}
gosub,CCNCTCHK
gosub,RCNCTCHK
if (ASPOP = "Mr. Boom")
	{
		guicontrol,enable,NETCONNECT
		romf= 
	}
if (SRCHARCORG = "0")
	{
		return
	}	
if (HOSTFND = "")
	{
		return
	}
gosub, FindInArc
if (HOSTFND = 2)
	{
		GuiControl, Choose, TABMENU, 6
		HOSTFND= 
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;  FOLDER/PLAYLIST RADIOS  ;;;;;;;;;;;;;;;;;;;;;;;
NetDwnl:
gui, submit, NoHide
BRKO= 1
guicontrol,disable,NETCONNECT
guicontrol,,NETROMLIST,|
initdwn= Downloads
guicontrolget,gnpl,,NETCOREASSETS
dwnlft= 
SplitPath,gnpl,,,,NETLPARSE
ifexist, %coreassetsdirectory%\%NETLPARSE%
	{
		initdwn:= NETLPARSE
		guicontrol,,NETCOREASSETS,|%initdwn%||%dwnlfldrs%
		gosub, NetCoreAssets
		iniwrite, "1",Settings.ini,GLOBAL,netplay_rom_location
		return
	}
guicontrol,,NETCOREASSETS,|%initdwn%||%dwnlfldrs%
iniwrite, "1",Settings.ini,GLOBAL,netplay_rom_location
return

NetPlist:
gui,submit,nohide
guicontrol,disable,NETCONNECT
guicontrol,,RETROM,0
guicontrol,,NETROMLIST,|
initdwn= All_Playlists
guicontrolget,dwnlft,,NETCOREASSETS
ifexist, %playlistDirectory%\%dwnlft%.lpl
	{
		NETLPARSE= %dwnlft%.lpl
		initdwn= %dwnlft%.lpl
		guicontrol,,NETCOREASSETS,|%initdwn%||All_Playlists|%plistfiles%
		gosub, NetCoreAssets
		iniwrite, "2",Settings.ini,GLOBAL,netplay_rom_location
		return
	}
guicontrol,,NETCOREASSETS,|%initdwn%||All_Playlists|%plistfiles%
iniwrite, "2",Settings.ini,GLOBAL,netplay_rom_location
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;   AUTOMATIC CORE  ;;;;;;;;;;;;;;;;;;;;;;;';;;;;;;;;;;;;
AutoCore:
gui,submit,nohide
guicontrol,disable,NETCORE
if (AUTOCORE = 0)
	{
		guicontrol,enable,NETCORE
		guicontrol,,NETCORE,|%corelist%
		guicontrol,disable,NETCONNECT
		guicontrolget,coreselv,,NETCORE
		return
	}
ifexist, %libretrodirectory%\%corelk%_libretro.dll
	{
		CONNECTINGCORE= %corelk%_libretro.dll
		coreselv= %CONNECTINGCORE%
		guicontrol,,NETCORE,|%coreselv%||%corelist%
		guicontrol,,ARCCORES,|%coreselv%||%runlist%
		return
	}
ifnotexist, %libretrodirectory%\%corelk%_libretro.dll
		{
			SB_SetText(" " corelk " _libretro.dll not found")
		}
guicontrol,,NETCORE,|%CONNECTINGCORE%||%corelist%
guicontrol,,ARCCORES,|%CONNECTINGCORE%||%runlist%
FRC=
guicontrolget,FRC,,NETCORE

if (FRC = "")
	{
	   ;;guicontrol,,AUTOCORE,0
		guicontrol, enable,NETCORE
		guicontrol,disable,NETCONNECT
		SB_SetText(" You must select a core to connect to a host.")
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;  FORCE ROM  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ForceRom:
gui, submit,nohide
guicontrol,disable,NETCONNECT

guicontrol, enable, ARCHOST
guicontrol,disable,ARCNCT
DrOE= 
guicontrolget, DrOE,,NETROMLIST
if (DrOE = "")
{
return
}
if (FORCEROM= 1)
{
guicontrol,enable,NETCONNECT

CANRUN= 1
}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;  RECIEVE ROM  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RetROM:
gui, submit, nohide
guicontrolget,RETROM,,RETROM
if (RETROM = 1)
	{
		guicontrol,enable,NETCONNECT
		guicontrol,,NETDWNL,1
		guicontrol,,NETPLIST,0
		guicontrol,,NETCOREASSETS,|Netplay||%dwnlfldrs%
		gosub, NetCoreAssets
		if (dwncrcm = 1)
			{
				guicontrol,,RETROM,0
			}
		RETDLF= Netplay
		FRC=
		guicontrolget,FRC,,NETCORE
		if (FRC = "")
			{
				guicontrol,,AUTOCORE,0
				guicontrol, enable,NETCORE
				guicontrol,disable,NETCONNECT
			}
	}
if (RETROM = 0)
	{
		guicontrol, disable, ROMPORT
	}
BRKO= 1
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;  FIND IN ARCHIVE  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

FindInArc:
gui, submit, nohide
SB_SetText(" Matching " topdlist " in cloud")
stringleft,trilet,curhostrom,3
Loop, Parse, pop_list,|
	{
		if (A_Loopfield = HOSTINGROMS)
			{
				LBEX_SELECTSTRING(arcpopu,HOSTINGROMS)
				SB_SetText("exact match " HOSTINGROMS "")
				guicontrol, Focus, ARCPOP
				guicontrolget, arcpl,,ARCPOP
				gosub, ArcPopulateList
				return
			}	
	}
LBEX_SELECTSTRING(arcpopu,trilet)
LBEX_SELECTSTRING(arcpopu,curhostrom)
guicontrol, Focus, ARCPOP
guicontrolget, arcpl,,ARCPOP
				if (arcpl <> "")
					{
						gosub, ArcPopulateList
					}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;  FILE-SERVER PROCS  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ServPort:
gui, submit, nohide
guicontrolget,fileServerPort,,SERVPORT
guicontrol,,ROMPORT,%fileServerPort%
guicontrolget,netplayNickname,,NETNAME
netnp1= 
netnp2= 
netnp3= 
netnp4= 
stringsplit,netnp,netplayNickname,_,[]
if (netnp2 = "")
	{
		netnp2= %netplayNickname%
	}
if (netnp3 <> "")
	{
		netnp3= _%netnp3%
	}
	if (netnp4 <> "")
	{
		netnp4= _%netnp4%
	}
guicontrol,,NETNAME,%netplayNickname%
if (FILESERV = 1)
	{
		guicontrol,,NETNAME,[%fileServerPort%]_%netnp2%%netnp3%%netnp4%
	}
iniwrite, "%fileServerPort%",Settings.ini,GLOBAL,file_server_port
iniwrite, "%netplayNickname%",%curcfg%,OPTIONS,netplay_nickname
return

ZipSrv:
IfNotExist, %coreassetsDirectory%\Netplay
	{
		FileCreateDir,%coreassetsDirectory%\Netplay
		gosub,resetCoreAssets
	}
if (szip = "1")
	{
		guicontrol,,NETHINFO,%romf%
		guicontrol,,ARCDET,%romf%
		return
	}
if (romext = "zip")
	{
		guicontrol,,NETHINFO,%romf%
		guicontrol,,ARCDET,%romf%
		return
	}	
ifnotexist, %coreassetsDirectory%\Netplay\%romname%.zip
	{
		SB_SetText(" Compressing ROM file ")
		runwait, %comspec% cmd /c "7za.exe a "%coreassetsDirectory%\Netplay\%romname%.zip" "%romf%" ", ,hide
		SB_SetText(" Compression complete ")
	}
guicontrol,,NETHINFO,%coreassetsDirectory%\Netplay\%romname%.zip
guicontrol,,ARCDET,%coreassetsDirectory%\Netplay\%romname%.zip
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;    INPUT FUNCTIONS   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;   RA remapping DDL    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

JoyCore:
ASVRM= 1
JOYEMUCORE:
iremp= 1
gui,submit,nohide
guicontrol, show, JCFGADD
guicontrol, hide, SaveJOY
;;guicontrol, hide, JCFGADD
guicontrol, hide, JCFGEDT
guicontrolget,JOYCORE,,JOYCORE
EMUFN= %JOYCORE%

RetroArchGLOBALJOY:
if (JOYCORE = "Global")
	{
		joyimg=emu.png
		guicontrol, hide, SaveJOY
		guicontrol, show, JCFGADD
		joycfg= %curcfg%
		guicontrol,move,JOYPIC,x335 y263 w117 h111
		gosub, Joyvalz
		guicontrol,,JOYPIC,%joyimg%
		gosub, PlayerType
		SB_SetText("Joytick config is " joycfg " ")	
		return
	}
emujchk= 
emujchk1= 
emujchk2= 
emujchk3= 
StringSplit,emujchk,JOYCORE,.
if (emujchk2 <> "dll")
	{
		
		if (JOYCORE = "retroArch")
			{
				JOYCORE= Global
				if (ASVRM = "")
					{
						curcfg= rj\sysCfgs\%RJSYSDD%\retroarch.cfg
					}
				goto, RetroArchGLOBALJOY
			}

		JOYCFGMODE= emulator
		guicontrol, hide, JCFGADD
		guicontrol, show, SaveJOY
		guicontrol, show, JCFGEDT
		gosub, EmuJoy
		guicontrol,,JCFGEDT,|
		try gosub, %JOYCORE%CTRLS
		catch
			{
				gosub, EMJTOG	
			}
		SB_SetText("Joytick config is " JOYCORE " ")
		return
	}
ccav= %JOYCORE%
stringreplace, ccv, ccav,_libretro.dll,,All
coreconc1= 
coreconc2= 
coreconc3= 
coreconc4= 
stringsplit, coreconc,ccv,_
corecfg= %ccv%.cfg
gosub, getCREN
joycfg= %inputRemappingDirectory%\%corcfgnam%\%corcfgnam%.rmp
gosub, revCREN
IfNotExist,%inputRemappingDirectory%\%corcfgnam%
	{
		FileCreateDir, %inputRemappingDirectory%\%corcfgnam%
	}
ifexist, %inputRemappingDirectory%\%corcfgnam%\%corcfgnam%.rmp
	{
		gosub, Joyvalz
	}
joyimg=joyimg\joy.png
ifexist,joyimg\%ASPOP%.png
	{
		iremp= 
		joyimg= joyimg\%ASPOP%.png
	}
guicontrol,move,JOYPIC,x260 y253 w252 h126	
guicontrol,,JOYPIC,%joyimg%
rajoytog= Show
emjtog= Hide
if (JOYCFGMODE = "emulator")
	{
		gosub, RAJOYTOG
		gosub, EMJTOG
	}
JOYCFGMODE= core
gosub, PlayerType
GuiControl,,JCFGEDT,|%inputRemappingDirectory%\%corcfgnam%\%corcfgnam%.rmp||%joycfg%|%curcfg%
SB_SetText("Joytick config is " joycfg " ")	
return

JCfgAdd:
gui,submit,nohide
guicontrol, show,JCFGEDT
guicontrol, show,SAVEJOY
guicontrol, hide,JCFGADD
return

JCfgEdt:
gui, submit, nohide
guicontrolget,JCFGEDT,,JCFGEDT
return

SaveJOY:
gui,submit,nohide
guicontrolget,JCFGPT,,JCFGPT
guicontrolget,JOYCORE,,JOYCORE
guicontrol,disable,SAVEJOY
guicontrol,disable,JOYCORE
joycfgout= 
if (JOYCORE <> "Global")
		goto, jcdd
guicontrol,,jCFGPT,,%JCFGEDT%
splitpath,JCFGPT,,JCFGPD
ifexist,%JCFLPD%\
	{
		joycfg:= JCFGPT
	}
if (JOYCORE = "Global")
	{
		lkdir= 
		IfExist, %inputRemappingDirectory%\%corcfgnam%
			{
				FileCreateDir, %inputRemappingDirectory%\%corcfgnam%
				lkdir= %inputRemappingDirectory%\%corcfgnam%
			}	
			else IfNotExist,%inputRemappingDirectory%\%corcfgnam%
				{
					guicontrolget,lkdtmp,,JCFGEDT
					SplitPath,lkdtmp,,lkdir
				}
		FileSelectFile,joycfgout,S18,%lkdir%\%corcfgnam%.rmp,Name of Joystick Cfg Remap,*.rmp
		if (joycfgout = "")
			{
				guicontrol,enable,JOYCORE
				guicontrol,enable,SAVEJOY
				return
			}
		joycfg:= joycfgout
		iremp= 1
		FileCopy, %joycfg%,%joycfgout%,1
	}	
jcdd:
emujchk= 
emujchk1= 
emujchk2= 
emujchk3= 
StringSplit,emujchk,JOYCORE,.
if (emujchk2 <> "dll")
	{
	
		;;gosub, %JOYCORE%JOYSave
		return
	}
lkdir= 
IfExist, %inputRemappingDirectory%\%corcfgnam%
	{
		FileCreateDir, %inputRemappingDirectory%\%corcfgnam%
		lkdir= %inputRemappingDirectory%\%corcfgnam%
	}
	else IfNotExist,%inputRemappingDirectory%\%corcfgnam%
		{
			guicontrolget,lkdtmp,,JCFGEDT
			SplitPath,lkdtmp,,lkdir
		}
FileSelectFile,joycfgout,S18,%lkdir%\%corcfgnam%.rmp,Name of Joystick Cfg Remap,*.rmp
if (joycfgout = "")
	{
		guicontrol,enable,JOYCORE
		guicontrol,enable,SAVEJOY
		return
	}
joycfg:= joycfgout
iremp= 1
FileCopy, %joycfg%,%joycfgout%,1
guicontrol,hide,JCFGEDT
;;guicontrol,hide,SaveJOY
JXT=
CLJXT=
guicontrolget,MXUSR,,MXUSR
gosub, AutoDetectJoy
gosub, DedZ
gosub, JoyDriver
gosub, AllMenu
;input_duty_cycle
gosub, InputDrv
gosub, MaxUsers
gosub, SwapOKC
gosub, KeyboardGamepad
;keyboard_gamepad_mapping_type

Loop, Parse, INPKND,|
	{	
		
		INPKVR= %A_LoopField%
		
		if (INPKVR= "J")
			{
				JXT= btn
				CLJXT= _btn
			}
		if (INPKVR= "AXIS")
			{
				JXT= axis
				CLJXT= _axis
			}
	Loop, Parse, PLAYERSET,|
		{
			if (A_LoopField <= MXUSR)
				{
					PLAYERNUM= %A_LoopField%
					inpdvn= % inputDevicep%PLAYERNUM%
					if (inpdvn = "")
						{
							inpdvn= 0
						}
					inpmpi= % inputplayer%PLAYERNUM%mouseindex
					inpjpi= % inputplayer%PLAYERNUM%joypadindex
					if (inpjpi = "")
						{
							inpjpi:= PLAYERNUM+1
						}
					gosub, DpadMode
					iniwrite, "%inpdvn%",%joycfg%,OPTIONS,input_device_p%PLAYERNUM%
					iniwrite, "%inpmpi%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_mouse_index
					iniwrite, "%inpjpi%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_joypad_index
																						
					Loop, parse,joyiterate,|
						{
							slcc1= 
							slcc2= 
							slcc3= 
							slcc4= 
							slcc5= 
							stringsplit, slcc, A_LoopField,_
							GUIVL= % %INPKVR%%PLAYERNUM%%slcc1%%slcc2%%slcc3%%slcc4%%slcc5%%JXT%
							if (GUIVL = "")
								{
									GUIVL= nul
								}
							iniWrite, "%GUIVL%",%joycfg%,OPTIONS,input_player%PLAYERNUM%%A_LoopField%%CLJXT%
							SB_SetText(" " GUIVL " "input_player . PLAYERNUM . A_LoopField . CLJXT " ")
						}
				}		
		}
	}
Loop, parse,hkiterate,|
	{
		slcc1= 
		slcc2= 
		slcc3= 
		slcc4= 
		slcc5= 
		stringsplit, slcc, A_LoopField,_
		GUIVL= % %slcc1%%slcc2%%slcc3%%slcc4%%slcc5%%JXT%
		if (GUIVL = "")
			{
				GUIVL= nul
			}
		iniWrite, "%GUIVL%",%joycfg%,OPTIONS,%A_LoopField%%CLJXT%
		SB_SetText(" " GUIVL " "A_LoopField . CLJXT " ")
	}	
SB_SetText(" " corcfgnam " remapping file created")
gosub, MakeSpace
guicontrol,enable,JOYCORE
guicontrol,enable,SAVEJOY
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;    RA KB/Joy Display Toggle    ;;;;;;;;;;;;;;;;;;

HideInpBut:
guicontrol, hide, LTRIGIN
guicontrol, hide, LBUMPIN
guicontrol, hide, RTRIGIN
guicontrol, hide, RBUMPIN
guicontrol, hide, LSTICKUPIN
guicontrol, hide, LSTICKLFTIN
guicontrol, hide, LSTICKRTIN
guicontrol, hide, LSTICKDWNIN
guicontrol, hide, LSTICKBUTIN
guicontrol, hide, RSTICKUPIN
guicontrol, hide, RSTICKLFTIN
guicontrol, hide, RSTICKRTIN
guicontrol, hide, RSTICKDWNIN
guicontrol, hide, RSTICKBUTIN
guicontrol, hide, DPADDWNIN
guicontrol, hide, DPADUPIN
guicontrol, hide, DPADLFTIN
guicontrol, hide, DPADRTIN
guicontrol, hide, SLCTBUTIN
guicontrol, hide, STRTBUTIN
guicontrol, hide, YBUTIN
guicontrol, hide, XBUTIN
guicontrol, hide, BBUTIN
guicontrol, hide, ABUTIN
guicontrol, hide, INPBUTIN
guicontrol, hide, TURBOIN
return

ShowInpBut:
guicontrol, Show, LTRIGIN
guicontrol, Show, LBUMPIN
guicontrol, Show, RTRIGIN
guicontrol, Show, RBUMPIN
guicontrol, Show, LSTICKUPIN
guicontrol, Show, LSTICKLFTIN
guicontrol, Show, LSTICKRTIN
guicontrol, Show, LSTICKDWNIN
guicontrol, Show, LSTICKBUTIN
guicontrol, Show, RSTICKUPIN
guicontrol, Show, RSTICKLFTIN
guicontrol, Show, RSTICKRTIN
guicontrol, Show, RSTICKDWNIN
guicontrol, Show, RSTICKBUTIN
guicontrol, Show, DPADDWNIN
guicontrol, Show, DPADUPIN
guicontrol, Show, DPADLFTIN
guicontrol, Show, DPADRTIN
guicontrol, Show, SLCTBUTIN
guicontrol, Show, STRTBUTIN
guicontrol, Show, YBUTIN
guicontrol, Show, XBUTIN
guicontrol, Show, BBUTIN
guicontrol, Show, ABUTIN
guicontrol, Show, INPBUTIN
guicontrol, Show, TURBOIN
return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   
;{;;;;;;;;;;;;;    RA Joy Feedback Buttons    ;;;;;;;;;;;;;;;;
TURBOIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
TURBOIN=  %JOYCOLLECT%
if (TURBO <> "")
	{
		guicontrol,,TRBCMB,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" JOYCOLLECT ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_turbo_btn
gosub, MakeSpace
return
LTRGIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LTRIGIN=  %JOYCOLLECT%
if (LTRIGIN <> "")
	{
guicontrol,,l2,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" JOYCOLLECT ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l2_btn
gosub, MakeSpace
return
LBMPIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LBUMPIN=  %JOYCOLLECT%
if (LBUMPIN <> "")
	{
	guicontrol,,L, %JOYCOLLECT%
	}
SB_SetText(" JOYCOLLECT ")	
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_btn
gosub, MakeSpace
return
RTRGIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RTRIGIN= %JOYCOLLECT%
if (RTRIGIN <> "")
	{
	guicontrol,,r2,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r2_btn
gosub, MakeSpace
	return
RBMPIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RBUMPIN= %JOYCOLLECT%
if (RBUMPIN <> "")
	{
	guicontrol,,R,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_btn
gosub, MakeSpace
return
LSTUIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LSTICKUPIN= %JOYCOLLECT%
if (LSTICKUPIN <> "")
	{
	guicontrol,,LYPlus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_y_plus_btn
gosub, MakeSpace
return
LSTLIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LSTICKLFTIN= %JOYCOLLECT%
if (LSTICKLFTIN <> "")
	{
	guicontrol,,LXMinus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_x_minus_btn
gosub, MakeSpace
return
LSTRIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LSTICKRTIN= %JOYCOLLECT%
if (LSTICKRTIN <> "")
	{
	guicontrol,,LXPlus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_x_plus_btn
gosub, MakeSpace
return
LSTDIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LSTICKDWNIN= %JOYCOLLECT%
if (LSTICKDWNIN <> "")
	{
	guicontrol,,LYMinus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_y_minus_btn
gosub, MakeSpace
return
LSTBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
LSTICKBUTIN= %JOYCOLLECT%
if (LSTICKBUTIN <> "")
	{
	guicontrol,,l3,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l3_btn
gosub, MakeSpace
return
RSTUIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RSTICKUPIN= %JOYCOLLECT%
if (RSTICKUPIN <> "")
	{
	guicontrol,,RYPlus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_y_plus_btn
gosub, MakeSpace
return
RSTLIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RSTICKLFTIN= %JOYCOLLECT%
if (RSTICKLFTIN <> "")
	{
	guicontrol,,RXMinus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_x_minus_btn
gosub, MakeSpace
return
RSTRIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RSTICKRTIN= %JOYCOLLECT%
if (RSTICKRTIN <> "")
	{
	guicontrol,,RXPlus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_x_plus_btn
gosub, MakeSpace
return
RSTDIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RSTICKDWNIN= %JOYCOLLECT%
if (RSTICKDWNIN <> "")
	{
	guicontrol,,RYMinus,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_y_minus_btn
gosub, MakeSpace
return
RSTBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
RSTICKBUTIN= %JOYCOLLECT%
if (RSTICKBUTIN <> "")
	{
	guicontrol,,r3,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r3_btn
gosub, MakeSpace
return
DPDDIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
DPADDWNIN= %JOYCOLLECT%
if (DPADDWNIN <> "")
	{
	guicontrol,,down,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_down_btn
gosub, MakeSpace
return
DPDUIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
DPADUPIN= %JOYCOLLECT%
if (DPADUPIN <> "")
	{
	guicontrol,,up,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_up_btn
gosub, MakeSpace
return
DPDLIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
DPADLFTIN= %JOYCOLLECT%
if (DPADLFTIN <> "")
	{
	guicontrol,,left,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_left_btn
gosub, MakeSpace
return
DPDRIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
DPADRTIN= %JOYCOLLECT%
if (DPADRTIN <> "")
	{
	guicontrol,,right,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_right_btn
gosub, MakeSpace
return
SLCTBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
SLCTBUTIN= %JOYCOLLECT%
if (SLCTBUTIN <> "")
	{
	guicontrol,,select,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_select_btn
gosub, MakeSpace
return
STRTBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
STRTBUTIN= %JOYCOLLECT%
if (STRTBUTIN <> "")
	{
	guicontrol,,start,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_start_btn
gosub, MakeSpace
return
YBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
YBUTIN= %JOYCOLLECT%
if (YBUTIN <> "")
	{
	guicontrol,,Y,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_Y_btn
gosub, MakeSpace
return
XBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
XBUTIN= %JOYCOLLECT%
if (XBUTIN <> "")
	{
	guicontrol,,X,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_X_btn
gosub, MakeSpace
return
BBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
BBUTIN= %JOYCOLLECT%
if (BBUTIN <> "")
	{
	guicontrol,,B,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_B_btn
gosub, MakeSpace
return
ABIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
ABUTIN= %JOYCOLLECT%
if (ABUTIN <> "")
	{
	guicontrol,,A,|%JOYCOLLECT%||%JOYSET%
	}
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_A_btn
gosub, MakeSpace
return
INPBIN:
SB_SetText(" Waiting for input ")
gosub, GetJoystickInput
INPBUTIN= %JOYCOLLECT%
Loop, Parse, hkiterate,|
	{	
		INPSP= 
		INPSP1= 
		INPSP2= 
		INPSP3= 
		INPSP4= 
		INPSP5= 
		INPSP6= 
		StringSplit, INPSP,A_LoopField,_ `n
		   hkpsp= %INPSP1%%INPSP2%%INPSP3%%INPSP4%%INPSP5%%INPSP6%
			if (hkpsp= SlctdCtrl)
				{
					INPUTHK= %A_LoopField%
					gosub writehk
				}	
	}	
if (INPBUTIN <> "")
	{
	guicontrol,,HKEYCB,|%JOYCOLLECT%||%JOYSET%
	}	
SB_SetText(" ")
iniwrite, "%JOYCOLLECT%",%joycfg%,OPTIONS,%INPUTHK%_btn
gosub, MakeSpace
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    RA Joy Input Procedures    ;;;;;;;;;;;;;;;;;;

GetJoystickInput:
JoystickNumber:= PLAYERNUM
if JoystickNumber <= 0
{
	Loop 16
	{
		GetKeyState, JoyName, %A_Index%JoyName
		if JoyName <>
		{
			JoystickNumber = %A_Index%
			break
		}
	}
	if JoystickNumber <= 0
	{
		MsgBox The system does not appear to have any joysticks.
		
	}
}

SetFormat, float, 03  
GetKeyState, joy_buttons, %JoystickNumber%JoyButtons
GetKeyState, joy_name, %JoystickNumber%JoyName
GetKeyState, joy_info, %JoystickNumber%JoyInfo
Loop
{
	buttons_down =
	Loop, %joy_buttons%
	{
		GetKeyState, joy%a_index%, %JoystickNumber%joy%a_index%
		if joy%a_index% = D
			buttons_down = %buttons_down%%a_space%%a_index%
	}
	GetKeyState, joyx, %JoystickNumber%JoyX
	axis_info = X%joyx%
	GetKeyState, joyy, %JoystickNumber%JoyY
	axis_info = %axis_info%%a_space%%a_space%Y%joyy%
	IfInString, joy_info, Z
	{
		GetKeyState, joyz, %JoystickNumber%JoyZ
		axis_info = %axis_info%%a_space%%a_space%Z%joyz%
	}
	IfInString, joy_info, R
	{
		GetKeyState, joyr, %JoystickNumber%JoyR
		axis_info = %axis_info%%a_space%%a_space%R%joyr%
	}
	IfInString, joy_info, U
	{
		GetKeyState, joyu, %JoystickNumber%JoyU
		axis_info = %axis_info%%a_space%%a_space%U%joyu%
	}
	IfInString, joy_info, V
	{
		GetKeyState, joyv, %JoystickNumber%JoyV
		axis_info = %axis_info%%a_space%%a_space%V%joyv%
	}
	IfInString, joy_info, P
	{
		GetKeyState, joyp, %JoystickNumber%JoyPOV
		axis_info = %axis_info%%a_space%%a_space%POV%joyp%
	}
if (setup = "")
	{
	gosub, SETUPJOYINPUT
	}
if (buttons_down <> "")
	{
		JOYCOLLECT:= buttons_down-1
		break
	}
inputparse1=
inputparse2=
inputparse3=
inputparse4=
inputparse5=
inputparse6=
stringsplit, inputparse, axis_info, %A_Space%, X Y Z R U POV
if (inputparse1 > lstkxvarianceA)
	{
		JOYCOLLECT= +0
		break
	}
	
if (inputparse1 <  lstkxvarianceB)
	{
		JOYCOLLECT= \-0
		break
	}
	
if (inputparse3 > lstkyvarianceA)
	{
		JOYCOLLECT= +1
		break
	}
	
if (inputparse3 <  lstkyvarianceB)
	{
		JOYCOLLECT= \-1
		break
	}
	
if (inputparse5 >  trigvarianceA)
	{
		JOYCOLLECT= +5
		break
	}
	
if (inputparse5 <  trigvarianceB)
	{
		JOYCOLLECT= +4
		break
	}
	
if (inputparse7 > rstkxvarianceA)
	{
		JOYCOLLECT= +3
		break
	}
	
if (inputparse7 <  rstkxvarianceB)
	{
		JOYCOLLECT= \-3
		break
	}
	
if (inputparse9 > rstkyvarianceA)
	{
		JOYCOLLECT= +2
		break
	}
	
if (inputparse9 < rstkyvarianceB)
	{
		JOYCOLLECT= \-2
		break
	}
	if (inputparse11 > 22501)
	{
		JOYCOLLECT= h0left
		break
	}
	if (inputparse11 > 13501)
	{
		JOYCOLLECT= h0down
		break
	}
	if (inputparse11 > 4499)
	{
		JOYCOLLECT= h0right
		break
	}
	if (inputparse11 > -1)
	{
		JOYCOLLECT= h0up
		break
	}
	
}
return

SETUPJOYINPUT:
JOYCOLLECT=
blockinput, on
stringsplit, axisparse, axis_info, %A_Space%, X Y Z R U POV
LStickX = %axisparse1%
LStickY = %axisparse3%
Triggers = %axisparse5%
RStickX = %axisparse7%
RStickY = %axisparse9%
lstkxvarianceA:= LStickX+12
lstkxvarianceB:= LStickX-12
lstkyvarianceA:= LStickY+12
lstkyvarianceB:= LStickY-12
trigvarianceA:= Triggers+12
trigvarianceB:= Triggers-12
rstkxvarianceA:= RStickX+12
rstkxvarianceB:= RStickX-12
rstkyvarianceA:= RStickY+12
rstkyvarianceB:= RStickY-12
setup= 1
blockinput, off
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    RA Joy Checkboxes    ;;;;;;;;;;;;;;;;;;;;;;;;;;;

AllMenu:
gui, submit, nohide
if (AUM =0)
	{
		allUsersControlMenu= false
	}
if (AUM= 1)
	{
		allUsersControlMenu= true
	}
IniWrite, "%allUsersControlMenu%", %joycfg%,OPTIONS,all_users_control_menu
gosub, MakeSpace
return

KeyboardGamepad:
gui, submit, nohide
if (KBGP = 1)
	{
		keyboardGamepadEnable= true
	}	
if (KBGP = 0)
	{
		keyboardGamepadEnable= false
	}	
	IniWrite, "%keyboardGamepadEnable%", %joycfg%,OPTIONS,keyboard_gamepad_enable
gosub, MakeSpace
return

SwapOKC:
gui,submit,nohide
guicontrolget,SWAPOKC
menuSwapOkCancelButtons= false
if (SWAPOKC = 1)
	{
		menuSwapOkCancelButtons= true
	}
iniwrite, "%menuSwapOkCancelButtons%",%joycfg%,OPTIONS,menu_swap_ok_cancel_buttons
gosub, MakeSpace
return

AutoDetectJoy:
gui, submit, nohide
if (ADJS = 0)
	{
		inputAutodetectEnable= false
	}
if (ADJS = 1)
	{
		inputAutodetectEnable= true
	}	
	IniWrite, "%inputAutodetectEnable%", %joycfg%,OPTIONS,input_autodetect_enable
gosub, MakeSpace
return

RemapBinds:
gui, submit, nohide
if (REMPB = 1)
	{
		inputRemapBindsEnable= true
		guicontrol,enable,JOYCORE
		guicontrol,enable,JCFGADD
		guicontrol,enable,SAVEJOY
	}	
if (REMPB = 0)
	{
		inputRemapBindsEnable= false
		guicontrol,disable,JOYCORE
		guicontrol,disable,JCFGADD
		guicontrol,disable,SAVEJOY
		guicontrol,,JOYCORE,|Global||%corelist%
		gosub, JoyCore
	}	
	IniWrite, "%inputRemapBindsEnable%", %joycfg%,OPTIONS,input_remap_binds_enable
gosub, MakeSpace
return

Polling:
gui,submit,nohide
guicontrolget,POLLING,,POLLING
if (POLLING = "Early")
	{
		inputPollTypeBehavior= 0
	}
if (POLLING = "Normal")
	{
		inputPollTypeBehavior= 1
	}
if (POLLING = "Late")
	{
		inputPollTypeBehavior= 2
	}
iniwrite, "%inputPollTypeBehavior%",%joycfg%,OPTIONS,input_poll_type_behavior
return

UnifMenu:
gui,submit,nohide
menuUnifiedControls= false
if (UNIFMENU = 1)
	{
		menuUnifiedControls= true
	}
iniwrite, "%menuUnifiedControls%",%joycfg%,OPTIONS,menu_unified_controls
gosub, MakeSpace
return

Turbop:
gui,submit,nohide
guicontrolget,TURBOP,,TURBOP
iniwrite, "%TURBOP%",%joycfg%,OPTIONS,input_turbo_period
return

RmpLoad:
gui,submit,nohide
autoremapsenable= false
guicontrolget,RMPLOAD,,RMPLOAD
if (RMPLOAD = 1)
	{
		autoremapsenable= true
	}
IniWrite, "%autoremapsenable%",%joycfg%,OPTIONS,auto_remaps_enable
return

DutyCycle:
gui,submit,nohide
guicontrolget,DUTYCYCLE,,DUTYCYCLE
iniwrite, "%DUTYCYCLE%",%joycfg%,OPTIONS,input_duty_cycle
return

DpadMode:
gui, submit, nohide
guicontrolget,ANLDP,,ANLDP
if (ANLDP = 1)
	{
		DPADM%PLAYERNUM%= 1
		DpadMode= 1
		inputPlayer%PLAYERNUM%analogDpadMode= 1
	}
if (ANLDP = 0)
	{
		DPADM%PLAYERNUM%= 0
		DpadMode= 0
		inputPlayer%PLAYERNUM%analogDpadMode= 0
	}
	IniWrite, "%DpadMode%", %joycfg%,OPTIONS,input_player%PLAYERNUM%_analog_dpad_mode
gosub, MakeSpace
return


MouseIndex:
gui,submit,nohide
guicontrolget,MOUSEIND,,MOUSEIND
Plyrindtmp= 3
guicontrolget, JPINDVAR,,PLAYERN
MOUSEIND%PLAYERNUM%= %MOUSEIND%	
inputPlayer%PLAYERNUM%MouseIndex= %MOUSEIND%
IniWrite, "%MOUSEIND%", %joycfg%,OPTIONS,input_player%PLAYERNUM%_mouse_index
gosub, MakeSpace
return

JoypadIndex:
gui, submit, nohide
guicontrolget,JOYIND, ,JOYIND
guicontrol,,INDWRN, Config Hints
Plyrindtmp= 3
guicontrolget, JPINDVAR,,PLAYERN
if (PLAYERNUM= 2)
	{
	Plyrindtmp= 1
	}
if (JOYIND = Plyrindtmp)
	{
		guicontrol,,INDWRN, Players should have exlusive joystick index numbers
	}
JOYIND%PLAYERNUM%= %JOYIND%
inputPlayer%PLAYERNUM%JoypadIndex= %JOYIND%
	IniWrite, "%JOYIND%", %joycfg%,OPTIONS,input_player%PLAYERNUM%_joypad_index
gosub, MakeSpace
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    RA Joy DDLs     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

MaxUsers:
gui, submit, nohide
guicontrolget, MXUSR,,MXUSR
IniWrite, "%MXUSR%",%joycfg%,OPTIONS,input_max_users
gosub, MakeSpace
return

GamepadCombo:
gui, submit, nohide
if (MGPC = 1)
	{
		inputMenuToggleGamepadCombo= 1
		guicontrol, enable,DSPLGC
		guicontrol,,DSPLGC, Down + L1 + R1 	
	}
if (MGPC = 2)
	{
		guicontrol, enable,DSPLGC
		inputMenuToggleGamepadCombo= 2
		guicontrol,,DSPLGC, L3 + R3
	}
if (MGPC = 3)
	{
		guicontrol, enable,DSPLGC
		inputMenuToggleGamepadCombo= 3
		guicontrol,,DSPLGC, L1 + R1 + Start + Select
	}
if (MGPC = 0)
	{
		guicontrol, Disable,DSPLGC
		inputMenuToggleGamepadCombo= 0
		guicontrol,,DSPLGC, None
	}
	IniWrite, "%inputMenuToggleGamepadCombo%", %joycfg%,OPTIONS,input_menu_toggle_gamepad_combo
gosub, MakeSpace
return

PlyrDrpDwn:
CLJXT=_btn
JXT=btn
JSTSET= %JOYSET%
if (PLYRTYP = "KB")
	{
		JSTSET = %KBSET%
		CLJXT= 
		JXT= 
	}
if (PLYRTYP = "AXIS")
	{
		CLJXT= _axis
		JXT= axis
	}
gui, submit, nohide
guicontrolget, PLAYERNUM, ,PLAYERN
jindxtmp= % JOYIND%PLAYERNUM%
mindxtmp= % MOUSEIND%PLAYERNUM%
guicontrol, ,MOUSEIND, |%mindxtmp%||0|1|2|3|4|5|6|7|8
guicontrol, ,JOYIND, |%jindxtmp%||0|1|2|3|4|5|6|7|8
jdpdtmp= % inputPlayer%PLAYERNUM%analogDpadMode
guicontrol, ,ANLDP, %jdpdtmp%
guicontrolget, curHK,, HKEYDD
hktmp= % %curHK%
guicontrol,,HKEYCB, |%hktmp%||%JSTSET%
JoyNT:
Loop, parse,joyiterate,|
	{
		slcc1= 
		slcc2= 
		slcc3= 
		slcc4= 
		slcc5= 
		stringsplit, slcc, A_LoopField,_
		iniread,JOYVL,%joycfg%,OPTIONS,input_player%PLAYERNUM%%A_LoopField%%CLJXT%
		if (JOYVL = "")
			{
				JOYVL= nul
			}
		if (JOYVL = "ERROR")
			{
				JOYVL= nul
			}	
			 GuiControl, ,%slcc1%%slcc2%%slcc3%%slcc4%%slcc5%, |%JOYVL%||%JSTSET%
	}
return

hkDrpDwn:
gui, submit, nohide
JXT= 
CLJXT= 
JSTSET= %KBSET%
if (PLYRTYP = "J")
	{
		JXT=_btn
		CLJXT=btn
		JSTSET= %JOYSET%
	}
updtv= % %HKEYDD%
if (updtv = "")
	{
		updtv= nul
	}

guicontrol,,HKEYCB, |%updtv%||%JSTSET%
SB_SetText(" " HKEYDD " is now " updtv " ") 
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    RA Joy Radio Buttons     ;;;;;;;;;;;;;;;;;;;;;;


PlayerType:
gui, submit, nohide
PLYRTYP= KB
gosub, HideInpBut
guicontrolget, JSW,, JSW
if (JSW = 1)
	{
		PLYRTYP= J
		gosub, ShowInpBut
	}
gui, submit, nohide
gosub, PlyrDrpDwn
return


JoyDriver:
gui, submit, nohide
if (JHIDDRV = 1)
	{
		inputJoypadDriver= hid
	}
if (JXINDRV = 1)
	{
		inputJoypadDriver= xinput
	}
if (JDINDRV = 1)
	{
		inputJoypadDriver= dinput
	}
if (JSDLDRV = 1)
	{
		inputJoypadDriver= sdl
	}
iniwrite, "%inputJoypadDriver%",%joycfg%,OPTIONS,input_joypad_driver
gosub, MakeSpace
return

InputDrv:
gui, submit, nohide
if (IDDINP= 1)
	{
		inputDriver= dinput
	}
if (IDSDLINP= 1)
	{
		inputDriver= sdl2
	}
if (IDRAW= 1)
	{
		inputDriver= raw
	}
iniwrite, "%inputDriver%",%joycfg%,OPTIONS,input_driver
gosub, MakeSpace
return



;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;   RA joy Slider    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

DedZ:
gui,submit,nohide
guicontrolget, DEDZ,,DEDZ
DEDZM:= (DEDZ / 100000)
inputAxisThreshold= %DEDZM%
guicontrol,,DEDZTXT, 0.%DEDZ%
iniwrite, "%inputAxisThreshold%",%joycfg%,OPTIONS,input_axis_threshold
gosub, MakeSpace
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;    RA Joy ComboBoxes     ;;;;;;;;;;;;;;;;;;;;;;;

HotkeyWrite:
gui, submit, nohide
guicontrolget, SlctdCtrl,, HKEYDD
JXT= 
CLJXT= 
if (PLYRTYP = "J")
	{
		JXT=_btn
		CLJXT=btn
	}
if (PLYRTYP = "AXIS")
	{
		JXT= _axis
		CLJXT= axis
	}
Loop, Parse, hkiterate,|
	{	
		INPSP= 
		INPSP1= 
		INPSP2= 
		INPSP3= 
		INPSP4= 
		INPSP5= 
		INPSP6= 
		StringSplit, INPSP,A_LoopField,_ `n
		   hkpsp= %INPSP1%%INPSP2%%INPSP3%%INPSP4%%INPSP5%%INPSP6%
			if (hkpsp= SlctdCtrl)
				{
					INPUTHK= %A_LoopField%
					gosub writehk
				}	
	}
gosub, MakeSpace
return

writehk:
%INPSP1%%INPSP2%%INPSP3%%INPSP4%%INPSP5%%INPSP6%%CLJXT%= %HKEYCB%
IniWrite, "%HKEYCB%", %joycfg%,OPTIONS,%INPUTHK%%JXT%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;    RA Joy Ini Writing     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
TrbCmb:
gui,submit,nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%turbo, ,TRBCMB
Slz:= % %PLYRTYP%%PLAYERNUM%turbo
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%turbo
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_turbo%CLJXT%
gosub, MakeSpace
return

RXMinus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%RXMinus, ,RXMinus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%RXMinus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_x_minus%CLJXT%
gosub, MakeSpace
return
LXMinus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%LXMinus, ,LXMinus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%LXMinus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_L_X_Minus%CLJXT%
gosub, MakeSpace
return
r:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%r,,r
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%r
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r%CLJXT%
gosub, MakeSpace
return
l:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%l,,l
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%l
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l%CLJXT%
gosub, MakeSpace
return
RXPlus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%RXplus, ,RXPlus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%RXPlus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_x_plus%CLJXT%
gosub, MakeSpace
return
LYPlus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%LYPlus, ,LYPlus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%LYPlus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_y_plus%CLJXT%
gosub, MakeSpace
return
RYMinus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%RYMinus, ,RYMinus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%RYMinus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_y_minus%CLJXT%
gosub, MakeSpace
return
R3:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%R3, ,R3
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%R3
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r3%CLJXT%
gosub, MakeSpace
return
L3:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%L3, ,L3
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%L3
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l3%CLJXT%
gosub, MakeSpace
return
LYMinus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%LYMinus, ,LYMinus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%LYMinus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_y_minus%CLJXT%
gosub, MakeSpace
return
select:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%select, ,select
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%select
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_select%CLJXT%
gosub, MakeSpace
return
start:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%start, ,start
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%start
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_start%CLJXT%
gosub, MakeSpace
return
up:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%up, ,up
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%up
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_up%CLJXT%
gosub, MakeSpace
return
left:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%left, ,left
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%left
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_left%CLJXT%
gosub, MakeSpace
return
right:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%right, ,right
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%right
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_right%CLJXT%
gosub, MakeSpace
return
down:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%down, ,down
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%down
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_down%CLJXT%
gosub, MakeSpace
return
y:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%y, ,y
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%y
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_y%CLJXT%
gosub, MakeSpace
return
x:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%x, ,x
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%x
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_x%CLJXT%
gosub, MakeSpace
gosub, MakeSpace
return
b:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%b, ,b
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%b
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_b%CLJXT%
gosub, MakeSpace
return
a:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%a, ,a
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%a
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_a%CLJXT%
gosub, MakeSpace
return
LXPlus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%LXPlus, ,LXPlus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%LXPlus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l_x_plus%CLJXT%
gosub, MakeSpace
return
l2:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%l2, ,l2
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%l2
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_l2%CLJXT%
gosub, MakeSpace
return
RYPlus:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%RYPlus, ,RYPlus
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%RYPlus
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r_y_plus%CLJXT%
gosub, MakeSpace
return
r2:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%r2, ,r2
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%r2
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_r2%CLJXT%
gosub, MakeSpace
return
Home:
gui, submit, nohide
guicontrolget, %PLYRTYP%%PLAYERNUM%Home, ,Home
SlctdCtrl= % %PLYRTYP%%PLAYERNUM%Home
IniWrite, "%SlctdCtrl%",%joycfg%,OPTIONS,input_player%PLAYERNUM%_home%CLJXT%
gosub, MakeSpace
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;   Emulator Joystick Mapping   ;;;;;;;;;;;

FusionCTRLS:
EMJTOG:
guicontrol,%emjtog%,emjAGRP
guicontrol,%emjtog%,emjRAD1A
guicontrol,%emjtog%,emjRAD1B
guicontrol,%emjtog%,emjRAD1C
guicontrol,%emjtog%,emjRAD1D
guicontrol,%emjtog%,emjBGRP
guicontrol,%emjtog%,emjRAD2A
guicontrol,%emjtog%,emjRAD2B
guicontrol,%emjtog%,emjRAD2C
guicontrol,%emjtog%,emjCGRP
guicontrol,%emjtog%,emjDGRP
guicontrol,%emjtog%,emjEGRP
guicontrol,%emjtog%,emjFGRP
guicontrol,%emjtog%,emjATXT
guicontrol,%emjtog%,emjBTXT
guicontrol,%emjtog%,emjCTXT
guicontrol,%emjtog%,emjDTXT
guicontrol,%emjtog%,emjETXT
guicontrol,%emjtog%,emjFTXT
guicontrol,%emjtog%,emjGTXT
guicontrol,%emjtog%,emjHTXT
guicontrol,%emjtog%,emjITXT
guicontrol,%emjtog%,emjJTXT
guicontrol,%emjtog%,emjKTXT
guicontrol,%emjtog%,emjLTXT
guicontrol,%emjtog%,emjMTXT
guicontrol,%emjtog%,emJHGRP
guicontrol,%emjtog%,emjNTXT
guicontrol,%emjtog%,emjBUTA
guicontrol,%emjtog%,emjBUTB
guicontrol,%emjtog%,emjOTXT
guicontrol,%emjtog%,emjGGRP
guicontrol,%emjtog%,emjRAD3A
guicontrol,%emjtog%,emjRAD3B
guicontrol,%emjtog%,emjCBA
guicontrol,%emjtog%,emjDDLA
guicontrol,%emjtog%,emjPTXT
guicontrol,%emjtog%,emjDDLB
guicontrol,%emjtog%,emjQTXT
guicontrol,%emjtog%,emjRTXT
guicontrol,%emjtog%,emjDDLC
guicontrol,%emjtog%,emjSTXT
guicontrol,%emjtog%,emjDDLD
guicontrol,%emjtog%,emjCHKA
guicontrol,%emjtog%,emjCHKB
guicontrol,%emjtog%,emjCHKC
guicontrol,%emjtog%,emjCHKD
guicontrol,%emjtog%,emjCHKE
guicontrol,%emjtog%,emjCHKH
guicontrol,%emjtog%,emjTTXT
guicontrol,%emjtog%,emjDDLE
guicontrol,%emjtog%,emjJGRP
guicontrol,%emjtog%,emjUTXT
guicontrol,%emjtog%,emjVTXT
guicontrol,%emjtog%,emjSLDA
guicontrol,%emjtog%,emjCHKF
guicontrol,%emjtog%,emjDDLF
guicontrol,%emjtog%,emjWTXT
guicontrol,%emjtog%,emjIGRP
guicontrol,%emjtog%,emjXTXT
guicontrol,%emjtog%,emjEDTA
guicontrol,%emjtog%,emjUDA
guicontrol,%emjtog%,emjYTXT
guicontrol,%emjtog%,emjEDTB
guicontrol,%emjtog%,emjUDB
guicontrol,%emjtog%,emjCHKG
guicontrol,%emjtog%,emjZTXT

guicontrol,%emjtog%,emjTURBOIN
guicontrol,%emjtog%,emjLTRIGIN
guicontrol,%emjtog%,emjLBUMPIN
guicontrol,%emjtog%,emjRTRIGIN
guicontrol,%emjtog%,emjRBUMPIN
guicontrol,%emjtog%,emjLSTICKUPIN
guicontrol,%emjtog%,emjLSTICKLFTIN
guicontrol,%emjtog%,emjLSTICKRTIN
guicontrol,%emjtog%,emjLSTICKDWNIN
guicontrol,%emjtog%,emjLSTICKBUTIN
guicontrol,%emjtog%,emjRSTICKUPIN
guicontrol,%emjtog%,emjRSTICKLFTIN
guicontrol,%emjtog%,emjRSTICKRTIN
guicontrol,%emjtog%,emjRSTICKDWNIN
guicontrol,%emjtog%,emjRSTICKBUTIN
guicontrol,%emjtog%,emjDPADDWNIN
guicontrol,%emjtog%,emjDPADUPIN
guicontrol,%emjtog%,emjDPADLFTIN
guicontrol,%emjtog%,emjDPADRTIN
guicontrol,%emjtog%,emjSLCTBUTIN
guicontrol,%emjtog%,emjSTRTBUTIN
guicontrol,%emjtog%,emjYBUTIN
guicontrol,%emjtog%,emjXBUTIN
guicontrol,%emjtog%,emjBBUTIN
guicontrol,%emjtog%,emjABUTIN
guicontrol,%emjtog%,emjINPBUTIN
guicontrol,%emjtog%,emjTRBCMB
guicontrol,%emjtog%,emjRXMinus
guicontrol,%emjtog%,emjRYPlus
guicontrol,%emjtog%,emjR
guicontrol,%emjtog%,emjL
guicontrol,%emjtog%,emjRXPlus
guicontrol,%emjtog%,emjRYMinus
guicontrol,%emjtog%,emjR3
guicontrol,%emjtog%,emjL3
guicontrol,%emjtog%,emjLXMinus
guicontrol,%emjtog%,emjLYPlus
guicontrol,%emjtog%,emjLYMinus
guicontrol,%emjtog%,emjLXPlus
guicontrol,%emjtog%,emjselect
guicontrol,%emjtog%,emjstart
guicontrol,%emjtog%,emjup
guicontrol,%emjtog%,emjleft
guicontrol,%emjtog%,emjright
guicontrol,%emjtog%,emjdown
guicontrol,%emjtog%,emjY
guicontrol,%emjtog%,emjX
guicontrol,%emjtog%,emjB
guicontrol,%emjtog%,emjA
guicontrol,%emjtog%,emjl2
guicontrol,%emjtog%,emjr2
guicontrol,%emjtog%,emjHome
return

EmuJoy:
emjtog= Show
rajoytog= Hide
gosub, RAJOYTOG
gosub, EMJTOG
return

mednafenCTRLS:
guicontrol,show,emjCBA
guicontrol,show,emjDDLA
guicontrol,, emjgGRP, Shortcuts
guicontrol,,emjCBA,|keyboard 221|gamepad up+shift|
guicontrol,,emjDDLA,|advance_frame|exit|fast_forward|insert_coin|insert_eject_disk|load_movie|load_state|power|reset|rotate_screen|run_normal|save_movie|save_state|select_disk|slow_forward|state_rewind|state_slot_dec|state_slot_inc|take_scaled_snapshot|take_snapshot|toggle_fps_view|toggle_fs|toggle_grab|toggle_state_rewind|togglecheatactive|togglecheatview|togglenetview
return

mameCTRLS:

;{;;;;;;;;;;;;;;   RETROARCH JOYOPT TOGGLE  ;;;;;;;;

RAJOYTOG:
guicontrol,%rajoytog%,JOYPIC
guicontrol,%rajoytog%,JOYDRVGRP
guicontrol,%rajoytog%,JHIDDRV
guicontrol,%rajoytog%,JDINDRV
guicontrol,%rajoytog%,JXINDRV
guicontrol,%rajoytog%,JSDLDRV
guicontrol,%rajoytog%,INPDRVGRP
guicontrol,%rajoytog%,IDDINP
guicontrol,%rajoytog%,IDSDLINP
guicontrol,%rajoytog%,IDRAW
guicontrol,%rajoytog%,LASTKGRP
guicontrol,%rajoytog%,RASTKGRP
guicontrol,%rajoytog%,DPADGRP

guicontrol,%rajoytog%,CIREMAPGRP
;;guicontrol,%rajoytog%,JOYCORE
;;guicontrol,%rajoytog%,JCFGADD
;;guicontrol,%rajoytog%,JCFGEDT
;;guicontrol,%rajoytog%,SAVEJOY
guicontrol,%rajoytog%,BBUTTXT
guicontrol,%rajoytog%,YBUTTXT
guicontrol,%rajoytog%,XBUTTXT
guicontrol,%rajoytog%,ABUTTXT
guicontrol,%rajoytog%,L3BUTTXT
guicontrol,%rajoytog%,R3BUTTXT
guicontrol,%rajoytog%,LTRIGTXT
guicontrol,%rajoytog%,RTRIGTXT
guicontrol,%rajoytog%,LBUTTXT
guicontrol,%rajoytog%,RBUTTXT
guicontrol,%rajoytog%,HBTNTXT
guicontrol,%rajoytog%,SELECTBUTTXT
guicontrol,%rajoytog%,STARTBUTTXT
guicontrol,%rajoytog%,CFGPLGRP
guicontrol,%rajoytog%,INDWRN
guicontrol,%rajoytog%,RSTPLYR
guicontrol,%rajoytog%,DEFPLCTRLGRP
guicontrol,%rajoytog%,HOTKGRP
guicontrol,%rajoytog%,JSW
guicontrol,%rajoytog%,KSW
guicontrol,%rajoytog%,HKEYCB
guicontrol,%rajoytog%,HKEYDD
guicontrol,%rajoytog%,JYPLTXT
guicontrol,%rajoytog%,PLAYERN
guicontrol,%rajoytog%,MENBUTCMBTXT
guicontrol,%rajoytog%,DSPLGC
guicontrol,%rajoytog%,MGPC
guicontrol,%rajoytog%,MXUSRTXT
guicontrol,%rajoytog%,MXUSR
guicontrol,%rajoytog%,SWAPOKC
guicontrol,%rajoytog%,ADJS
guicontrol,%rajoytog%,REMPB
guicontrol,%rajoytog%,RMPLOAD
guicontrol,%rajoytog%,KBGP
guicontrol,%rajoytog%,AUM
guicontrol,%rajoytog%,JPINDX
guicontrol,%rajoytog%,MOUSEIND
guicontrol,%rajoytog%,JOYIND
guicontrol,%rajoytog%,ANLDZGRP
guicontrol,%rajoytog%,ANLDZTXT
guicontrol,%rajoytog%,DEDZTXT
guicontrol,%rajoytog%,DEDZ
guicontrol,%rajoytog%,UNIFMENU
guicontrol,%rajoytog%,POLLING
guicontrol,%rajoytog%,POLTXT
guicontrol,%rajoytog%,JBLNKGRP
guicontrol,%rajoytog%,TRBPRD
guicontrol,%rajoytog%,TURBOP
guicontrol,%rajoytog%,TURBUD
guicontrol,%rajoytog%,DUTCTXT
guicontrol,%rajoytog%,DUTYCYCLE
guicontrol,%rajoytog%,DUTYUD
guicontrol,%rajoytog%,ANLDP
guicontrol,%rajoytog%,TRBTXT

guicontrol,%rajoytog%,TURBOIN
guicontrol,%rajoytog%,LTRIGIN
guicontrol,%rajoytog%,LBUMPIN
guicontrol,%rajoytog%,RTRIGIN
guicontrol,%rajoytog%,RBUMPIN
guicontrol,%rajoytog%,LSTICKUPIN
guicontrol,%rajoytog%,LSTICKLFTIN
guicontrol,%rajoytog%,LSTICKRTIN
guicontrol,%rajoytog%,LSTICKDWNIN
guicontrol,%rajoytog%,LSTICKBUTIN
guicontrol,%rajoytog%,RSTICKUPIN
guicontrol,%rajoytog%,RSTICKLFTIN
guicontrol,%rajoytog%,RSTICKRTIN
guicontrol,%rajoytog%,RSTICKDWNIN
guicontrol,%rajoytog%,RSTICKBUTIN
guicontrol,%rajoytog%,DPADDWNIN
guicontrol,%rajoytog%,DPADUPIN
guicontrol,%rajoytog%,DPADLFTIN
guicontrol,%rajoytog%,DPADRTIN
guicontrol,%rajoytog%,SLCTBUTIN
guicontrol,%rajoytog%,STRTBUTIN
guicontrol,%rajoytog%,YBUTIN
guicontrol,%rajoytog%,XBUTIN
guicontrol,%rajoytog%,BBUTIN
guicontrol,%rajoytog%,ABUTIN
guicontrol,%rajoytog%,INPBUTIN
guicontrol,%rajoytog%,TRBCMB
guicontrol,%rajoytog%,RXMinus
guicontrol,%rajoytog%,RYPlus
guicontrol,%rajoytog%,R
guicontrol,%rajoytog%,L
guicontrol,%rajoytog%,RXPlus
guicontrol,%rajoytog%,RYMinus
guicontrol,%rajoytog%,R3
guicontrol,%rajoytog%,L3
guicontrol,%rajoytog%,LXMinus
guicontrol,%rajoytog%,LYPlus
guicontrol,%rajoytog%,LYMinus
guicontrol,%rajoytog%,LXPlus
guicontrol,%rajoytog%,select
guicontrol,%rajoytog%,start
guicontrol,%rajoytog%,up
guicontrol,%rajoytog%,left
guicontrol,%rajoytog%,right
guicontrol,%rajoytog%,down
guicontrol,%rajoytog%,Y
guicontrol,%rajoytog%,X
guicontrol,%rajoytog%,B
guicontrol,%rajoytog%,A
guicontrol,%rajoytog%,l2
guicontrol,%rajoytog%,r2
guicontrol,%rajoytog%,Home

return
;};;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;  Emu Joy Option Functions  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
emjRAD1A:
gosub, J%EMUSN%RAD1A
gui, submit, nohide

return

emjRAD1B:
gosub, J%EMUSN%RAD1B
return

emjRAD1C:
gosub, J%EMUSN%RAD1C
return

emjRAD1D:
gosub, J%EMUSN%RAD1D
return

emjRAD2A:
gosub, J%EMUSN%RAD2A
return

emjRAD2B:
gosub, J%EMUSN%RAD2B
return

emjRAD2C:
gosub, J%EMUSN%RAD2C
return

emjRAD3A:
gosub, J%EMUSN%RAD3A
return

emjRAD3B:
gosub, J%EMUSN%RAD3B
return

emjBUTA:
gosub, J%EMUSN%BUTA
return

emjBUTB:
gosub, J%EMUSN%BUTB
return

emjCBA:
gosub, J%EMUSN%CBA
return

emjDDLA:
gosub, J%EMUSN%DDLA
return

emjDDLB:
gosub, J%EMUSN%DDLB
return

emjDDLC:
gosub, J%EMUSN%DDLC
return

emjDDLD:
gosub, J%EMUSN%DDLD
return

emjCHKA:
gosub, J%EMUSN%CHKA
return

emjCHKB:
gosub, J%EMUSN%CHKB
return

emjCHKC:
gosub, J%EMUSN%CHKC
return

emjCHKD:
gosub, J%EMUSN%CHKD
return

emjCHKE:
gosub, J%EMUSN%CHKE
return

emjDDLE:
gosub, J%EMUSN%DDLE
return

emjSLDA:
gosub, J%EMUSN%SLDA
return

emjCHKF:
gosub, J%EMUSN%CHKF
return

emjDDLF:
gosub, J%EMUSN%DDLF
return

emjEDTA:
gosub, J%EMUSN%EDTA
return

emjUDA:
gosub, J%EMUSN%UDA
return

emjEDTB:
gosub, J%EMUSN%EDTB
return

emjUDB:
gosub, J%EMUSN%DB
return

emjCHKG:
gosub, J%EMUSN%CHKG
return

emjCHKH:
gosub, J%EMUSN%CHKH
return
;};;;;;;;;;;;;;;;

;{;;;;;;;;;   Emu Joy Button Functions  ;;;;;;;;;;;;;;
emjTURBOIN:
gosub, J%EMUSN%TURBOIN
return

emjLTRIGIN:
gosub, J%EMUSN%LTRIGIN
return

emjLBUMPIN:
gosub, J%EMUSN%LBUMPIN
return

emjRTRIGIN:
gosub, J%EMUSN%RTRIGIN
return

emjRBUMPIN:
gosub, J%EMUSN%RBUMPIN
return

emjLSTICKUPIN:
gosub, J%EMUSN%LSTICKUPIN
return

emjLSTICKLFTIN:
gosub, J%EMUSN%LSTICKLFTIN
return

emjLSTICKRTIN:
gosub, J%EMUSN%LSTICKRTIN
return

emjLSTICKDWNIN:
gosub, J%EMUSN%LSTICKDWNIN
return

emjLSTICKBUTIN:
gosub, J%EMUSN%LSTICKBUTIN
return

emjRSTICKUPIN:
gosub, J%EMUSN%RSTICKUPIN
return

emjRSTICKLFTIN:
gosub, J%EMUSN%RSTICKLFTIN
return

emjRSTICKRTIN:
gosub, J%EMUSN%RSTICKRTIN
return

emjRSTICKDWNIN:
gosub, J%EMUSN%RSTICKDWNIN
return

emjRSTICKBUTIN:
gosub, J%EMUSN%RSTICKBUTIN
return

emjDPADDWNIN:
gosub, J%EMUSN%DPADDWNIN
return

emjDPADUPIN:
gosub, J%EMUSN%DPADUPIN
return

emjDPADLFTIN:
gosub, J%EMUSN%DPADLFTIN
return

emjDPADRTIN:
gosub, J%EMUSN%DPADRTIN
return

emjSLCTBUTIN:
gosub, J%EMUSN%SLCTBUTIN
return

emjSTRTBUTIN:
gosub, J%EMUSN%STRTBUTIN
return

emjYBUTIN:
gosub, J%EMUSN%YBUTIN
return

emjXBUTIN:
gosub, J%EMUSN%XBUTIN
return

emjBBUTIN:
gosub, J%EMUSN%BBUTIN
return

emjABUTIN:
gosub, J%EMUSN%ABUTIN
return

emjINPBUTIN:
gosub, J%EMUSN%INPBUTIN
return

emjTRBCMB:
gosub, J%EMUSN%TRBCMB
return

emjRXMinus:
gosub, J%EMUSN%RXMinus
return

emjRYPlus:
gosub, J%EMUSN%RYPlus
return

emjR:
gosub, J%EMUSN%R
return

emjL:
gosub, J%EMUSN%L
return

emjRXPlus:
gosub, J%EMUSN%RXPlus
return

emjRYMinus:
gosub, J%EMUSN%RYMinus
return

emjR3:
gosub, J%EMUSN%R3
return

emjL3:
gosub, J%EMUSN%L3
return

emjLXMinus:
gosub, J%EMUSN%LXMinus
return

emjLYPlus:
gosub, J%EMUSN%LYPlus
return

emjLYMinus:
gosub, J%EMUSN%LYMinus
return

emjLXPlus:
gosub, J%EMUSN%LXPlus
return

emjselect:
gosub, J%EMUSN%select
return

emjstart:
gosub, J%EMUSN%start
return

emjup:
gosub, J%EMUSN%up
return

emjleft:
gosub, J%EMUSN%left
return

emjright:
gosub, J%EMUSN%right
return

emjdown:
gosub, J%EMUSN%down
return

emjY:
gosub, J%EMUSN%Y
return

emjX:
gosub, J%EMUSN%X
return

emjB:
gosub, J%EMUSN%B
return

emjA:
gosub, J%EMUSN%A
return

emjl2:
gosub, J%EMUSN%l2
return

emjr2:
gosub, J%EMUSN%r2
return

emjHome:
gosub, J%EMUSN%Home
return

;];;;;;;;;;

MakeSpace:
fileread, var, %joycfg%
var := RegExReplace(var,"(\S)=", "$1 =")
filedelete, %joycfg%
fileappend, %var%, %joycfg%
return

;{;;;;;;;;;;;;;    RESET PLAYER    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
InitializeJoysticks:
Loop, Parse, INPKND,|
	{	
		PLYRTYP= %A_LoopField%
		JSTSET= %KBSET%
		if (PLYRTYP= "J")
			{
				JSTSET= %JOYSET%
			}
		if (PLYRTYP= "AXIS")
			{
				JSTSET= %AXISET%
			}
	Loop, Parse, PLAYERSET,|
		{
			PLAYERNUM= %A_LoopField%
			gosub, PLYRT
		}
	}
INITIAL:= 2
return

CLRPLYR:
gui, submit, nohide
guicontrolget, JSW, , JSW
gosub, PlyrDrpDwn
PLYRTYP= KB
if (JSW= 1)
	{
		PLYRTYP= J
	}

PLYRCLRD:
;{;;;;;;;;;;;;;;;;;;;;;;      Joystick Init Values    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
JRXMinus= nul
JLXMinus= nul
Jr= nul
Jl= nul
JRXPlus= nul
JLYPlus= nul
JRYMinus= nul
JR3= nul
JL3= nul
JLYMinus= nul
Jselect= nul
Jstart= nul
Jup= nul
Jleft= nul
Jright= nul
Jdown= nul
Jy= nul
Jx= nul
Jb= nul
Ja= nul
JLXPlus= nul
Jl2= nul
JRYPlus= nul
Jr2= nul
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;      KB1 init Values     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KBXRXMinus= nul
KBXR= nul
KBXL= nul
KBXRXPlus= nul
KBXLYPlus= nul
KBXRYMinus= nul
KBXLYMinus= nul
KBXLXMinus= nul
KBXselect= nul
KBXstart= nul
KBXup= nul
KBXleft= nul
KBXright= nul
KBXdown= nul
KBXY= nul
KBXX= nul
KBXB= nul
KBXA= nul
KBXLXPlus= nul
KBXL2= nul
KBXRYPlus= nul
KBXR2= nul
KBXR3= nul
KBXL3= nul

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;      KB2 init Values     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KBYRXMinus= nul
KBYLXMinus= nul
KBYR= nul
KBYL= nul
KBYRXPlus= nul
KBYLYPlus= nul
KBYRYMinus= nul
KBYLYMinus= nul
KBYselect= nul
KBYstart= nul
KBYup= nul
KBYleft= nul
KBYright= nul
KBYdown= nul
KBYY= nul
KBYX= nul
KBYB= nul
KBYA= nul
KBYLXPlus= nul
KBYL2= nul
KBYRYPlus= nul
KBYR2= nul
KBYR3= nul
KBYL3= nul

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;      KBZ init Values     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KBZRXMinus= nul
KBZLXMinus= nul
KBZR= nul
KBZL= nul
KBZRXPlus= nul
KBZLYPlus= nul
KBZRYMinus= nul
KBZLYMinus= nul
KBZselect= nul
KBZstart= nul
KBZup= nul
KBZleft= nul
KBZright= nul
KBZdown= nul
KBZY= nul
KBZX= nul
KBZB= nul
KBZA= nul
KBZLXPlus= nul
KBZR2= nul
KBZRYPlus= nul
KBZR2= nul
KBZR3= nul
KBZL3= nul
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
goto, KBJInitd

ResetPlayerJoy:
gui, submit, nohide
guicontrolget, JSW, , JSW
gosub, PlyrDrpDwn
PLYRTYP= KB
if (JSW= 1)
	{
		PLYRTYP= J
	}

PLYRT:
;{;;;;;;;;;;;;;;;;;;;;;;      Joystick Init Values    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
JRXMinus= \-2
JLXMinus= \-0
Jr= 5
Jl= 4
JRXPlus= +2
JLYPlus= \-1
JRYMinus= +3
JR3= 9
JL3= 8
JLYMinus= +1
Jselect= 6
Jstart= 7
Jup= h0up
Jleft= h0left
Jright= h0right
Jdown= h0down
Jy= 3	
Jx= 2
Jb= 0
Ja= 1
JLXPlus= +0
Jl2= +5
JRYPlus= \-3
Jr2= +4
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;      KB1 init Values     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KBXRXMinus= h
KBXR= w
KBXL= q
KBXRXPlus= k
KBXLYPlus= f
KBXRYMinus= j
KBXLYMinus= v
KBXLXMinus= c
KBXselect= rshift
KBXstart= enter
KBXup= up
KBXleft= left
KBXright= right
KBXdown= down
KBXY= s
KBXX= a
KBXB= z
KBXA= x
KBXLXPlus= b
KBXL2= t
KBXRYPlus= u
KBXR2= g
KBXR3= nul
KBXL3= nul
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;      KB2 init Values     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KBYRXMinus= 9
KBYLXMinus= 1
KBYR= keypad3
KBYL= keypad1
KBYRXPlus= 7
KBYLYPlus= p
KBYRYMinus= 8
KBYLYMinus= semicolon
KBYselect= 5
KBYstart= 2
KBYup= keypad8
KBYleft= keypad4
KBYright= keypad6
KBYdown= keypad2
KBYY= pageup
KBYX= home
KBYB= end
KBYA= pagedown
KBYLXPlus= quote
KBYL2= keypad7
KBYRYPlus= 6
KBYR2= keypad9
KBYR3= nul
KBYL3= nul

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;      KBZ init Values     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KBZRXMinus= null
KBZLXMinus= null
KBZR= null
KBZL= null
KBZRXPlus= null
KBZLYPlus= null
KBZRYMinus= null
KBZLYMinus= null
KBZselect= null
KBZstart= null
KBZup= null
KBZleft= null
KBZright= null
KBZdown= null
KBZY= null
KBZX= null
KBZB= null
KBZA= null
KBZLXPlus= null
KBZR2= null
KBZRYPlus= null
KBZR2= null
KBZR3= null
KBZL3= null
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

KBJInitd:
if (PLYRTYP = "J")
	{
		CLJXT= btn
		JXT= _btn
		PLAYERT= 
		guicontrol, ,JOYIND, 0
		guicontrol, ,MOUSEIND, 0
		IniWrite "0",%joycfg%,OPTIONS,input_player%PLAYERNUM%_mouse_index
		IniWrite "0",%joycfg%,OPTIONS,input_player%PLAYERNUM%_joypad_index
		gosub, GamepadResets
		return
	}
if (PLYRTYP = "KB")
	{
		CLJXT= 
		JXT=
	}
if (PLYRTYP = "AXIS")
	{
		CLJXT= axis
		JXT= _axis
	}
if (PLAYERNUM = 1)
	{
		PLAYERT = X
	}
if (PLAYERNUM = 2)
	{	
		PLAYERT = Y
	}	
if (PLAYERNUM > 2)
	{
		PLAYERT = Z
	}
guicontrol, ,MOUSEIND, 0
guicontrol, ,JOYIND, 3
IniWrite "3",%joycfg%,OPTIONS,input_player%PLAYERNUM%_joypad_index
gosub, GamepadResets
return

GamepadResets:
Loop, parse,joyiterate,|
	{
		slcc1= 
		slcc2= 
		slcc3= 
		slcc4= 
		slcc5= 
		stringsplit, slcc, A_LoopField,_
			JOYVL= % %PLYRTYP%%PLAYERT%%slcc1%%slcc2%%slcc3%%slcc4%%slcc5%
		if (JOYVL = "")
			{
				JOYVL= nul
			}
			 GuiControl, ,%slcc1%%slcc2%%slcc3%%slcc4%%slcc5%, |%JOYVL%||%JSTSET%
			 IniWrite, "%JOYVL%",%joycfg%,OPTIONS,input_player%PLAYERNUM%%A_LoopField%%JXT%
	}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;   Mednafen Joy Option Functions   ;;;;;;;;;;;;;;;;;
JMednafenRAD1A:
gui, submit, nohide

return

JMednafenRAD1B:
gui, submit, nohide
return

JMednafenRAD1C:
gui, submit, nohide

return

JMednafenRAD1D:
gui, submit, nohide

return

JMednafenRAD2A:
gui, submit, nohide

return

JMednafenRAD2B:
gui, submit, nohide

return

JMednafenRAD2C:
gui, submit, nohide

return

JMednafenRAD3A:
gui, submit, nohide

return

JMednafenRAD3B:
gui, submit, nohide

return

JMednafenBUTA:
gui, submit, nohide

return

JMednafenBUTB:
gui, submit, nohide

return

JMednafenCBA:
gui, submit, nohide

return

JMednafenDDLA:
gui, submit, nohide

return

JMednafenDDLB:
gui, submit, nohide

return

JMednafenDDLC:
gui, submit, nohide

return

JMednafenDDLD:
gui, submit, nohide

return

JMednafenCHKA:
gui, submit, nohide

return

JMednafenCHKB:
gui, submit, nohide

return

JMednafenCHKC:
gui, submit, nohide

return

JMednafenCHKD:
gui, submit, nohide

return

JMednafenCHKE:
gui, submit, nohide

return

JMednafenDDLE:
gui, submit, nohide

return

JMednafenSLDA:
gui, submit, nohide

return

JMednafenCHKF:
gui, submit, nohide

return

JMednafenDDLF:
gui, submit, nohide

return

JMednafenEDTA:
gui, submit, nohide

return

JMednafenUDA:
gui, submit, nohide

return

JMednafenEDTB:
gui, submit, nohide

return

JMednafenUDB:
gui, submit, nohide

return

JMednafenCHKG:
gui, submit, nohide

return

JMednafenCHKH:
gui, submit, nohide

return
;};;;;;;;;

;{;;;;;;;;   Mednafen Joy Button Functions  ;;;;;;;;;;;;;;;;;
JMednafenTURBOIN:
gui, submit, nohide

return

JMednafenLTRIGIN:
gui, submit, nohide

return

JMednafenLBUMPIN:
gui, submit, nohide

return

JMednafenRTRIGIN:
gui, submit, nohide

return

JMednafenRBUMPIN:
gui, submit, nohide

return

JMednafenLSTICKUPIN:
gui, submit, nohide

return

JMednafenLSTICKLFTIN:
gui, submit, nohide

return

JMednafenLSTICKRTIN:
gui, submit, nohide

return

JMednafenLSTICKDWNIN:
gui, submit, nohide

return

JMednafenLSTICKBUTIN:
gui, submit, nohide

return

JMednafenRSTICKUPIN:
gui, submit, nohide

return

JMednafenRSTICKLFTIN:
gui, submit, nohide

return

JMednafenRSTICKRTIN:
gui, submit, nohide

return

JMednafenRSTICKDWNIN:
gui, submit, nohide

return

JMednafenRSTICKBUTIN:
gui, submit, nohide

return

JMednafenDPADDWNIN:
gui, submit, nohide

return

JMednafenDPADUPIN:
gui, submit, nohide

return

JMednafenDPADLFTIN:
gui, submit, nohide

return

JMednafenDPADRTIN:
gui, submit, nohide

return

JMednafenSLCTBUTIN:
gui, submit, nohide

return

JMednafenSTRTBUTIN:
gui, submit, nohide

return

JMednafenYBUTIN:
gui, submit, nohide

return

JMednafenXBUTIN:
gui, submit, nohide

return

JMednafenBBUTIN:
gui, submit, nohide

return

JMednafenABUTIN:
gui, submit, nohide

return

JMednafenINPBUTIN:
gui, submit, nohide

return

JMednafenTRBCMB:
gui, submit, nohide

return

JMednafenRXMinus:
gui, submit, nohide

return

JMednafenRYPlus:
gui, submit, nohide

return

JMednafenR:
gui, submit, nohide

return

JMednafenL:
gui, submit, nohide

return

JMednafenRXPlus:
gui, submit, nohide

return

JMednafenRYMinus:
gui, submit, nohide

return

JMednafenR3:
gui, submit, nohide

return

JMednafenL3:
gui, submit, nohide

return

JMednafenLXMinus:
gui, submit, nohide

return

JMednafenLYPlus:
gui, submit, nohide

return

JMednafenLYMinus:
gui, submit, nohide

return

JMednafenLXPlus:
gui, submit, nohide

return

JMednafenselect:
gui, submit, nohide

return

JMednafenstart:
gui, submit, nohide

return

JMednafenup:
gui, submit, nohide

return

JMednafenleft:
gui, submit, nohide

return

JMednafenright:
gui, submit, nohide

return

JMednafendown:
gui, submit, nohide

return

JMednafenY:
gui, submit, nohide

return

JMednafenX:
gui, submit, nohide

return

JMednafenB:
gui, submit, nohide

return

JMednafenA:
gui, submit, nohide

return

JMednafenl2:
gui, submit, nohide

return

JMednafenr2:
gui, submit, nohide

return

JMednafenHome:
gui, submit, nohide

return
;};;;;;;;;

;{;;;;;;;;;;                NULL POINTERS         ;;;;;;;;;;;;;;;;;;;
JTURBOIN:
JLTRIGIN:
JLBUMPIN:
JRTRIGIN:
JRBUMPIN:
JLSTICKUPIN:
JLSTICKLFTIN:
JLSTICKRTIN:
JLSTICKDWNIN:
JLSTICKBUTIN:
JRSTICKUPIN:
JRSTICKLFTIN:
JRSTICKRTIN:
JRSTICKDWNIN:
JRSTICKBUTIN:
JDPADDWNIN:
JDPADUPIN:
JDPADLFTIN:
JDPADRTIN:
JSLCTBUTIN:
JSTRTBUTIN:
JYBUTIN:
JXBUTIN:
JBBUTIN:
JABUTIN:
JINPBUTIN:
JTRBCMB:
JRXMinus:
JRYPlus:
JR:
JL:
JRXPlus:
JRYMinus:
JR3:
JL3:
JLXMinus:
JLYPlus:
JLYMinus:
JLXPlus:
Jselect:
Jstart:
Jup:
Jleft:
Jright:
Jdown:
JY:
JX:
JB:
JA:
Jl2:
Jr2:
JHome:
JRAD1A:
JRAD1B:
JRAD1C:
JRAD1D:
JRAD2A:
JRAD2B:
JRAD2C:
JRAD3A:
JRAD3B:
JBUTA:
JBUTB:
JCBA:
JDDLA:
JDDLB:
JDDLC:
JDDLD:
JCHKA:
JCHKB:
JCHKC:
JCHKD:
JCHKE:
JDDLE:
JSLDA:
JCHKF:
JDDLF:
JEDTA:
JUDA:
JEDTB:
JUDB:
JCHKG:
JCHKH:
return
;};;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;    EXTENSION FUNCTIONS     ;;;;;;;;;;;;;;;;;;;;;;;;

ExtensionLookup:
if (ROMDRP = 1)
	{
		goto, DewDrop
	}
if (DDLU = 1)
	{
		iniread,apoa,Assignments.ini,OVERRIDES,
		Loop, Parse, apoa,`n
			{
				appn1= 
				appn2= 
				stringsplit,appn,A_LoopField,=,"
				;"
				if (appn1 = DDLUX)
					{
						ROMSYS= %appn1%
						if appn2 is digit
							{
								iniread, coreselv, Assignments.ini,ASSIGNMENTS,%appn1%
								return
							}
						iniread, coreselv, Assignments.ini,OVERRIDES,%appn1%
						dlx= 
						splitpath,coreselv, , ,dlx
						if (dlx <> "dll")
							{
								APLN= 1
							}
						return				
					}
			}	
		return
	}

DewDrop:	
tstxtn= .%inputext%
iniread,apov,Assignments.ini,OVERRIDES,
Loop, Parse, apov,`n
	{
		appn1= 
		appn2= 
		stringsplit,appn,A_LoopField,=,"
		;"
		if (appn2 <> 0)
			{
				overDD .= appn1 . "|"
				if (appn2 <> 1)
					{
						runadd .="|" . appn2
					}
			}
	}
runlist .= corelist . runadd
iniread,pxtn,Assignments.ini,EXTENSIONS,
Loop, Parse, pxtn,`n
	{
		stringsplit,ovxt,A_LoopField,=,"
		;"
		if (ovxt2 <> "")
			{
				Loop, Parse, ovxt2,|
					{
						if (inputext = A_LoopField)
							{
								OVRD= 1
								OvrExtNum= %ovxt1%
								iniread,OvrExtAs,Assignments.ini,ASSIGNMENTS,%ovxt1%
								iniread,OvrExtSc,Assignments.ini,OVERRIDES,%ovxt1%
								stringright,dllc,OvrExtAs,3
								if (dllc = "dll")
									{
										OVRD= 2
										APLN= 
										coreselv= %OvrExtAs%
										return
									}
									iniread, EPGC,AppParams.ini,%OvrExtSc%,per_game_configurations
									iniread,RunOptions,AppParams.ini,%OvrExtSc%,options
									iniread,RunArgs,AppParams.ini,%OvrExtSc%,arguments
									iniread,RunFrom,AppParams.ini,%OvrExtSc%,run_location
									iniread,omtxt,AppParams.ini,%OvrExtSc%,extension
									SplitPath,OvrExtAs,emuexe,emupth,emuxtn,emuname,emudrv
									stringreplace,RunOptions,RunOptions,[CUSTMOPT],%A_SPACE%%CUSTMOPT%%A_SPACE%,All
									stringreplace,RunArgs,RunArgs,[CUSTMARG],%A_SPACE%%CUSTMARG%%A_SPACE%,All
									stringreplace,RunOptions,RunOptions,[ROMNAME],%romname%,All
									stringreplace,RunOptions,RunOptions,[ROMPATH],%rompth%,All
									stringreplace,RunArgs,RunArgs,[ROMNAME],%romname%,All
									stringreplace,RunArgs,RunArgs,[ROMPATH],%rompth%,All
									stringreplace,RunOptions,RunOptions,[EMUPATH],%emupth%,All
									stringreplace,RunArgs,RunArgs,[EMUPATH],%emupth%,All
									gosub, LNCHAPP
							}
					}
			}
	}
if (tstxtn = ".zip")
	{
		gosub, ZIPOpen
	}
gosub, ExtTables
if (opncor <> "")
	{
		ifexist, %libretrodirectory%\%opncor%_libretro.dll
			{
				coreselv= %opncor%_libretro.dll
			}
	}
if (EXTID = 1)
	{
		coreselv= %cvrv%
		goto, OVRAP
	}	
if (ROMDRP = 1)
	{
		if (coreselv = "")
		{
			CHOSEN= 1
		}
	}
if (DDLU = 1)
	{
		return
	}
if (coreselv = "")
	{
		goto, DDLS
	}
return

DDLS:
nslrt= 
coreselv= 
gui, add, DDL, w220 vUNKDDL gSUBDDL, Run with...||%runlist%
gui, show, ,%tstxtn% file
return

SUBDDL:
cancel= 
gui, submit, nohide
guicontrolget, coreselv,,UNKDDL
if (coreselv = "Run with...")
goto,DDLS

OVRAP:
SplitPath,coreselv,cfn,cod,coe,con,cod
if (coe <> "dll")
	{
        iniread,lpovrd,Assignments.ini,OVERRIDES,
			Loop,Parse,lpovrd,`n
				{
					StringSplit,corsyt, A_LoopField,=,"
					;"
					if (corsyt2 = coreselv)
						{
							emucfgn= %corsyt2%
							mtyp= %corsyt1%
							iniread,OvrExtAs,Assignments.ini,ASSIGNMENTS,%mtyp%
							if (ROMSYS = "")
								{
									ROMSYS= %corsyt1%
								}
						}
				}		
		iniread,EPGC,AppParams.ini,%coreselv%,per_game_configurations
		iniread,RunOptions,AppParams.ini,%coreselv%,options
		iniread,RunArgs,AppParams.ini,%coreselv%,arguments
		iniread,omtxt,AppParams.ini,%coreselv%,extension
		iniread,RunFrom,AppParams.ini,%coreselv%,run_location
		iniread,OMITQ,AppParams.ini,%coreselv%,no_quotes
		iniread,OMITPTH,AppParams.ini,%coreselv%,no_path
		SplitPath,OvrExtAs,emuexe,emupth,emuxtn,emuname,emudrv
		stringreplace,RunOptions,RunOptions,[CUSTMOPT],%A_SPACE%%CUSTMOPT%%A_SPACE%,All
		stringreplace,RunArgs,RunArgs,[CUSTMARG],%A_SPACE%%CUSTMARG%%A_SPACE%,All
		stringreplace,RunOptions,RunOptions,[ROMPATH],%A_SPACE%%rompth%%A_SPACE%,All
		stringreplace,RunArgs,RunArgs,[ROMPATH],%rompth%,All		
		stringreplace,RunOptions,RunOptions,[EMUPATH],%emupth%,All
		stringreplace,RunArgs,RunArgs,[EMUPATH],%emupth%,All
		if (DDRUN = 1)
			{
				Gui,Destroy
			}
		goto, LNCHAPP
	}

goto, LNCH
return


ZipOpen:
FINR= 
FileDelete,romf.ini
ziptmp= %tstxtn%

runwait, %ComSpec% /c "7za.exe l -slt "%romf%" -r " >romf.ini,,hide
ifnotexist, romf.ini
	{
		Return	
	}
zipnum=
Loop, Read, romf.ini
	{
		zipnum+=1
		zipin1= 
		zipin2= 
		stringsplit,zipin,A_LoopReadLine,=,%A_Space%
		if (zipin1 = "Path")
			{
				splrom= %zipin2%
				ziprline:= zipnum
			}
	}
splitpath,splrom,,,tstxtn,romname
tstxtn= .%tstxtn%
FINR= 1
return

OpnAssign:
EXTID= 
ROMSYS= %opnapp%
coreselv= %opncor%_libretro.dll
Loop, Parse, overDD,|
	{
		if (A_LoopField = opnapp)
			{
				iniread,cvrv,Assignments.ini,OVERRIDES,%opnapp%
				EXTID= 1
			}
	}
return

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     EXTENSION TABLES     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ExtTables:
if (romsz < 100000)
{
	goto, ToSZ
}
LGSZ:
if (tstxtn = ".ccd")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".toc")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".iso")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".cdi")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".cdz")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".img")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".gdi")
{
gosub,SEGDCOpen
Return
}
if (tstxtn = ".pbp")
{
gosub,PSPOpen
Return
}
if (tstxtn = ".prx")
{
gosub,PSPOpen
Return
}
if (tstxtn = ".cso")
{
gosub,PSPOpen
Return
}
if (tstxtn = ".ciso")
{
gosub,PSPOpen
Return
}
if (tstxtn = ".jso")
{
gosub,PSPOpen
Return
}
if (tstxtn = ".psp")
{
gosub,PSPOpen
Return
}
if (tstxtn = ".wbfs")
{
gosub,NGCOpen
Return
}
if (tstxtn = ".nrg")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".mdf")
{
gosub,UNKNOpen
Return
}
/*
if (tstxtn = ".7z")
{
gosub,ARCTSTOpen
Return
}
if (tstxtn = ".rar")
{
gosub,ARCTSTOpen
Return
}
if (tstxtn = ".zip")
{
gosub,ARCTSTOpen
return
}
if (tstxtn = ".zip")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".mkv")
{
gosub,VIDOpen
Return
}
if (tstxtn = ".avi")
{
gosub,VIDOpen
Return
}
if (tstxtn = ".mov")
{
gosub,VIDOpen
Return
}
if (tstxtn = ".mpeg")
{
gosub,VIDOpen
Return
}
if (tstxtn = ".mpg")
{
gosub,VIDOpen
Return
}
if (tstxtn = ".mp4")
{
gosub,VIDOpen
Return
}
*/
ToSZ:
if (romsz < 10000)
{
	goto, UNKSZ
}
if (tstxtn = ".ds")
{
gosub,NDSOpen
Return
}
if (tstxtn = ".srl")
{
gosub,NDSOpen
Return
}
if (tstxtn = ".nds")
{
gosub,NDSOpen
Return
}
if (tstxtn = ".nd5")
{
gosub,NDSOpen
Return
}

UNKSZ:
if (tstxtn = ".bin")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".hdf")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".rom")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".adf")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".do")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".po")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".2mg")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".cas")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".xdf")
{
gosub,SHRPX68KOpen
Return
}
if (tstxtn = ".ipf")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".dsk")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".tap")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".dup")
{
gosub,SHRPX68KOpen
Return
}
if (tstxtn = ".nhd")
{
gosub, NPC98Open
Return
}
if (tstxtn = ".thd")
{
gosub, NPC98Open
Return
}
if (tstxtn = ".vhd")
{
gosub, NPC98Open
Return
}
if (tstxtn = ".88d")
{
gosub, UNKOpen
Return
}
if (tstxtn = ".d88")
{
gosub, UNKOpen
Return
}
if (tstxtn = ".dim")
{
	gosub,SHRPX68KOpen
	return
}
if (tstxtn = ".2hd")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".2dd")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".fdi")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".dsd")
{
gosub,UNKOpen
Return
}
if (tstxtn = ".ssd")
{
gosub,UNKOpen
Return
}

MDSZ:
if (tstxtn = ".pal")
{
gosub,N64Open
Return
}
if (tstxtn = ".usa")
{
gosub,N64Open
Return
}
if (tstxtn = ".u64")
{
gosub,N64Open
Return
}
if (tstxtn = ".v64")
{
gosub,N64Open
Return
}
if (tstxtn = ".n64")
{
gosub,N64Open
Return
}
if (tstxtn = ".z64")
{
gosub,N64Open
Return
}
if (tstxtn = ".j64")
{
gosub,JAGOpen
Return
}
if (tstxtn = ".jag")
{
gosub,JAGOpen
Return
}
if (tstxtn = ".adf")
{
gosub,CAMIGOpen
Return
}
if (tstxtn = ".32x")
{
gosub,SG32XOpen
Return
}
if (tstxtn = ".gba")
{
gosub,NGBAOpen
Return
}
if (tstxtn = ".sgb")
{
gosub,NGBAOpen
Return
}
if (tstxtn = ".sgx")
{
gosub,SGFXOpen
Return
}
if (tstxtn = ".smd")
{
gosub,SEGAGOpen
Return
}
if (tstxtn = ".gen")
{
gosub,SEGAGOpen
Return
}
if (tstxtn = ".pco")
{
gosub,SEGAPOpen
Return
}
if (tstxtn = ".md")
{
gosub,SEGAGOpen
Return
}
if (tstxtn = ".sfc")
{
gosub,SFAMOpen
Return
}
if (tstxtn = ".smc")
{
gosub,SNESOpen
Return
}
if (tstxtn = ".bml")
{
gosub,BSNSOpen
Return
}
if (tstxtn = ".pce")
{
gosub,NECXOpen
Return
}

SMSZ:
if (tstxtn = ".ngp")
{
gosub,NEOPKTOpen
Return
}
if (tstxtn = ".ngc")
{
gosub,NEOPKTOpen
Return
}
if (tstxtn = ".npk")
{
gosub,NEOPKTOpen
Return
}
if (tstxtn = ".gg")
{
gosub,SEGGOpen
Return
}
if (tstxtn = ".gb")
{
gosub,NGBOpen
Return
}
if (tstxtn = ".ws")
{
gosub,BWSOpen
Return
}
if (tstxtn = ".msa")
{
gosub,ATSTOpen
Return
}
if (tstxtn = ".st")
{
gosub,ATSTOpen
Return
}
if (tstxtn = ".stx")
{
gosub,ATSTOpen
Return
}
if (tstxtn = ".lnx")
{
gosub,LYNXOpen
Return
}
if (tstxtn = ".sg")
{
gosub,SEG1KOpen
Return
}
if (tstxtn = ".sms")
{
gosub,SEGMSOpen
Return
}
if (tstxtn = ".amiga")
{
gosub,CAMIGOpen
Return
}
if (tstxtn = ".wsc")
{
gosub,BWSCOpen
Return
}
if (tstxtn = ".vec")
{
gosub,VECTXOpen
Return
}
if (tstxtn = ".fds")
{
gosub,NFAMOpen
Return
}
if (tstxtn = ".fam")
{
gosub,NFAMOpen
Return
}
if (tstxtn = ".gcm")
{
gosub,NGCOpen
Return
}
if (tstxtn = ".vb")
{
gosub,NVBOpen
Return
}
if (tstxtn = ".vboy")
{
gosub,NVBOpen
Return
}
if (tstxtn = ".obx")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".xex")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".dcm")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".pro")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".atz")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".xfd")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".atx")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".atr")
{
gosub,AT8HOpen
Return
}
if (tstxtn = ".unf")
{
gosub,NESOpen
Return
}
if (tstxtn = ".nez")
{
gosub,NESOpen
Return
}
if (tstxtn = ".nsf")
{
gosub,NESOpen
Return
}
if (tstxtn = ".nes")
{
gosub,NESOpen
Return
}
if (tstxtn = ".di1")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".di2")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".360")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".720")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".sf7")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".sc")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".ri")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".mx1")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".mx2")
{
gosub,MSXOpen
Return
}
if (tstxtn = ".gbc")
{
gosub,NGBCOpen
Return
}
if (tstxtn = ".a78")
{
gosub,AT78Open
Return
}
if (tstxtn = ".a52")
{
gosub,AT52Open
Return
}
if (tstxtn = ".z26")
{
gosub,AT26Open
Return
}
if (tstxtn = ".a52")
{
gosub,AT52Open
Return
}

TNSZ:
if (tstxtn = ".scummvm")
{
gosub,SCVMOpen
Return
}
if (tstxtn = ".conf")
{
gosub,DOSOpen
Return
}
if (tstxtn = ".cue")
{
gosub,UNKNOpen
Return
}
if (tstxtn = ".png")
{
gosub,IMGOpen
Return
}
if (tstxtn = ".bmp")
{
gosub,IMGOpen
Return
}
if (tstxtn = ".tif")
{
gosub,IMGOpen
Return
}
if (tstxtn = ".svg")
{
gosub,IMGOpen
Return
}
if (tstxtn = ".jpg")
{
gosub,IMGOpen
Return
}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     OPEN TABLES     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

AT26Open:
sysini= AT26
opncor= stella
opnapp= Atari - 2600
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

AT52Open:
sysini= AT52
opncor= atari800
opnapp= Atari - 5200
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

AT78Open:
sysini= AT78
opncor= prosystem
opnapp= Atari - 7800
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

AT8HOpen:
sysini= AT8H
opncor= atari800
opnapp= Atari - 800
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

ATSTOpen:
sysini= ATST
opncor= hatari
opnapp= Atari - ST
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

BSNSOpen:
sysini= BSNS
opncor= bsnes_performance
opnapp= Super Nintendo Entertainment System
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

BWSCOpen:
sysini= BWSC
opncor= mednafen_wswan
opnapp= Bandai - WonderSwan Color
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

BWSOpen:
sysini= BWS
opncor= mednafen_wswan
opnapp= Bandai - WonderSwan
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

CAMIGOpen:
sysini= CAMIG
opncor= puae
opnapp= Commodore - Amiga
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

DOSOpen:
sysini= DOS
opncor= dosbox
opnapp= DOS
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

IMGOpen:
sysini= IMG
opncor= imageviewer
opnapp=
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

JAGOpen:
sysini= JAG
opncor= virtual_jaguar
opnapp= Atari - Jaguar
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

LYNXOpen:
sysini= LYNX
opncor= handy
opnapp= Atari - Lynx
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

MSXOpen:
sysini= MSX
opncor= bluemsx
opnapp= Microsoft - MSX
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

N64Open:
sysini= N64
opncor= ParaLLEl N64
opnapp= Nintendo - Nintendo 64
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NDSOpen:
sysini= NDS
opncor= desmume
opnapp= Nintendo - Nintendo DS
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

N3DSOpen:
sysini= N3DS
opncor= citra
opnapp= Nintendo - Nintendo 3DS
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NDSDOpen:
sysini= NDSD
opncor= desmume
opnapp= Nintendo - Nintendo DS Decrypted
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NECXOpen:
sysini= NECX
opncor= mednafen_pce_fast
opnapp= NEC - PC Engine CD - TurboGrafx CD
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NPC98Open:
sysini= NPC98
opncor= np2kai
opnapp= NEC - PC98
poscor1=
poscor2=
poscor3=
posapp1= 
gosub, OpnAssign
return

NEOPKTOpen:
sysini= NEOPKT
opncor= mednafen_ngp
opnapp= SNK - Neo Geo Pocket
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NESOpen:
sysini= NES
opncor= nestopia
opnapp= Nintendo - Nintendo Entertainment System
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NFAMOpen:
sysini= NFAM
opncor= nestopia
opnapp= Nintendo - Famicom System
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NGBAOpen:
sysini= NGBA
opncor= mgba
opnapp= Nintendo - Game Boy Advance
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NGBCOpen:
sysini= NGBC
opncor= gambatte
opnapp= Nintendo - Game Boy Color
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NGBOpen:
sysini= NGB
opncor= gambatte
opnapp= Nintendo - Game Boy
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return


NGCOpen:
sysini= NGC
opncor= dolphin_launcher
opnapp= Nintendo - GameCube
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

NVBOpen:
sysini= NVB
opncor= mednafen_vb
opnapp= Nintendo - Virtual Boy
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

PSPOpen:
sysini= PSP
opncor= ppsspp
opnapp= Sony - Playstation Portable
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SCVMOpen:
sysini= SCVM
opncor= scummvm
opnapp= ScummVM
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEG1KOpen:
sysini= SEG1K
opncor= genesis_plus_gx
opnapp= Sega - SG-1000
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEGAGOpen:
sysini= SEGAG
opncor= genesis_plus_gx
opnapp= Sega - Mega Drive - Genesis
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEGAPOpen:
sysini= SEGAP
opncor= picodrive
opnapp= Sega - PICO
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEGDCOpen:
sysini= SEGDC
opncor= reicast
opnapp= Sega - Dreamcast
poscor1= redream
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEGCDOpen:
sysini= SEGDC
opncor= genesis_plus_gx
opnapp= Sega - Mega-CD - Sega CD
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEGGOpen:
sysini= SEGG
opncor= genesis_plus_gx
opnapp= Sega - Game Gear=
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SEGMSOpen:
sysini= SEGMS
opncor= genesis_plus_gx
opnapp= Sega - Master System - Mark III
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SFAMOpen:
sysini= SFAM
opncor= snes9x
opnapp= Nintendo - Super Nintendo Entertainment System
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SG32XOpen:
sysini= SG32X
opncor= picodrive
opnapp= Sega - 32X
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SGFXOpen:
sysini= SGFX
opncor= mednafen_supergrafx
opnapp= NEC - PC Engine SuperGrafx
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

SHRPX68KOpen:
sysini=SHARPX68K
opncor= px68k
opnapp= Sharp - X68000
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
return

SNESOpen:
sysini= SNES
opncor= snes9x
opnapp= Nintendo - Super Nintendo Entertainment System
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

VECTXOpen:
sysini= VECTX
opncor= vecx
opnapp= GCE - Vectrex
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

VIDOpen:
sysini= VID
opncor= 
opnapp=
poscor1=
poscor2=
poscor3=
posapp1=
gosub,OpnAssign
Return

UNKNOpen:
UNKOpen:
sysini= DDL
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;   SAVING & APPENDING TO CFG    ;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;   INIWRITE   ;;;;;;;;;;;;;;;;;;             

WriteCORETop:
newline := "[OPTIONS]"
FilePath= %racoreopt%
input := FileOpen(FilePath, 0)
text := input.Read()
input.Close()
output := FileOpen(FilePath, 5)
output.WriteLine(newline)
output.Write(text)
output.Close()
return

WriteTop:
newline := "[OPTIONS]"
FilePath= %curcfg%
input := FileOpen(FilePath, 0)
text := input.Read()
input.Close()
output := FileOpen(FilePath, 5)
output.WriteLine(newline)
output.Write(text)
output.Close()
return

MenuSave:
gui,submit,nohide
guicontrol,disable,SKSVAS
guicontrol,disable,SKSAVE
gosub, VARtoINI
guicontrol,enable,SKSVAS
guicontrol,enable,SKSAVE


VARtoINI:
SB_SetText("Saving")
FileReadLine, optline, %curcfg%, 1
if optline <> [OPTIONS]
{
	gosub, WriteTop
}

;{;;;;;;;;;;;;;;;;;;;;  OPTIONS  ;;;;;;;;;;;;;;

Loop,parse,optiterate,|
	{
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		wroptv= % (%INPDBX%)
		if (( %INPDBX%) != "")
			{
				iniwrite, "%wroptv%",%curcfg%,OPTIONS,%A_LoopField%
			}
	}
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;  DIRECTORIES  ;;;;;;;;;;;;;;

Loop,parse,dirlocations,|
	{
		wroptv= 
		inival1= 
		inival2= 
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		wroptv= % (%INPDBX%)
		rewtmp= 
		rewtmpd= 
		stringLeft, rewtmp, wroptv,1
		stringRight, rewtmpd, wroptv,255
		if (rewtmp = ":")
			{
				wroptv := raexeloc . SubStr(rewtmpd,2,255)
			}
			
		if (( %INPDBX%) != "")
			{
				iniwrite, "%wroptv%",%curcfg%,OPTIONS,%A_LoopField%
			}
			if (wroptv = "")
				{
					gosub, %INPDBX%
				}
	}
dwnlfldrs= 
Loop, %coreassetsdirectory%\*, 2
	{
		dwnlfldrs.= A_LoopFileName . "|"
	}

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;  PATHS  ;;;;;;;;;;;;;;

Loop,parse,pathlocations,|
	{
		inival1= 
		inival2= 
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		if (( %INPDBX%) != "")
			{
				wroptv= % (%INPDBX%)
				iniwrite, "%wroptv%",%curcfg%,OPTIONS,%A_LoopField%
			}
	}
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;; NETWORK  ;;;;;;;;;;;;;;;;;;
Loop,parse,netiterate,|
	{
		stringsplit, inival, A_LoopField, =, ""
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		if (( %INPDBX%) != "")
			{
				wroptv= % (%INPDBX%)
				iniwrite, "%wroptv%",%curcfg%,OPTIONS,%A_LoopField%
			}
	}
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;  VIDEO  ;;;;;;;;;;;;;;

Loop,parse,viditerate,|
	{
		stringsplit, inival, A_LoopField, =, ""
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		if (( %INPDBX%) != "")
			{
				wroptv= % (%INPDBX%)
				iniwrite, "%wroptv%",%curcfg%,OPTIONS,%A_LoopField%
			}
	}

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;   INPUT  ;;;;;;;;;;;;;;;;;

if (INITIAL = 1)
{
gosub, InitializeJoysticks
return
}

JXT=
CLJXT=
Loop, Parse, INPKND,|
	{	
		INPKVR= %A_LoopField%
		if (INPKVR= "J")
			{
				JXT= btn
				CLJXT= _btn
			}
		if (INPKVR= "AXIS")
			{
				JXT= axis
				CLJXT= _axis
			}
	Loop, Parse, PLAYERSET,|
		{
			PLAYERNUM= %A_LoopField%
				Loop, parse,joyiterate,|
					{
						INPDBX= 
						StringReplace,INPDBX,A_LoopField,_,,All
						GUIVL= % %INPKVR%%PLAYERNUM%%INPDBX%%JXT%
						if (GUIVL = "")
						{
							GUIVL= nul
						}
						iniWrite, "%GUIVL%",%curcfg%,OPTIONS,input_player%PLAYERNUM%%A_LoopField%%CLJXT%
					}
			}
		}

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;   HOTKEYS   ;;;;;;;;;;;;;;;;;;;;;;

JXT=
CLJXT=
Loop, Parse, INPKND,|
	{	
		INPKVR= %A_LoopField%
		if (INPKVR= "J")
			{
				JXT= btn
				CLJXT= _btn
			}
		if (INPKVR= "AXIS")
			{
				JXT= axis
				CLJXT= _axis
			}
	Loop, Parse, PLAYERSET,|
		{
			PLAYERNUM= %A_LoopField%
				Loop, parse,hkiterate,|
					{
						INPDBX= 
						StringReplace,INPDBX,A_LoopField,_,,All
						GUIVL= % %INPDBX%%JXT%
						if (GUIVL = "")
						{
							GUIVL= nul
						}
						iniWrite, "%GUIVL%",%curcfg%,OPTIONS,%A_LoopField%%CLJXT% 
					}
			}
		}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;  CORES  ;;;;;;;;;;;;;;;;;;;;;;;;;
WriteOptVars:
SB_SetText(" Writing Core options ")
FileReadLine, optline, %racoreopt%, 1
if optline <> [OPTIONS]
{
	gosub WriteCORETop
}

Loop, parse,COREVARS,|
	{
		inivar= 
		INPDBX= 
		StringReplace,INPDBX,A_LoopField,_,,All
		inivar= % %INPDBX%
		iniwrite, "%inivar%", %racoreopt%,OPTIONS,%A_LoopField%
		SB_SetText(" " inivar " ")
	}
		SB_SetText("Core-Options Saved")

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;{;;;;;;;;;;;;;;;;;;;;   FOLDER & FILE LOCATIONS    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

LocPath:
gui, submit, nohide
tmpth=
guicontrol,, LOCPTH, |%LOCPTH%||%pathlocations%
iniread, tmpth, %curcfg%,OPTIONS,%LOCPTH%
	SB_SetText("" LOCPTH " is " . tmpth . "")
return

LocationPath:
guicontrolget,LOCPTH,,LOCPTH
PthSel= 
FileSelectFile, PthSel, , ,Select %LOCPTH%
if (PthSel = "")
	{
		return
	}
SB_SetText(" " LOCPTH " is " FldrSel " ")
IniWrite, "%PthSel%",%curcfg%,OPTIONS,%PTHDIR%

if (INITIAL = 1)
	{
		TrayTip, skeletonkey, skeletonKey is generating settings`nPlease be patient,999,48
	}
return

LocFolder:
tmpdir=
gui, submit, nohide
guicontrol,, LOCDIR, |%LOCDIR%||%dirlocations%
iniread, tmpdir, %curcfg%,OPTIONS,%LOCDIR%
SB_SetText("" LOCDIR " is " . tmpdir . "")
return

LocationFolder:
FileSelectFolder, FldrSel, , ,Select %LOCDIR%
if FldrSel=
	{
		return
	}
SB_SetText(" " LOCDIR "= " FldrSel " ")
stringreplace,LOCDNX,LOCDIR,_,,All
%LOCDNX%= %FldrSel%
if (LOCDIR = "core_assets_directory")
	{	
		dwnlfldrs= 
		Loop, %coreassetsdirectory%\*, 2
			{
				dwnlfldrs.= A_LoopFileName . "|"
			}
	guicontrolget,DOPT,,DOPT
		if (DOPT = 1)
			{
				guicontrol,,OPTDDL,Downloads||%dwnlfldrs%
			}
	}

IniWrite, "%FldrSel%",%curcfg%,OPTIONS,%LOCDIR%
return

RETAL:
gui,submit,nohide
runwait, %comspec% /c " "%raexeloc%\%RaExeFile%" -c "%curcfg%"",%A_WorkingDir%
guicontrol,hide,RETAL
guicontrol,move,CLRCUROM,x740 y30
return

RUNMENU:
return

RETALRAXE:
runwait, %comspec% /c " "%raexeloc%\%RaExeFile%" -c "%curcfg%"",%A_WorkingDir%
guicontrol,hide,RETAL
guicontrol,move,CLRCUROM,x740 y30
return

CLREDT:
gui, submit, nohide
romf= 
last_rom= 
coreselv= 
tmpcc= 
guicontrolget,tmpcc,,LCORE
guicontrol,,JCORE,|%runlist%
guicontrol,,LCORE,|%runlist%
;;guicontrol,, ROMLOC, |%romf%||%poptadd%
guicontrol,, ROMLOC, |%romf%||%HISTORY%
;;guicontrol,,OPTDDL,|%SWAPNAM%||%SWAPPOP%
iniwrite, "%coreselv%",Settings.ini,GLOBAL,last_core
iniwrite, "%romf%",Settings.ini,GLOBAL,last_rom
gui, submit, nohide
gosub, LNCHCHK
ifinstring,tmpcc,_libretro
	{
		guicontrol,move,CLRCUROM,x720 y30
		guicontrol,show,RETAL
	}
guicontrol,,LOCFLDRS,1
guicontrol,,LOCASSETDDL,|ROMJACKETS||%systmfldrs%
return

EDTROM:
Gui, submit, nohide
Guicontrolget,romf,,ROMLOC
if (romf = "")
	{
		iniread, romf, Settings.ini,GLOBAL,last_rom
	}
if  (romf = "")
	{
		gosub, LNCHCHK
		return
	}
romfj1= 
romfj2= 
stringsplit, romfj, romf,#
stringmid,romhnck,romf,2,1
if (romhnck <> ":")
	{
		ifexist, %raexeloc%\%romfj1%
			{
				romf= %raexeloc%\%romfj1%
				if (romfj2 <> "")
					{
						romf= %raexeloc%\%romfj1%#%romfj2%
					}
			}
	}

SplitPath,romf,romtitle,rompth,romxt,romname
gosub, RecentRead
iniwrite, "%romf%",Settings.ini,GLOBAL,last_rom
gosub, LNCHCHK
return

SKRESET:
gui, submit, nohide
guicontrolget,SKRESDDL,,SKRESDDL
msgbox,8707,Confirm,Are you certain you wnat to reset %SKRESDDL% settings?
ifmsgbox, No
	{
		return
	}
ifmsgbox,Cancel
	{
		return
	}
		
if (SKRESDDL = "All")
	{
		gosub, RECONFIGURE
	}
	
if (SKRESDDL = "Retroarch")
	{
		gosub, RAInit
	}
	
if (SKRESDDL = "Associations")
	{
		gosub, AsocInit
	}
	
if (SKRESDDL = "Core-Cfgs")
	{
		gosub, CoreOptInit
	}
	
if (SKRESDDL = "Playlist-DB")
	{
		gosub, PlaylistInit
	}
	
return

SKRESDDL:
gui,submit,nohide
guicontrolget,SKRESDDL,,SKRESDDL
return

DefCurCfg:
filecopy,config.set,config.cfg,1
curcfg= %A_WorkingDir%\config.cfg
gameoverdcfg= -c "%curcfg%"
iniwrite, "%curcfg%", Settings.ini,GLOBAL,working_config
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;       SKELETONKEY Settings.ini    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
CreateConfig:
filedelete, Settings.ini
FileAppend, [GLOBAL]`n, Settings.ini
FileAppend, working_config = "%A_WorkingDir%\config.cfg"`n, Settings.ini
FileAppend, retroarch_location = "%raexeloc%"`n, Settings.ini
FileAppend, retroarch_executable = "%RaExeFile%"`n, Settings.ini
FileAppend, last_rom = "%romf%"`n, Settings.ini
FileAppend, last_core = "%LCORE%"`n, Settings.ini
FileAppend, last_connect = "%IPA%.%IPB%.%IPC%.%IPD%"`n, Settings.ini
FileAppend, last_port = "%HPORTNUM%"`n, Settings.ini
FileAppend, core_option_copy = "%CORECOPY%"`n, Settings.ini
FileAppend, ArchiveProxy = "%ArcSite%"`n, Settings.ini
FileAppend, file_server_port = "%fileServerPort%"`n, Settings.ini
FileAppend, netplay_rom_location = "%netplayRomLocation%"`n, Settings.ini
FileAppend, netplay_core_assets_directory = "%netplayCoreAssetsDirectory%"`n, Settings.ini
FileAppend, netplay_playlist_directory = "%netplayPlaylistDirectory%"`n, Settings.ini
FileAppend, file_server_enable = "%fileServerEnable%"`n, Settings.ini
FileAppend, archive_login = ""`n, Settings.ini
FileAppend, archive_password = ""`n, Settings.ini
FileAppend, jacket_mode = "0"`n, Settings.ini
FileAppend, emulators_directory = ""`n, Settings.ini
FileAppend, systems_directory = ""`n, Settings.ini


filedelete, apps.ini
FileAppend, [EMULATORS]`n, apps.ini
FileAppend, [KEYBOARD_MAPPERS]`n, apps.ini
/*
FileAppend, Xpadder = "0"`n, apps.ini
FileAppend, Antimicro = "0"`n, apps.ini
*/
FileAppend, [HTPC_FRONTENDS]`n, apps.ini
/*
FileAppend, emulationStation = "0"`n, apps.ini
FileAppend, retroFE = "0"`n, apps.ini
FileAppend, Hyperspin = "0"`n, apps.ini
FileAppend, CabrioFE = "0"`n, apps.ini
FileAppend, XBMC_Kodi = "0"`n, apps.ini
FileAppend, MediaBrowser = "0"`n, apps.ini
FileAppend, ICE = "0"`n, apps.ini
FileAppend, Advanced_Launcher = "0"`n, apps.ini
FileAppend, ROM_Collection_Browser = "0"`n, apps.ini
FileAppend, IARL = "0"`n, apps.ini
*/
FileAppend, [UTILITIES]`n, apps.ini
/*
FileAppend, Daemon_Tools = "0"`n, apps.ini
FileAppend, DS4Windows = "0"`n, apps.ini
FileAppend, XInput_Drivers = "0"`n, apps.ini
FileAppend, DirectX = "0"`n, apps.ini
*/

return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; <     CONTINUE      >;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;        APPENDING CONFIG      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

EXPRT:
filedelete, %curcfg%
FileCopy,config.set,confg.cfg,1
gosub, VARtoINI
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;    LAUNCHING RETROARCH   ;;;;;;;;;;;;;;;;;;;;;;;

LnchCore:
USRCORE= 1
CoreAuto:
guicontrolget,tmpcc,,LCORE
guicontrolget,tmpsys,,OPTDDL
if (dlx2 = "dll")
	{
		skptog= 1
	}
Gui, Submit, NoHide
moptog= hide
ASVRM= 1
dlx2= 
SWAPLOC= %RJSYSTEMS%
SWAPNAM= ROMJACKETS
SWAPPOP= %systmfldrs%
guicontrolget,LCORE,,LCORE
splitpath, LCORE , , , dlx, , 
coreselv= %LCORE%
SB_SetText(" " LCORE " ")
guicontrol,hide,JCORE
guicontrol,enable,CNCTBUT
guicontrol,enable,HostButton
guicontrol,enable,OPNCORE
guicontrolget,DOPT,,DOPT
if (dlx <> "dll")
	{
			runningcore= emulator
			emutog= hide
			raoptgl= hide
			moptog= show
			gosub, EMUUNPOP
			gosub, TOGRAOPTS
			gosub, TOGSKELONLY
			gosub, TOGSKELGUI
			guicontrolget,DOPT,,DOPT
			APLN= 1
			if (LOCFLDRS = 1)
				{
					guicontrol,,LOCASSETDDL,|%SWAPNAM%|%SWAPPOP%
				}

			;;guicontrol,show,JCORE
			;;guicontrol,,JCORE,|%LCORE%||%runlist%
	}
if (dlx = "dll")
		{
			runningcore= core
			emutog= hide	
			moptog= hide
			raoptgl= show
			gosub, TOGSKELONLY
			gosub, TOGRAOPTS
			gosub, EMUUNPOP
			guicontrol,show,SWHOST
			guicontrol,show,LCORE
			guicontrolget,DOPT,,DOPT
			SWAPLOC= %coreassetsDirectory%
			SWAPNAM= Downloads
			SWAPPOP= %dwnlfldrs%
			APLN= 
		}
if (DOPT = 1)
	{
		if (USRCORE = 1)
			{
				guicontrol,,OPTDDL,|%SWAPNAM%||%SWAPPOP%
				ifexist, %SWAPLOC%\%tmpsys%
					{
						guicontrol,,OPTDDL,|%SWAPNAM%|%tmpsys%||%SWAPPOP%
					}
			}
	}

USRCORE= 		
iniwrite, "%LCORE%", Settings.ini,GLOBAL,last_core
gosub, LNCHCHK
return

AutoLaunch:
gui, submit, nohide
AUTOLNCH= 1
if (AUTOLNCH = 0)
	AUTOLNCH= 0
return


SKLNCH:
iniread,lpovrd,Assignments.ini,OVERRIDES,
	Loop,Parse,lpovrd,`n
		{
			StringSplit,corsyt, A_LoopField,=,"
			;"
			if (corsyt2 = coreselv)
				{
					emucfgn= %corsyt2%
					mtyp= %corsyt1%
					iniread,OvrExtAs,Assignments.ini,ASSIGNMENTS,%mtyp%
					if (ROMSYS = "")
						{
							ROMSYS= %corsyt1%
						}
				}
		}

iniread,EPGC,AppParams.ini,%coreselv%,per_game_configurations
iniread,RunOptions,AppParams.ini,%coreselv%,options
iniread,RunArgs,AppParams.ini,%coreselv%,arguments
iniread,omtxt,AppParams.ini,%coreselv%,extension
iniread,RunFrom,AppParams.ini,%coreselv%,run_location
iniread,OMITQ,AppParams.ini,%coreselv%,no_quotes
iniread,OMITPTH,AppParams.ini,%coreselv%,no_path
stringreplace,RunOptions,RunOptions,[CUSTMOPT],%A_SPACE%%CUSTMOPT%,All
stringreplace,RunArgs,RunArgs,[CUSTMARG],%A_SPACE%%CUSTMARG%,All
stringreplace,RunOptions,RunOptions,[ROMPATH],%rompth%,All
stringreplace,RunArgs,RunArgs,[ROMPATH],%rompth%,All
SplitPath,OvrExtAs,emuexe,emupth,emuxtn,emuname,emudrv
stringreplace,RunOptions,RunOptions,[EMUPATH],%emupth%,All
stringreplace,RunArgs,RunArgs,[EMUPATH],%emupth%,All

LNCHAPP:
romfj1= 
romfj2= 
stringsplit, romfj, romf,#
if (romf <> romfj1)
	{
		ifexist, %romfj1%
			{
				romf= %romfj1%
			}
	}
stringmid,romhnck,romfj1,2,1
if (romhnck <> ":")
	{
		ifexist, %raexeloc%\%romfj1%
			{
				romf= %raexeloc%\%romfj1%
			}
	}
splitpath,romf,romtitle,rompth,romext,romname,romdrv
if (RunFrom = 1)
	{
		runloc= %rompth%
	}
if (RunFrom <> 1)
	{
		runloc= %emupth%
	}

RUNROM= %romf%
if (omtxt = 1)
	{
		RUNROM= %rompth%\%romname%
	}
if (OMITPTH = 1)
	{
		if (omtxt = 1)
			{
				RUNROM= %romname%
			}
		if (omtxt <> 1)
			{
				RUNROM= %romtitle%
			}
	}
if (OMITQ = 1)
	{
		RUNROM= %RUNROM%
	}
	else if (OMITQ <> 1)
	{
		RUNROM= "%RUNROM%"
	}

if (EPGC = 1)
	{
		ptsp= 
		emudx= 
		cfga= 
		cfgb= 
		cfgc= 
		cfgd= 
		IfNotExist,cfg\%ROMSYS%\%romname%
			{
				FileCreateDir,cfg\%ROMSYS%\%emucfgn%\%romname%
			}
		splitpath,OvrExtAs,,ptsp
		splitpath,ptsp,emudx
		emupts= 
		Loop, Read, EmuParts.set,`n
			{
				pgpts1= 
				pgpts2= 
				pgpts3= 
				pgpts4= 
				pgpts5= 
				pgpts6= 
				pgpts7= 
				StringReplace,emuvers,A_LoopReadLine,[ARCH],%ARCH%,All
				StringReplace,emuvers,A_LoopReadLine,[ROMNAME],%romname%,All
				;;stringsplit,pgpts,emuvers,=,|
				stringsplit,pgpts,emuvers,=|,:
				if (pgpts1 = emudx)
						{	
							emupts= 1
							emuna= %emudx%
							if (pgpts4 <> "")
								{
									cfga:= pgpts4
									Loop, Parse, pgpts4,|
										{
											SplitPath,A_LoopField,pgptf
											FileCopy,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,%ptsp%\%A_LoopField%,1
										}
								}
							if (pgpts5 <> "")
								{
									cfgb:= pgpts5
									Loop, Parse, pgpts5,|
										{
											SplitPath,A_LoopField,pgptf
											FileCopy,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,%ptsp%\%A_LoopField%,1
										}
								}
							if (pgpts6 <> "")
								{
									cfgc:= pgpts6
									Loop, Parse, pgpts6,|
										{
											SplitPath,A_LoopField,pgptf
											FileCopy,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,%ptsp%\%A_LoopField%,1
										}
								}
							if (pgpts7 <> "")
								{
									cfgd:= pgpts7
									Loop, Parse, pgpts7,|
										{
											SplitPath,A_LoopField,pgptf
											FileCopy,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,%ptsp%\%A_LoopField%,1
										}
								}
						}
					if (emupts = "")
						{
							FileCopy,cfg\%ROMSYS%\%emucfgn%\%romname%\*.ini,%ptsp%,1
						}
			}
	}

RunWait, "%OvrExtAs%"%RunOptions%%RUNROM%%RunArgs%,%runloc%,,

if (EPGC = 1)
	{
		if (cfga <> "")
			{
				Loop, Parse, cfga,|
					{
						SplitPath,A_LoopField,pgptf
						FileCopy,%ptsp%\%A_LoopField%,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,1
					}
			}
		if (cfgb <> "")
			{
				Loop, Parse, cfgb,|
					{
						SplitPath,A_LoopField,pgptf
						FileMove,%ptsp%\%A_LoopField%,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,1
					}
			}
		if (cfgc <> "")
			{
				Loop, Parse, cfgc,|
					{
						SplitPath,A_LoopField,pgptf
						FileMove,%ptsp%\%A_LoopField%,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,1
					}
			}
		if (cfgd <> "")
			{
				Loop, Parse, cfgd,|
					{
						SplitPath,A_LoopField,pgptf
						FileMove,%ptsp%\%A_LoopField%,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,1
					}
			}
		if (emupts = "")
			{
				FileCopy,%ptsp%\*.ini,cfg\%ROMSYS%\%emucfgn%\%romname%\%pgptf%,1
			}
	}
if (DDRUN = "")
	{
		return
	}
goto, QUITOUT
ExitApp

LNCH:
gui,submit,nohide
guicontrolget,romf,,ROMLOC
romfj1= 
romfj2= 
stringsplit, romfj, romf,#
stringmid,romhnck,romf,2,1
if (romhnck <> ":")
	{
		ifexist, %raexeloc%\%romfj1%
			{
				romf= %raexeloc%\%romfj1%
				if (romfj2 <> "")
					{
						romf= %raexeloc%\%romfj1%#%romfj2%
					}
			}
	}
if (APLN = 1)
	{
		goto, SKLNCH
	}

LNCH= 1
AHKsock_Close()
if (CSTCMD = 1)
	{  
		COREON= 
		if (CSTCRE = 1)
		{
			COREON=	-L
		}
		gosub, PreOpt
		Runwait, "%raexeloc%\%RaExeFile%" %RUNROM% %COREON% %RUNCORE%,%raexeloc%,,
		gosub, PostOpt
		return
	}

LaunchRA:
LNCHCORE= -L "%libretroDirectory%\%coreselv%"
LNCHROM= "%romf%"
LNCHCFG= %gameoverdcfg%
AHKsock_Close()
if (romf = "")
	{
		LNCHCORE=
		LNCHROM= 
	}
guicontrol, Disable, LNCHBUT
guicontrol, Disable, CNCTBUT
guicontrol, Disable, HostButton
gosub, PreOpt
Runwait, "%raexeloc%\%RaExeFile%" %LNCHCORE% %BSV% %LNCHROM% %LNCHCFG%,%raexeloc%,,
gosub, PostOpt
guicontrolget, SAVEXIT
if (SAVEXIT = 1)
	{
		gosub, GetIniVars
	}

lastcore= %coreselv%
guicontrol, Enable, LNCHBUT
guicontrol, Enable, CNCTBUT
guicontrol, Enable, HostButton
IniWrite, "%coreselv%", Settings.ini,GLOBAL,last_core
gosub, RecentWrite
LNCH=
return

ConnectRA:
if (IPA = "")
	{
		return
	}
if (IPB = "")
	{
		return
	}
if (IPC = "")
	{
		return
	}
if (IPD = "")
	{
		return
	}
if (CPORTNUM = "")
	{
		return
	}
guicontrol, Disable, LNCHBUT
guicontrol, Disable, NETCONNECT
guicontrol, Disable, ARCNCT
guicontrol, Disable, CNCTBUT
guicontrol, Disable, HostButton
guicontrol,,CNCTBUT,Invade
guicontrol, disable,IPA
guicontrol, disable,IPB
guicontrol, disable,IPC
guicontrol, disable,IPD
guicontrol, disable,CPORTNUM
guicontrol, disable,IPORTNUM
guicontrol, disable,NETHOSTLIST
AHKsock_Close()

if (INVADE = 1)
	{
		WinMinimize,skeletonKey
		runwait,invader.exe
		WinRestore,skeletonKey
		if (clipboard = "nul")
			{
				return
			}
		gosub, splitClip
		if (URLDWN =1)
			{
				gosub, RomDownload
			}
	}
if (RETROM = 1)
	{
		fileServerPort := fileServerPort
		gosub, RomClient
		romf= %coreassetsDirectory%%RETDLF%\%romname%.zip
		if (sZip > 1)
			{
				SB_SetText(" extracting " romf " ")
				runwait, %comspec% cmd /c "7za.exe x -y "%romf%" -O"%coreassetsDirectory%%RETDLF%\%romname%" ", ,hide
				SB_SetText(" extraction complete ")
				Loop, Files, %coreassetsDirectory%%RETDLF%\%romname%\*.*
					{
						if (A_LoopFileSize > 10)
							{
								romf= %A_LoopFileFullPath%
							}
					}
			}
	}
SB_SetText("Connecting to " IPADR "")
romcnct= 
if (romf <> "")
	{
		romcnct= "%romf%"
	}
corecnct= "%libretroDirectory%\%coreselv%"
gosub, PreOpt
guicontrolget,netplayRemotePort,,CPORTNUM
Runwait, "%raexeloc%\%RaExeFile%" -C %IPADR% --port %netplayRemotePort% -L %corecnct% %romcnct% %gameoverdcfg%,%raexeloc%
gosub, PostOpt
guicontrolget, SAVEXIT
if (SAVEXIT = 1)
	{
		gosub GetIniVars
		IniWrite, "%IPADR%",Settings.ini,GLOBAL,last_connect
		IniWrite, "%HPORTNUM%",Settings.ini,GLOBAL,last_port
		IniWrite, "%coreselv%",Settings.ini,GLOBAL,last_core
	}
lastcore= %coreselv%
gosub, RecentWrite
guicontrol,,INVADE,0
guicontrol, Enable, LNCHBUT
guicontrol, Enable, NETCONNECT
guicontrol, enable, ARCHOST
guicontrol, Enable, ARCNCT
guicontrol, Enable, CNCTBUT
guicontrol, Enable, HostButton
guicontrol,,CNCTBUT,Connect
guicontrol, enable,IPA
guicontrol, enable,IPB
guicontrol, enable,IPC
guicontrol, enable,IPD
guicontrol, enable,CPORTNUM
guicontrol, enable,IPORTNUM
guicontrol, enable,NETHOSTLIST
return

LOCALHOSTING:
clipboard= 
ROMCRC= %romf%
splitpath,romf,romtitle,rompth,romxt,romname,romdrv
gosub, URLCRC
stringlen,fpth,romf
splitpath,romf,romtitle, ,romext,romname
stringlen,nesf,romtitle
stringleft,splrf,romf,fpth - nesf-1
splitpath,splrf,ARCSYS
if (COPYINFO = 1)
	{
		clipboard= NET|%ipsplit1%.%ipsplit2%.%ipsplit3%.%ipsplit4%|%HPORTNUM%|%FRAMEDELAY%|%coreselv%|%romtitle%|%ARCSYS%|%GAMCRC%|
	}

HOSTING:
splitpath,romf,romtitle,rompth,romext,romname
stringreplace, ccv, coreselv,_libretro.dll, ,All

SB_SetText("Hosting. " romf " ")
guicontrol, Disable, LNCHBUT
guicontrol, Disable, CNCTBUT
guicontrol, Disable, HostButton
guicontrol, Disable, ARCHOST
gosub, PreOpt
if (FILESERV = 1)
	{
		gosub, getCREN
		gosub, ZipSrv
		gosub, StartServer
	}
corehlb= 
if (coreselv <> "")
	{
		corehlb= "%libretroDirectory%\%coreselv%"
	}
romhf= 
if (romf <> "")
	{
		romhf= "%romf%"
	}

Runwait, "%raexeloc%\%RaExeFile%" -H -L %corehlb% %romhf% %gameoverdcfg%,%raexeloc%
gosub, PostOpt
guicontrolget, SAVEXIT
if (SAVEXIT = 1)
	{
		gosub, GetIniVars
		IniWrite, "%HPORTNUM%", Settings.ini,GLOBAL,last_port
		IniWrite, "%coreselv%", Settings.ini,GLOBAL,last_core
	}
gosub, RecentWrite
AHKsock_Close()
guicontrol, Enable, LNCHBUT
guicontrol, Enable, CNCTBUT
guicontrol, Enable, HostButton
guicontrol, Enable, ARCHOST
return

NEWROM:
if romf=
gosub GetROM
return

GetROM:
ROMFileSel= 
FileSelectFile, ROMFileSel, 3, , Select a ROM file, ROM (*.*)
if (ROMFileSel = "")
	{
		romf= 
		return
	}
romf= %ROMFileSel%
ROMLOC= %romf%
iniwrite, "%romf%", Settings.ini,GLOBAL,last_rom
guicontrol,,OPTDDL,|History||%plistfiles%
guicontrol,,ROMLOC, |%romf%||%HISTORY%
;;guicontrol,,ROMLOC, |%romf%||%poptadd%
Gui, submit, nohide
return

NORA:
if (locfnd = 1)
	{
		return
	}
msgbox,,Not Found, Select your RetroArch executable file., 5
gosub RAEXE
return

GRAVER:
gui,submit,nohide
;;msgbox,,, %comspec% cmd /c " "%raexeloc%\%RaExeFile%" --verbose >"%A_ScriptDir%\ralog.txt" 2>&1 "==%raexeloc%==hide
Run, %comspec% cmd /c " "%raexeloc%\%RaExeFile%" --verbose >"%A_ScriptDir%\ralog.txt" 2>&1 ",%raexeloc%,hide
WinWait, RetroArch
Process,close,%RaExeFile%
FileRead,ralog,ralog.txt
Loop, Parse, ralog, `n, `r
	{
		stringsplit,gvra,A_LoopField,:
		if (gvra1 = "[INFO] Git")
			{
				RAVBLD= %gvra2%
			}
		if (gvra1 = "[INFO] Version")
			{
				RAVERS= %gvra2%
			}
		guicontrol,,RAVERTXT,version:  %RAVERS%`nbuild:  %RAVBLD%
		iniwrite,%RAVERS%,Settings.ini,GLOBAL,retroarch_version
		iniwrite,%RAVBLD%,Settings.ini,GLOBAL,retroarch_build
	}
return


RAEXE:
if (INITIAL > 1)
	{
		SplashTextOff
	}
FileSelectFile, RaExeFile, 3, , Select a retroarch.exe, retroarch exe(*.exe)
if (RaExeFile = "")
	{
		RaExe= 
		gosub, selRaLoc
	}
if (locfnd = 1)
	{
		return
	}
else
RaExe= %RaExeFile%
SplitPath, RaExe, RaExeFile, raexeloc, exe
iniwrite, "%raexeloc%", Settings.ini,GLOBAL, retroarch_location
iniwrite, "%RaExeFile%", Settings.ini,GLOBAL, retroarch_executable
guicontrol,,SKRADISP,%raexeloc%
if (INITIAL = 1)
	{
		ifexist,%raexeloc%\retroarch.cfg
			{
					gosub, IMPRTCFG
			}
		TrayTip, skeletonkey, skeletonKey is initializing settings`nPlease be patient,999,48
	}
return

selRaLoc:
FileSelectFolder, raexeloctmp, , %RJEMUD%,Select destination folder to create the retroarch directory
if (raexeloctmp = "")
	{
		if (INITIAL = 1)
			{
				locfnd= 
				raexeloc= %RJEMUD%\retroarch				
				ifnotexist, %raexeloc%
					{
						locfnd= 1
					}
				goto, INITIATEGEN
			}
	}
if (raexeloctmp = "")
	{
		raexeloctmp= %RJEMUD%
	}
locfnd= 1
ranmt= 
REINPUTRA:
raexeloc= 
InputBox,ranmt,Directory Name,Name of the retroarch folder
IfInString,ranmt,:
	gosub, REINPUTRA
IfInString,ranmt,\
	gosub, REINPUTRA
IfInString,ranmt,/
	gosub, REINPUTRA
IfInString,ranmt,?
	gosub, REINPUTRA
IfInString,ranmt,|
	gosub, REINPUTRA
IfInString,ranmt,<
	gosub, REINPUTRA
IfInString,ranmt,>
	gosub, REINPUTRA
IfInString,ranmt,*
	gosub, REINPUTRA
splitpath,raexeloctmp,ragetnm
if (ragetnm = "retroarch")
	{
			stringtrimright,raexeloc,raexeloctmp,10
	}
if (ranmt = "")
	{
		if (raexeloc = "")
			{
				raexeloc= %raexeloctmp%\retroarch
			}
	}
if (raexeloc = "")
		{
			goto, REINPUTRA
		}
INITIATEGEN:
iniwrite, "%raexeloc%", Settings.ini,GLOBAL, retroarch_location
iniwrite, "retroarch.exe", Settings.ini,GLOBAL, retroarch_executable
if (INITIAL = 1)
	{
		TrayTip, skeletonkey, skeletonKey is generating settings`nPlease be patient,999,48
	}

guicontrol,,SKRADISP,%raexeloc%	
GuiControl, Choose, TABMENU, 1
return

PreOpt:
if (CORECOPY = 1)
	{
		FileCopy, %racoreopt%,%raexeloc%\retroarch-core-options.cfg,1
	}
return

PostOpt:
if (CORECOPY = 1)
	{
		FileCopy,%raexeloc%\retroarch-core-options.cfg,%racoreopt%,1
	}
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    RESETTING   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RESET:
msgbox,4,Are you sure?, Delete All skeletonKey configuration files?
ifmsgbox, yes
	{
		goto RECONFIGURE
	}
ifmsgbox, no
	{
		return
	}
return
DefLocs:
;;lptmp= %A_Temp%
;;Loop %lptmp%
;;	lpful= %A_LoopFileLongPath%
	
Loop, %A_temp%,1
	{
			lpful = %A_LoopFileLongPath%
	}
	
assetsDirectory= %raexeloc%\assets
audioFilterDir= %raexeloc%\filters\audio
cacheDirectory= %lpful%
contentHistoryDir= %raexeloc%\database\rdb
coreAssetsDirectory= %raexeloc%\downloads
cursorDirectory= %raexeloc%\database\cursors
dynamicWallpapersDirectory= %raexeloc%\assets\wallpapers
inputRemappingDirectory= %raexeloc%\config\remaps
joypadAutoconfigDir= %raexeloc%\autoconfig
libretroDirectory= %raexeloc%\cores
oskOverlayDirectory= %raexeloc%\overlays
overlayDirectory= %raexeloc%\overlays
playlistDirectory= %raexeloc%\playlists
recordingConfigDirectory= %raexeloc%\config
rguiBrowserDirectory= default
rguiConfigDirectory= %raexeloc%\config
savefileDirectory= %raexeloc%\saves
savestateDirectory= %raexeloc%\states
screenshotDirectory= %raexeloc%\screenshots
systemDirectory= %raexeloc%\system
thumbnailsDirectory= %raexeloc%\thumbnails
videoFilterDir= %raexeloc%\filters\video
videoShaderDir= %raexeloc%\shaders
libretroInfoPath= %raexeloc%\info
return

DefPaths:
cheatDatabasePath= %raexeloc%\cheats
contentDatabasePath= %raexeloc%\database\rdb
contentHistoryPath= %raexeloc%\content_history.lpl
contentImageHistoryPath= %raexeloc%\content_image_history.lpl
contentMusicHistoryPath= %raexeloc%\content_music_history.lpl
contentVideoHistoryPath= %raexeloc%\content_video_history.lpl
coreOptionsPath= %raexeloc%\retroarch-core-options.cfg
coreUpdaterBuildbotAssetsUrl= http://buildbot.libretro.com/assets/
coreUpdaterBuildbotUrl= http://buildbot.libretro.com/nightly/windows/x86%ARCHR%/latest/
menuWallpaper= 
videoShader= nul
videoFilter= nul
return


RECONFIGURE:
SB_SetText("..........REGENERATING CONFIGURATION FILES...........")
filedelete, *.ini
filedelete, *.cfg
filecopy,config.set,config.cfg,1
filecopy,racoreopt.set,racoreopt.cfg,1
filecopy,Assignments.set,Assignments.ini,1
filecopy,AppParams.set,AppParams.ini,1
gosub resetGL
gosub resetSL
gosub resetSYS
gosub resetCG
gosub GetCoreList
gosub resetSYS
gosub resetCORES
gosub resetRunList
gosub resetFILT
gosub,PlaylistInit
SB_SetText("Complete")
msgbox,,Restart, skeletonKey must be restarted to load new settings, 10
return

DLLCRCreset:
FileDelete,corecrc.ini
Loop, Read, rj\cores.ini
	{
		ApndCRC= 
		gosub, CRC32GET
		Iniwrite, %ApndCRC%,corecrc.ini,DLLS,%A_LoopReadLine%
	}
return

GCUpdt:
guicontrol,disable,GCUPDT
guicontrol,disable,UPDCL
guicontrol,disable,UPDBTN
FileDelete,getcore.ini
FileDelete,updtchk.ini
stringreplace, ccv, coreselv,_libretro.dll, ,All
splitpath,romf,romtitle,rompth,romext,romname

SB_SetText("Checking for updates")
Loop, %libretroDirectory%\*.dll
	{
		CrCFLN:= A_LoopFileFullPath
		gosub, CRC32GET
		FileAppend,%ApndCRC% %A_LoopFileName%`n,updtchk.ini
		SB_SetText("" A_LoopFileName " is "ApndCRC "")
	}
	
Loop, Read,updtchk.ini
	{
		matchhsh1= 
		matchhsh2= 
		stringsplit, matchhsh,A_LoopReadLine, %A_Space%
		amt:= matchhsh1
		gmt= %matchhsh2%.zip
		Loop, Read, coreupdt.ini
			{
				shmatch1= 
				shmatch2= 
				shmatch3= 
				stringsplit,shmatch, A_LoopReadLine, %A_Space%
				if (shmatch3 = gmt)
					{
						if (shmatch2 <> amt)
							{
								FileAppend,%gmt%`n,getcore.ini
							}
					}		
			}
	}
SB_SetText("Check complete")
gcnum= 
ifexist,getcore.ini
	{
		getcore= 
		Loop, Read, getcore.ini
			{
				gcnum+=1
				getcore.= A_LoopReadLine . "|"
			}
		guicontrol,,AVAIL,|%getcore%
SB_SetText(" " gcnum " Updates available")
	}

IfNotExist,getcore.ini
	{
		SB_SetText("No core updates available")
		guicontrol,disable,GCUPDT
		guicontrol,,AVAIL
	}
guicontrol,enable,UPDCL
guicontrol,enable,UPDBTN
return

GetCoreList:
corelist= 
corezips= 
addemu= 
emuj= 
corNamz= 
gosub, ResetCores
gosub,getBBCORES
Loop,Read,cores.ini
	{
		StringReplace,jnm,A_LoopReadLine,_libretro.dll,,All
		corezips .= (A_Index == 1 ? "" : "|") . A_LoopReadLine "." "zip"
		corelist .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
		coreNamz .= (A_Index == 1 ? "" : "|") . jnm
	}
IniRead,emuj,Assignments.ini,OVERRIDES,

Loop,Parse,emuj,`n
	{
		emup2= 
		stringsplit,emup,A_LoopField,=,"
;;"
		if emup2 is not digit
			{
				addemu .= "|" . emup2
			}
	}
runlist .= corelist . addemu


guicontrol,enable,GCUPDT
guicontrol,, CRNTCORS, |%coreNamz%
guicontrol,, ARCCORES, |%lastcore%||%runlist%
guicontrol,, LCORE, |%lastcore%||%runlist%

guicontrol,,COREDDLA,|Select_A_Core||%corelist%
if (RALIST = 1)
	{
		guicontrol,, AVAIL, |%AVAILCORES%
		if (AVAILCORES = "")
			{
				guicontrol,disable,GCUPDTS
			}
	}
if (EXELIST = 1)
	{
		guicontrol,, AVAIL,|stable|redist.7z|bundle.zip|assets.zip|info.zip|database-rdb.zip|cheats.zip|database-cursors.zip|overlays.zip|shaders_glsl.zip|shaders_cg.zip|shaders_slang.zip|autoconfig.zip|%RAUPDF%
	}
return


resetCORES:
Menu,Tray,Tip, Generating core-list cache
filedelete, getcores.ini
if (libretroDirectory = "")
	{
		libretroDirectory= %raexeloc%\cores
	}
filedelete, cores.ini
CoreFiles=
CORENUM:= 0
Loop, Files, %libretroDirectory%\*_libretro.dll
	{
		CORENUM+=1
		CoreFiles = %CoreFiles%%A_LoopFileName%`n
	}
Loop, Parse, CoreFiles, `n
	if (A_LoopField <> "")
		{
			FileAppend, %A_LoopField%`n, cores.ini
		}
guicontrol,,SKCCTXT,%CORENUM% cores
return

resetEmuList:
IniRead,emultl,apps.ini,EMULATORS
		emulist= 
		Loop, Parse, emultl,`n
			{
				emulti1= 
				emulti2= 
				StringSplit,emulti,A_LoopField,=
				emulist.= emulti1 . "|"
			}
return			

resetRunList:
runlist= 
addemu= 
emup1=
emup2= 
emuj= 
	IniRead,emuj,Assignments.ini,OVERRIDES,
	Loop,Parse,emuj,`n
		{
			stringsplit,emup,A_LoopField,=,"
;;"
			if emup2 is not digit
				{
					addemu .= "|" . emup2
				}
		}

runlist .= corelist . addemu
return

resetOVR:
rewrovlv= 
rewrovld= 
Menu,Tray,Tip, Generating Overlay cache
if (OverlayDirectory = "")
	{
		OverlayDirectory= %raexeloc%\overlays
	}

filedelete, ovr.ini
ovr_list =
StringLen,ovrplngth,OverlayDirectory
ovrplngthpls:= ovrplngth+1
Loop, Files, %OverlayDirectory%\*.cfg, R
	{
		FileAppend,%A_LoopFileFullPath%`n,ovr.ini
		StringTrimLeft,jstpth,A_LoopFileFullPath,%ovrplngthpls%
		ovr_list .= (A_Index == 1 ? "" : "|") . jstpth
	}
return


resetSYS:
FileDelete, sys.ini
syslist= 
loop, gam\*.gam
	{		
		stringsplit,syn,A_LoopFileName,.
		syslist .= (A_Index == 1 ? "" : "|") . syn1
	}	
fileappend,%syslist%,sys.ini
return

resetCoreAssets:
dwnlfldrs=
Loop, %coreassetsdirectory%\*,2
	{
		dwnlfldrs .= A_LoopFileName . "|"
	}
return

PlaylistInit:
Menu,Tray,Tip, Generating Playlist Database cache
guicontrol,disable,SVPLST
FileDelete,hashdb.ini
SB_SetText("...Initializing Playlist Database...")
plistfiles= 
plistNamz= 
Loop, %playlistdirectory%\*.lpl
	{
		plistfiles .= A_LoopFileName . "|"
		SplitPath,A_LoopFileName,,,,plistNam
		plistNamz .= plistNam . "|"
		totn=
		pln= %A_LoopFileName%
		SB_SetText("...Initializing Playlist Database..." pln " parsing ")		
		anum= 
		Loop, Read, %A_LoopFileFullPath%
			{
					totn+= 1
					anum+= 1
					if (anum = 1)
						{
							fnm= %A_LoopReadLine%
						}
					if (anum = 5)
						{
							gten:= ""
							gten:= totn - 4
							stringsplit, crchsh,A_LoopReadLine,|
							FileAppend,%fnm%|%pln%|%gten%|%crchsh1%`n,hashdb.ini
						}
					if (anum = 6)
						{
							anum= 
						}
				}
	}
SB_SetText("Playlist Database created")
guicontrol,enable,SVPLST
return

resetPlaylists:
plistfiles= 
plistNamz= 
Loop, %playlistDirectory%\*.lpl,
	{
		plistfiles .= A_LoopFileName . "|"
		SplitPath,A_LoopFileName,,,,plistNam
		plistNamz .= plistNam . "|"
	}	
return

RAInit:
filecopy, config.cfg,config.bak,1
filecopy, config.set,config.cfg,1
gosub, GetIniVars
return


ShaderDBInit:
gosub resetGL
gosub resetSL
gosub resetSYS
gosub resetCG
gosub resetFILT
return

AsocInit:
filecopy,Assignments.ini,Assignments.bak,1
filecopy,AppParams.ini,AppParams.bak,1
filecopy,Assignments.set,Assignments.ini,1
filecopy,AppParams.set,AppParams.ini,1
return

;{;;;;;;;;;;;;  RESET FILTERS ;;;;;;;;;;;;;;;;;;;;
resetFILT:
Menu,Tray,Tip, Generating Video Filter cache
if (videoFilterDir= "")
	{
		videoFilterDir= %raexeloc%\filters\video
	}

filedelete, fltlist.ini
fltFiles =
Loop, Files, %videoFilterDir%\*.filt
   fltFiles = %fltFiles%%A_LoopFileName%`n
Loop, Parse, fltFiles, `n
   FileAppend, %A_LoopField%`n, fltlist.ini
Loop,Read,fltlist.ini
	flt_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;  RESET SHADERS  ;;;;;;;;;;;;;
resetGL:
Menu,Tray,Tip, Generating GLSL Shader cache
if (videoShaderDir= "")
	{
		videoShaderDir= %raexeloc%\shaders
	}

filedelete, gl.ini
glFiles =
Loop, Files, %videoShaderDir%\shaders_glsl\*.glslp, R
   glFiles = %glFiles%%A_LoopFileName%`n
Loop, Parse, glFiles, `n
   FileAppend, %A_LoopField%`n, gl.ini
Loop,Read,gl.ini
	gl_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
   return

resetSL:
Menu,Tray,Tip, Generating Slang Shader cache
filedelete, sl.ini
slangFiles =
Loop, Files, %videoShaderDir%\shaders_slang\*.slangp, R
   slangFiles = %slangFiles%%A_LoopFileName%`n
Loop, Parse, slangFiles, `n
   FileAppend, %A_LoopField%`n, sl.ini
Loop,Read,sl.ini
	sl_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
return

resetCG:
Menu,Tray,Tip, Generating CG Shader cache
filedelete, cg.ini
cgFiles =
Loop, Files, %videoShaderDir%\shaders_cg\*.cgp, R
   cgFiles = %cgFiles%%A_LoopFileName%`n
Loop, Parse, cgFiles, `n
   FileAppend, %A_LoopField%`n, cg.ini
Loop,Read,cg.ini
	cg_list .= (A_Index == 1 ? "" : "|") . A_LoopReadLine
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;      RESET CORE VARIABLES       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

CoreOptInit:
filecopy,racoreopt.cfg,racoreopt.bak,1
filecopy, racoreopt.set,racoreopt.cfg
gosub, GetOptVars
gosub GetCoreList
gosub resetCORES
gosub resetRunList
return

;{;;;;; RESET NOOPTIONS ;;;;;;;;;;
Select_a_CoreRESET:
2048RESET:
MesenRESET:
3dengineRESET:
dinothawrRESET:
dolphinLauncherRESET:
dolphinRESET:
citraRESET:
gearboyRESET:
imageviewerRESET:
crocodsRESET:
lutroRESET:
nxengineRESET:
melondsRESET:
meteorRESET:
remotejoyRESET:
tryquakeRESET:
pokeminiRESET:
openlaraRESET:
nekop2RESET:
np2kaiRESET:
redreamRESET:
sameboyRESET:
xrickRESET:
mednafen_snesRESET:
return
;};;;;;;;;;

;{;;;; RESET CROCODS ;;;;;;;;;;;;
iniwrite, "color",%racoreopt%,OPTIONS,crocods_greenmonitor
iniwrite, "Auto",%racoreopt%,OPTIONS,crocods_resize
iniwrite, "no",%racoreopt%,OPTIONS,crocods_hack
return
;};;;;;;;;;

;{;;;; RESET CRAFT ;;;;;;;;;;;;
craftRESET:
iniwrite,"640x480",%racoreopt%,OPTIONS,craft_resolution
iniwrite,"disabled",%racoreopt%,OPTIONS,craft_show_info_text
iniwrite,"disabled",%racoreopt%,OPTIONS,craft_jumping_flash_mode
iniwrite,"65",%racoreopt%,OPTIONS,craft_field_of_view
iniwrite,"10",%racoreopt%,OPTIONS,craft_draw_distance
iniwrite,"disabled",%racoreopt%,OPTIONS,craft_inverted_aim
iniwrite, "0.0150",%racoreopt%,OPTIONS,craft_analog_sensitivity
iniwrite, "0.010",%racoreopt%,OPTIONS,craft_deadzone_radius
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;; RESET VICE ;;;;;;;;;
x64Reset:
vicex64Reset:
vice_Statusbar = "disabled"
vice_Drive8Type = "1540"
vice_DriveTrueEmulation = "disabled"
vice_RetroJoy = "disabled"
vice_Controller = "keyboard"
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET BSNES ;;;;;;;
bsnesRESET:
bzsnesRESET:
bsnesaccuracyRESET:
bsnesperformanceRESET:
bsnesbalancedRESET:
bsnesmercuryaccuracyRESET:
bsnesmercuryperformanceRESET:
bsnesmercurybalancedRESET:
bsnescplusplus98RESET:
bsnes_violate_accuracy= no
bsnes_chip_hle= HLE
bsnes_superfx_overclock= 100`%
guicontrol,,CORECHKA,0
guicontrol,,COREDDLB,|HLE||LLE
guicontrol,,COREDDLC,|100`%||150`%|200`%|300`%|400`%|500`%|1000`%

iniwrite, "no",%racoreopt%,OPTIONS,bsnes_violate_accuracy
iniwrite, "HLE",%racoreopt%,OPTIONS,bsnes_chip_hle
iniwrite, "100`%",%racoreopt%,OPTIONS,bsnes_superfx_overclock
iniwrite, "100`%",%racoreopt%,OPTIONS,bsnes_violate_accuracy
return

;};;;;;;;;;;;;;;;;

;{;;;;;;;; RESET MGBA ;;;;;;;;;;;;
mgbaRESET:
mgbaSolarSensorLevel= 1
mgbaAllowOpposingDirections= OFF
mgbaUseBios= ON
mgbaSkipBios= ON
mgbaIdleOptimization= Remove Known
guicontrol,,COREDDLB,|0|1||2|3|4|5|6|7|8|9|10
guicontrol,,COREDDLC,|Remove Known||Don't Remove|Detect and Remove|
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,1

iniwrite, "%mgbaSolarSensorLevel%",%racoreopt%,OPTIONS,mgba_solar_sensor_level
iniwrite, "%mgbaAllowOpposingDirections%",%racoreopt%,OPTIONS,mgba_allow_opposing_directions
iniwrite, "%mgbaUseBios%",%racoreopt%,OPTIONS,mgba_use_bios
iniwrite, "%mgbaSkipBios%",%racoreopt%,OPTIONS,mgba_skip_bios
iniwrite, "%mgbaIdleOptimization%",%racoreopt%,OPTIONS,mgba_Idle_Optimization
return
;};;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET GENESISPLUGSGX ;;;;;;;;;;;;;
genesisplusgxRESET:
genesisPlusGxSystemHw= auto
guicontrol,,COREDDLB,|auto||sg-1000|sg-1000 II|Mark-III|master system|master system II|game gear|megadrive / genesis
genesisPlusGxRegionDetect= auto
guicontrol,,COREDDLC,|auto||ntsc-u|pal|ntsc-u
genesisPlusGxForceDtack= enabled
guicontrol,,CORECHKA,1
genesisPlusGxBios= disabled
guicontrol,,CORECHKD,0
genesisPlusGxBram= per bios
guicontrol,,COREDDLD,|per bios||per game
genesisPlusGxAddrError= enabled
guicontrol,,CORECHKB,1
genesisPlusGxLockOn= disabled
guicontrol,,CORECHKG,0
genesisPlusGxYm2413= auto
guicontrol,,COREDDLF,|auto||enabled|disabled
genesisPlusGxDacBits= disabled
guicontrol,,CORECHKH,0
genesisPlusGxBlarggNtscFilter= disabled
guicontrol,,CORERADC,0
guicontrol,,CORERADD,1
genesisPlusGxLcdFilter= disabled
guicontrol,,CORECHKC,0
genesisPlusGxOverscan= disabled
guicontrol,,CORECHKE,0
genesisPlusGxGgExtra= disabled
guicontrol,,CORECHKE,0
genesisPlusGxRender= single field
guicontrol,,COREDDLE,|single field||double field
genesisPlusGxGunCursor= no
guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
genesisPlusGxInvertMouse= no
guicontrol,,CORERADO,0
guicontrol,,CORERADP,1

iniwrite, "auto",%racoreopt%,OPTIONS,genesis_plus_gx_system_hw 
iniwrite, "auto",%racoreopt%,OPTIONS,genesis_plus_gx_region_detect
iniwrite, "enabled",%racoreopt%,OPTIONS,genesis_plus_gx_force_dtack
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_bios
iniwrite, "per bios",%racoreopt%,OPTIONS,genesis_plus_gx_bram
iniwrite, "enabled",%racoreopt%,OPTIONS,genesis_plus_gx_addr_error
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_lock_on
iniwrite, "auto",%racoreopt%,OPTIONS,genesis_plus_gx_ym2413
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_dac_bits
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_blargg_ntsc_filter
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_lcd_filter
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_overscan
iniwrite, "disabled",%racoreopt%,OPTIONS,genesis_plus_gx_gg_extra
iniwrite, "single field",%racoreopt%,OPTIONS,genesis_plus_gx_render
iniwrite, "no",%racoreopt%,OPTIONS,genesis_plus_gx_gun_cursor
iniwrite, "no",%racoreopt%,OPTIONS,genesis_plus_gx_invert_mouse
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;; RESET DESMUME ;;;;;;;;;;;;
desmumeRESET:
desmumeInternalResolution= 256x192
guicontrol,,COREDDLF,|256x192||512x384|768x576|1024x768|1280x960|1536x1152|1792x1344|2048x1536|2304x1728|2560x1920
desmumeNumCores= 1
guicontrol,,COREDDLB,|1||2|3|4
desmumeCpuMode= jit
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
desmumeJitBlockSize= 12
guicontrol,,CORECMBB,|12||12|20|30|50
desmumeScreensLayout= top/bottom
guicontrol,,COREDDLC,|top/bottom||bottom/top|left/right|right/left|top only|bottom only|quick switch|hybrid/top|hybrid/bottom
desmumePointerMouse= enable
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
desmumePointerType= mouse
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
desmumePointerColour= white
guicontrol,,COREDDLD,|white||black|red|blue|yellow
desmumePointerDevice= none
guicontrol,,CORERADK,1
guicontrol,,CORERADL,0
guicontrol,,CORERADP,0
desmumePointerDeviceDeadzone= 15
guicontrol,,COREDDLI,|5|10|15||20|25|30
desmumePointerDeviceAccelerationMod= 0
guicontrol,,CORECHKG,0
desmumePointerStylusPressure= 50
guicontrol,,CORESLDA,50
desmumePointerStylusJitter= disable
guicontrol,,CORECHKB,0
desmumeLoadToMemory= disable
guicontrol,,CORECHKA,0
desmumeAdvancedTiming= enable
guicontrol,,CORECHKC,1
desmumeFirmwareLanguage= Auto
guicontrol,,COREDDLG,|Auto||English|Japanese|French|German|Italian|Spanish
desmumeFrameskip= 0
guicontrol,,COREDDLE,|0||1|2|3|4|5|6|7|8|9
desmumeScreensGap= 0
guicontrol,,CORECMBA,|0||1|5|10|20|30|50
desmumeGfxEdgemark= enable
guicontrol,,CORECHKG,1
desmumeGfxLinehack= enable
guicontrol,,CORECHKH,1
desmumeGfxTxthack= disable
guicontrol,,CORECHKF,0
desmumeMicForceEnable= no
guicontrol,,CORECHKI,0
desmumeMicMode= internal
guicontrol,,COREDDLK,|internal||sample|random|physical
desmumeHybridLayoutScale= 1
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0

iniwrite, "256x192",%racoreopt%,OPTIONS,desmume_internal_resolution
iniwrite, "1",%racoreopt%,OPTIONS,desmume_num_cores
iniwrite, "jit",%racoreopt%,OPTIONS,desmume_cpu_mode
iniwrite, "12",%racoreopt%,OPTIONS,desmume_jit_block_size 
iniwrite, "top/bottom",%racoreopt%,OPTIONS,desmume_screens_layout
iniwrite, "enable",%racoreopt%,OPTIONS,desmume_pointer_mouse
iniwrite, "mouse",%racoreopt%,OPTIONS,desmume_pointer_type
iniwrite, "white",%racoreopt%,OPTIONS,desmume_pointer_colour
iniwrite, "none",%racoreopt%,OPTIONS,desmume_pointer_device
iniwrite, "15",%racoreopt%,OPTIONS,desmume_pointer_device_deadzone
iniwrite, "0",%racoreopt%,OPTIONS,desmume_pointer_device_acceleration_mod
iniwrite, "50",%racoreopt%,OPTIONS,desmume_pointer_stylus_pressure
iniwrite, "disable",%racoreopt%,OPTIONS,desmume_pointer_stylus_jitter
iniwrite, "disable",%racoreopt%,OPTIONS,desmume_load_to_memory
iniwrite, "enable",%racoreopt%,OPTIONS,desmume_advanced_timing
iniwrite, "Auto",%racoreopt%,OPTIONS,desmume_firmware_language
iniwrite, "0",%racoreopt%,OPTIONS,desmume_frameskip
iniwrite, "0",%racoreopt%,OPTIONS,desmume_screens_gap
iniwrite, "enable",%racoreopt%,OPTIONS,desmume_gfx_edgemark
iniwrite, "enable",%racoreopt%,OPTIONS,desmume_gfx_linehack
iniwrite, "disable",%racoreopt%,OPTIONS,desmume_gfx_txthack
iniwrite, "no",%racoreopt%,OPTIONS,desmume_mic_force_enable
iniwrite, "internal",%racoreopt%,OPTIONS,desmume_mic_mode
iniwrite, "1",%racoreopt%,OPTIONS,desmume_hybrid_layout_scale

return
;};;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;; RESET PPSSPP ;;;;;;;;;;;;;;;;
ppssppRESET:
ppssppCpuCore= jit
ppssppLockedCpuSpeed= off
ppssppLanguage= automatic
ppssppRenderingMode= buffered
ppssppAutoFrameskip= disabled
ppssppFrameskip= 0
ppssppFramerateLimit= 0
ppssppForceMaxFps= disabled
ppssppAudioLatency= 0
ppssppInternalResolution= 480x272
ppssppOutputResolution= 480x272
ppssppButtonPreference= cross
ppssppFastMemory= enabled
ppssppSetRoundingMode= enabled
ppssppBlockTransferGpu= enabled
ppssppTextureScalingLevel= 1
ppssppTextureScalingType= xbrz
ppssppTextureAnisotropicFiltering= off
ppssppTextureDeposterize= disabled
ppssppInternalShader= off
ppssppGpuHardwareTransform= enabled
ppssppVertexCache= enabled
ppssppPrescaleUv= disabled
ppssppSeparateIoThread= disabled
ppssppUnsafeFuncReplacements= enabled
ppssppSoundSpeedhack= disabled
ppssppThreadedInput= disabled

guicontrol,,COREDDLB,|off||222|266|333
guicontrol,,COREDDLC,|buffered||buffered|nonbuffered|gpu|cpu
guicontrol,,COREDDLD,|off|off||1x|2x|4x|8x|16x
guicontrol,,COREDDLE,|xbrz||xbrz|hybrid|bicubic|hybrid_bicubic
guicontrol,,COREDDLF,|480x272||480x272|960x544|1440x816|1920x1088|2400x1360|2880x1632|3360x1904|3840x2176|4320x2448|4800x2720
guicontrol,,COREDDLG,|480x272||480x272|960x544|1440x816|1920x1088|2400x1360|2880x1632|3360x1904|3840x2176|4320x2448|4800x2720
guicontrol,,COREDDLH,|automatic||automatic|english|japanese|french|german|spanish|italian|dutch|portuguese|russian|korean|chinese_traditional|chinese_simplified
guicontrol,,CORECMBA,|0||0|1|2|3|4|5
guicontrol,,CORECMBB,|0||0|1|2|3|4|5|6|7|8|9
guicontrol,,CORESLDA,|0||0|15|30|45|50|60
guicontrol,,CORECHKA,1
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,1
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORECHKH,0
guicontrol,,CORECHKI,0

guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
guicontrol,,CORERADE,0
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
guicontrol,,CORERADI,1
guicontrol,,CORERADJ,0
guicontrol,,CORERADO,1
guicontrol,,CORERADP,0
guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
guicontrol,,CORERADQ,0
guicontrol,,CORERADR,1

iniwrite,"jit",%racoreopt%,OPTIONS,ppsspp_cpu_core
iniwrite,"off",%racoreopt%,OPTIONS,ppsspp_locked_cpu_speed
iniwrite,"automatic",%racoreopt%,OPTIONS,ppsspp_language
iniwrite,"buffered",%racoreopt%,OPTIONS,ppsspp_rendering_mode
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_auto_frameskip
iniwrite,"0",%racoreopt%,OPTIONS,ppsspp_frameskip
iniwrite,"0",%racoreopt%,OPTIONS,ppsspp_framerate_limit
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_force_max_fps
iniwrite,"0",%racoreopt%,OPTIONS,ppsspp_audio_latency
iniwrite,"480x272",%racoreopt%,OPTIONS,ppsspp_internal_resolution
iniwrite,"480x272",%racoreopt%,OPTIONS,ppsspp_output_resolution
iniwrite,"cross",%racoreopt%,OPTIONS,ppsspp_button_preference
iniwrite,"enabled",%racoreopt%,OPTIONS,ppsspp_fast_memory
iniwrite,"enabled",%racoreopt%,OPTIONS,ppsspp_set_rounding_mode
iniwrite,"enabled",%racoreopt%,OPTIONS,ppsspp_block_transfer_gpu
iniwrite,"1",%racoreopt%,OPTIONS,ppsspp_texture_scaling_level
iniwrite,"xbrz",%racoreopt%,OPTIONS,ppsspp_texture_scaling_type
iniwrite,"off",%racoreopt%,OPTIONS,ppsspp_texture_anisotropic_filtering
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_texture_deposterize
iniwrite,"off",%racoreopt%,OPTIONS,ppsspp_internal_shader
iniwrite,"enabled",%racoreopt%,OPTIONS,ppsspp_gpu_hardware_transform
iniwrite,"enabled",%racoreopt%,OPTIONS,ppsspp_vertex_cache
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_prescale_uv
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_separate_io_thread
iniwrite,"enabled",%racoreopt%,OPTIONS,ppsspp_unsafe_func_replacements
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_sound_speedhack
iniwrite,"disabled",%racoreopt%,OPTIONS,ppsspp_threaded_input

return

;};;;;;;;;;;;;;;;;

;{;;;;;;; RESET NESTOPIA ;;;;;;;;;;;;
nestopiaRESET:
nestopiaBlarggNtscFilter= disabled
nestopiaPalette= consumer
nestopiaNospritelimit= disabled
nestopiaFdsAutoInsert= enabled
nestopiaOverscanV= enabled
nestopiaOverscanH= disabled
nestopiaAspect= auto
nestopiaGenieDistortion= disabled
nestopiaFavoredSystem= auto
nestopiaRamPowerState= 0x00
guicontrol,,COREDDLB,|consumer||canonical|alternative|rgb|unsaturated-v7|pal|raw|custom
guicontrol,,COREDDLC,|auto||ntsc|pal|4:3
guicontrol,,COREDDLE,|0x00||0xFF|random
guicontrol,,COREDDLD,|auto||ntsc|pal|famicom|dendy
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,1
guicontrol,,CORECHKD,1
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0

iniwrite,"disabled",%racoreopt%,OPTIONS,nestopia_blargg_ntsc_filter
iniwrite,"consumer",%racoreopt%,OPTIONS,nestopia_palette
iniwrite,"disabled",%racoreopt%,OPTIONS,nestopia_nospritelimit
iniwrite,"enabled",%racoreopt%,OPTIONS,nestopia_fds_auto_insert
iniwrite,"enabled",%racoreopt%,OPTIONS,nestopia_overscan_v
iniwrite,"disabled",%racoreopt%,OPTIONS,nestopia_overscan_h
iniwrite,"auto",%racoreopt%,OPTIONS,nestopia_aspect
iniwrite,"disabled",%racoreopt%,OPTIONS,nestopia_genie_distortion
iniwrite,"auto",%racoreopt%,OPTIONS,nestopia_favored_system
iniwrite,"0x00",%racoreopt%,OPTIONS,nestopia_ram_power_state
return
;};;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET MEDNAFEN PCE/SGX ;;;;;;;;;;;;;;;;;;;
mednafenpcefastRESET:
mednafensupergraxRESET:
pceFastCdimagecache= disabled
pceNospritelimit= disabled
pceOcmultiplier= 1
pceHoverscan= disabled
pceInitialScanline= 3
pceLastScanline= 242
pceCddavolume= 100
pceAdpcmvolume= 100
pceCdpsgvolume= 100
pceCdspeed= 1
TurboDelay= Fast
p0TurboIEnable= disabled
p0TurboIIEnable= disabled
p1TurboIEnable= disabled
p1TurboIIEnable= disabled
p2TurboIEnable= disabled
p2TurboIIEnable= disabled
p3TurboIEnable= disabled
p3TurboIIEnable= disabled
p4TurboIEnable= disabled
p4TurboIIEnable= disabled
guicontrol,,COREDDLB,|1||2|3|4|5|6|7|8|9|10|20|30|40|50
guicontrol,,COREDDLC,|1||2|4|8
guicontrol,,COREDDLD,|Fast||Medium|Slow
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKH,0
guicontrol,,CORESLDA,100
guicontrol,,CORESLDTXTA,Volume Type
guicontrol,,CORECMBA,3
guicontrol,,CORECMBB,242

iniwrite,"disabled",%racoreopt%,OPTIONS,pce_fast_cdimagecache
iniwrite,"disabled",%racoreopt%,OPTIONS,pce_nospritelimit
iniwrite,"1",%racoreopt%,OPTIONS,pce_ocmultiplier
iniwrite,"disabled",%racoreopt%,OPTIONS,pce_hoverscan
iniwrite,"3",%racoreopt%,OPTIONS,pce_initial_scanline
iniwrite,"242",%racoreopt%,OPTIONS,pce_last_scanline
iniwrite,"100",%racoreopt%,OPTIONS,pce_cddavolume
iniwrite,"100",%racoreopt%,OPTIONS,pce_adpcmvolume
iniwrite,"100",%racoreopt%,OPTIONS,pce_cdpsgvolume
iniwrite,"1",%racoreopt%,OPTIONS,pce_cdspeed
iniwrite,"Fast",%racoreopt%,OPTIONS,Turbo_Delay
iniwrite,"disabled",%racoreopt%,OPTIONS,p0_turbo_I_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p0_turbo_II_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p1_turbo_I_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p1_turbo_II_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p2_turbo_I_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p2_turbo_II_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p3_turbo_I_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p3_turbo_II_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p4_turbo_I_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,p4_turbo_II_enable
return
;};;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;; RESET MEDNAFEN SATURN ;;;;;;;;;;;;;;;
mednafensaturnRESET:
beetleSaturnCdimagecache= disabled
guicontrol,,CORECHKA,0
beetleSaturnInitialScanline= 0
guicontrol,,CORECMBA,|0||0
beetleSaturnInitialScanlinePal= 0
beetleSaturnLastScanline= 239
guicontrol,,CORECMBB,|239||287
beetleSaturnLastScanlinePal= 287

iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_saturn_cdimagecache
iniwrite,"0",%racoreopt%,OPTIONS,beetle_saturn_initial_scanline
iniwrite,"0",%racoreopt%,OPTIONS,beetle_saturn_initial_scanline_pal
iniwrite,"239",%racoreopt%,OPTIONS,beetle_saturn_last_scanline
iniwrite,"287",%racoreopt%,OPTIONS,beetle_saturn_last_scanline_pal
return
;};;;;;;;;;;;

;{;;;;;;;; RESET REICAST ;;;;;;;;;;;;
reicastRESET:
reicastCpuMode= dynamicRecompiler
reicastBootToBios= disabled
reicastInternalResolution= 640x480
reicastMipmapping= enabled
reicastWidescreenHack= disabled
reicastAudioBufferSize= 1024
reicastCableType= TV (VBS/Y+S/C)
reicastBroadcast= 4
reicastRegion= 3
reicastPrecompileShaders= disabled
reicastEnableRtt= enabled
reicastEnablePurupuru= enabled
reicastVolumeModifierMode= disabled
reicastFramerate= normal
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,1
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,1
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,1
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
guicontrol,,CORECMA,|1024||2048
guicontrol,,COREDDLB,|640x480||1280x960|1920x1440|2560x1920|3200x2400|3840x2880|4480x3360
guicontrol,,COREDDLC,|V (VBS/Y+S/C)||TV (RGB)|VGA (RGB)
guicontrol,,COREDDLD,|4||0|1|2|3|4
guicontrol,,COREDDLE,|3||0|1|2|3
guicontrol,,COREDDLF,|normal||fullspeed

iniwrite,"dynamic_recompiler",%racoreopt%,OPTIONS,reicast_cpu_mode
iniwrite,"disabled",%racoreopt%,OPTIONS,reicast_boot_to_bios
iniwrite,"640x480",%racoreopt%,OPTIONS,reicast_internal_resolution
iniwrite,"enabled",%racoreopt%,OPTIONS,reicast_mipmapping
iniwrite,"disabled",%racoreopt%,OPTIONS,reicast_widescreen_hack
iniwrite,"1024",%racoreopt%,OPTIONS,reicast_audio_buffer_size
iniwrite, "TV (VBS/Y+S/C)",%racoreopt%,OPTIONS,reicast_cable_type
iniwrite,"4",%racoreopt%,OPTIONS,reicast_broadcast
iniwrite,"3",%racoreopt%,OPTIONS,reicast_region
iniwrite,"disabled",%racoreopt%,OPTIONS,reicast_precompile_shaders
iniwrite,"enabled",%racoreopt%,OPTIONS,reicast_enable_rtt
iniwrite,"enabled",%racoreopt%,OPTIONS,reicast_enable_purupuru
iniwrite,"disabled",%racoreopt%,OPTIONS,reicast_volume_modifier_mode
iniwrite,"normal",%racoreopt%,OPTIONS,reicast_framerate

return
;};;;;;;;;;;;;;

;{;;;;;;;; RESET BLUEMSX ;;;;;;;;;;;;;;;;
bluemsxRESET:
bluemsxMsxtype= MSX2+
bluemsxVdpSynctype= Auto
bluemsxYm2413Enable= enabled
guicontrol,,COREDDLB,|MSX|MSX2+||MSXturboR
guicontrol,,COREDDLC,|Auto||50Hz|60Hz
guicontrol,,CORECHKA, YM2413 Sound
guicontrol,,CORECHKA,1

bluemsx_msxtype = "MSX2+"
bluemsx_vdp_synctype = "Auto"
bluemsx_ym2413_enable = "enabled"
return
;};;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;; RESET FMSX ;;;;;;;;;;;;;;;;
fmsxRESET:
fmsxmode= MSX2+
fmsxvideomode= NTSC
fmsxmappertypemode= Guess Mapper Type B

iniwrite, "MSX2+",%racoreopt%,OPTIONS,fmsx_mode
iniwrite,"NTSC",%racoreopt%,OPTIONS,fmsx_video_mode
iniwrite, "Guess Mapper Type B",%racoreopt%,OPTIONS,fmsx_mapper_type_mode
return
;};;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;; RESET PUAE ;;;;;;;;;;;;;;;
puaeRESET:
resolution= 640x480
analog= OFF

iniwrite,"640x480",%racoreopt%,OPTIONS,resolution
iniwrite,"OFF",%racoreopt%,OPTIONS,analog
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET PICODRIVE ;;;;;;;;;;;;;;;
picodriveRESET:
picodriveInput1= 3 button pad
picodriveInput2= 3 button pad
picodriveSprlim= disabled
picodriveRamcart= disabled
picodriveRegion= Auto
picodriveRegionFps= Auto
picodriveAspect= PAR
guicontrol,,COREDDLB,|3 button pad||6 button pad|none
guicontrol,,COREDDLC,|3 button pad||6 button pad|none
guicontrol,,COREDDLD,|Auto||Japan NTSC|Japan PAL|US|Europe
guicontrol,,COREDDLE,|Auto||NTSC|PAL
guicontrol,,COREDDLF,|PAR||4/3|CRT
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0


iniwrite, "3 button pad",%racoreopt%,OPTIONS,picodrive_input1
iniwrite, "3 button pad",%racoreopt%,OPTIONS,picodrive_input2
iniwrite,"disabled",%racoreopt%,OPTIONS,picodrive_sprlim
iniwrite,"disabled",%racoreopt%,OPTIONS,picodrive_ramcart
iniwrite,"Auto",%racoreopt%,OPTIONS,picodrive_region
iniwrite,"Auto",%racoreopt%,OPTIONS,picodrive_region_fps
iniwrite,"PAR",%racoreopt%,OPTIONS,picodrive_aspect
return
;};;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET MEDNAFEN PSX HW ;;;;;;;;;;;;
mednafenpsxhwRESET:
beetle_psx_display_vram= disabled
beetle_psx_dither_mode= internal resolution
beetle_psx_filter= nearest
beetle_psx_internal_color_depth= 32bpp
beetle_psx_pgxp_caching= enabled
beetle_psx_pgxp_mode= memory + CPU
beetle_psx_pgxp_texture= enabled
beetle_psx_renderer= opengl
beetle_psx_renderer_software_fb= enabled
beetle_psx_scale_dither= enabled
beetle_psx_wireframe= disabled
guicontrol,,COREDDLB,|internal resolution||
guicontrol,,COREDDLC,|nearest||
guicontrol,,COREDDLD,|32bpp||
guicontrol,,COREDDLE,|memory + cpu||
guicontrol,,COREDDLF,|opengl||
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,1
guicontrol,,CORECHKC,1
guicontrol,,CORECHKD,1
guicontrol,,CORECHKE,1
guicontrol,,CORECHKF,0

iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_display_vram
iniwrite, "internal resolution",%racoreopt%,OPTIONS,beetle_psx_dither_mode
iniwrite,"nearest",%racoreopt%,OPTIONS,beetle_psx_filter
iniwrite,"32bpp",%racoreopt%,OPTIONS,beetle_psx_internal_color_depth
iniwrite,"enabled",%racoreopt%,OPTIONS,beetle_psx_pgxp_caching
iniwrite, "memory + CPU",%racoreopt%,OPTIONS,beetle_psx_pgxp_mode
iniwrite,"enabled",%racoreopt%,OPTIONS,beetle_psx_pgxp_texture
iniwrite,"opengl",%racoreopt%,OPTIONS,beetle_psx_renderer
iniwrite,"enabled",%racoreopt%,OPTIONS,beetle_psx_renderer_software_fb
iniwrite,"enabled",%racoreopt%,OPTIONS,beetle_psx_scale_dither
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_wireframe
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;; RESET MEDNAFEN PSX ;;;;;;;;;;;;;;;;;;;;;;
mednafenPsxRESET:
beetlePsxCdimagecache= disabled
beetlePsxCpuOverclock= disabled
beetlePsxSkipbios= enabled
beetlePsxWidescreenHack= enabled
beetlePsxInternalResolution= 2x
beetlePsxUseMednafenMemcard0Method= libretro
beetlePsxEnableMemcard1= enabled
beetlePsxSharedMemoryCards= disabled
beetlePsxAnalogCalibration= disabled
beetlePsxInitialScanline= 0
beetlePsxInitialScanlinePal= 0
beetlePsxLastScanline= 239
beetlePsxLastScanlinePal= 287
beetlePsxAnalogToggle= disabled
beetlePsxEnableMultitapPort1= disabled
beetlePsxEnableMultitapPort2= disabled
beetlePsxFrameDupingEnable= disabled
beetlePsxDisplayInternalFramerate= disabled
beetlePsxCropOverscan= enabled
beetlePsxImageOffset= disabled
beetlePsxImageCrop= disabled
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,1
guicontrol,,CORECHKG,1
guicontrol,,CORECHKH,0
guicontrol,,CORECHKI,0
guicontrol,,CORERADA,0
guicontrol,,CORERADB,1
guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
guicontrol,,CORERADS,0
guicontrol,,CORERADT,1
guicontrol,,COREDDLB,|1x(native)||1x(native)|2x|4x|8x
guicontrol,,COREDDLC,|libretro||mednafen
guicontrol,,CORECMBA,|0||0
guicontrol,,CORECMBB,|239||287


iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_analog_calibration
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_analog_toggle
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_cdimagecache
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_cpu_overclock
iniwrite,"enabled",%racoreopt%,OPTIONS,beetle_psx_crop_overscan
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_display_internal_framerate
iniwrite,"enabled",%racoreopt%,OPTIONS,beetle_psx_enable_memcard1
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_enable_multitap_port1
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_enable_multitap_port2
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_frame_duping_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_image_crop
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_image_offset
iniwrite,"0",%racoreopt%,OPTIONS,beetle_psx_initial_scanline
iniwrite,"0",%racoreopt%,OPTIONS,beetle_psx_initial_scanline_pal
iniwrite, "1x(native)",%racoreopt%,OPTIONS,beetle_psx_internal_resolution
iniwrite,"239",%racoreopt%,OPTIONS,beetle_psx_last_scanline
iniwrite,"287",%racoreopt%,OPTIONS,beetle_psx_last_scanline_pal
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_shared_memory_cards
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_skipbios
iniwrite,"libretro",%racoreopt%,OPTIONS,beetle_psx_use_mednafen_memcard0_method
iniwrite,"disabled",%racoreopt%,OPTIONS,beetle_psx_widescreen_hack

return
;};;;;;

;{;;;;;;; RESET MEDNAFEN NGP ;;;;;;;;
mednafenngpRESET:
ngpLanguage= english
guicontrol,,COREDDLB,|english||french|japanese|korean|spanish|german

iniwrite,"english",%racoreopt%,OPTIONS,ngp_language
return
;};;;;;;;;;;;;

;{;;;;;; RESET FCEUMM ;;;;;;;;;;;
fceummRESET:
fceummPalette= asqrealc
fceummNospritelimit= disabled
fceummOverclocking= disabled
fceummOverscan= enabled
fceummAspect= 8:7 PAR
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,1
guicontrol,,COREDDLB,|asqrealc||loopy|quor|chris|matt|pasofami|crashman|mess|zphod-cv|zphod-smb|vs-drmar|vs-cv|vs-smb|nintendo-vc|yuv-v3|unsaturated-vc|sony-xa2025as-us|pal|bmf-final2|bmf-final3|raw
guicontrol,,COREDDLC,|8:7 PAR||4:3
iniwrite,"asqrealc",%racoreopt%,OPTIONS,fceumm_palette
iniwrite,"disabled",%racoreopt%,OPTIONS,fceumm_nospritelimit
iniwrite,"disabled",%racoreopt%,OPTIONS,fceumm_overclocking
iniwrite,"enabled",%racoreopt%,OPTIONS,fceumm_overscan
iniwrite, "8:7 PAR",%racoreopt%,OPTIONS,fceumm_aspect
return
;};;;;;;;;;;;;;;;;

;{;;;;;;; RESET FUSE ;;;;;;;;;;;
fuseRESET:
fuse_machine = "Spectrum 48K"
fuse_hide_border = "disabled"
fuse_fast_load = "enabled"
fuse_load_sound = "enabled"
fuse_speaker_type = "tv speaker"
fuse_ay_stereo_separation = "none"
fuse_key_ovrlay_transp = "enabled"
fuse_key_hold_time = "500"
guicontrol,,COREDDLB,|Spectrum 48K||Spectrum 48K (NTSC)|Spectrum 128K|Spectrum +2|Spectrum +2A|Spectrum +3|Spectrum +3e|Spectrum SE|Timex TC2048|Timex TC2068|imex TS2068|Spectrum 16K|Pentagon 128K|Pentagon 512K|Pentagon 1024|Scorpion 256K
guicontrol,,COREDDLC,|tv speaker||beeper|unfiltered
guicontrol,,COREDDLD,|none||abc|acb
guicontrol,,CORECMBA,|500||1000|100|300
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,1
guicontrol,,CORECHKC,1
guicontrol,,CORECHKD,1
iniwrite, "Spectrum 48K",%racoreopt%,OPTIONS,fuse_machine
iniwrite,"disabled",%racoreopt%,OPTIONS,fuse_hide_border
iniwrite,"enabled",%racoreopt%,OPTIONS,fuse_fast_load
iniwrite,"enabled",%racoreopt%,OPTIONS,fuse_load_sound
iniwrite, "tv speaker",%racoreopt%,OPTIONS,fuse_speaker_type
iniwrite,"none",%racoreopt%,OPTIONS,fuse_ay_stereo_separation
iniwrite,"enabled",%racoreopt%,OPTIONS,fuse_key_ovrlay_transp
iniwrite,"500",%racoreopt%,OPTIONS,fuse_key_hold_time
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET 4DO ;;;;;;;;;;;
4doRESET:
4doHighResolution= disabled
guicontrol,,COREDDLB,|enabled||disabled

iniwrite,"disabled",%racoreopt%,OPTIONS,4do_high_resolution
return

;};;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;; RESET px68k ;;;;;;;;;
px68kRESET:
px68kcpuspeed= 200Mhz (OC)
px68kramsize= 12MB
px68kanalog= OFF
px68kjoytype1= Default (2 Buttons)
px68kjoytype2= Default (2 Buttons)

guicontrol,,CORECHKA,1
guicontrol,,COREDDLF,|200Mhz (OC)||10Mhz|16Mhz|25Mhz|33Mhz (OC)|66Mhz (OC)|100Mhz (OC)|150Mhz (OC)|200Mhz (OC)
guicontrol,,COREDDLB,|12MB||1MB|2MB|3MB|4MB|5MB|6MB|7MB|8MB|9MB|10MB|11MB|12MB
guicontrol,,COREDDLC,|Default (2 Buttons)||CPSF-MD (8 Buttons)|CPSF-SFC (8 Buttons)
guicontrol,,COREDDLD,|Default (2 Buttons)||CPSF-MD (8 Buttons)|CPSF-SFC (8 Buttons)


iniwrite,"200Mhz (OC)",%racoreopt%,OPTIONS,px68k_cpuspeed
iniwrite,"OFF",%racoreopt%,OPTIONS,px68k_analog
iniwrite,"12MB",%racoreopt%,OPTIONS,px68k_ramsize
iniwrite,"Default (2 Buttons)",%racoreopt%,OPTIONS,px68k_joytype1
iniwrite,"Default (2 Buttons)",%racoreopt%,OPTIONS,px68k_joytype2
return
;};;;;;

;{;;;;;; RESET DOSBOX ;;;;;;;;;
dosboxRESET:
dosboxMachineType= vgaonly
dosboxEmulatedMouse= enable
dosboxCpuCycles0= 0
dosboxCpuCycles1= 0
dosboxCpuCycles2= 1
dosboxCpuCycles3= 0
dosboxMapperY= null
dosboxMapperX= null
dosboxMapperB= null
dosboxMapperA= null
dosboxMapperL= null
dosboxMapperR= null
dosboxMapperUp= null
dosboxMapperDown= null
dosboxMapperLeft= null
dosboxMapperRight= null
dosboxMapperSelect= null
dosboxMapperStart= null
guicontrol,,CORECHKA,1
guicontrol,,COREDDLF,|vgaonly||svga_et3000|svga_et4000|svga_paradise|hercules|cga|tandy|pcjr|ega
guicontrol,,COREDDLB,|0|0||1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLC,|0|0||1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLD,|0|1||2|3|4|5|6|7|8|9
guicontrol,,COREDDLE,|0|0||1|2|3|4|5|6|7|8|9
guicontrol,,COREDDLH,|null||%KBSET%|
guicontrol,,COREDDLG,|y||y|x|b|a|l|r|up|down|left|right


iniwrite,"vgaonly",%racoreopt%,OPTIONS,dosbox_machine_type
iniwrite,"enable",%racoreopt%,OPTIONS,dosbox_emulated_mouse
iniwrite,"0",%racoreopt%,OPTIONS,dosbox_cpu_cycles_0
iniwrite,"0",%racoreopt%,OPTIONS,dosbox_cpu_cycles_1
iniwrite,"1",%racoreopt%,OPTIONS,dosbox_cpu_cycles_2
iniwrite,"0",%racoreopt%,OPTIONS,dosbox_cpu_cycles_3
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_y
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_x
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_b
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_a
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_l
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_r
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_up
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_down
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_left
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_right
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_select
iniwrite,"null",%racoreopt%,OPTIONS,dosbox_mapper_start

return
;};;;;;

;{;;;;;; RESET SNES9X ;;;;;;;;;;;
snes9x2005RESET:
snes9x2005_plusRESET:
snes9x2010RESET:
snes9x2002RESET:
snes9xRESET:
snes9xOverclock= disabled
snes9xLayer1= Yes
snes9xLayer2= Yes
snes9xLayer3= Yes
snes9xLayer4= Yes
snes9xLayer5= Yes
snes9xGfxClip= Yes
snes9xGfxTransp= Yes
snes9xSndchan1= Yes
snes9xSndchan2= Yes
snes9xSndchan3= Yes
snes9xSndchan4= Yes
snes9xSndchan5= Yes
snes9xSndchan6= Yes
snes9xSndchan7= Yes
snes9xSndchan8= Yes
guicontrol,,COREDDLB,|layer_1||layer_2|layer_3|layer_4|layer_5
guicontrol,,COREDDLC,|sndchan_1||sndchan_2|sndchan_3|sndchan_4|sndchan_5|sndchan_6|sndchan_7|sndchan_8
guicontrol,,CORECHKA,1
guicontrol,,CORECHKB,1
guicontrol,,CORECHKD,1
guicontrol,,CORECHKE,1
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
iniwrite,"disabled",%racoreopt%,OPTIONS,snes9x_overclock
iniwrite,"disabled",%racoreopt%,OPTIONS,snes9x_next_overclock
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_layer_1
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_layer_2
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_layer_3
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_layer_4
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_layer_5
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_gfx_clip
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_gfx_transp
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_1
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_2
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_3
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_4
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_5
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_6
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_7
iniwrite,"Yes",%racoreopt%,OPTIONS,snes9x_sndchan_8
return
;};;;;;;;;;;;;

;{;;;;;; RESET FBA ;;;;;;;;;
fbalpha2012CPS2RESET:
fbalpha2012CPS1RESET:
fbalpha2012RESET:
fbalphaRESET:
fbadiagnostics= disabled
diagnostics= disabled
fbaunibios= disabled
fbacpuspeedadjust= 100
cpuspeedadjust= 100
fbacontrols= gamepad
fbaaspect= DAR
fbacontrolsp1= gamepad
fbacontrolsp2= gamepad
fbash2mode= accurate
fbahiscores= enabled
fbalrcontrolsp1= normal
fbalrcontrolsp2= normal
guicontrol,,COREDDLB,|100||110|120|130|140|150|160|170|180|190|200
guicontrol,,COREDDLC,|accurate||fast
guicontrol,,COREDDLD,|gamepad||arcade|newgen|classic
guicontrol,,COREDDLE,|gamepad||arcade|newgen|classic
guicontrol,,COREDDLG,|gamepad||arcade|newgen|classic
guicontrol,,COREDDLH,|gamepad||arcade|newgen|classic
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKB,1
iniwrite,"disabled",%racoreopt%,OPTIONS,fba-diagnostics
iniwrite,"disabled",%racoreopt%,OPTIONS,diagnostics
iniwrite,"disabled",%racoreopt%,OPTIONS,fba-unibios
iniwrite,"100",%racoreopt%,OPTIONS,cpu-speed-adjust
iniwrite,"100",%racoreopt%,OPTIONS,fba-cpu-speed-adjust
iniwrite,"gamepad",%racoreopt%,OPTIONS,fba-controls
iniwrite,"DAR",%racoreopt%,OPTIONS,fba-aspect
iniwrite,"gamepad",%racoreopt%,OPTIONS,fba-controls-p1
iniwrite,"gamepad",%racoreopt%,OPTIONS,fba-controls-p2
iniwrite,"accurate",%racoreopt%,OPTIONS,fba-sh2-mode
iniwrite,"enabled",%racoreopt%,OPTIONS,fba-hiscores
iniwrite,"normal",%racoreopt%,OPTIONS,fba-lr-controls-p1
iniwrite,"normal",%racoreopt%,OPTIONS,fba-lr-controls-p2
return

fbaneogeoRESET:
fbalpha2012neogeoRESET:
fbaneogeomode= MVS
fbaneogeocontrolsp1= classic
fbaneogeocontrolsp2= classic

iniwrite,"MVS",%racoreopt%,OPTIONS,fba-neogeo-mode
iniwrite,"classic",%racoreopt%,OPTIONS,fba-neogeo-controls-p1
iniwrite,"classic",%racoreopt%,OPTIONS,fba-neogeo-controls-p2
return
;};;;;;;;;;;;;;;;;;;;;;;

;{;;;;; RESET PARALLELN64 ;;;;;;;;;;
paralleln64RESET:
paralleln64cpucore= dynamicRecompiler
paralleln64audiobuffersize= 2048
paralleln64astickdeadzone= 15
paralleln64pak1= none
paralleln64pak2= none
paralleln64pak3= none
paralleln64pak4= none
paralleln64disableExpmem= enabled
paralleln64gfxpluginaccuracy= veryhigh
paralleln64gfxplugin= auto
paralleln64rspplugin= auto
paralleln64screensize= 640x480
paralleln64aspectratiohint= normal
paralleln64filtering= automatic
paralleln64polyoffsetfactor= -3.0
paralleln64polyoffsetunits= -3.0
paralleln64angrylionvioverlay= disabled
paralleln64virefresh= 1500
paralleln64bufferswap= off
paralleln64framerate= original
paralleln64vcachevbo= off
paralleln64bootdevice= Default
paralleln6464ddhardware= disabled
guicontrol,,COREDDLB,|dynamic_recompiler||cached_interpreter|pure_interpreter
guicontrol,,COREDDLC,|veryhigh||high|medium|low
guicontrol,,COREDDLD,|auto||glide64|gln64|rice|angrylion|parallel
guicontrol,,COREDDLF,|auto||hle|parallel|cxd4
guicontrol,,COREDDLG,|640x480||960x720|1280x960|1600x1200|1920x1440|2240x1680|320x240
guicontrol,,COREDDLH,|automatic||bilinear|N64 3-point|nearest
guicontrol,,COREDDLE,|5|10|15||20|25|30
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
guicontrol,,CORERADE,0
guicontrol,,CORERADF,0
guicontrol,,CORERADS,1
guicontrol,,CORERADT,0
guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
guicontrol,,CORECMBA,|none||none|memory|rumble

iniwrite,"dynamic_recompiler",%racoreopt%,OPTIONS,parallel_n64-cpucore
iniwrite,"2048",%racoreopt%,OPTIONS,parallel_n64-audio-buffer-size
iniwrite,"15",%racoreopt%,OPTIONS,parallel_n64-astick-deadzone
iniwrite,"none",%racoreopt%,OPTIONS,parallel_n64-pak1
iniwrite,"none",%racoreopt%,OPTIONS,parallel_n64-pak2
iniwrite,"none",%racoreopt%,OPTIONS,parallel_n64-pak3
iniwrite,"none",%racoreopt%,OPTIONS,parallel_n64-pak4
iniwrite,"enabled",%racoreopt%,OPTIONS,parallel_n64-disable_expmem
iniwrite,"veryhigh",%racoreopt%,OPTIONS,parallel_n64-gfxplugin-accuracy
iniwrite,"enabled",%racoreopt%,OPTIONS,parallel_n64-parallel-rdp-synchronous
iniwrite,"auto",%racoreopt%,OPTIONS,parallel_n64-gfxplugin
iniwrite,"auto",%racoreopt%,OPTIONS,parallel_n64-rspplugin
iniwrite,"640x480",%racoreopt%,OPTIONS,parallel_n64-screensize
iniwrite,"normal",%racoreopt%,OPTIONS,parallel_n64-aspectratiohint
iniwrite,"automatic",%racoreopt%,OPTIONS,parallel_n64-filtering
iniwrite,"-3.0",%racoreopt%,OPTIONS,parallel_n64-polyoffset-factor
iniwrite,"-3.0",%racoreopt%,OPTIONS,parallel_n64-polyoffset-units
iniwrite,"disabled",%racoreopt%,OPTIONS,parallel_n64-angrylion-vioverlay
iniwrite,"1500",%racoreopt%,OPTIONS,parallel_n64-virefresh
iniwrite,"disabled",%racoreopt%,OPTIONS,parallel_n64-bufferswap
iniwrite,"original",%racoreopt%,OPTIONS,parallel_n64-framerate
iniwrite,"Default",%racoreopt%,OPTIONS,parallel_n64-boot-device
iniwrite,"disabled",%racoreopt%,OPTIONS,parallel_n64-64dd-hardware

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;; RESET MUPEN64PLUS ;;;;;;;;;;
mupen64plusRESET:
mupen64cpucore= dynamicRecompiler
mupen64audiobuffersize= 2048
mupen64astickdeadzone= 15
mupen64pak1= none
mupen64pak2= none
mupen64pak3= none
mupen64pak4= none
mupen64disableExpmem= enabled
mupen64gfxpluginaccuracy= veryhigh
mupen64gfxplugin= auto
mupen64rspplugin= auto
mupen64screensize= 640x480
mupen64aspectratiohint= normal
mupen64filtering= automatic
mupen64polyoffsetfactor= -3.0
mupen64polyoffsetunits= -3.0
mupen64angrylionvioverlay= disabled
mupen64virefresh= 1500
mupen64bufferswap= off
mupen64framerate= original
mupen64vcachevbo= off
mupen64bootdevice= Default
mupen6464ddhardware= disabled


guicontrol,,COREDDLB,|dynamic_recompiler||cached_interpreter|pure_interpreter
guicontrol,,COREDDLC,|veryhigh||high|medium|low
guicontrol,,COREDDLD,|auto||glide64|gln64|rice|angrylion|parallel
guicontrol,,COREDDLF,|auto||hle|parallel|cxd4
guicontrol,,COREDDLG,|640x480||960x720|1280x960|1600x1200|1920x1440|2240x1680|320x240
guicontrol,,COREDDLH,|automatic||bilinear|N64 3-point|nearest
guicontrol,,COREDDLE,|5|10|15||20|25|30
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
guicontrol,,CORERADE,0
guicontrol,,CORERADF,0
guicontrol,,CORERADS,1
guicontrol,,CORERADT,0
guicontrol,,CORERADM,0
guicontrol,,CORERADN,1
guicontrol,,CORECMBA,|none||none|memory|rumble

iniwrite,"dynamic_recompiler",%racoreopt%,OPTIONS,mupen64-cpucore
iniwrite,"2048",%racoreopt%,OPTIONS,mupen64-audio-buffer-size
iniwrite,"15",%racoreopt%,OPTIONS,mupen64-astick-deadzone
iniwrite,"none",%racoreopt%,OPTIONS,mupen64-pak1
iniwrite,"none",%racoreopt%,OPTIONS,mupen64-pak2
iniwrite,"none",%racoreopt%,OPTIONS,mupen64-pak3
iniwrite,"none",%racoreopt%,OPTIONS,mupen64-pak4
iniwrite,"enabled",%racoreopt%,OPTIONS,mupen64-disable_expmem
iniwrite,"veryhigh",%racoreopt%,OPTIONS,mupen64-gfxplugin-accuracy
iniwrite,"auto",%racoreopt%,OPTIONS,mupen64-gfxplugin
iniwrite,"auto",%racoreopt%,OPTIONS,mupen64-rspplugin
iniwrite,"640x480",%racoreopt%,OPTIONS,mupen64-screensize
iniwrite,"normal",%racoreopt%,OPTIONS,mupen64-aspectratiohint
iniwrite,"automatic",%racoreopt%,OPTIONS,mupen64-filtering
iniwrite, "-3.0",%racoreopt%,OPTIONS,mupen64-polyoffset-factor
iniwrite, "-3.0",%racoreopt%,OPTIONS,mupen64-polyoffset-units
iniwrite,"disabled",%racoreopt%,OPTIONS,mupen64-angrylion-vioverlay
iniwrite,"1500",%racoreopt%,OPTIONS,mupen64-virefresh
iniwrite,"off",%racoreopt%,OPTIONS,mupen64-bufferswap
iniwrite,"original",%racoreopt%,OPTIONS,mupen64-framerate
iniwrite,"off",%racoreopt%,OPTIONS,mupen64-vcache-vbo
iniwrite,"Default",%racoreopt%,OPTIONS,mupen64-boot-device
iniwrite,"disabled",%racoreopt%,OPTIONS,mupen64-64dd-hardware


return
;};;;;;;;;;;;;;;;

;{;;;;;; RESET GAMBATTE ;;;;;;;;;;;
gambatteRESET:
gambatteGbColorization= auto
gambatteGbInternalPalette= GBC - Blue
gambatteGbcColorCorrection= enabled
gambatteGbHwmode= Auto
gambatteGbLinkMode= Not Connected
gambatteGbLinkNetworkPort= 56401
gambatteGbLinkNetworkServerIpOctet1= 0
gambatteGbLinkNetworkServerIpOctet2= 0
gambatteGbLinkNetworkServerIpOctet3= 0
gambatteGbLinkNetworkServerIpOctet4= 0
guicontrol,,COREDDLB,|auto||internal|custom|off
guicontrol,,COREDDLC,|GBC - Blue||GBC - Brown|GBC - Dark Blue|GBC - Dark Brown|GBC - Green|GBC - Dark Green|GBC - Greyscale|GBC - Inverted|GBC - Orange|GBC - Pastel Mix|GBC - Red|GBC - Yellow|Special 1|Special 2|Special 3
guicontrol,,COREDDLD,|Auto||GB|GBA
guicontrol,,COREDDLF,|Not Connected||Network Server|Network Client
guicontrol,,COREDDLE,|octet1||octet2|octet3|octet4
guicontrol,,CORECHKA,1
guicontrol,,CORECMBA,|0||255
guicontrol,,CORECMBB,|0||255
iniwrite,"auto",%racoreopt%,OPTIONS,gambatte_gb_colorization
iniwrite, "GBC - Blue",%racoreopt%,OPTIONS,gambatte_gb_internal_palette
iniwrite,"enabled",%racoreopt%,OPTIONS,gambatte_gbc_color_correction
iniwrite,"Auto",%racoreopt%,OPTIONS,gambatte_gb_hwmode
iniwrite, "Not Connected",%racoreopt%,OPTIONS,gambatte_gb_link_mode
iniwrite,"56401",%racoreopt%,OPTIONS,gambatte_gb_link_network_port
iniwrite,"0",%racoreopt%,OPTIONS,gambatte_gb_link_network_server_ip_octet1
iniwrite,"0",%racoreopt%,OPTIONS,gambatte_gb_link_network_server_ip_octet2
iniwrite,"0",%racoreopt%,OPTIONS,gambatte_gb_link_network_server_ip_octet3
iniwrite,"0",%racoreopt%,OPTIONS,gambatte_gb_link_network_server_ip_octet4
return
;};;;;;;;;;;;;;;;;;

;{;;;;;;; RESET GLUPEN64 ;;;;;;;;
glupen64RESET:
glupen64cpucore= dynamic_recompiler
glupen64rspmode= HLE
glupen6443screensize= 320x240
glupen64169screensize= 320x180
glupen64aspect= 4:3
glupen64BilinearMode= standard
glupen64EnableFBEmulation= True
glupen64UseNativeResolutionFactor= 0x
glupen64EnableCopyAuxiliaryToRDRAM= False
glupen64EnableCopyColorToRDRAM= Async
glupen64EnableCopyDepthToRDRAM= Off
glupen64EnableCopyColorFromRDRAM= False
glupen64EnableHWLighting= False
glupen64CorrectTexrectCoords= Off
glupen64EnableNativeResTexrects= False
glupen64EnableLegacyBlending= False
glupen64astickdeadzone= 15
glupen64pak1= memory
glupen64pak2= memory
glupen64pak3= memory
glupen64pak4= memory
guicontrol,,COREDDLE,|5|10|15||20|25|30
guicontrol,,COREDDLI,|0x||1x|2x|3x|4x
guicontrol,,COREDDLG,|Sync||Async|Off
guicontrol,,COREDDLH,|Software|FromMem||Off
guicontrol,,COREDDLB,|dynamic_recompiler||cached_interpreter|pure_interpreter
guicontrol,,COREDDLC,|320x240||640x480|960x720|1280x960|1600x1200|1920x1440
guicontrol,,COREDDLD,|320x180||640x360|960x540|1280x720|1920x1080|3840x2160
guicontrol,,CORERADC,1
guicontrol,,CORERADD,0
guicontrol,,CORERADE,0
guicontrol,,CORERADF,0
guicontrol,,COREDDLF,|Auto||Force|Off
guicontrol,,CORECMBA,|none|memory||rumble
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKH,0

iniwrite,"dynamic_recompiler",%racoreopt%,OPTIONS,glupen64-cpucore
iniwrite,"HLE",%racoreopt%,OPTIONS,glupen64-rspmode
iniwrite,"320x240",%racoreopt%,OPTIONS,glupen64-43screensize
iniwrite,"320x180",%racoreopt%,OPTIONS,glupen64-169screensize
iniwrite, "4:3",%racoreopt%,OPTIONS,glupen64-aspect
iniwrite,"standard",%racoreopt%,OPTIONS,glupen64-BilinearMode
iniwrite,"True",%racoreopt%,OPTIONS,glupen64-EnableFBEmulation
iniwrite,"0x",%racoreopt%,OPTIONS,glupen64-UseNativeResolutionFactor
iniwrite,"False",%racoreopt%,OPTIONS,glupen64-EnableCopyAuxiliaryToRDRAM
iniwrite,"Async",%racoreopt%,OPTIONS,glupen64-EnableCopyColorToRDRAM
iniwrite,"Off",%racoreopt%,OPTIONS,glupen64-EnableCopyDepthToRDRAM
iniwrite,"False",%racoreopt%,OPTIONS,glupen64-EnableCopyColorFromRDRAM
iniwrite,"False",%racoreopt%,OPTIONS,glupen64-EnableHWLighting
iniwrite,"Off",%racoreopt%,OPTIONS,glupen64-CorrectTexrectCoords
iniwrite,"False",%racoreopt%,OPTIONS,glupen64-EnableNativeResTexrects
iniwrite,"False",%racoreopt%,OPTIONS,glupen64-EnableLegacyBlending
iniwrite,"15",%racoreopt%,OPTIONS,glupen64-astick-deadzone
iniwrite,"memory",%racoreopt%,OPTIONS,glupen64-pak1
iniwrite,"memory",%racoreopt%,OPTIONS,glupen64-pak2
iniwrite,"memory",%racoreopt%,OPTIONS,glupen64-pak3
iniwrite,"memory",%racoreopt%,OPTIONS,glupen64-pak4
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;; RESET MAME ;;;;;;;;;;;;
mameRESET:
mameReadConfig= disabled
mameWriteConfig= disabled
mameSaves= game
mameAutoSave= disabled
mameMouseEnable= disabled
mameThrottle= disabled
mameCheatsEnable= disabled
mameHideNagscreen= disabled
mameHideGameinfo= disabled
mameHideWarnings= disabled
mameAlternateRenderer= disabled
mameSoftlistsEnable= enabled
mameSoftlistsAutoMedia= enabled
mameMediaType= rom
mameBootToBios= disabled
mameBootToOsd= disabled
mameBootFromCli= disabled
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORECHKH,1
guicontrol,,CORECHKI,0
guicontrol,,COREDDLB,|game||system
guicontrol,,COREDDLC,|rom||cart|flop|cdrom|cass|hard|serl|prinreturn
guicontrol,,COREDDLC,|enabled||disabled
guicontrol,,COREDDLD,|disabled||enabled
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_read_config
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_write_config
iniwrite,"game",%racoreopt%,OPTIONS,mame_saves
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_auto_save
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_mouse_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_throttle
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_cheats_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_hide_nagscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_hide_gameinfo
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_hide_warnings
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_alternate_renderer
iniwrite,"enabled",%racoreopt%,OPTIONS,mame_softlists_enable
iniwrite,"enabled",%racoreopt%,OPTIONS,mame_softlists_auto_media
iniwrite,"rom",%racoreopt%,OPTIONS,mame_media_type
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_boot_to_bios
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_boot_to_osd
iniwrite,"disabled",%racoreopt%,OPTIONS,mame_boot_from_cli
return
;};;;;;;;;;

;{;;;;;; RESET MAME2010 ;;;;;;;;;;;;
mame2010RESET:
mamecurrentmouseenable= enabled
mamecurrentvideoapproach1enable= enabled
mamecurrentskipnagscreen= enabled
mamecurrentskipgameinfo= enabled
mamecurrentskipwarnings= enabled

iniwrite,"enabled",%racoreopt%,OPTIONS,mame_current_mouse_enable
iniwrite,"enabled",%racoreopt%,OPTIONS,mame_current_videoapproach1_enable
iniwrite,"enabled",%racoreopt%,OPTIONS,mame_current_skip_nagscreen
iniwrite,"enabled",%racoreopt%,OPTIONS,mame_current_skip_gameinfo
iniwrite,"enabled",%racoreopt%,OPTIONS,mame_current_skip_warnings
return
;};;;;;;;;;

;{;;;;;; RESET MAME2003 ;;;;;;;;;;;;
mame2003RESET:
mame2003frameskip= 0
mame2003dcsspeedhack= enabled
mame2003skipdisclaimer= enabled
mame2003skipwarnings= enabled
mame2003samples= enabled
mame2003samplerate= 48000
mame2003cheats= enabled
mame2003dialsharexy= disabled
mame2003mousedevice= mouse
mame2003rsticktobtns= enabled
iniwrite,"0",%racoreopt%,OPTIONS,mame2003-frameskip
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2003-dcs-speedhack
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2003-skip_disclaimer
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2003-skip_warnings
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2003-samples
iniwrite,"48000",%racoreopt%,OPTIONS,mame2003-sample_rate
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2003-cheats
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2003-dialsharexy
iniwrite,"mouse",%racoreopt%,OPTIONS,mame2003-mouse_device
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2003-rstick_to_btns
return
;};;;;;;;;;

;{;;;;;; RESET MAME2000 ;;;;;;;;;;;;
mame2000RESET:
mame2000skipdisclaimer= enabled
mame2000showgameinfo= disabled
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2000-skip_disclaimer
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2000-show_gameinfo
return
;};;;;;;;;;

;{;;;;;; RESET MAME2014 ;;;;;;;;;;;;
mame2014RESET:
mame2014ReadConfig= disabled
mame2014AutoSave= disabled
mame2014MouseEnable= disabled
mame2014Throttle= disabled
mame2014CheatsEnable= disabled
mame2014HideNagscreen= disabled
mame2014HideInfoscreen= disabled
mame2014HideWarnings= disabled
mame2014AlternateRenderer= disabled
mame2014BootToOsd= disabled
mame2014BootFromCli= disabled
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORECHKH,1
guicontrol,,CORECHKI,0
guicontrol,,COREDDLB,|game||system
guicontrol,,COREDDLC,|rom||cart|flop|cdrom|cass|hard|serl|prinreturn
guicontrol,,COREDDLC,|enabled||disabled
guicontrol,,COREDDLD,|disabled||enabled
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_read_config
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_auto_save
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_mouse_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_throttle
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_cheats_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_hide_nagscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_hide_infoscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_hide_warnings
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_alternate_renderer
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_boot_to_osd
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_boot_from_cli
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2014_write_config
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2014_save
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2014_hide_gameinfo
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2014_softlists_enable
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2014_softlists_auto_media
iniwrite,"rom",%racoreopt%,OPTIONS,mame2014_media_type
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2014_boot_to_bios
return
;};;;;;;;;;

;{;;;;;; RESET mame2016 ;;;;;;;;;;;;
mame2016RESET:
mame2016ReadConfig= disabled
mame2016AutoSave= disabled
mame2016MouseEnable= disabled
mame2016Throttle= disabled
mame2016CheatsEnable= disabled
mame2016HideNagscreen= disabled
mame2016HideInfoscreen= disabled
mame2016HideWarnings= disabled
mame2016AlternateRenderer= disabled
mame2016BootToOsd= disabled
mame2016BootFromCli= disabled
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORECHKH,1
guicontrol,,CORECHKI,0
guicontrol,,COREDDLB,|game||system
guicontrol,,COREDDLC,|rom||cart|flop|cdrom|cass|hard|serl|prinreturn
guicontrol,,COREDDLC,|enabled||disabled
guicontrol,,COREDDLD,|disabled||enabled
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_read_config
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_auto_save
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_mouse_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_throttle
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_cheats_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_hide_nagscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_hide_infoscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_hide_warnings
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_alternate_renderer
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_boot_to_osd
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_boot_from_cli
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2016_write_config
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2016_save
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2016_hide_gameinfo
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2016_softlists_enable
iniwrite,"enabled",%racoreopt%,OPTIONS,mame2016_softlists_auto_media
iniwrite,"rom",%racoreopt%,OPTIONS,mame2016_media_type
iniwrite,"disabled",%racoreopt%,OPTIONS,mame2016_boot_to_bios
return
;};;;;;;;;;

;{;;;;;; RESET UME2014 ;;;;;;;;;;;;
ume2014RESET:
ume2014readconfig= disabled
ume2014writeconfig= disabled
ume2014saves= game
ume2014autosave= disabled
ume2014mouseenable= disabled
ume2014throttle= disabled
ume2014cheatsenable= disabled
ume2014hidenagscreen= disabled
ume2014hideinfoscreen= disabled
ume2014hidewarnings= disabled
ume2014alternaterenderer= disabled
ume2014softlistsenable= enabled
ume2014softlistsautomedia= enabled
ume2014mediatype= rom
ume2014boottobios= disabled
ume2014boottoosd= disabled
ume2014bootfromcli= disabled
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,CORECHKC,0
guicontrol,,CORECHKD,0
guicontrol,,CORECHKE,0
guicontrol,,CORECHKF,0
guicontrol,,CORECHKG,0
guicontrol,,CORECHKH,1
guicontrol,,CORECHKI,0
guicontrol,,COREDDLB,|game||system
guicontrol,,COREDDLC,|rom||cart|flop|cdrom|cass|hard|serl|prinreturn
guicontrol,,COREDDLC,|enabled||disabled
guicontrol,,COREDDLD,|disabled||enabled
guicontrol,,CORERADA,1
guicontrol,,CORERADB,0
guicontrol,,CORERADQ,1
guicontrol,,CORERADR,0
guicontrol,,CORERADU,1
guicontrol,,CORERADV,0
guicontrol,,CORERADG,1
guicontrol,,CORERADH,0
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_read_config
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_write_config
iniwrite,"game",%racoreopt%,OPTIONS,ume2014_saves
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_auto_save
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_mouse_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_throttle
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_cheats_enable
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_hide_nagscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_hide_infoscreen
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_hide_warnings
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_alternate_renderer
iniwrite,"enabled",%racoreopt%,OPTIONS,ume2014_softlists_enable
iniwrite,"enabled",%racoreopt%,OPTIONS,ume2014_softlists_auto_media
iniwrite,"rom",%racoreopt%,OPTIONS,ume2014_media_type
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_boot_to_bios
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_boot_to_osd
iniwrite,"disabled",%racoreopt%,OPTIONS,ume2014_boot_from_cli
return
;};;;;;;;;;

;{;;;;; RESET VBAM ;;;;;;;;;;
vbamRESET:
vbamlayer1= Yes
vbamlayer2= Yes
vbamlayer3= Yes
vbamlayer4= Yes
vbamlayer5= Yes
vbamlayer6= Yes
vbamlayer7= Yes
vbamlayer8= Yes
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_1
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_2
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_3
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_4
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_5
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_6
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_7
iniwrite,"Yes",%racoreopt%,OPTIONS,vbam_layer_8
return
;};;;;;;;

;{;;;;; RESET VBANEXT ;;;;;;;;;
vbanextRESET:
vbanextbios= disabled
iniwrite,"enabled",%racoreopt%,OPTIONS,vbanext_bios
return
;};;;;;;;

;{;;;;;; RESET YABAUSE ;;;;;;;;;
yabauseRESET:
yabauseframeskip= disabled
yabauseforcehlebios= disabled
yabauseaddoncart= 4M_ram
guicontrol,,CORECHKA,0
guicontrol,,CORECHKB,0
guicontrol,,COREDDLB,|none||1M_ram|4M_ram
iniwrite,"disabled",%racoreopt%,OPTIONS,yabause_frameskip
iniwrite,"disabled",%racoreopt%,OPTIONS,yabause_force_hle_bios
iniwrite,"4M_ram",%racoreopt%,OPTIONS,yabause_addon_cart
return
;};;;;;;;;;;;;;;;;;;;;

;{;;;;;;; RESET HANDY ;;;;;;;;;;
handyRESET:
handyrot= None
guicontrol,,COREDDLB,|None||90|240
iniwrite,"None",%racoreopt%,OPTIONS,handy_rot

return
;};;;;;;;;;;

;{;;;;;;; RESET MEDNAFEN VB ;;;;;;;;;;;;
mednafenVBRESET:
vbanaglyphpreset= disabled
vbcolormode= black & red
iniwrite,"disabled",%racoreopt%,OPTIONS,vb_anaglyph_preset
iniwrite, "black & red",%racoreopt%,OPTIONS,vb_color_mode
return
;};;;;;;;;;;

;{;;;;;; RESET CATSFC ;;;;;;;;;
catsfcRESET:
catsfcSwapJoypads= disabled
catsfcVideoMode= NTSC
guicontrol,,CORECHKA,0
guicontrol,,COREDDLB,|auto||NTSC|PAL
iniwrite,"disabled",%racoreopt%,OPTIONS,catsfc_SwapJoypads
iniwrite,"NTSC",%racoreopt%,OPTIONS,catsfc_VideoMode
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;; RESET VJAG ;;;;;;;;;;;;
virtualjaguarRESET:
virtualjaguarusefastblitter= disabled
virtualjaguardoomreshack= disabled
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    MAKE PORTABLE ;;;;;;;;;;;;;;;;;;;;;;;;;;
makePortable:
guicontrolget,Ppltxt,,PplTxt
splitpath,A_ScriptDir,,,,,skeldrv
;;pcfgext= *.ini|*.cfg|*.config|*.conf|*.xml|*.settings|*.opt
pcfgext= ini|cfg|config|conf|xml|settings|opt
stringsplit,pcfgxt,pcfgext,= | ""
recfgf= ovr.ini|hashdb.ini|Assignments.ini|AppParams.ini|Settings.ini|config.cfg
IfNotExist, Settings.ini
	{
		TGLPBL= 1
		goto, GenSetQ
	}
IfNotExist, config.cfg
	{		
		TGLPBL= 1
		goto, GenSetQ
	}

skeloc= 	
oldskel= 
IniRead, pcfgskel, Settings.ini,GLOBAL,working_config
SplitPath,pcfgskel,,oldskel
guicontrol,,PRBFND,|%oldskel%||%oldra%
if (A_ScriptDir <> oldskel)
	{	
		gosub, SetPSK
		ifnotexist, %oldskel%
			{
				oldskel:= skeloc
			}
	}

fileselectFile, reconfRA, 3, %2%\retroarch.exe,Select portable drive's retroarch.exe, *.exe
if (reconfRA = "")
	{
		gosub, SetPRA
	}
splitpath, reconfRA,newraxe ,pradir
oldra=
IniRead, oldra, Settings.ini,GLOBAL,retroarch_location
SplitPath,oldra,,,,,oldradrv
ifnotexist, %oldra%
	{
		gosub, SetPRA
		ifnotexist, %oldra%
			{
				oldra= %pradir%
			}
	}
if (skeldrv <> oldradrv)
	{
		
	}	
	
Gui, Add, Button,x333 y0 w43 h22 vSETPRA gSetPRA, Select
Gui, Add, Button, x333 y24 w43 h21 vSETPSK gSetPSK, Select
Gui, Add, Edit, x6 y0 w323 h21 vDisplRaTXT gDisplRaTXT, %pradir%
Gui, Add, Edit, x6 y24 w323 h21 vDisplSkTXT gDisplSkTXT, %oldskel%
Gui, Add, Button, x4 y63 w29 h20 vSeekRep gSeekRep, File
Gui, Add, CheckBox, x37 y66 w118 h14 vTGLREP gTglRep, Replace instances of
Gui, Add, ComboBox, x158 y59 w216 vPRBFND gPrbFnd disabled, |%oldra%\downloads||%oldskel%|%pradir%
Gui, Add, Text, x39 y86h16 vPToTxt disabled, To
Gui, Add, ComboBox, x56 y82 w218 h21 vPRBREP gPrbRep disabled, |%pradir%\downloads||%oldskel%|%oldra%
Gui, Add, Checkbox, x278 y84 h23 vPplTxt gPortablocal disabled checked, localize
;;gui, Add, Text, x278 y84 h23 vPplTxt disabled hidden, in playlists
gui, font, Bold
Gui, Add, Button, x335 y82 w40 h20 vINJPORTABLE gInjPortable, OK
gui, font, normal
Gui, Add, CheckBox, x246 y46 h13 vMKPDTI gMKPDTI Checked, Create a desktop icon
Gui, Add, CheckBox, x6 y46 h13 vSETSYSTMP gSETSYSTMP, host cache_directory
Gui, Add, StatusBar, vPRBSTATUS, Feedback
Gui Show, w379 h131, PortableUtil
goto, setPortable

;{;;;;;;;;;;;;  ASSIGN PORTABLE DIRECTORIES ;;;;;;;;;;;;;;;
SetPRA:
gui,submit,nohide
pradir= 
FileSelectFile, pradfile,,3,Select the portable retroarch.exe,*.exe
if (pradfile = "")
	{
		goto, QUITOUT
	}
SplitPath,pradfile,praxe,prapth,,pradrv
guicontrol,,DisplRaTXT, %pradir%
return

SetPSK:
gui,submit,nohide
skeloc= 
FileSelectFolder, skeloc,,3,Select the portable skeletonkey folder
if (skeloc = "")
	{
		goto, QUITOUT
	}
guicontrol,,DisplSkTXT, %skeloc%
return

SETSYSTMP:
gui,submit,nohide
if (SETSYSTMP = 0)
{
	systemp= %ralocsel%\downloads\netplay
	return
}
FileDelete, %lpful%\tst.txt
FileAppend, tst,%lpful%\tst.txt
if (errorLevel <> 0)
	{
		guicontrol,,SETSYSTMP,0
		systemp= %ralocsel%\downloads\netplay
		SB_SetText("cache directory set to " lpful "")
		return
	}
systemp= %lpful%
return
;};;;;;;;;;;;;;;;;;;;;

DisplRaTXT:
gui,submit,nohide
guicontrolget,DisplRaTXT,,DisplRaTXT
return

DisplSkTXT:
gui,submit,nohide
guicontrolget,DisplSkTXT,,DisplSkTXT
return

Portablocal:
gui,submit,nohide
guicontrolget, Ppltxt,,PplTxt
;;guicontrol,disable,PRBREP
;;if (Ppltxt = 0)
;;	{
;;		guicontrol,enable,PRBREP
;;	}
return

InjPortable:
gui,submit,nohide
guicontrolget,Ppltxt,,PplTxt
guicontrolget,pradir,,DisplRaTXT
guicontrolget,skeloc,,DisplSkTXT
guicontrolget,MKPDTI,,MKPDTI
if (MKPDTI = 1)
{
	FileDelete,%A_Desktop%\skeletonKey.lnk
	FileCreateShortcut, %skeloc%\skeletonKey.exe, %A_Desktop%\skeletonKey.lnk, %skeloc%\, , Portable skeletonKey, %skeloc%\key.ico
}
IniWrite, "%pradir%", Settings.ini,GLOBAL,retroarch_location
IniWrite, "%skeloc%\config.cfg", Settings.ini,GLOBAL,working_config
IniWrite, "%systemp%", config.cfg,OPTIONS,cache_directory
if (TGLREP = 1)
	{
		guicontrolget,PRBFND,,PRBFND
		guicontrolget,PRBREP,,PRBREP
		if (PRBFND <> "")
			{
				Loop, Parse, recfgf,|
					{
						FileRead,REPB,%A_LoopField%
						FileMove,%A_LoopField%,%A_LoopField%.bak,1
						StringReplace,NREPB,REPB,%PRBFND%,%PRBREP%,All						
						SB_SetText("Replacing in file " A_LoopField " ")
						FileAppend,%NREPB%,%A_LoopField%
					}
				ar := Object()
				Loop, Parse, %pcfgxt0%
					{
						new= % (pcfgext%a_index%)
						if (pcfgext%a_index% <> "")
							{
								ar.insert(new)
							}
					}
				cfgplst= 
				Loop, Files, cfg\*.*,R
					{
						ext= %A_LoopFileExt%
						noapl= 
						for k, v in ar
							{
								extm:= v
								if (ext = extm)
									{
										noapl= 1
									}
							}
						if (noapl = 1)
							{
								cfgplst .= A_LoopFileFullPath . "|"
							}
					}
				Loop, Files, %RJEMUD%\*.*,R
					{
						ext= %A_LoopFileExt%
						noapl= 
						for k, v in ar
							{
								extm:= v
								if (ext = extm)
									{
										noapl= 1
									}
							}
						if (noapl = 1)
							{
								cfgplst .= A_LoopFileFullPath . "|"
							}
					}
				if (Ppltxt = 1)
					{
						Loop, Files, %pradir%\playlists\*.lpl
							{
								subpl.= A_LoopFileFullPath . "|"
							}							
						Loop, Parse, subpl,|
							{
								FileRead,REPB,%A_LoopField%
								SplitPath,A_LoopField,repfn
								SB_SetText("Replacing in playlist " A_LoopField  " ")
								FileMove,%A_LoopField%,%A_LoopField%.bak,1
								StringReplace,NREPB,REPB,%PRBFND%,downloads,All
								FileAppend,%NREPB%,%A_LoopField%
							}
					}
				if (Ppltxt = 0)
						{
							Loop, Files, %pradir%\playlists\*.lpl
								{
									cfgplst.= A_LoopFileFullPath . "|"
								}
						}
				Loop, Parse, cfgplst,|
					{
						FileRead,REPB,%A_LoopField%
						SplitPath,A_LoopField,repfn
						SB_SetText("Replacing in file " repfn "")
						FileMove,%A_LoopField%,%A_LoopField%.bak,1
						StringReplace,NREPB,REPB,%PRBFND%,%PRBREP%,All
						FileAppend,%NREPB%,%A_LoopField%
					}
		}
	}
msgbox,0,,SkeletonKey can now be launched from the portable device.,10
gui,1:destroy
gosub, QUITOUT
exitapp
return

SeekRep:
gui,submit,nohide
lplsrch=
Fileselectfile,lplsrch,3,,Select a playlist file or database
guicontrolget,PRBFND,,PRBFND
SB_SetText("...Searching...")
fullnm=
fullnm:= StrLen(PRBFND)
if (lplsrch = "")
	{
		return
	}
		repPl= 
		arbdfn= 
		fndrep= 
		Loop, read, %lplsrch%
			{
				arbdfn+=1
				vok= 
				newprfx := StrLen(A_LoopReadLine)
				if (PRBFND <> "")
					{				
						ifinstring,A_LoopReadLine,%PRBFND%
							{
						StringGetPos,vok,A_LoopReadLine, %PRBFND%,
						if (vok >= 0)
							{
								vokk:= vok+fullnm
								newrepp= 
								stringleft,newrepp,A_LoopReadLine,%vokk%
								if (newrepp <> fndrep)
									{
									msgbox,4, Search string found,`n"%newrepp%" was detected.`nWould you like to migrate this to your current portable setup?
									IfMsgBox,Yes
										{
											repPl= 1
											SB_SetText(" " newrepp " found")
											guicontrol,,PRBFND,|%newrepp%||%PRBFND%|%oldra%|%oldskel%
											break
										}
									IfMsgBox,No
										{
											repPl= 0
											fndrep= %newrepp%
										}
									}
							}
						}	
					}										
				if (PRBFND = "")
					{
						ifinstring,A_LoopReadLine,\retroarch\downloads
							{
						StringGetPos,vok,A_LoopReadLine, \retroarch\downloads,
						if (vok >= 0)
							{
								vokk:= vok+20
								newrepp= 
								stringleft,newrepp,A_LoopReadLine,%vokk%
								if (newrepp <> fndrep)
									{
									msgbox,4, Retroarch Downloads Found,`n"%newrepp%" was detected.`nWould you like to migrate this to your current portable setup?
									IfMsgBox,Yes
										{
											repPl= 1
											SB_SetText(" " newrepp " found")
											guicontrol,,PRBFND,|%newrepp%||%PRBFND%|%oldra%|%oldskel%
											break
										}
									IfMsgBox,No
										{
											repPl= 0
											fndrep= %newrepp%
										}
									}
							}
						}
					}
			}
		Loop, Parse, recfgf,|
			{
		FileRead, RepSet, %A_LoopField%
		FileDelete, %A_LoopField%
		StringReplace, gvo, RepSet, %skeloc%, %skeloc%, All
		StringReplace, repout, gvo, %ralocsel%, %pradir%, All
		FileAppend, %repout%, %A_LoopField%
	}

return

TglRep:
gui,submit,nohide
guicontrolget,TGLREP,,TGLREP
guicontrol,disable,PToTxt
guicontrol,disable,PplTxt
guicontrol,disable,PRBREP
guicontrol,disable,PRBFND
if (TGLREP = 1)
	{
		guicontrol,enable,PToTxt
		guicontrol,enable,PplTxt
		guicontrol,enable,PRBREP
		guicontrol,enable,PRBFND
	}
return

MKPDTI:
gui,submit,nohide
return
PrbRep:
gui,submit,nohide
guicontrolget,PRBREP,,PRBREP
return

PrbFnd:
gui,submit,nohide
guicontrolget,PRBFND,,PRBFND
return

;};;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    CFG READING   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     OPTIONS     ;;;;;;;;;;;;;;;;;;;;;;;

allUsersControlMenu:
gui, submit, nohide
AUM= 0
allUsersControlMenu= %inival2%
if (inival2 = "true")
	{
		AUM= 1
	}
	guicontrol,,AUM,%AUM%
return

aspectRatioIndex:
gui, submit, nohide
ARIAPND= 
VIDTMP= |CORE||%ARI%
if (inival2 <> "")
	{
		aspectRatioIndex= %inival2%
		VIDINDX := (aspectRatioIndex+1)
		VIDTMP= 
		Array := Object()
		  Array[j] := A_LoopField
		  Array%j%_%k% := A_LoopReadLine
		  Array[j, k] := A_LoopReadLine
		  ArrayCount := 0                        
		  Loop, Parse, ARI,|
		   {
			  ArrayCount += 1
			  Array[ArrayCount] := A_LoopField
		  }
		Loop %ArrayCount%
		  {
		   if (A_Index = VIDINDX)
		{
			ARIENUM := Array[A_Index]
		}
			  element := Array[A_Index]
			  ARIAPND .= Array[A_Index]"|"
			}
			if (VIDINDX = 0)
			{
				ARIENUM= CORE
			}
		VIDTMP .= "|"ARIENUM "||" ARIAPND
	}
guicontrol,, VIDASPECT, %VIDTMP%
return

audioDriver:
gui, submit, nohide
audioDriver= %inival2%
if (inival2 = "dsound")
	{
		GuiControl,, DSND, 1
		return
	}
if (inival2 = "xaudio")
	{
		GuiControl,, XAUD, 1
		return
	}
if (inival2 = "sdl2")
	{
		GuiControl,, SDL2, 1
		return
	}
if (inival2 = "wasapi")
	{
		GuiControl,, WASAPI, 1
		return
	}
if (inival2 = "openal")
	{
		GuiControl,, OPENAL, 1
		return
	}
return

audioEnable:
gui, submit, nohide
GLBAUDIO= 0
audioEnable= %inival2%
if (inivar2 = "true")
	{
		(GLBAUDIO = 1)
	}
gosub, AudioToggle
return

audioLatency:
gui, submit, nohide
if (inival2 <> "")
	{
		audioLatency:= inival2
		LATENCY= %inival2%
	}
guicontrol,, LATENCY, |%audioLatency%||32|64|128
return

audioMuteEnable:
gui, submit, nohide
MUTE= 0
audioMuteEnable= %inival2%
if (inival2 = "true")
	{
		MUTE= 1
	}	
GuiControl,, MUTE, %MUTE%
return

audioRateControl:
ART= 1
audioRateControl= %inival2%
if (inival2 = "false")
	{
		ART= 0
	}
GuiControl,, ART, %ART%
return

audioRateControlDelta:
gui, submit, nohide
audioRateControlDelta= %inival2%
RATESLD= %inival2%
return

audioSync:
gui, submit, nohide
ASYNC= 1
audioSync= %inival2%
if (inival2 = "false")
	{
		ASYNC= 0
	}
GuiControl,, ASYNC, %ASYNC%
return

autoOverridesEnable:
AUO= 0
autoOverridesEnable= %inival2%
if (inival2 = "true")
	{
		AUO= 1	
	}
GuiControl,, AUO, %AUO%
return

autoremapsenable:
gui,submit,nohide
RMPLOAD= 0
autoremapsenable= false
if (inival2 = "true")
	{
		RMPLOAD= 1
	}
guicontrol,,RMPLOAD,%RMPLOAD%
return

autoShadersEnable:
gui, submit, nohide
AUTOSHD= 1
autoShadersEnable= %inival2%
if (inival2 = "false")
	{
		AUTOSHD= 0
	}
GuiControl,, AUTSHD, %AUTOSHD%
return

autosaveInterval:
autosaveInterval= %inival2%
GuiControl,, SVINT, %inival2%
return


configSaveOnExit:
gui, submit, nohide
SAVEXIT= 0
configSaveOnExit= %inival2%
if (inival2 = "true")
	{
		SAVEXIT = 1
		guicontrol, hide, RLDISP
	}
guicontrol,, SAVEXIT, %SAVEXIT%
return

confirmOnExit:
gui, submit, nohide
CONFEXIT= 0
confirmOnExit= %inival2%
if (inival2 = "true")
	{
		CONFEXIT= 1
	}
guicontrol,, CONFEXIT, %CONFEXIT%
return

coreSpecificConfig:
gui, submit, nohide
COV= 0
coreSpecificConfig= %inival2%
if (inival2 = "true")
	{
		COV= 1
	}
GuiControl,, COV, %COV%
return

currentResolutionId:
gui, submit, nohide
CUREZID= 0
currentResolutionId= %inival2%
if (inival2 = "true")
	{
		CUREZID= 1
	}
GuiControl,, CUREZID, %CUREZID%
return

customViewportHeight:
gui, submit, nohide
if (inival2 = "")
	{
		inival2= %MonitorWorkAreaBottom%
	}
customViewportHeight:= inival2
guicontrol,,REZV, |%customViewportWidth%x%customViewportHeight%||%qres%
guicontrol,,IntYres, %customViewportHeight%
return

customViewportWidth:
gui, submit, nohide
if (inival2 = "")
	{
		inival2= %MonitorWorkAreaRight%
	}
customViewportWidth:= inival2
guicontrol,,REZV, |%customViewportWidth%x%customViewportHeight%||%qres%
guicontrol,,IntXres, %customViewportWidth%
return

customViewportX:
gui, submit, nohide
if (inival2 = "")
	{
		inival2= 0
	}
customViewportX:= inival2
guicontrol,,VidXLoc,%customViewportX%
return

customViewportY:
gui, submit, nohide
if (inival2 = "")
	{
		inival2= 0
	}
customViewportY:= inival2
guiControl,, VidYLoc,%customViewportY%
return

flickerFilterEnable:
gui, submit, nohide
FLICK= 0
flickerFilterEnable= %inival2%
if (inival2 = "true")
	{
		FLICK= 1
		guicontrol,enable,FLICKF
	}
GuiControl,, FLICK, %FLICK%
return

flickerFilterIndex:
gui, submit, nohide
if (inival2 <> "")
	{
		flickerFilterIndex:= inival2
	}
guicontrol,, FLICKF, |%flickerFilterIndex%||1|2|3
guicontrolget,flvl,,FLK
if (flvl = 0)
	guicontrol,disable,FLICKF
return

gameSpecificOptions:
gui, submit, nohide
PGM= 0
gameSpecificOptions= %inival2%
if (inival2 = "true")
	{
		PGM= 1
	}
GuiControl,, PGM, %PGM%
return

gammaCorrection:
GCOR= 0
gammaCorrection= %inival2%
if (inival2 = "true")
	{
		GCOR= 1
	}
GuiControl,, GCOR, %GCOR%
return

inputDriver:
gui, submit, nohide
if (inival2 = "dinput")
	{
		guicontrol,,IDDINP, 1
	}
if (inival2 = "sdl2")
	{
		guicontrol,,IDSDLINP, 1
	}
if (inival2 = "raw")
	{
		guicontrol,,IDRAW, 1
	}
return

inputJoypadDriver:
gui, submit, nohide
if (inival2 = "xinput")
	{
		guicontrol, ,JXINDRV, 1	
	}
if (inival2 = "dinput")
	{
		guicontrol, ,JDINDRV, 1	
	}
if (inival2 = "sdl")
	{
		guicontrol, ,JSDLDRV, 1	
	}
if (inival2 = "hid")
	{
		guicontrol, ,JHIDDRV, 1	
	}
return
menuDriver:
gui, submit, nohide
menuDriver= %inival2%
if (inival2 = "xmb")
	{
		GuiControl,, XMENU, 1
		return
	}
if (inival2 = "rgui")
	{
		GuiControl,, RMENU, 1
		return
	}
if (inival2 = "zarch")
	{
		GuiControl,, ZMENU, 1
		return
	}
if (inival2 = "glui")
	{
		GuiControl,, GMENU, 1
		return
	}
return

netplayspectatepassword:
gui,submit,nohide
netplaySpectatePassword= %iniaval2%
if (netplaySpectatePassword <> "")
	{
		guicontrol,,NETSPECPW, %inival2%
	}
return

netplaypassword:
gui,submit,nohide
netplayPassword= %iniaval2%
if (netplayPassword <> "")
	{
		guicontrol,,NETPW, %inival2%
	}
return

netplayCheckFrames:
gui, submit, nohide
if (inival2 = "")
	{
		inival2:= 30
	}
netplayCheckFrames:= inival2
guicontrol, , CHECKFRAMES,%netplayCheckFrames%
return

netplayStatelessMode:
gui,submit,nohide
NOSTATE= 0
if (inival2 = "true")
{
	NOSTATE= 1
}
netplayStatelessMode= %inival2%
guicontrol,,NOSTATE,%NOSTATE%
return

netplayDelayFrames:
gui, submit, nohide
if (inival2 = "")
	{
		inival2 := 16
	}
netplayDelayFrames:= inival2
FRAMEDELAY:= inival2
guicontrol, , FRAMEDELAY,%netplayDelayFrames%
return

netplayIpPort:
gui, submit, nohide
netplayIpPort := 54355
if (inival2 <> "")
	{
		netplayIpPort:= inival2
	}
guicontrol,, CPORTNUM,%netplayIpPort%
return

netplayNickname:
OSVRX= -%OSVRZ%
netplayNickname= %inival2%
if (inival2 = "")
	{
		netplayNickname=%A_UserName%%OSVRX%
	}
guicontrol,, NETNAME, %netplayNickname%
return

pauseNonactive:
PAUSEBG= 1
pauseNonactive= %inival2%
if (inival2 = "false")
	{
		PAUSEBG= 0
	}
GuiControl,, PAUSEBG, %PAUSEBG%
return

rewindEnable:
rewindEnable= %inival2%
if (inival2 = "false")
	{
		guicontrol,, REWEN, 0
		guicontrol, Disable, REWGRAN
	}
else if (inival2 = "true")
	{
		GuiControl,, REWEN, 1
		guicontrol, Enable, REWGRAN
	}
return

rewindGranularity:
gui, submit, nohide
rewindGranularity:= inival2
REWGRAN:= inival2
guicontrolget, REWGRAN
guiControl,,REWGRAN, %REWGRAN%
return

savestateAutoIndex:
STAI:= 0
savestateAutoIndex= false
if (inival2 = "true")
	{
		savestateAutoIndex= %inival2%
		STAI:= 1
	}
guiControl,,STAI, %STAI%
return

savestateAutoLoad:
STAL= 0
savestateAutoLoad= %inival2%
if (inival2 = "true")
	{
		STAL= 1
	}
GuiControl,, STAL, %STAL%
return

savestateAutoSave:
STAT= 0
savestateAutoSave= %inival2%
if (inival2 = "true")
	{
		STAT= 1
	}
GuiControl,, STAT, 1
return

softFilterEnable:
SFIND= 0
if (inival2 = "true")
	{
	GuiControl,, SFIND, 1
	}
softFilterEnable= %inival2%

return

softFilterIndex:
softFilterIndex= %inival2%
GuiControl,, VAR, %inival2%
return

sortSavestatesEnable:
STORT= 0
sortSavestatesEnable= %inival2%
if (inival2 = "true")
	{
		STORT= 1
	}
GuiControl,, STORT, %STORT%
return

sortSavefilesEnable:
SAVSRT= 0
sortSavefilesEnable= %inival2%
if (inival2 = "true")
	{
		SAVSRT= 1
	}
GuiControl,, SAVSRT, %SAVSRT%
return


savefilesincontentdir:
savefilesincontentdir= %inival2%
return
savestatesincontentdir:
savestatesincontentdir= %inival2%
return
screenshotsincontentdir:
screenshotsincontentdir= %inival2%
return


tripleBufferingEnable:
TRIPB= 0
tripleBufferingEnable=  %inival2%
if (inival2 = "true")
	{
		TRIPB= 1
	}
GuiControl,, TRIPB, %TRIPB%
return

videoAspectRatio:
videoAspectRatio= %inival2%
guicontrol,,VIDASPECT,%inival2%
return

videoAspectRatioAuto:
AUTOASPECT= 1
videoAspectRatioAuto= %inival2%
if (inival2 = "false")
	{	
		AUTOASPECT= 0
	}
guicontrol,, AUTOASPECT, %AUTOASPECT%
return

videoBlackFrameInsertion:
BFI= 0
videoBlackFrameInsertion= %inival2%
if (inival2 = "true")
	{
		BFI= 1
	}
GuiControl,, BFI, %BFI%
return

videoDisableComposition:
DTCOMP= 0
videoDisableComposition= %inival2%
if (inival2 = "true")
	{
		DTCOMP= 1
	}
GuiControl,, DTCOMP, %DTCOMP%
return

videoDriver:
videoDriver= %inival2%
if (inival2 = "gl")
	{
		GuiControl,, OGLDRV, 1
		return
	}
else if (inival2 = "d3d")
	{
		GuiControl,, D3DDRV, 1
		return
	}
else if (inival2 = "vulkan")
	{
		GuiControl,, VLKDRV, 1
		return
	}
if (inival2 = "sdl2")
	{
		GuiControl,, SDL2DRV, 1
		return
	}
	if (inival2 = "gdi")
	{
		GuiControl,, GDIDRV, 1
		return
	}
return
videoForceAspect:
FORCEAR= 1
videoForceAspect= %inival2%
if (inival2 = "false")
	{
		FORCEAR= 0
	}
GuiControl,, FORCEAR, %FORCEAR%
return

videoFrameDelay:
videoFrameDelay= %inival2%
FRMDL= %inival2%
guiControl,,FRMDL, %inival2%
return

videoFullscreen:
OUTFS= 0
videoFullscreen= %inival2%
if (inival2 = "true")
	{
		OUTFS= 1
	}
GuiControl,, OUTFS, %OUTFS%
return


videowindowx:
videowindowx= %inival2%
return
videowindowy:
videowindowy= %inival2%
return


xmbshowsettingspassword:
xmbshowsettingspassword= %inival2%
return
xmbshownetplay:
xmbshownetplay= %inival2%
return

videoFullscreenX:
if (inival2 = "")
	{
		inival2= %MonitorWorkAreaRight%
	}
videoFullscreenX:= inival2
guicontrol, ,MONXREZ,%videoFullscreenX%
guicontrol,, FSREZ, |%inival2%x%videoFullscreenY%||%qres%
gui, submit, nohide
return

videoFullscreenY:
if (inival2 = "")
	{
		inival2= %MonitorWorkAreaRight%
	}
videoFullscreenY:= inival2
guicontrol, ,MONYREZ, %videoFullscreenY%
guicontrol,, FSREZ,|%videoFullscreenX%x%inival2%||%qres%
gui, submit, nohide
return

videoGpuRecord:
GPUVREC= 0
videoGpuRecord= %inival2%
if (inival2 = "true")
	{
		GPUVREC= 1
	}
GuiControl,, GPUVREC, %GPUVREC%
return

videoGpuScreenshot:
GPUSS= 0
videoGpuScreenshot= %inival2%
if (inival2 = "true")
	{
		GPUSS= 1
	}
GuiControl,, GPUSS, %GPUSS%
return

videoHardSync:
GSNC= 0
videoHardSync= %inival2%
if (inival2 = "true")
	{
		GSNC= 1
		guicontrol, enable, GPUV
	}
GuiControl,, GSNC, %GSNC%
return

videoHardSyncFrames:
videoHardSyncFrames= %inival2%
guiControl,,GPUV, %inival2%
return

videoMaxSwapchainImages:
videoMaxSwapchainImages= %inival2%
guicontrol,,MSWCHI,|%inival2%||1|2|3|4
return

videoMonitorIndex:
if (inival2 <> "")
	{
		videoMonitorIndex:= inival2
	}

guicontrol,, MONUM, |%videoMonitorIndex%||0|1|2|3|4
gui, Submit, nohide
return

videoRefreshRate:
gui, submit, nohide
REFRESH= 60
if (inival2 <> "")
	{
		videoRefreshRate:= inival2
		REFRESH= %inival2%
	}
guicontrol,, REFRESH, %videoRefreshRate%
stringsplit,reftmp,REFRESH,.
guicontrol,,REFSLD,reftmp1
return

videoRotation:
videoRotation= %inival2%
guicontrol,,ROATATE,|%inival2%||0|90|180|270
return

videoScale:
gui, submit, nohide
if (inival2 <> "")
	{
		videoScale:= inival2
		VIDSCL= %inival2%
	}
GuiControl,, VIDSCL, |%videoScale%||1|2|3|4|5|6
return

videoScaleInteger:
gui, submit, nohide
videoScaleInteger= true
videoScaleInteger= %inival2%
if (inival2 = "false")
	{
		INTG= 0
		STRCH= 1
	}
GuiControl,, INTG, %INTG%
GuiControl,, STRCH, %STRCH%
return

videoShaderEnable:
GuiControl,, SHDEN, 0
guicontrol, Disable, GLSLCT
guicontrol, Disable, SLCT
guicontrol, Disable, CGSLCT
guicontrol, Disable, GLSHDVAR
guicontrol, Disable, SLSHDVAR
guicontrol, Disable, CGSHDVAR
guicontrol, Disable, SHDSEL
videoShaderEnable= %inival2%
if (inival2 = "true")
	{
		GuiControl,, SHDEN, 1
		guicontrol, Enable, CGSLCT
		guicontrol, Enable, SLCT
		guicontrol, Enable, GLSLCT
		guicontrol, Enable, GLSHDVAR
		guicontrol, Enable, SLSHDVAR
		guicontrol, Enable, CGSHDVAR
		guicontrol, Enable, SHDSEL
		guicontrol,, SMTHV, 0
		return
	}
gui, submit, nohide
return

videoShader:
gui, submit, nohide
videoShader= %inival2%
splitpath, inival2, toShdList
guicontrol,, CGSHDVAR, |nul|%toShdList%||%cg_list%
guicontrol,, SLSHDVAR, |nul|%toShdList%|%sl_list%
guicontrol,, GLSHDVAR, |nul|%toShdList%||%gl_list%
return

videoSharedContext:
gui, submit, nohide
GuiControl,, SHAREDV, 0
videoSharedContext= %inival2%
if (inival2 = "true")
GuiControl,, SHAREDV, 1
return

videoSmooth:
gui, submit, nohide
videoSmooth= %inival2%
SMTHV= 0
if (inival2 = "true")
	{
		SMTHV= 1
	}
GuiControl,, SMTHV, %SMTHV%
return

videoSwapInterval:
gui, submit, nohide
THRDV= 0
videoSwapInterval= %inival2%
if (inival2 = "true")
	{
		THRDV= 1
	}
GuiControl,, THRDV, %THRDV%
return

videoThreaded:
gui, submit, nohide
VIDTHR= 0
videoThreaded= %inival2%
if (inival2 = "true")
	{
		VIDTHR= 1	
	}
GuiControl,, THRDV, %VIDTHR%
return

videoVsync:
gui, submit, nohide
VIDSYNC= 0
videoVsync= %inival2%
if (inival2 = "true")
	{
		VIDSYNC= 1
		guicontrol,Enable, SWPV
	}
if (inival2 = "false")
	{
		guicontrol,Disable, SWPV
	}
guicontrol,, VIDSYNC, %VIDSYNC%
return

videoWindowedFullscreen:
gui, submit, nohide
OUTFW= 0
videoWindowedFullscreen= %inival2%
if (inival2 = "true")
	{
		OUTFW= 1
		guicontrol, disable, FSREZ
		guicontrol, disable, vIntXres
		guicontrol, disable, vIntYres
	}
if (inival2 = "false")
	{
		guicontrolget, OUTFS, ,OUTFS
		if (OUTFS = 1)
			{
				guicontrol,enable, FSREZ
				guicontrol,enable, vIntXres
				guicontrol,enable, vIntYres
			}
	}
GuiControl,, OUTFW, %OUTFW%
return


videoCropOverscan:
gui, submit, nohide
CROP= 0
videoCropOverscan= %inival2%
if (inival2 = "true")
	{
		CROP= 1
	}	
GuiControl,, CROP, %CROP%
return

inputDeviceP1:
gui, submit, nohide
inputDeviceP1= %inival2%
return
inputDeviceP2:
gui, submit, nohide
inputDeviceP2= %inival2%
return
inputPlayer1MouseIndex:
gui, submit, nohide
inputPlayer1MouseIndex= %inival2%
return
inputPlayer2MouseIndex:
gui, submit, nohide
inputPlayer2MouseIndex= %inival2%
return
inputPlayer1JoypadIndex:
gui, submit, nohide
inputPlayer1JoypadIndex= %inival2%
return
inputPlayer2JoypadIndex:
gui, submit, nohide
inputPlayer2JoypadIndex= %inival2%
return
inputAutodetectEnable:
gui, submit, nohide
inputAutodetectEnable= %inival2%
tmpvar= 0
if (inival2 = "true")
	{
		tmpvar= 1
	}	
guicontrol,,ADJS, %tmpvar%
return

inputturboperiod:
gui,submit,nohide
inputturboperiod= %inival2%
guicontrol,,TURBOP,%inputTurboPeriod%
return

menuUnifiedControls:
gui,submit,nohide
menuUnifiedControls= %inival2%
UNIFMENU= 0
if (inival2 = "true")
	{
		UNIFMENU= 1
	}
guicontrol,,UNIFMENU, %UNIFMENU%
return

inputRemapBindsEnable:
gui, submit, nohide
REMPB= 0
inputRemapBindsEnable= %inival2%
if (inival2 = "true")
	{
		REMPB= 1
	}	
guicontrol,,REMPB, %REMPB%
return

inputMenuToggleGamepadCombo:
gui, submit, nohide
inputMenuToggleGamepadCombo= %inival2%
guicontrol,,MGPC,|%inival2%||0|1|2|3
return
inputMaxUsers:
gui, submit, nohide
inputMaxUsers= %inival2%
guicontrol,,MXUSR,|%inival2%||1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16
return
inputPlayer1AnalogDpadMode:
gui, submit, nohide
DPADM1= %inival2%
inputPlayer1AnalogDpadMode= %inival2%
return
inputPlayer2AnalogDpadMode:
gui, submit, nohide
DPADM2= %inival2%
inputPlayer2AnalogDpadMode= %inival2%
return
keyboardGamepadEnable:
gui, submit, nohide
KBGP= 0
keyboardGamepadEnable= %inival2%
if (inival2 = "true")
	{
		KBGP= 1
	}	
guicontrol,,KBGP, %KBGP%
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     DIRECTORY ASSIGN     ;;;;;;;;;;;;;;;;;;;;

assetsDirectory:
assetsDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		assetsdirectory := raexeloc . SubStr(rewtmpd,2,255)
	}
return
audioFilterDir:
audioFilterDir= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		audioFilterDir := raexeloc . SubStr(rewtmpd,2,255)
	}

return
bundleAssetsDstPathSubdir:
bundleAssetsDstPathSubdir= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		bundleAssetsDstPathSubdir := raexeloc . SubStr(rewtmpd,2,255)
	}

return
cacheDirectory:
cacheDirectory= %inival2%
if (cacheDirectory = "")
	{
		cacheDirectory= %lpful%
	}
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		cacheDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}
	
return
contentHistoryDir:
contentHistoryDir= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentHistoryDir := raexeloc . SubStr(rewtmpd,2,255)
	}

return
coreAssetsDirectory:
coreAssetsDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		coreAssetsDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

Loop, %coreassetsdirectory%\*, 2
	{
		dwnlfldrs.= A_LoopFileName . "|"
	}
return
cursorDirectory:
cursorDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		cursorDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
dynamicWallpapersDirectory:
dynamicWallpapersDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		dynamicWallpapersDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
inputRemappingDirectory:
inputRemappingDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		inputRemappingDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
joypadAutoconfigDir:
joypadAutoconfigDir= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		joypadAutoconfigDir := raexeloc . SubStr(rewtmpd,2,255)
	}

return
libretroDirectory:
libretroDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		libretroDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
oskOverlayDirectory:
oskOverlayDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		oskOverlayDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
overlayDirectory:
overlayDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		overlayDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
playlistDirectory:
playlistDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		playlistDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
recordingConfigDirectory:
recordingConfigDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		recordingConfigDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
recordingOutputDirectory:
recordingOutputDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		recordingOutputDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
resamplerDirectory:
resamplerDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		resamplerDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
rguiBrowserDirectory:
rguiBrowserDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		rguiBrowserDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
rguiConfigDirectory:
rguiConfigDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		rguiConfigDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
savefileDirectory:
savefileDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		savefileDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
savestateDirectory:
savestateDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		savestateDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return
screenshotDirectory:
screenshotDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		screenshotDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return

systemDirectory:
systemDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		systemDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return

thumbnailsDirectory:
thumbnailsDirectory= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		thumbnailsDirectory := raexeloc . SubStr(rewtmpd,2,255)
	}

return

videoFilterDir:
videoFilterDir= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		videoFilterDir := raexeloc . SubStr(rewtmpd,2,255)
	}

return

videoShaderDir:
videoShaderDir= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		videoShaderDir := raexeloc . SubStr(rewtmpd,2,255)
	}

return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     PATH ASSIGN     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
bundleAssetsDstPath:
bundleAssetsDstPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		bundleAssetsDstPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
bundleAssetsSrcPath:
bundleAssetsSrcPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		bundleAssetsSrcPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
cheatDatabasePath:
cheatDatabasePath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		cheatDatabasePath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
contentfavoritespath:
contentfavoritespath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentfavoritespath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
contentDatabasePath:
contentDatabasePath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentDatabasePath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
contentHistoryPath:
contentHistoryPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentHistoryPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
contentImageHistoryPath:
contentImageHistoryPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentImageHistoryPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
contentMusicHistoryPath:
contentMusicHistoryPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentMusicHistoryPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
contentVideoHistoryPath:
contentVideoHistoryPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		contentVideoHistoryPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
coreOptionsPath:
coreOptionsPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		coreOptionsPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
coreUpdaterBuildbotAssetsUrl:
coreUpdaterBuildbotAssetsUrl= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		coreUpdaterBuildbotAssetsUrl := raexeloc . SubStr(rewtmpd,2,255)
	}

return
coreUpdaterBuildbotUrl:
coreUpdaterBuildbotUrl= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		coreUpdaterBuildbotUrl := raexeloc . SubStr(rewtmpd,2,255)
	}

return
libretroInfoPath:
libretroInfoPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		libretroInfoPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
menuWallpaper:
menuWallpaper= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		menuWallpaper := raexeloc . SubStr(rewtmpd,2,255)
	}

return
videoFilter:
gui, submit, nohide
videoFilter= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		videoFilter := raexeloc . SubStr(rewtmpd,2,255)
	}

splitpath, inival2, toFltLst
guicontrol,, FLTFILE, |nul|%toFltLst%||%fltlist%
return
videoFontPath:
videoFontPath= %inival2%
rewtmp= 
rewtmpd= 
stringLeft, rewtmp, inival2,1
stringRight, rewtmpd, inival2,255
if (rewtmp = ":")
	{
		videoFontPath := raexeloc . SubStr(rewtmpd,2,255)
	}

return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     MENU ASSIGN     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
menuSwapOkCancelButtons:
menuSwapOkCancelButtons= %inival2%
guicontrol,,SWAPOKC, 0
if (menuSwapOkCancelButtons = "true")
		{
			guicontrol,,SWAPOKC, 1
		}
return

playlistEntryRemove:
playlistEntryRemove= %inival2%
return
playlistEntryRename:
playlistEntryRename= %inival2%
return
quickmenushowaddtofavorites:
quickmenushowaddtofavorites= %inival2%
return
quickmenushowcheats:
quickmenushowcheats= %inival2%
return
quickmenushowcontrols:
quickmenushowcontrols= %inival2%
return
quickmenushowinformation:
quickmenushowinformation= %inival2%
return
quickmenushowoptions:
quickmenushowoptions= %inival2%
return
quickmenushowsavecoreoverrides:
quickmenushowsavecoreoverrides= %inival2%
return
quickmenushowsavegameoverrides:
quickmenushowsavegameoverrides= %inival2%
return
quickmenushowsaveloadstate:
quickmenushowsaveloadstate= %inival2%
return
quickmenushowshaders:
quickmenushowshaders= %inival2%
return
quickmenushowtakescreenshot:
quickmenushowtakescreenshot= %inival2%
return
quickmenushowundosaveloadstate:
quickmenushowundosaveloadstate= %inival2%
return
uiCompanionStartOnBoot:
uiCompanionStartOnBoot= %inival2%
return
uiMenubarEnable:
uiMenubarEnable= %inival2%
return
rguiShowStartScreen:
rguiShowStartScreen= %inival2%
return
menuScrollDownBtn:
menuScrollDownBtn= %inival2%
return
menuScrollUpBtn:
menuScrollUpBtn= %inival2%
return
menuSearchBtn:
menuSearchBtn= %inival2%
return
menuCancelBtn:
menuCancelBtn= %inival2%
return
menuDefaultBtn:
menuDefaultBtn= %inival2%
return
menuInfoBtn:
menuInfoBtn= %inival2%
return
menuOkBtn:
menuOkBtn= %inival2%
return
videoMessageColor:
videoMessageColor= %inival2%
return
menuEntryHoverColor:
menuEntryHoverColor= %inival2%
return
menuEntryNormalColor:
menuEntryNormalColor= %inival2%
return
menuFooterOpacity:
menuFooterOpacity= %inival2%
return
menuHeaderOpacity:
menuHeaderOpacity= %inival2%
return
menuTitleColor:
menuTitleColor= %inival2%
return
menuWallpaperOpacity:
menuWallpaperOpacity= %inival2%
return
xmbAlphaFactor:
xmbAlphaFactor= %inival2%
guicontrol,,XMBALF, %inival2%
return
menuLinearFilter:
MNUFLT= 1
menuLinearFilter= %inival2%
if (inivar2 = "false")
{
MNUFLT= 0
}
guicontrol,,MNUFLT,%MNUFLT%
return
menuDynamicWallpaperEnable:
DYNWALL= 1
menuDynamicWallpaperEnable= %inival2%
if (inival2 = "false")
{
DYNWALL= 0
}
guicontrol,,DYNWALL, %DYNWALL%
return
menuMouseEnable:
MOUSEON= 1
menuMouseEnable= %inival2%
if (inival2 = "false")
{
MOUSEON= 0
}
guicontrol,,MOUSEON, %MOUSEON%
return

menuShowConfigurations:
MENSHOWCFG= 1
menuShowConfigurations= %inival2%
if (inival2 = "false")
	{
		MENSHOWCFG= 0
	}
guicontrol,,MENSHOWCFG,%MENSHOWCFG%	
return
menuShowCoreupdater:
MENSHOWCUP= 1
menuShowCoreupdater= %inival2%
if (inival2 = "false")
	{
		MENSHOWCUP= 0
	}
guicontrol,,MENSHOWCUP,%MENSHOWCUP%
return
menuShowHelp:
menuShowHelp= %inival2%
MENSHOWHLP= 1
if (inival2 = "false")
	{
		MENSHOWHLP= 0
	}
guicontrol,,MENSHOWHLP,%MENSHOWHLP%	
return
menuShowInformation:
MENSHOWINFO= 1
menuShowInformation= %inival2%
if (inival2 = "false")
	{
		MENSHOWINFO= 0
	}
guicontrol,,MENSHOWINFO,%MENSHOWINFO%
return
menuShowLoadContent:
MENSHOWLDCONT= 1
menuShowLoadContent= %inival2%
if (inival2 = "false")
{
MENSHOWLDCONT= 0
}
guicontrol,,MENSHOWLDCONT,%MENSHOWLDCONT%
return
menuShowLoadCore:
MENSHOWLDCR= 1
menuShowLoadCore= %inival2%
if (inival2 = "false")
{
MENSHOWLDCR= 0
}
guicontrol,,MENSHOWLDCR,%MENSHOWLDCR%
return
menuShowOnlineUpdater:
MENSHOWONLUP= 1
menuShowOnlineUpdater= %inival2%
if (inival2 = "false")
{
MENSHOWONLUP= 0
}
guicontrol,,MENSHOWONLUP,%MENSHOWONLUP%
return
menuShowQuitRetroarch:
MENSHOWQUIT= 1
menuShowQuitRetroarch= %inival2%
if (inival2 = "false")
{
MENSHOWQUIT= 0
}
guicontrol,,MENSHOWQUIT,%MENSHOWQUIT%
return
menuShowReboot:
MENSHOWREB= 1
menuShowReboot= %inival2%
if (inival2 = "false")
{
MENSHOWREB= 0
}
guicontrol,,MENSHOWREB,%MENSHOWREB%
return

videomsgbgcolorblue:
VIDMSGCOLB= 
videomsgbgcolorblue= %inival2%
return
videomsgbgcolorenable:
VIDMSGCOLEN= 1
videomsgbgcolorenable= %inival2%
if (inival2 = "false")
{
VIDMSGCOLEN= 0
}
guicontrol,,VIDMSGCOLEN,%VIDMSGCOLEN%
videomsgbgcolorgreen:
VIDMSGCOLG= 
videomsgbgcolorgreen= %inival2%
return
videomsgbgcoloropacity:
VIDMSGCOLO= 
videomsgbgcoloropacity= %inival2%
return
videomsgbgcolorred:
VIDMSGCOLR= 
videomsgbgcolorred= %inival2%
return


dpiOverrideEnable:
DPIOVR= 1
dpiOverrideEnable= %inival2%
if (inival2 = "false")
{
DPIOVR= 0
}	
guicontrol,,DPIOVR,%DPIOVR%
return
dpiOverrideValue:
dpiOverrideValue= %inival2%
guicontrol,,DPIPT,%DPIPT%
return
menuNavigationBrowserFilterSupportedExtensionsEnable:
FILTEXT= 1
menuNavigationBrowserFilterSupportedExtensionsEnable= %inival2%
if (inival2 = "false")
{
FILTEXT= 0
}
guicontrol,,FILTEXT, %FILTEXT%
return
menuNavigationWraparoundEnable:
NAVWRAP= 1
menuNavigationBrowserFilterSupportedExtensionsEnable= %inival2%
if (inival2 = "false")
{
NAVWRAP= 0
}
guicontrol,,NAVWRAP, %NAVWRAP%
return
menuPauseLibretro:
PAUSMNU= 1
menuPauseLibretro= %inival2%
if (inival2 = "false")
{
PAUSMNU= 0
}
guicontrol,,PAUSMNU, %PAUSMNU%
return
menuShaderPipeline:
RIBN= 2
menuShaderPipeline= %inival2%
RIBN:= menushaderPipeline
if (inival2 = "0")
{
RIBTXT= Off
}
if (inival2 = "1")
{
RIBTXT= Light Ribbon
}
if (inival2 = "2")
{
RIBTXT= Full Ribbon
}
if (inival2 = "3")
{
RIBTXT= Light Snow
}
if (inival2 = "4")
{
RIBTXT= Full Snow
}
if (inival2 = "5")
{
RIBTXT= Bokeh
}
guicontrol,,RIBTXT, %RIBTXT%
guicontrol,,RIBN, |%RIBN%||0|1|2|3|4|5
return
menuPointerEnable:
MNUPNT= 0
menuPointerEnable= %inivalf2%
if (menuPointerEnable= "true")
	{
		MNUPNT= 1
	}
guicontrol,,MNUPNT, %MNUPNT%
return
menuShowAdvancedSettings:
SHWADV= 1
menuShowAdvancedSettings= %inival2%
if (inival2 = "false")
{
SHWADV= 0
}
guicontrol,,SHWADV, %SHWADV%
return
menuBatteryLevelEnable:
SHWBATLVL= 1
menuBatteryLevelEnable= %inival2%
if (inival2 = "false")
{
	
SHWBATLVL= 0
}
guicontrol,,SHWBATLVL, %SHWBATLVL%
return
menuThrottleFramerate:
THRTL= 1
menuThrottleFramerate= %inival2%
if (inival2 = "false")
{
THRTL= 0
}
GuiControl,,THRTL, %THRTL%
return
menuThumbnails:
THUMBON= 1
guicontrol,enable,TITLCVR
guicontrol,enable,BOXCVR
guicontrol,enable,SSHTCVR
menuThumbnails= %inival2%
if (inival2 = "false")
{
THUMBON= 0
guicontrol,disable,TITLCVR
guicontrol,disable,BOXCVR
guicontrol,disable,SSHTCVR
}
return
savestateThumbnailEnable:
STHUMBON= 0
savestateThumbnailEnable= %inival2%
if (inival2 = "true")
	{
		STHUMBON= 1
	}
guicontrol,,STHUMBON,%STHUMBON%
return
menuTimedateEnable:
DATEMNU= 1
menuTimedateEnable= %inival2%
if (inival2 = "false")
{
DATEMNU= 0
}
guicontrol,,DATEMNU, %DATEMNU%
return
uiCompanionEnable:
CMPAN= 1
uiCompanionEnable= %inival2%
if (inival2 = "false")
{
CMPAN= 0
}
GuiControl,,CMPAN, %CMPAN%
return
videoFontEnable:
VFNTEN= 1
videoFontEnable= %inival2%
if (inival2 = "false")
{
VFNTEN= 0
}
guicontrol,,VFNTEN,%VFNTEN%
return
videoFontSize:
videoFontSize= %inival2%
FNTSZ:= inival2
guicontrol,,FNTSZ,%inival2%
return
xmbFont:
xmbFont= %inival2%
return
xmbMenuColorTheme:
gui, submit, nohide
xmbMenuColorTheme= %inival2%
if (inival2 = 0)
	{
		XMBCLRTHM= Legacy Red
	}
if (inival2 = 1)
	{
		XMBCLRTHM= Dark Purple
	}
if (inival2 = 2)
	{
		XMBCLRTHM= Midnight Blue
	}
if (inival2 = 3)
	{
		XMBCLRTHM= Golden
	}
if (inival2 = 4)
	{
		XMBCLRTHM= Electric Blue
	}
if (inival2 = 5)
	{
		XMBCLRTHM= Apple Green
	}
if (inival2 = 6)
	{
		XMBCLRTHM= Under Sea
	}
if (inival2 = 7)
	{
		XMBCLRTHM= Volcanic Red
	}
if (inival2 = 8)
	{
		XMBCLRTHM= Dark
	}
if (inival2 = 9)
	{
		XMBCLRTHM= Plain
	}
guicontrol,,CLRTHM,|%inival2%||0|1|2|3|4|5|6|7|8|9
guicontrol,,XMBCLRTHM,%XMBCLRTHM%
return
xmbScaleFactor:
xmbScaleFactor= %inival2%
XMBSCL:= xmbScaleFactor
guicontrol,,XMBSCL,%XMBSCL%
return
xmbShadowsEnable:
SHADW= 1
xmbShadowsEnable= %inival2%
if (inival2 = "false")
{
SHADW= 0
}
guicontrol,,SHADW, %SHADW%
return
xmbShowHistory:
SHWHIS=1
xmbShowHistory= %inival2%
if (inival2 = "false")
{
SHWHIS= 0
}
guicontrol,,SHWHIS, %SHWHIS%
gui,submit,nohide
return
xmbShowImages:
SHWIMG= 1
xmbShowImages= %inival2%
if (inival2 = "false")
{
SHWIMG= 0
}
guicontrol,,SHWIMG, %SHWIMG%
return
xmbShowMusic:
SHWMSC= 1
xmbShowMusic= %inival2%
if (inival2 = "false")
{
SHWMSC= 0
}
guicontrol,,SHWMSC, %SHWMSC%
return
xmbShowSettings:
SHWSET= 1
xmbShowSettings= %inival2%
if (inival2 = "false")
{
SHWSET= 0
}
guicontrol,,SHWSET, %SHWSET%
return
xmbShowVideo:
SHWVID= 1
xmbShowVideo= %inival2%
if (inival2 = "false")
{
SHWVID= 0
}
guicontrol,,SHWVID, %SHWVID%
return
xmbShowAdd:
SHWCOMPIN= 1
xmbShowAdd= %inival2%
if (inival2 = "false")
{
SHWCOMPIN= 0
}
guicontrol,,SHWCOMPIN, %SHWCOMPIN%
return
showHiddenFiles:
xmbShowHidden:
SHWHID= 1
xmbShowHidden= %inival2%
showHiddenFiles= %inival2%
if (inival2 = "false")
{
SHWHID= 0
}
guicontrol,,SHWHID, %SHWHID%
return
xmbTheme:
xmbTheme= %inival2%
if (xmbTheme= 0)
{
xmbTxt= Monochrome
}
if (xmbTheme= 1)
{
xmbTxt= FlatUI
}
if (xmbTheme= 2)
{
xmbTxt= RetroActive
}
if (xmbTheme= 3)
{
xmbTxt= Pixel
}
if (xmbTheme= 4)
{
xmbTxt= NeoActive
}
if (xmbTheme= 5)
{
xmbTxt= Monochrome Jagged
}
if (xmbTheme= 6)
{
xmbTxt= Custom
}
XMBTHM:= xmbTheme
guicontrol,,ICNTXT, %xmbTxT%
guicontrol,,XMBTHM, |%XMBTHM%||0|1|2|3|4|5|6
return
videoMessagePosX:
videoMessagePosX= %inival2%
VMSGX:= inival2
guicontrol,,VMSGX,%VMSGX%
return
videoMessagePosY:
videoMessagePosY= %inival2%
VMSGY:= inival2
guicontrol,,VMSGY,%VMSGY%
return
fpsShow:
SHWFPS= 0
fpsShow= %inival2%
if (inival2 = "true")
{
SHWFPS= 1
}
guicontrol,,SHWFPS,%SHWFPS%
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;     UNSET     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;    Netplay    ;;;;;;;;;;;;;;;;;;;;;;;;
netplayAllowSlaves:
gui, submit, nohide
netplayAllowSlaves= %inival2%
guicontrol,,ALSLV,1
guicontrolget, HOSTSWITCH
if (HOSTSWITCH = 1)
	{
		guicontrol,show,SLVONLY
	}
if (netplayAllowSlaves = "false")
	{
		guicontrol,,ALSLV,0
		guicontrol,hide,SLVONLY
	}
return
netplayRequireSlaves:
gui, submit, nohide
guicontrol,,SLVONLY,0
netplayRequireSlaves= %inival2%
if (netplayRequireSlaves = "true")
	{
		guicontrol,show,SLVONLY
		guicontrol,,SLVONLY,1
	}
return
netplayMode:
gui, submit, nohide
netplayMode= %inival2%
return
netplayClientSwapInput:
gui, submit, nohide
netplayClientSwapInput= %inival2%
return
netplayIpAddress:
gui, submit, nohide
netplayIpAddress= %inival2%
return
netplayInputLatencyFramesMin:
gui, submit, nohide
netplayInputLatencyFramesMin= %inival2%
guicontrol,,MINLAT, %inival2%
return
netplayInputLatencyFramesRange:
gui, submit, nohide
netplayInputLatencyFramesRange= %inival2%
guicontrol,,LATRNG, %inival2%
return
netplayNatTraversal:
gui, submit, nohide
netplayNatTraversal= %inival2%
return
netplayPublicAnnounce:
gui, submit, nohide
netplayPublicAnnounce= %inival2%
guicontrol,,PRVTSV,0
if (netplayPublicAnnounce = "true")
	{
		guicontrol,,PRVTSV,1
	}
return
netplayUseMitmServer:
gui, submit, nohide
netplayUseMitmServer = %inival2%
guicontrol,,INETHOST,0
if (netplayUseMitmServer = "true")
	{
		guicontrol,,INETHOST,1
	}
return
netplaySpectatorModeEnable:
netplaySpectatorModeEnable= %inival2%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;    Retro    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
keyboardGamepadMappingType:
keyboardGamepadMappingType= %inival2%

return
autoScreenshotFilename:
autoScreenshotFilename= %inival2%
return
blockSramOverwrite:
blockSramOverwrite= %inival2%
return
builtinImageviewerEnable:
builtinImageviewerEnable= %inival2%
return
builtinMediaplayerEnable:
builtinMediaplayerEnable= %inival2%
return
bundleAssetsExtractEnable:
bundleAssetsExtractEnable= %inival2%
return
bundleAssetsExtractLastVersion:
bundleAssetsExtractLastVersion= %inival2%
return
bundleAssetsExtractVersionCurrent:
bundleAssetsExtractVersionCurrent= %inival2%
return
cameraAllow:
cameraAllow= %inival2%
return
cameraDevice:
cameraDevice= %inival2%
return
cameraDriver:
cameraDriver= %inival2%
return
contentHistorySize:
contentHistorySize= %inival2%
return
coreSetSupportsNoGameEnable:
coreSetSupportsNoGameEnable= %inival2%
return
coreUpdaterAutoExtractArchive:
coreUpdaterAutoExtractArchive= %inival2%
return
fastforwardRatio:
fastforwardRatio= %inival2%
return
filterbycurrentcore:
filterbycurrentcore= %inival2%
return
framecountshow:
framecountshow= %inival2%
return
historyListEnable:
historyListEnable= %inival2%
return
libretroLogLevel:
libretroLogLevel= %inival2%
return
loadDummyOnCoreShutdown:
loadDummyOnCoreShutdown= %inival2%
return
locationAllow:
locationAllow= %inival2%
return
locationDriver:
locationDriver= %inival2%
return
logVerbosity:
logVerbosity= %inival2%
return
playlistCores:
playlistCores= %inival2%
return
playlistNames:
playlistNames= %inival2%
return
recordDriver:
recordDriver= %inival2%
return
slowmotionRatio:
slowmotionRatio= %inival2%
return
stateSlot:
stateSlot= %inival2%
return
stdinCmdEnable:
stdinCmdEnable= %inival2%
return
suspendScreensaverEnable:
suspendScreensaverEnable= %inival2%
return
videoAllowRotate:
videoAllowRotate= %inival2%
return
videoContextDriver:
videoContextDriver= %inival2%
return
wifiDriver:
wifiDriver= %inival2%
return
customBgmEnable:
customBgmEnable= %inival2%
return
materialuiMenuColorTheme:
materialuiMenuColorTheme= %inival2%
return

materialuiiconsenable:
materialuiiconsenable= %inival2%
return

menuCoreEnable:
menuCoreEnable= %inival2%
return
userLanguage:
userLanguage= %inival2%
return
videoForceSrgbDisable:
videoForceSrgbDisable= %inival2%
return
threadedDataRunloopEnable:
threadedDataRunloopEnable= %inival2%
return
perfcntEnable:
perfcntEnable= %inival2%
return
videoPostFilterRecord:
videoPostFilterRecord= %inival2%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;    Network    ;;;;;;;;;;;;;;;;;;;;;;;
networkCmdEnable:
networkCmdEnable= %inival2%
return
networkCmdPort:
networkCmdPort= %inival2%
return
networkRemoteBasePort:
networkRemoteBasePort= %inival2%
return
networkRemoteEnable:
networkRemoteEnable= %inival2%
return
networkRemoteEnableUserP1:
networkRemoteEnableUserP1= %inival2%
return
networkRemoteEnableUserP10:
networkRemoteEnableUserP10= %inival2%
return
networkRemoteEnableUserP11:
networkRemoteEnableUserP11= %inival2%
return
networkRemoteEnableUserP12:
networkRemoteEnableUserP12= %inival2%
return
networkRemoteEnableUserP13:
networkRemoteEnableUserP13= %inival2%
return
networkRemoteEnableUserP14:
networkRemoteEnableUserP14= %inival2%
return
networkRemoteEnableUserP15:
networkRemoteEnableUserP15= %inival2%
return
networkRemoteEnableUserP16:
networkRemoteEnableUserP16= %inival2%
return
 networkRemoteEnableUserP2:
networkRemoteEnableUserP2= %inival2%
return
networkRemoteEnableUserP3:
networkRemoteEnableUserP3= %inival2%
return
networkRemoteEnableUserP4:
networkRemoteEnableUserP4= %inival2%
return
networkRemoteEnableUserP5:
networkRemoteEnableUserP5= %inival2%
return
networkRemoteEnableUserP6:
networkRemoteEnableUserP6= %inival2%
return
networkRemoteEnableUserP7:
networkRemoteEnableUserP7= %inival2%
return
networkRemoteEnableUserP8:
networkRemoteEnableUserP8= %inival2%
return
networkRemoteEnableUserP9:
networkRemoteEnableUserP9= %inival2%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;    Audio    ;;;;;;;;;;;;;;;;;;;;;;;;;;;
audioBlockFrames:
audioBlockFrames= %inival2%
return
audioDevice:
audioDevice= %inival2%
return
audioDspPlugin:
audioDspPlugin= %inival2%
return
audioMaxTimingSkew:
audioMaxTimingSkew= %inival2%
return

audiomixermuteenable:
audiomixermuteenable= %inival2%
return
audiomixervolume:
audiomixervolume= %inival2%
return
audiowasapiexclusivemode:
audiowasapiexclusivemode= %inival2%
return
audiowasapifloatformat:
audiowasapifloatformat= %inival2%
return
audiowasapishbufferlength:
audiowasapishbufferlength= %inival2%
return



audioOutRate:
audioOutRate= %inival2%
return
audioResampler:
audioResampler= %inival2%
return
audioVolume:
audioVolume= %inival2%
return
;};;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;    Retroachievments    ;;;
cheevosEnable:
cheevosEnable= %inival2%
return
cheevosHardcoreModeEnable:
cheevosHardcoreModeEnable= %inival2%
return
cheevosPassword:
cheevosPassword= %inival2%
return
cheevosTestUnofficial:
cheevosTestUnofficial= %inival2%
return
cheevosUsername:
cheevosUsername= %inival2%
return
cheevosleaderboardsenable:
cheevosleaderboardsenable= %inival2%
return
cheevosverboseenable:
cheevosverboseenable= %inival2%
return

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
keymapperenable:
keymapperenable= %inival2%
return
keymapperport:
keymapperport= %inival2%
return
;{;;;;;;;;;;;;;;   KIOSK MODE    ;;;;


kioskmodeenable:
kioskmodeenable= %inival2%
return
kioskmodepassword:
kioskmodepassword= %inival2%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;{;;;;;;;;;;;;    Inputs    ;;;;;;;;;;;;;;;;;;;;;;;;
inputAxisThreshold:
inputAxisThreshold= %inival2%
guicontrol,,DEDZTXT, %inival2%
DEDZM:= (inival2 / 100000)
DEDZMULT:= (inival2 * 100000)
guicontrol,,DEDZ,%DEDZMULT%
return
backAsMenuToggleEnable:
backAsMenuToggleEnable= %inival2%
return
inputOskOverlay:
inputOskOverlay= %inival2%
return
inputOskOverlayEnable:
inputOskOverlayEnable= %inival2%
return
inputOverlayEnable:
gui,submit,nohide
guicontrol,,OVRLTOG,0
guicontrol,disable,OVRLMENU
guicontrol,disable,OVRLBTN
guicontrol,disable,OVRLAY
inputOverlayEnable= %inival2%
if (inputOverlayEnable = "true")
	{
		guicontrol,,OVRLTOG,1
		guicontrol,enable,OVRLMENU
		guicontrol,enable,OVRLBTN
		guicontrol,enable,OVRLAY
	}
return
inputOverlayEnableAutopreferred:
inputOverlayEnableAutopreferred= %inival2%
return
inputOverlayHideInMenu:
guicontrol,,OVRLMENU,0
inputOverlayHideInMenu= %inival2%
if (inputOverlayHideInMenu = "true")
	{
		guicontrol,,OVRLMENU,1
	}
return
inputOverlayOpacity:
inputOverlayOpacity= %inival2%
return
inputOverlayScale:
inputOverlayScale= %inival2%
return
inputoverlayshowphysicalinputs:
inputoverlayshowphysicalinputs= %inival2%
return
inputoverlayshowphysicalinputsport:
inputoverlayshowphysicalinputsport= %inival2%
return
inputToggleFastForward:
inputToggleFastForward= %inival2%
return
inputToggleFastForwardBtn:
inputToggleFastForwardBtn= %inival2%
return
inputHoldFastForward:
inputHoldFastForward= %inival2%
return
inputHoldFastForwardBtn:
inputHoldFastForwardBtn= %inival2%
return
inputLoadState:
inputLoadState= %inival2%
return
inputLoadStateBtn:
inputLoadStateBtn= %inival2%
return
inputSaveState:
inputSaveState= %inival2%
return
inputSaveStateBtn:
inputSaveStateBtn= %inival2%
return
inputToggleFullscreen:
inputToggleFullscreen= %inival2%
return
inputToggleFullscreenBtn:
inputToggleFullscreenBtn= %inival2%
return
inputFullscreenToggle:
inputFullscreenToggle= %inival2%
return
inputFullscreenToggleBtn:
inputFullscreenToggleBtn= %inival2%
return
inputStateSlotIncrease:
inputStateSlotIncrease= %inival2%
return
inputStateSlotIncreaseBtn:
inputStateSlotIncreaseBtn= %inival2%
return
inputStateSlotDecrease:
inputStateSlotDecrease= %inival2%
return
inputStateSlotDecreaseBtn:
inputStateSlotDecreaseBtn= %inival2%
return
inputRewind:
inputRewind= %inival2%
return
inputRewindBtn:
inputRewindBtn= %inival2%
return
InputMenuToggle:
InputMenuToggle= %inival2%
return
inputExitEmulator:
inputExitEmulator= %inival2%
return
inputExitEmulatorBtn:
inputExitEmulatorBtn= %inival2%
return
InputMenuToggleBtn:
InputMenuToggleBtn= %inival2%
return
inputMovieRecordToggle:
inputMovieRecordToggle= %inival2%
return
inputMovieRecordToggleBtn:
inputMovieRecordToggleBtn= %inival2%
return
inputPauseToggle:
inputPauseToggle= %inival2%
return
inputPauseToggleBtn:
inputPauseToggleBtn= %inival2%
return
inputFrameAdvance:
inputFrameAdvance= %inival2%
return
inputFrameAdvanceBtn:
inputFrameAdvanceBtn= %inival2%
return
inputReset:
inputReset= %inival2%
return
inputResetBtn:
inputResetBtn= %inival2%
return
inputShaderNext:
inputShaderNext= %inival2%
return
inputShaderNextBtn:
inputShaderNextBtn= %inival2%
return
inputShaderPrev:
inputShaderPrev= %inival2%
return
inputShaderPrevBtn:
inputShaderPrevBtn= %inival2%
return
inputCheatIndexPlus:
inputCheatIndexPlus= %inival2%
return
inputCheatIndexPlusBtn:
inputCheatIndexPlusBtn= %inival2%
return
inputCheatIndexMinus:
inputCheatIndexMinus= %inival2%
return
inputCheatIndexMinusBtn:
inputCheatIndexMinusBtn= %inival2%
return
inputCheatToggle:
inputCheatToggle= %inival2%
return
inputCheatToggleBtn:
inputCheatToggleBtn= %inival2%
return
inputScreenshot:
inputScreenshot= %inival2%
return
inputScreenshotBtn:
inputScreenshotBtn= %inival2%
return
inputAudioMute:
inputAudioMute= %inival2%
return
inputAudioMuteBtn:
inputAudioMuteBtn= %inival2%
return
inputOskToggle:
inputOskToggle= %inival2%
return
inputOskToggleBtn:
inputOskToggleBtn= %inival2%
return
inputNetplayFlipPlayers:
inputNetplayFlipPlayers= %inival2%
return
inputNetplayFlipPlayersBtn:
inputNetplayFlipPlayersBtn= %inival2%
return
inputNetplayGameWatch:
inputNetplayGameWatch= %inival2%
return
inputSlowmotion:
inputSlowmotion= %inival2%
return
inputSlowmotionBtn:
inputSlowmotionBtn= %inival2%
return
inputEnableHotkey:
inputEnableHotkey= %inival2%
return
inputEnableHotkeyBtn:
inputEnableHotkeyBtn= %inival2%
return
inputVolumeUp:
inputVolumeUp= %inival2%
return
inputVolumeUpBtn:
inputVolumeUpBtn= %inival2%
return
inputVolumeDown:
inputVolumeDown= %inival2%
return
inputVolumeDownBtn:
inputVolumeDownBtn= %inival2%
return
inputOverlayNext:
inputOverlayNext= %inival2%
return
inputOverlayNextBtn:
inputOverlayNextBtn= %inival2%
return
inputDiskEjectToggle:
inputDiskEjectToggle= %inival2%
return
inputDiskEjectToggleBtn:
inputDiskEjectToggleBtn= %inival2%
return
inputDiskNext:
inputDiskNext= %inival2%
return
inputDiskNextBtn:
inputDiskNextBtn= %inival2%
return
inputDiskPrev:
inputDiskPrev= %inival2%
return
inputDiskPrevBtn:
inputDiskPrevBtn= %inival2%
return
inputGameFocusToggle:
inputGameFocusToggle= %inival2%
return
inputGrabMouseToggle:
inputGrabMouseToggle= %inival2%
return
inputGrabMouseToggleBtn:
inputGrabMouseToggleBtn= %inival2%
return
inputDescriptorHideUnbound:
inputDescriptorHideUnbound= %inival2%
return
inputDescriptorLabelShow:
inputDescriptorLabelShow= %inival2%
return
inputBindTimeout:
inputBindTimeout= %inival2%
return
inputDutyCycle:
inputDutyCycle= %inival2%
guicontrol,,DUTYCYCLE,%inputDutyCycle%
return
inputKeyboardLayout:
inputKeyboardLayout= %inival2%
return
inputPollTypeBehavior:
inputPollTypeBehavior= %inival2%
if (inputPollTypeBehavior = 0)
	{
		POLLING= Early
	}
if (inputPollTypeBehavior = 1)
	{
		POLLING= Normal
	}
if (inputPollTypeBehavior = 2)
	{
		POLLING= Late
	}
guicontrol,,POLLING,|%POLLING%||Early|Normal|Late
return
inputLibretroDeviceP1:
inputLibretroDeviceP1= %inival2%
return
inputLibretroDeviceP2:
inputLibretroDeviceP2= %inival2%
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    FILE SERVER    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
StartServer:
SB_SetText(" Starting Server ") 

    OnExit, CloseAHKsock
    
 
    AHKsock_ErrorHandler("AHKsockErrors")
    
    
ServerToggle:
btnListen:
    guicontrolget,sFPort,,SERVPORT
 
    If Not bListening {
        
        ;Listen on this computer on port 54356
        If (i := AHKsock_Listen(sFPort, "Send")) {
            OutputDebug, % "AHKsock_Listen() failed with return value = " i " and ErrorLevel = " ErrorLevel
			SB_SetText(" AHKsock_Listen() failed with return value = " i " ")
        }
        
        ;Change button name
        
    } Else  {
        
        ;Stop listening
        If (i := AHKsock_Listen(sFPort)) {
            OutputDebug, % "AHKsock_Listen() failed with return value = " i " and ErrorLevel = " ErrorLevel
			SB_SetText(" AHKsock_Listen() failed with return value = " i " ")
        }
        
        ;Change button name
    }
    
    
    bListening := Not bListening
Return

CloseAHKsock:


    AHKsock_Close()
return

Send(sEvent, iSocket = 0, sName = 0, sAddr = 0, sPort = 0, ByRef bData = 0, iLength = 0) {
    Static hFile := -1, iFileSize, bFileSize
    
    If (sEvent = "ACCEPTED") {
        OutputDebug, % "Server - A client connected!"
			SB_SetText(" Server - A client connected! ")
        
        
        If (hFile = -1) {
            
            GuiControlGet, sFile,, NETHINFO
            hFile := File_Open("ReadSeq", sFile)
            If (hFile = -1) {
                OutputDebug, % "Server - Could not open the file! ErrorLevel = " ErrorLevel
			SB_SetText(" Server - Could not open the file! ")
                
                AHKsock_Close(iSocket)
                Return
            }
            
            
            iFileSize := File_Size(hFile)
            If (iFileSize = -1) {
                OutputDebug, % " ErrorLevel = " ErrorLevel
			SB_SetText(" Server - Could not get the file size! ")
                
                
                AHKsock_Close(iSocket)
                Return
            }
            
            
            
            VarSetCapacity(bFileSize, 8, 0)
            NumPut(iFileSize, bFileSize, 0, "int64")
        }
        
        
        SocketPointer(iSocket, "Add")
        
    } Else If (sEvent = "DISCONNECTED") {
        OutputDebug, % "Server - A client disconnected!"
			SB_SetText(" Server - A client disconnected! ")
        
        
        SocketPointer(iSocket, "Delete")
        
        
        If Not SocketPointer() {
            File_Close(hFile)
            hFile := -1
        }
                
    } Else If (sEvent = "SEND") {
        
        
        bFileSizeSent := SocketPointer(iSocket, "GetSizeSent")
        If (bFileSizeSent >= 0) {
            Loop {
                If ((i := AHKsock_Send(iSocket, &bFileSize + bFileSizeSent, 8 - bFileSizeSent)) < 0) {
                    
                    ;Check if we received WSAEWOULDBLOCK
                    If (i = -2) {
                        SocketPointer(iSocket, "SetSizeSent", bFileSizeSent) ;Save the number of bytes we were able to send
                        Return ;We'll keep sending data the next time we get the SEND event
                        
                    } Else { ;Something bad has happened
                        OutputDebug, % "Server - AHKsock_Send failed with return value = " i " and ErrorLevel = " ErrorLevel
						SB_SetText(" Server - AHKsock_Send failed with return value = " i " ")
                        AHKsock_Close(iSocket) ;Close the socket
                    }
                }
                
                ;Check if all of it could be sent
                If (i < 8 - bFileSizeSent)
                    bFileSizeSent += i
                Else {
                    SocketPointer(iSocket, "SetSizeSent", -1) ;We sent all of it
                    Break
                }
            }
        }
        iPointer := SocketPointer(iSocket, "GetPointer")
        If (File_Pointer(hFile) <> iPointer)
            File_Pointer(hFile, iPointer)
        
        
        bFileSent := 0
        
        
        Loop {
            
            
            If Not bFileSent {
                bFileLength := File_Read(hFile, bFile, 8191)
                If (bFileLength = -1) { 
                    OutputDebug, % "Server - File couldn't be read! ErrorLevel = " ErrorLevel
			SB_SetText(" Server - File couldn't be read! ")
                    Break 
                }
            }
            
            
            If ((i := AHKsock_Send(iSocket, &bFile + bFileSent, bFileLength - bFileSent)) < 0) {
                
                
                If (i = -2) {
                    
            
                    SocketPointer(iSocket, "SetPointer", File_Pointer(hFile) - bFileLength + bFileSent)
                    Return 
                    
                } Else { 
                    OutputDebug, % "Server - AHKsock_Send failed with return value = " i " and ErrorLevel = " ErrorLevel
					SB_SetText(" Server - AHKsock_Send failed with return value = " i " ")
                    Break 
                }
            }
            
            
            
            
            
            If (i < bFileLength - bFileSent) {
                
                
                
                bFileSent += i
                Continue 
                
            
            
            } Else bFileSent := 0
            
            
            If (File_Pointer(hFile) >= iFileSize)
                Break 
        }
        
        OutputDebug, % "Server - Closing the client connection now"
		SB_SetText(" Server - Closing the client connection now ")
        If (i := AHKsock_Close(iSocket))
            OutputDebug, % "Server - The shutdown() call failed. ErrorLevel = " ErrorLevel
			SB_SetText(" Server - The shutdown() call failed. ")
    }
}

AHKsockErrors(iError, iSocket) {
    OutputDebug, % "Server - Error " iError " with error code = " ErrorLevel ((iSocket <> -1) ? " on socket " iSocket : "")
			SB_SetText(" Server - Error" iError " ")
}

SocketPointer(iSocket = -1, sAction = "Count", iValue = -1) {
    Static 
    Static aSockets0 := 0
    Local i
    
    
    If (sAction = "Count") {
        Return aSockets0
    
    } Else If (sAction = "Add") {
        aSockets0 += 1
        aSockets%aSockets0% := iSocket
        aSockets%aSockets0%_Pointer := 0
        aSockets%aSockets0%_SizeSent := 0
        
    } Else If (sAction = "Delete") {
        
        
        If Not (i := SocketPointer(iSocket, "GetIndex"))
            Return
        
        
        If (i < aSockets0) {
            aSockets%i% := aSockets%aSockets0%
            aSockets%i%_Pointer := aSockets%aSockets0%_Pointer
            aSockets%i%_SizeSent := aSockets%aSockets0%_SizeSent
        }
        
        
        aSockets0 -= 1
        
    } Else If (sAction = "GetPointer") {
        
        
        If Not (i := SocketPointer(iSocket, "GetIndex"))
            Return
        Else Return aSockets%i%_Pointer
        
    } Else If (sAction = "SetPointer") {
        
        
        If Not (i := SocketPointer(iSocket, "GetIndex"))
            Return
        Else aSockets%i%_Pointer := iValue
        
    } Else If (sAction = "GetSizeSent") {
        
        
        If Not (i := SocketPointer(iSocket, "GetIndex"))
            Return
        Else Return aSockets%i%_SizeSent
        
    } Else If (sAction = "SetSizeSent") {
        
        
        If Not (i := SocketPointer(iSocket, "GetIndex"))
            Return
        Else aSockets%i%_SizeSent := iValue
        
    } Else If (sAction = "GetIndex") {
        Loop % aSockets0
            If (aSockets%A_Index% = iSocket)
                Return A_Index
    }
}

File_Open(sType, sFile) {
    
    bRead := InStr(sType, "READ")
    bSeq  := sType = "READSEQ"
    
    
    
    hFile := DllCall("CreateFile", "Str", sFile, "UInt", bRead ? 0x80000000 : 0x40000000, "UInt", bRead ? 3 : 0, "Ptr", 0
                                 , "UInt", bRead ? 3 : 4, "UInt", bSeq ? 0x08000000 : 0, "Ptr", 0, "Ptr")
    If (hFile = -1 Or ErrorLevel) { 
        ErrorLevel := ErrorLevel ? ErrorLevel : A_LastError
        Return -1 
    } Else Return hFile
}

File_Read(hFile, ByRef bData, iLength = 0) {
    
    
    If Not iLength 
        iLength := File_Size(hFile) - File_Pointer(hFile)
    
    
    VarSetCapacity(bData, iLength, 0)
    
    
    r := DllCall("ReadFile", "Ptr", hFile, "Ptr", &bData, "UInt", iLength, "UInt*", iLengthRead, "Ptr", 0)
    If (Not r Or ErrorLevel) {
        ErrorLevel := ErrorLevel ? ErrorLevel : A_LastError
        Return -1
    } Else Return iLengthRead
}

File_Write(hFile, ptrData, iLength) {
    
    
    r := DllCall("WriteFile", "Ptr", hFile, "Ptr", ptrData, "UInt", iLength, "UInt*", iLengthWritten, "Ptr", 0)
    If (Not r Or ErrorLevel) {
        ErrorLevel := ErrorLevel ? ErrorLevel : A_LastError
        Return -1
    } Else Return iLengthWritten
}

File_Pointer(hFile, iOffset = 0, iMethod = -1) {
    
    
    If (iMethod = -1) {
        
        
        If (iOffset = 0)
            iMethod := 1 
        Else If (iOffset > 0)
            iMethod := 0 
        Else If (iOffset < 0)
            iMethod := 2 
    } Else If iMethod Is Not Integer
        iMethod := (iMethod = "BEGINNING" ? 0 : (iMethod = "CURRENT" ? 1 : (iMethod = "END" ? 2 : 0)))
    
    r := DllCall("SetFilePointerEx", "Ptr", hFile, "Int64", iOffset, "Int64*", iNewPointer, "UInt", iMethod)
    If (Not r Or ErrorLevel) {
        ErrorLevel := ErrorLevel ? ErrorLevel : A_LastError
        Return -1
    } Else Return iNewPointer
}

File_Size(hFile) {
    r := DllCall("GetFileSizeEx", "Ptr", hFile, "Int64*", iFileSize)
    If (Not r Or ErrorLevel) {
        ErrorLevel := ErrorLevel ? ErrorLevel : A_LastError
        Return -1
    } Else Return iFileSize
}

File_Close(hFile) {
    If Not (r := DllCall("CloseHandle", "Ptr", hFile)) {
        ErrorLevel := ErrorLevel ? ErrorLevel : A_LastError
        Return False
    } Return True
}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    FILE CLIENT    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RomClient:
    bSilent := True
    sServer := IPADR
    AHKsock_ErrorHandler("AHKsockErrors")    
    DllCall("QueryPerformanceFrequency", "int64*", qpFreq)
    
			IfNotExist, %coreassetsDirectory%%RETDLF%
			{
				FileCreateDir, %coreassetsDirectory%%RETDLF%
				gosub, resetCoreAssets
			}
			sPath = %coreassetsDirectory%%RETDLF%\%romname%.zip
			guicontrol,,ARCDET,%sPath%
			guicontrol,,NETHINFO,%sPath%
			guicontrolget,fileServerPort,,SERVPORT
btnConnect:
    If (i := AHKsock_Connect(sServer, fileServerPort, "Recv")) {
        SB_SetText("Client - AHKsock_Connect() failed with return value = " i " ")
        
    }
Return
Recv(sEvent, iSocket = 0, sName = 0, sAddr = 0, sPort = 0, ByRef bNewData = 0, bNewDataLength = 0) {
    Static bPastData, bPastDataLength
    Static hFile := -1, iFileSize, qpTstart
    Global qpFreq, bSilent
    
    If (sEvent = "CONNECTED") {
        
        If (iSocket = -1) {
            OutputDebug, % "Client - AHKsock_Connect() failed."
			SB_SetText(" Client - AHKsock_Connect() failed. ")
			MsgBox, 0x10, "Error, Could not connect to the server at: %sName% :  %fileServerPort%"`n"Either try again or change the server address.",5
                    }
        
        SB_SetText(" Client - AHKsock_Connect() successfully connected!")
        
    } Else If (sEvent = "DISCONNECTED") {
        
		SB_SetText(" Client - The server closed the connection. ")
        
        If (hFile <> -1) {
            File_Close(hFile)
            hFile := -1
			GuiControlGet, sFile,, NETHINFO
            FileDelete, %sFile%
        }
        
        
        
    } Else If (sEvent = "RECEIVED") {
        
        If (hFile = -1) {
			GuiControlGet, sFile,, NETHINFO           
            FileDelete, %sFile%
            

            hFile := File_Open("Write", sFile)
            If (hFile = -1) { 
                SB_SetText("Client - Could not open the file!")
                

                AHKsock_Close(iSocket)
                
            }
        }
        

        If bPastDataLength {
            
            bDataLength := bNewDataLength + bPastDataLength
            

            VarSetCapacity(bData, bDataLength, 0)
            

            CopyBinData(&bPastData, &bData, bPastDataLength)
            CopyBinData(&bNewData, &bData + bPastDataLength, bNewDataLength)
            

            VarSetCapacity(bPastData, 0) 
            bPastDataLength := 0 
            

            bDataPointer := &bData
            

        } Else bDataPointer := &bNewData, bDataLength := bNewDataLength
        

        If Not iFileSize {
            

            If (bDataLength < 8) {
                

                VarSetCapacity(bPastData, 8, 0)
                CopyBinData(bDataPointer, &bPastData, bDataLength)
                Return
            }
            

            iFileSize := NumGet(bDataPointer + 0, 0, "int64")
            
            SB_SetText("Client - File size is " iFileSize " bytes!")
            

            If (bDataLength = 8) {
                

                qpTstart := -1
                
                Return 
            }
            

            DllCall("QueryPerformanceCounter", "int64*", qpTstart)
            

            iWritten := File_Write(hFile, bDataPointer + 8, bDataLength - 8)
            
        } Else {
            
            If (qpTstart = -1) 
                DllCall("QueryPerformanceCounter", "int64*", qpTstart)
            
            
            iWritten := File_Write(hFile, bDataPointer, bDataLength)
        }
        

        iPointer := File_Pointer(hFile)
        

        If (iPointer >= iFileSize) {
            

            File_Close(hFile)
            hFile := -1 
            

            DllCall("QueryPerformanceCounter", "int64*", qpTend)
            SB_SetText("Average speed = " Round((iFileSize / 1024) / ((qpTend - qpTstart) / qpFreq)) " kB/s")
        }
        

        GuiControl,, pgrTransfer, % iPointer * 600 / iFileSize
    }
}

CopyBinData(ptrSource, ptrDestination, iLength) {
    If iLength
        DllCall("RtlMoveMemory", "Ptr", ptrDestination, "Ptr", ptrSource, "UInt", iLength)
}

return


;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    PORT CHECKER    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
PortCheck:
SB_SetText("...checking " HOSTINGIPS " port " HOSTINGPORTS "...")
myTcp := new SocketTCP()
PORTOPEN= % myTcp.connect(HOSTINGIPS, HOSTINGPORTS)
myTcp.disconnect()
return


class Socket
{
  static __eventMsg := 0x9987
  
  __New(s=-1)
  {
    static init
    if (!init)
    {
      DllCall("LoadLibrary", "str", "ws2_32", "ptr")
      VarSetCapacity(wsadata, 394+A_PtrSize)
      DllCall("ws2_32\WSAStartup", "ushort", 0x0000, "ptr", &wsadata)
      DllCall("ws2_32\WSAStartup", "ushort", NumGet(wsadata, 2, "ushort"), "ptr", &wsadata)
      OnMessage(Socket.__eventMsg, "SocketEventProc")
      init := 1
    }
    this.socket := s
  }
  __Delete()
  {
    this.disconnect()
  }
  __Get(k, v)
  {
    if (k="size")
      return this.msgSize()
  }
  connect(host, port)
  {
    if ((this.socket!=-1) || (!(faddr := next := this.__getAddrInfo(host, port))))
      return 0
    while (next)
    {
      sockaddrlen := NumGet(next+0, 16, "uint")
      sockaddr := NumGet(next+0, 16+(2*A_PtrSize), "ptr")
      if ((this.socket := DllCall("ws2_32\socket", "int", NumGet(next+0, 4, "int"), "int", this.__socketType, "int", this.__protocolId, "ptr"))!=-1)
      {
        if ((r := DllCall("ws2_32\WSAConnect", "ptr", this.socket, "ptr", sockaddr, "uint", sockaddrlen, "ptr", 0, "ptr", 0, "ptr", 0, "ptr", 0, "int"))=0)
        {
        
          DllCall("ws2_32\freeaddrinfo", "ptr", faddr)
          return true
        }
        
        this.disconnect()
      }
      next := NumGet(next+0, 16+(3*A_PtrSize), "ptr")
    }
    this.lastError := DllCall("ws2_32\WSAGetLastError")
    return 0
  }
  bind(host, port)
  {
    if ((this.socket!=-1) || (!(faddr := next := this.__getAddrInfo(host, port))))
      return 0
    while (next)
    {
      sockaddrlen := NumGet(next+0, 16, "uint")
      sockaddr := NumGet(next+0, 16+(2*A_PtrSize), "ptr")
      if ((this.socket := DllCall("ws2_32\socket", "int", NumGet(next+0, 4, "int"), "int", this.__socketType, "int", this.__protocolId, "ptr"))!=-1)
      {
        if (DllCall("ws2_32\bind", "ptr", this.socket, "ptr", sockaddr, "uint", sockaddrlen, "int")=0)
        {
          DllCall("ws2_32\freeaddrinfo", "ptr", faddr)
          return Socket.__eventProcRegister(this, 0x29)
        }
        this.disconnect()
      }
      next := NumGet(next+0, 16+(3*A_PtrSize), "ptr")
    }
    this.lastError := DllCall("ws2_32\WSAGetLastError")
    return 0
  }
  listen(backlog=32)
  {
    return (DllCall("ws2_32\listen", "ptr", this.socket, "int", backlog)=0) ? 1 : 0
  }
  accept()
  {
    if ((s := DllCall("ws2_32\accept", "ptr", this.socket, "ptr", 0, "int", 0, "ptr"))!=-1)
    {
      newsock := new Socket(s)
      newsock.__protocolId := this.__protocolId
      newsock.__socketType := this.__socketType
      Socket.__eventProcRegister(newsock, 0x21)
      return newsock
    }
    return 0
  }
  disconnect()
  {
    Socket.__eventProcUnregister(this)
    DllCall("ws2_32\closesocket", "ptr", this.socket, "int")
    this.socket := -1
    return 1
  }
  msgSize()
  {
    VarSetCapacity(argp, 4, 0)
    if (DllCall("ws2_32\ioctlsocket", "ptr", this.socket, "uint", 0x4004667F, "ptr", &argp)!=0)
      return 0
    return NumGet(argp, 0, "int")
  }
  send(addr, length)
  {
    if ((r := DllCall("ws2_32\send", "ptr", this.socket, "ptr", addr, "int", length, "int", 0, "int"))<=0)
      return 0
    return r
  }
  sendText(msg, encoding="UTF-8")
  {
    VarSetCapacity(buffer, length := (StrPut(msg, encoding)*(((encoding="utf-16")||(encoding="cp1200")) ? 2 : 1)))
    StrPut(msg, &buffer, encoding)
    return this.send(&buffer, length)
  }
  recv(byref buffer, wait=1)
  {
    while ((wait) && ((length := this.msgSize())=0))
      sleep, 100
    if (length)
    {
      VarSetCapacity(buffer, length)
      if ((r := DllCall("ws2_32\recv", "ptr", this.socket, "ptr", &buffer, "int", length, "int", 0))<=0)
        return 0
      return r
    }
    return 0
  }
  recvText(wait=1, encoding="UTF-8")
  {
    if (length := this.recv(buffer, wait))
      return StrGet(&buffer, length, encoding)
    return
  }
  __getAddrInfo(host, port)
  {
    a := ["127.0.0.1", "0.0.0.0", "255.255.255.255", "::1", "::", "FF00::"]
    conv := {localhost:a[1], addr_loopback:a[1], inaddr_loopback:a[1], addr_any:a[2], inaddr_any:a[2], addr_broadcast:a[3]
    , inaddr_broadcast:a[3], addr_none:a[3], inaddr_none:a[3], localhost6:a[4], addr_loopback6:a[4], inaddr_loopback6:a[4]
    , addr_any6:a[5], inaddr_any:a[5], addr_broadcast6:a[6], inaddr_broadcast6:a[6], addr_none6:a[6], inaddr_none6:a[6]}
    if (conv[host])
      host := conv[host]
    VarSetCapacity(hints, 16+(4*A_PtrSize), 0)
    NumPut(this.__socketType, hints, 8, "int")
    NumPut(this.__protocolId, hints, 12, "int")
    if ((r := DllCall("ws2_32\getaddrinfo", "astr", host, "astr", port, "ptr", &hints, "ptr*", next))!=0)
    {
      this.lastError := DllCall("ws2_32\WSAGetLastError")
      return 0
    }
    return next
  }
  __eventProcRegister(obj, msg)
  {
    a := SocketEventProc(0, 0, "register", 0)
    a[obj.socket] := obj
    return (DllCall("ws2_32\WSAAsyncSelect", "ptr", obj.socket, "ptr", A_ScriptHwnd, "uint", Socket.__eventMsg, "uint", msg)=0) ? 1 : 0
  }
  __eventProcUnregister(obj)
  {
    a := SocketEventProc(0, 0, "register", 0)
    a.remove(obj.socket)
    return (DllCall("ws2_32\WSAAsyncSelect", "ptr", obj.socket, "ptr", A_ScriptHwnd, "uint", 0, "uint", 0)=0) ? 1 : 0
  }
}
SocketEventProc(wParam, lParam, msg, hwnd)
{
  global Socket
  static a := []
  Critical
  if (msg="register")
    return a
  if (msg=Socket.__eventMsg)
  {
    if (!isobject(a[wParam]))
      return 0
    if ((lParam & 0xFFFF) = 1)
      return a[wParam].onRecv(a[wParam])
    else if ((lParam & 0xFFFF) = 8)
      return a[wParam].onAccept(a[wParam])
    else if ((lParam & 0xFFFF) = 32)
    {
      a[wParam].socket := -1
      return a[wParam].onDisconnect(a[wParam])
    }
    return 0
  }
  return 0
}

class SocketTCP extends Socket
{
  static __protocolId := 6 
  static __socketType := 1 
}

class SocketUDP extends Socket
{
  static __protocolId := 17 
  static __socketType := 2 

  enableBroadcast()
  {
    VarSetCapacity(optval, 4, 0)
    NumPut(1, optval, 0, "uint")
    if (DllCall("ws2_32\setsockopt", "ptr", this.socket, "int", 0xFFFF, "int", 0x0020, "ptr", &optval, "int", 4)=0)
      return 1
    return 0
  }
  disableBroadcast()
  {
    VarSetCapacity(optval, 4, 0)
    if (DllCall("ws2_32\setsockopt", "ptr", this.socket, "int", 0xFFFF, "int", 0x0020, "ptr", &optval, "int", 4)=0)
      return 1
    return 0
  }
} 
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;{;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    ESCAPE EXIT     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

#IfWinActive skeletonKey
esc::
msgbox, 8452,Exiting, Would you like to close skeletonKey?
ifmsgbox, yes
	{
		AHKsock_Close()
		gosub, QUITOUT
	}
ifmsgbox, no
	{
		DWNCNCL= 
		return
	}
return
;};;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;}########################################